!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="aedb3ff0-5da9-462c-9e29-b4d137b80d81",e._sentryDebugIdIdentifier="sentry-dbid-aedb3ff0-5da9-462c-9e29-b4d137b80d81")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1ebb4e1d"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542],{47703:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(17595)}])},78560:(e,n,t)=>{"use strict";t.d(n,{Q9:()=>g,_:()=>f,wp:()=>h});var r=t(94086),o=t(60049),i=t(27189),a=t(6636),l=(0,i._)(a.L).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell"]),s=t(97285),c=t(82436),u=t(29454),d=t(40172),p=t(16021),f=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},h=function(e,n){var t,r=JSON.parse(s.A.get(f(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,l.includes(t)))return r},g=function(e){var n=e.challenge,t=l.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",i=(0,u.g)(t),a=i.isDone,s=i.isLoading,f=i.setAsDone,h=(0,o.useRouter)();return s?null:(0,r.Y)(d.$n,{colorway:a?"primary":"positive",onClick:function(){f(),(0,c.u4)(c.AZ.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:a,iconLeft:(0,r.Y)(p.A,{}),size:"big",text:a?"Challenge completed!":"Complete Challenge"})}},1536:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o,_:()=>i});var r=t(82436),o=function(e){(0,r.u4)(r.AZ.COURSE_ACTION,e)},i=function(e){(0,r.u4)(r.AZ.LESSON_ACTION,e)}},42891:(e,n,t)=>{"use strict";t.d(n,{X:()=>u});var r=t(45009),o=t(30632),i=t(91113),a=t(24946);function l(){var e=(0,r._)(["\n  fragment ComponentsReplActionsFeaturedRepl on Repl {\n    id\n    isPrivate\n    isFeaturedRepl\n    publicForkCount\n    timeUpdated\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment ComponentsReplActions on Repl {\n    id\n    url\n    user {\n      id\n      username\n    }\n    ...DeleteReplDialogRepl\n    ...EditReplFormRepl\n    ...ComponentsReplActionsFeaturedRepl\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      deleteRepl {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}var c=(0,o.J1)(l()),u=(0,o.J1)(s(),i.kh,a.pV,c)},2269:(e,n,t)=>{"use strict";t.d(n,{JA:()=>R,o1:()=>D});var r=t(72275),o=t(20837),i=t(43952),a=t(66622),l=t(94086),s=t(25204),c=t.n(s),u=t(30758),d=t(54867),p=t(10168),f=t(32842),h=t(65599),g=t(8367),m=t(13089),v=t(53055),w=t(95344),y=t(40889),b=t(1670),S=(0,p.x)({title:[f.wp.flex.grow(1)]}),Y=function(e){var n=e.title,t=e.usage,r=e.resourceUsageType,o=e.icon;return(0,l.FD)(g.S,{row:!0,gap:8,align:"center",children:["string"==typeof o?(0,l.Y)(w.Ay,{size:16,iconUrl:o,alt:n}):o,(0,l.Y)(y.EY,{css:S.title,multiline:!1,children:n}),(0,l.Y)(y.EY,{color:"dimmer",multiline:!1,children:(0,b.h7)(t,{resourceUsageType:r,gibsDisplayAsBytes:!0})})]})},x=t(82935),_=t(36954),A=t(8351),C=(0,p.x)({self:[f.wp.height("100%")]}),k=g.D.a;function D(e){return e?"Repl"===e.__typename?e.title:"DeletedRepl"===e.__typename?"Deleted Repl":void(0,d.A)(e):"Repl"}var R=function(e){var n,t,s=e.color,p=e.resourceUsageType,f=e.section,g=f.grouped,w=f.percentage,y=f.usage,b=100*w,S=g?f.count:1,R=g||(null===(t=f.repl)||void 0===t?void 0:t.__typename)!=="Repl"?m.Ii:(0,v.q1)(f.repl),E=(0,a._)((0,u.useState)(!1),2),I=E[0],U=E[1];return(0,l.Y)(h.m_,{tooltip:g?(0,l.Y)(Y,{title:"+".concat(S," more"),usage:y,resourceUsageType:p}):(0,l.Y)(Y,{title:D(f.repl),usage:y,resourceUsageType:p,icon:(n=f.repl)?"Repl"===n.__typename?n.iconUrl:"DeletedRepl"===n.__typename?(0,l.Y)(A.A,{}):void(0,d.A)(n):(0,l.Y)(_.A,{})}),placement:"top",delay:"none",isOpen:I,maxWidth:400,children:function(e,n){return(0,l.Y)(c(),(0,i._)((0,o._)({legacyBehavior:!0},R),{passHref:!0,children:(0,l.Y)(k,{tabIndex:-1,onMouseOver:function(){return U(!0)},onMouseLeave:function(){return U(!1)},ref:n,css:C.self,style:(0,r._)({minWidth:"calc(".concat(100*x.i,"%)"),width:"calc(".concat(b,"% - 0.9px)"),backgroundColor:s},"&:lastOfType",{width:"".concat(b,"%")})})}))}})}},82935:(e,n,t)=>{"use strict";t.d(n,{i:()=>o,l:()=>r});var r=t(32842).iB.categorical,o=.0075},78017:(e,n,t)=>{"use strict";t.d(n,{k:()=>o});var r=t(82935),o=function(e,n,t,o){var i=[],a=0;e.forEach(function(e){var n=Math.max(e.percentage,r.i),t=n-e.percentage;0!==t&&(a+=t),i.push({percentage:n,usage:e.usage,adjusted:0!==t,grouped:!1,repl:e.repl})});var l=0===n?0:Math.max(n,r.i);if(l>0){var s=l-n;s>0&&(a+=s),i.push({percentage:l,adjusted:s>0,usage:t,grouped:!0,count:o})}if(a>0){var c=i.filter(function(e){return!e.adjusted}),u=c.length;if(u>0){var d=a/u,p=!0,f=!1,h=void 0;try{for(var g,m=c[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=g.value;v.percentage-=d}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}return i}},26649:(e,n,t)=>{"use strict";t.d(n,{s:()=>o});var r=t(54867),o=function(e){switch(e.__typename){case"UsageOverviewUnitPriceSku":return a(e);case"UsageOverviewMatrixPriceSku":return l(e);case"UsageOverviewStaticDeployments":return i(e);default:(0,r.A)(e)}},i=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(s)}},a=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(u)}},l=function(e){var n=e.replUsageOverview,t=e.usage,r=e.tierType;return{total:t,limit:0,lineItems:n.map(function(e){return c(e,r)})}},s=function(e){var n,t,r;return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl,lastDeployedAt:(null===(n=e.usageRepl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(t=e.usageRepl.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?null===(r=e.usageRepl)||void 0===r?void 0:r.hostingDeployment.currentBuild.timeCreated:void 0}},c=function(e,n){return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl,matrixTier:{label:e.configName,type:n}}},u=function(e){return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl}}},94e3:(e,n,t)=>{"use strict";t.d(n,{S:()=>p});var r=t(66622),o=t(55195),i=t(20837),a=t(45009),l=t(30632),s=t(75838);function c(){var e=(0,a._)(["\n  mutation GenerateAgentReplIcon($prompt: String!, $replId: String!) {\n    generateReplIcon(input: { prompt: $prompt, replId: $replId }) {\n      ... on GenerateReplIconResult {\n        repl {\n          id\n          iconUrl\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c());function p(){var e,n,t=(0,r._)((e={onError:function(e){o.Cp(e)}},n=(0,i._)({},u,e),s.n(d,n)),1)[0];return function(e){var n=e.prompt,r=e.attachments,o=e.replId;t({variables:{prompt:n+(r.length>0?"\n\nWith attachments: ".concat(r.map(function(e){return e.path}).join(", ")):""),replId:o}})}}},56458:(e,n,t)=>{"use strict";t.d(n,{L:()=>P});var r=t(66622),o=t(94086),i=t(30758),a=t(20837),l=t(45009),s=t(30632),c=t(72813);function u(){var e=(0,l._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,l._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,s.J1)(u()),h=(0,s.J1)(d(),f),g=t(90935),m=t(80915),v=t(20521),w=t(24955),y=t(10168),b=t(2298),S=t(32842),Y=t(81243),x=t(51973),_=t(76985),A=t(2301),C=t(31955),k=t(40889),D=t(8367),R=t(29048),E=t(90829),I=t(89960),U=t(46086),F=(0,y.x)({wrapper:[S.wp.noDragRegion],button:[b.b.nofill,S.wp.p(4),S.wp.viewStyle,S.wp.reset.button,S.wp.rowWithGap(2),S.wp.align.center,S.wp.color.foregroundDefault,S.wp.cursor.pointer,S.wp.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:w.LU.foregroundDefault}}],surface:[S.wp.borderRadius(8),S.wp.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[S.wp.ml(8)],menuItem:[],accountModal:[S.wp.overflow("auto"),S.wp.height("100%")],appVersionWrapper:[S.wp.py(4),S.wp.px(8),S.wp.center,S.wp.border({color:w.LU.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,l=(0,r._)((0,i.useState)(!1),2),s=l[0],u=l[1],d=(0,r._)((0,i.useState)(!1),2),f=d[0],y=d[1],b=(n=(0,a._)({},p,void 0),c.I(h,n)).data,S=null==b?void 0:b.currentUser;if(!S)return null;var P=[{label:"Home",icon:(0,o.Y)(I.A,{}),onAction:function(){v.M.openExternalUrl("/"),u(!1)}},{label:"Account",icon:(0,o.Y)(U.A,{}),onAction:function(){y(function(e){return!e}),u(!1)}},{label:"Log out",icon:(0,o.Y)(E.A,{}),onAction:function(){v.M.logout()}}];return(0,o.FD)(D.S,{css:F.wrapper,children:[(0,o.FD)(A.Wv,{isOpen:s,onOpenChange:u,placement:"bottom start",label:"Account options",noArrow:!0,children:[(0,o.FD)("button",{onClick:function(){u(function(e){return!e})},css:F.button,"data-cy":"desktop-app-avatar-menu",children:[(0,o.Y)(Y.e,{size:24,src:(null==S?void 0:S.image)||null,username:(null==S?void 0:S.username)||"",fullName:(null==S?void 0:S.fullName)||"",showCoreBadge:S.userSubscriptionType===g.Oh.HackerPro}),t?(0,o.FD)(D.S,{css:F.username,className:"username",children:["@",null==S?void 0:S.username]}):null,(0,o.Y)(R.A,{color:w.LU.foregroundDimmest,size:12})]}),(0,o.FD)(C.ui,{elevated:!0,css:F.surface,background:"higher",children:[(0,o.Y)(x.W1,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map(function(e,n){return(0,o.Y)(x.q7,{"aria-label":e.label,children:(0,o.FD)(D.S,{row:!0,gap:8,align:"center",children:[e.icon,(0,o.Y)(k.EY,{children:e.label})]})},n)})}),(0,o.Y)(D.S,{css:F.appVersionWrapper,children:(0,o.Y)(k.EY,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(v.M.getVersion())})})]})]}),(0,o.Y)(_.a,{isOpen:f,onRequestClose:function(){return y(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:F.accountModal,children:(0,o.Y)(m.A,{})})]})}},26308:(e,n,t)=>{"use strict";t.d(n,{A:()=>eh});var r=t(20837),o=t(43952),i=t(66622),a=t(27189),l=t(94086),s=t(60049),c=t(30758),u=t(91783),d=t(87042),p=t(9343),f=t(45009),h=t(30632),g=t(72813),m=t(75838);function v(){var e=(0,f._)(["\n  fragment DesktopReplsListRepl on Repl {\n    id\n    title\n    iconUrl\n    url\n    description\n    isPrivate\n    timeUpdated\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return v=function(){return e},e}function w(){var e=(0,f._)(["\n  query DesktopReplsSearch(\n    $search: String!\n    $after: String\n    $excludeMultiplayer: Boolean\n    $excludeNotDeployed: Boolean\n    $excludePrivate: Boolean\n    $excludePublic: Boolean\n    $excludeOwned: Boolean\n  ) {\n    currentUser {\n      id\n      paginatedReplSearch(\n        search: $search\n        after: $after\n        excludeMultiplayer: $excludeMultiplayer\n        excludeNotDeployed: $excludeNotDeployed\n        excludePrivate: $excludePrivate\n        excludePublic: $excludePublic\n        excludeOwned: $excludeOwned\n      ) {\n        items {\n          id\n          ...DesktopReplsListRepl\n        }\n        pageInfo {\n          hasNextPage\n          nextCursor\n        }\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,f._)(["\n  mutation DesktopReplsListDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return y=function(){return e},e}var b={},S=(0,h.J1)(v()),Y=(0,h.J1)(w(),S),x=(0,h.J1)(y()),_=t(9695),A=t(62906),C=t(74328),k=t(29581),D=t(39651),R=t(50704),E=t(26928),I=t(43035),U=t(44147),F=t(95344),P=t(24955),T=t(10168),O=t(2298),L=t(32842),N=t(95235),M=t(51973),G=t(76985),B=t(69929),H=t(40889),W=t(8367),z=t(1694),$=t(78563),j=t(54858),q=t(29032),K=t(63516),Z=t(81099),V=t(74894),J=t(14753),Q=t(36954),X=t(73128),ee=t(41725),en=t(8351),et=t(91297),er=t(43730),eo=(0,T.x)({rowUnfocused:{backgroundColor:"transparent"},rowFocused:{backgroundColor:P.LU.interactiveBackground}});function ei(e){var n=e.item,t=e.state,i=(0,c.useRef)(null),a=(0,d.n)({node:n},t,i),s=a.rowProps,u=a.gridCellProps,p=a.isSelected;return(0,c.useEffect)(function(){if(p){var e;null===(e=i.current)||void 0===e||e.scrollIntoView({block:"nearest"})}},[p]),(0,l.Y)(W.D.li,(0,o._)((0,r._)({},s),{ref:i,css:p?eo.rowFocused:eo.rowUnfocused,children:(0,l.Y)(W.S,(0,o._)((0,r._)({},u),{children:n.rendered}))}))}function ea(e){var n=(0,u.p)(e),t=(0,c.useRef)(null),i=(0,p.I)(e,n,t).gridProps;return(0,l.Y)(W.D.ul,(0,o._)((0,r._)({},i),{ref:(0,I.P)(t,e.innerRef,{breadcrumb:"client/desktopApp/components/DesktopReplsList/index.tsx:120"}),children:(0,a._)(n.collection).map(function(e){return(0,l.Y)(ei,{item:e,state:n},e.key)})}))}var el=(0,T.x)({container:[L.wp.flex.shrink(1),L.wp.colWithGap(8),L.wp.height("100%")],searchBarWrapper:[L.wp.flex.shrink(0),L.wp.px(8)],replsListWrapper:[L.wp.flex.shrink(1),L.wp.overflowY("scroll")],headerRow:[L.wp.px(8)],filterContainer:[L.wp.center],replListItemWrapper:[O.b.listItem,L.wp.px(8),L.wp.py(2),L.wp.flex.row,L.wp.align.center,L.wp.justify.spaceBetween],replListItemInner:[L.wp.pl(4),L.wp.align.center,L.wp.flex.shrink(1)],replListItemTexts:[L.wp.flex.shrink(1)],replListItemTitle:[L.wp.mb(0),L.wp.truncate],dropdownItem:[L.wp.rowWithGap(8),L.wp.align.center],dropdownDestructiveItem:[L.wp.rowWithGap(8),L.wp.color.accentNegativeStronger,L.wp.align.center],loadingStateWrapper:[L.wp.pt(8),L.wp.pb(12),L.wp.mx(8),L.wp.textAlign.center]}),es=function(e){return e.Fork="Fork",e.Delete="Delete",e}(es||{}),ec=function(e){return e.DeleteRepl="DeleteRepl",e}(ec||{}),eu=[{value:"Fork",label:"Remix",icon:(0,l.Y)(ee.A,{})},{value:"Delete",label:"Delete",icon:(0,l.Y)(en.A,{}),isDestructive:!0}];function ed(e){var n,t,o=e.repl,a=e.onClick,u=(0,$.Z)().fork,d=(0,i._)((0,c.useState)(null),2),p=d[0],f=d[1],h=(0,D.A)(),g=h.showConfirm,v=h.showError,w="/replEnvironmentDesktop"===(0,s.useRouter)().pathname,y=(0,i._)((n={variables:{id:o.id},onCompleted:function(){g("App scheduled for deletion")},onError:function(e){v((0,R.A)(e.message))},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())}},t=(0,r._)({},b,n),m.n(x,t)),1)[0];return(0,l.FD)(l.FK,{children:[(0,l.FD)(W.S,{css:el.replListItemWrapper,onClick:function(e){return a(o.url,o.id,(0,E.T$)(e))},children:[(0,l.FD)(W.S,{css:el.replListItemInner,row:!0,gap:8,children:[(0,l.Y)(F.Ay,{size:24,iconUrl:o.iconUrl,alt:o.title}),(0,l.FD)(W.S,{css:el.replListItemTexts,children:[(0,l.Y)(H.EY,{variant:"text",css:el.replListItemTitle,multiline:!1,children:o.title}),(0,l.FD)(H.EY,{variant:"small",color:"dimmer",multiline:!1,children:[o.owner?"".concat(o.owner.username," â€¢ "):"","edited"," ",(0,U.K)(o.timeUpdated)]})]})]}),w?null:(0,l.Y)(M.in,{icon:(0,l.Y)(X.A,{size:16}),"aria-label":"App Actions",placement:"bottom-end",cssProps:[{background:"transparent"}],onAction:function(e){switch(e){case"Fork":u();return;case"Delete":f("DeleteRepl");return}},children:eu.map(function(e){return(0,l.Y)(M.q7,{textValue:e.label,children:(0,l.FD)(W.S,{css:e.isDestructive?el.dropdownDestructiveItem:el.dropdownItem,children:[e.icon,(0,l.Y)(H.EY,{multiline:!1,children:e.label})]})},e.value)})})]}),(0,l.Y)(G.a,{isOpen:"DeleteRepl"===p,onRequestClose:function(){return f(null)},centered:!0,children:(0,l.Y)(z.A,{delete:y,entityType:"App",hideModal:function(){return f(null)}})})]})}var ep=function(e){return e.All="All",e.ExcludeMultiplayer="ExcludeMultiplayer",e.ExcludeNotDeployed="ExcludeNotDeployed",e.ExcludePrivate="ExcludePrivate",e.ExcludePublic="ExcludePublic",e.ExcludeOwned="ExcludeOwned",e}(ep||{}),ef=[{value:"All",title:"All",icon:(0,l.Y)(Z.A,{})},{value:"ExcludeMultiplayer",title:"My Apps",icon:(0,l.Y)(et.A,{})},{value:"ExcludeOwned",title:"Shared",icon:(0,l.Y)(er.A,{})},{value:"ExcludePrivate",title:"Public",icon:(0,l.Y)(V.A,{})},{value:"ExcludePublic",title:"Private",icon:(0,l.Y)(Q.A,{})},{value:"ExcludeNotDeployed",title:"Deployed",icon:(0,l.Y)(K.A,{})}];function eh(e){var n,t,u,d=e.onClick,p=(0,i._)((0,c.useState)(""),2),f=p[0],h=p[1],m=(0,s.useRouter)(),v="/replEnvironmentDesktop"===m.pathname,w=(0,A.A)(f,250),y=(0,c.useRef)(null),S=(0,c.useRef)(null),x=(0,c.useRef)(null),D=(0,c.useRef)(null),R=(0,i._)((0,k.A)("desktop-app-repls-filter","All"),2),E=R[0],I=R[1],U=(0,i._)((0,c.useState)(null),2),F=U[0],P=U[1],T=F?new Set([F]):new Set,O=(n={variables:{search:function(e){if(!e.startsWith("http"))return null;try{var n=new URL(e),t=window.location.origin;if(n.origin!==t)return null;return function(e){if(_.sX.test(e.pathname)){var n=e.pathname.split("/");return 3!==n.length?null:n[2]}if(_.xy.test(e.pathname)){var t=e.pathname.split("/");return 5!==t.length?null:t[t.length-1]}if(_.ko.test(e.pathname)){var r=e.pathname.split("/");return 6!==r.length?null:r[r.length-1]}return null}(n)}catch(e){return null}}(w)||w,excludeOwned:"ExcludeOwned"===E,excludePublic:"ExcludePublic"===E,excludePrivate:"ExcludePrivate"===E,excludeNotDeployed:"ExcludeNotDeployed"===E,excludeMultiplayer:"ExcludeMultiplayer"===E},ssr:!1,notifyOnNetworkStatusChange:!0},t=(0,r._)({},b,n),g.I(Y,t)),L=O.data,G=O.loading,z=O.refetch,K=O.fetchMore,Z=null==L?void 0:null===(u=L.currentUser)||void 0===u?void 0:u.paginatedReplSearch,V=null==Z?void 0:Z.pageInfo,Q=null==V?void 0:V.nextCursor,X=null==V?void 0:V.hasNextPage,ee=(null==Z?void 0:Z.items)||[];if(v){var en=m.query.replUrl;if("string"!=typeof en)throw Error("Expected Repl URL");ee=ee.filter(function(e){return e.url!==en})}var et=(0,c.useCallback)(function(){Q&&!G&&K({variables:{search:w,after:Q},updateQuery:function(e,n){var t,i,l=n.fetchMoreResult;return(null===(t=e.currentUser)||void 0===t?void 0:t.paginatedReplSearch)&&(null===(i=l.currentUser)||void 0===i?void 0:i.paginatedReplSearch)?(0,o._)((0,r._)({},l),{currentUser:(0,o._)((0,r._)({},l.currentUser),{paginatedReplSearch:(0,o._)((0,r._)({},l.currentUser.paginatedReplSearch),{items:(0,a._)(e.currentUser.paginatedReplSearch.items).concat((0,a._)(l.currentUser.paginatedReplSearch.items)),pageInfo:(0,r._)({},l.currentUser.paginatedReplSearch.pageInfo)})})}):e}})},[K,G,Q,w]),er=(0,C.A)({onLoadMore:et,rootMargin:"0px 0px 100px 0px"}).targetRef,eo=function(e){var n=ee.find(function(n){return n.id===e});if(!n)throw Error("Expected matching Repl");d(n.url,n.id)};(0,c.useEffect)(function(){var e;null===(e=S.current)||void 0===e||e.focus()},[S]);var ei=0===ee.length&&G,es=0===ee.length&&!G;return(0,l.FD)(W.S,{css:el.container,children:[(0,l.Y)(W.D.div,{css:el.searchBarWrapper,ref:y,children:(0,l.Y)(B.I,{placeholder:"Search Apps",value:f,inputRef:S,onChange:function(e){h(e.target.value)},onClear:function(){h("")},onKeyDown:function(e){if("Enter"===e.key&&F&&eo(F),"ArrowDown"===e.key||"ArrowUp"===e.key){var n;e.preventDefault(),null===(n=D.current)||void 0===n||n.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))}}})}),(0,l.FD)(W.S,{css:el.headerRow,row:!0,align:"center",justify:"space-between",children:[(0,l.Y)(H.Y9,{level:2,variant:v?"subheadDefault":"subheadBig",children:"Recent"}),(0,l.Y)(W.S,{css:el.filterContainer,row:!0,gap:8,children:(0,l.Y)(j.l,{"aria-label":"repl-list-filter-select",id:"repl-list-filter-select",items:ef,selectedItem:ef.find(function(e){return e.value===E})||ef[0],onChange:function(e){I(e.value)}})})]}),(0,l.FD)(W.D.div,{style:v?void 0:{paddingLeft:8,paddingRight:8},css:el.replsListWrapper,ref:x,children:[(0,l.Y)(W.S,{children:(0,l.Y)(ea,{"aria-label":"Apps",selectionMode:"single",selectionBehavior:"replace",disallowEmptySelection:!0,items:ee,innerRef:D,selectedKeys:T,onSelectionChange:function(e){if("all"!==e){if(0===e.size)throw Error("Expected to have a selected key");P(Array.from(e)[0])}},onAction:function(e){eo(e)},children:function(e){var n;return(0,l.Y)(M.q7,{textValue:e.title,children:(0,l.Y)($.B,{forkParams:{trackingData:{forkSource:"desktopAppReplsList"}},onFork:function(){var e;null===(e=x.current)||void 0===e||e.scrollTo({top:0}),z()},repl:e,teamContext:(null===(n=e.owner)||void 0===n?void 0:n.__typename)==="Team"?e.owner.id:void 0,children:(0,l.Y)(ed,{repl:e,onClick:function(e,n,t){d(e,n,t)}})})},e.id)}})}),(0,l.FD)(W.S,{css:el.loadingStateWrapper,align:"center",children:[ei?(0,l.Y)(J.A,{}):null,es?(0,l.Y)(H.EY,{variant:"text",color:"dimmest",children:"We couldn't find any Apps matching your search."}):null,X?(0,l.Y)(N.K0,{tooltipBehavior:"hidden",alt:"Load more Apps",onClick:et,ref:er,disabled:G,children:G?(0,l.Y)(J.A,{}):(0,l.Y)(q.A,{})}):null]})]})]})}},67825:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(66622),o=t(94086),i=t(30758),a=t(20521),l=t(66100),s=t(54341),c=t(54191),u=t(52757),d=t(24955),p=t(32842),f=t(8367),h=(0,u.AH)(p.wp.dragRegion);function g(){var e,n,t,u,p,g,m,v,w=(0,c.vm)(),y=(0,s.A)(),b=(e=(0,s.A)(),t=(n=(0,r._)((0,i.useState)(!1),2))[0],u=n[1],(0,i.useEffect)(function(){if(e)return u(document.hasFocus()),a.M.onFocusChanged(u)},[e]),t),S=(p=(0,s.A)(),m=(g=(0,r._)((0,i.useState)(!1),2))[0],v=g[1],(0,i.useEffect)(function(){if(p)return a.M.onFullScreenChanged(v)},[p]),m);return w&&y&&!S?(0,o.Y)(f.S,{css:h,children:(0,o.Y)("svg",{width:l.Cp,height:l.GB-16,children:b?null:(0,o.FD)(o.FK,{children:[(0,o.Y)("circle",{cx:15,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,o.Y)("circle",{cx:35,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,o.Y)("circle",{cx:55,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1})]})})}):null}},66100:(e,n,t)=>{"use strict";t.d(n,{Cp:()=>r,GB:()=>i,xn:()=>o});var r=70,o=140,i=48},32625:(e,n,t)=>{"use strict";t.d(n,{A:()=>o,l:()=>r});var r="https://linkedin.com/sharing/share-offsite";function o(e){var n=e.url,t=e.text,o=new URLSearchParams;t&&o.append("text",t),n&&o.append("url",n);var i=o.toString();return i.length>0?"".concat(r,"?").concat(i):r}},55917:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(94086),o=t(90935),i=t(54867),a=t(10168),l=t(32842),s=t(8367),c=t(43730),u=[l.wp.backgroundColor.outlineDimmest,l.wp.color.foregroundDefault,l.wp.borderRadius(4),l.wp.align.center,l.wp.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,a.x)({grey:[u,l.wp.backgroundColor.greyDimmest],red:[u,l.wp.backgroundColor.redDimmest],orange:[u,l.wp.backgroundColor.orangeDimmest],yellow:[u,l.wp.backgroundColor.yellowDimmest],lime:[u,l.wp.backgroundColor.limeDimmest],blue:[u,l.wp.backgroundColor.blueDimmest],purple:[u,l.wp.backgroundColor.purpleDimmest],pink:[u,l.wp.backgroundColor.pinkDimmest]});let p=function(e){var n,t,a=e.group,l=e.variant,u=void 0===l?"normal":l;switch(a.color){case o.RV.Grey:n=d.grey;break;case o.RV.Red:n=d.red;break;case o.RV.Orange:n=d.orange;break;case o.RV.Yellow:n=d.yellow;break;case o.RV.Lime:n=d.lime;break;case o.RV.Blue:n=d.blue;break;case o.RV.Purple:n=d.purple;break;case o.RV.Pink:n=d.pink;break;default:n=d.grey}switch(u){case"normal":t=32;break;case"compact":t=24;break;default:(0,i.A)(u)}return(0,r.Y)(s.S,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.Y)(c.A,{})})}},83502:(e,n,t)=>{"use strict";t.d(n,{Fe:()=>s});var r=t(45009),o=t(30632),i=t(12603);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var s=(0,o.J1)(a());l(),i.rh,i.wW},25407:(e,n,t)=>{"use strict";t.d(n,{LT:()=>L,TR:()=>B,c6:()=>W,hh:()=>k,k6:()=>T,qO:()=>z,vJ:()=>M});var r=t(20837),o=t(45009),i=t(30632),a=t(75838),l=t(72813),s=t(43751),c=t(81074),u=t(83502),d=t(81694);function p(){var e=(0,o._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,o._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,o._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,o._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,o._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,o._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,o._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return w=function(){return e},e}function y(){var e=(0,o._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,o._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,o._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,o._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}function x(){var e=(0,o._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,o._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}var A={},C=(0,i.J1)(p()),k=(0,i.J1)(f(),u.Fe,C),D=(0,i.J1)(h()),R=(0,i.J1)(g(),D),E=(0,i.J1)(m(),c.r),I=(0,i.J1)(v(),E),U=(0,i.J1)(w()),F=(0,i.J1)(y(),U),P=(0,i.J1)(b(),k);function T(e){var n=(0,r._)({},A,e);return a.n(P,n)}var O=(0,i.J1)(S(),u.Fe);function L(e){var n=(0,r._)({},A,e);return l.I(O,n)}var N=(0,i.J1)(Y(),R);function M(e){var n=(0,r._)({},A,e);return l.I(N,n)}var G=(0,i.J1)(x(),d.PQ,I);function B(e){var n=(0,r._)({},A,e);return l.I(G,n)}var H=(0,i.J1)(_(),F);function W(e){var n=(0,r._)({},A,e);return l.I(H,n)}function z(e){var n=(0,r._)({},A,e);return s._(H,n)}},45515:(e,n,t)=>{"use strict";t.d(n,{A:()=>I});var r=t(20837),o=t(43952),i=t(66622),a=t(27189),l=t(94086),s=t(30758),c=t(40114),u=t(45009),d=t(30632),p=t(72813),f=t(55916);function h(){var e=(0,u._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},m=(0,d.J1)(h(),f.Um),v=t(62906),w=t(24955),y=t(10168),b=t(32842),S=t(95235),Y=t(28354),x=t(93532),_=t(40889),A=t(8367),C=t(70953),k=t(14753),D=t(99413),R=[b.wp.p(8),b.wp.cursor.pointer],E=(0,y.x)({container:[b.wp.position.relative],rightIcon:[b.wp.position.absolute,b.wp.right(8),b.wp.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[b.wp.width("100%"),b.wp.position.absolute,b.wp.zIndex(1),b.wp.top("100%"),b.wp.left(0),b.wp.backgroundColor.backgroundDefault,b.wp.maxHeight(300),b.wp.overflow("auto"),b.wp.borderRadius(4),b.wp.border({color:w.LU.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(R),activeResult:(0,a._)(R).concat([b.wp.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(w.LU.backgroundHighest," !important")}}]});let I=function(e){var n,t,a,u=e.inputId,d=e.orgId,f=e.types,h=e.selectedGroups,w=e.value,y=e.setValue,b=e.onSelect,R=e.onClear,I=e.placeholder,U=void 0===I?"Find an existing group...":I,F=(0,i._)((0,s.useState)([]),2),P=F[0],T=F[1],O=(0,v.A)(w.trim(),250),L=(n={variables:{orgId:d,input:{count:10,types:f,filters:{name:{search:O}}}},ssr:!1,skip:!O,fetchPolicy:"cache-and-network",onCompleted:function(e){var n,t,r,o,i;(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:null===(n=t.org)||void 0===n?void 0:n.__typename)==="Org"&&(null==e?void 0:null===(i=e.currentUser)||void 0===i?void 0:null===(o=i.org)||void 0===o?void 0:null===(r=o.groups)||void 0===r?void 0:r.__typename)==="OrgGroupConnection"&&T(e.currentUser.org.groups.items.filter(function(e){return!h.some(function(n){return e.id===n.id})}))}},t=(0,r._)({},g,n),p.I(m,t)),N=L.data,M=L.loading,G=L.error,B=N&&N.currentUser&&"Org"!==N.currentUser.org.__typename?N.currentUser.org.message:void 0,H=N&&N.currentUser&&"Org"===N.currentUser.org.__typename&&"OrgGroupConnection"!==N.currentUser.org.groups.__typename?N.currentUser.org.groups.message:void 0,W=null==G?void 0:G.message,z=null!==(a=null!=B?B:H)&&void 0!==a?a:W;return(0,s.useEffect)(function(){0===w.length&&0!==P.length&&T([])},[w.length,P.length]),(0,l.Y)(A.S,{css:E.container,children:(0,l.Y)(c.Ay,{onSelect:function(e){e&&b(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,i=e.getMenuProps,a=e.isOpen,s=e.highlightedIndex,c=e.getRootProps;return(0,l.FD)(A.S,(0,o._)((0,r._)({},c({refKey:"innerRef"})),{children:[(0,l.Y)(Y.pd,(0,r._)({},n({id:u,ref:null,value:w,onChange:function(e){y(e.currentTarget.value)},placeholder:U,autoComplete:"off"}))),M||0!==w.length?null:(0,l.Y)(D.A,{css:E.rightIcon}),M?(0,l.Y)(A.S,{css:E.rightIcon,children:(0,l.Y)(k.A,{})}):null,!M&&w.length>0?(0,l.Y)(A.S,{css:E.rightIcon,children:(0,l.Y)(S.K0,{css:E.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){y(""),R&&R()},children:(0,l.Y)(C.A,{})})}):null,(0,l.FD)(A.S,(0,o._)((0,r._)({tag:"ul"},i({refKey:"innerRef"})),{children:[z?(0,l.Y)(A.S,{tag:"ul",css:E.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:E.result,children:(0,l.Y)(x.N,{colorway:"negative",text:z})})}):null,a&&P&&P.length?(0,l.Y)(A.S,{css:E.dropdownMenu,children:P.map(function(e,n){return(0,l.Y)(A.S,(0,o._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===s?E.activeResult:E.result,children:(0,l.Y)(_.EY,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,a&&!M&&O.length>0&&0===P.length?(0,l.Y)(A.S,{tag:"ul",css:E.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:E.result,children:(0,l.FD)(_.EY,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',w,'"']})})}):null]}))]}))}})})}},55916:(e,n,t)=>{"use strict";t.d(n,{Um:()=>f,y3:()=>g,zT:()=>p});var r=t(20837),o=t(45009),i=t(30632),a=t(72813),l=t(12603);function s(){var e=(0,o._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,o._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,o._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,i.J1)(s(),l.wW),f=(0,i.J1)(c()),h=(0,i.J1)(u(),f);function g(e){var n=(0,r._)({},d,e);return a.I(h,n)}},12603:(e,n,t)=>{"use strict";t.d(n,{rh:()=>s,wW:()=>c});var r=t(45009),o=t(30632);function i(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return i=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var s=(0,o.J1)(i()),c=(0,o.J1)(a());l()},95771:(e,n,t)=>{"use strict";t.d(n,{R:()=>u});var r=t(94086),o=t(54867),i=t(14178),a=t(29454),l=t(93532),s=t(40889),c=t(79653);function u(e){var n=e.type,t=(0,a.Z)("org-roles-and-permissions-info-banner"),u=t.isLoading,d=t.isDone,p=t.setAsDone;return u||d?null:(0,r.Y)(l.N,{text:(0,r.FD)(s.EY,{children:["View detailed role permissions"," ",(0,r.Y)("a",{href:function(e){switch(e){case"org":return i.ik.ORG_PERMISSIONS;case"repl":return i.ik.REPL_PERMISSIONS;case"group":return i.ik.GROUP_PERMISSIONS;default:(0,o.A)(e)}}(n),target:"_blank",children:"here"}),"."]}),icon:(0,r.Y)(c.A,{}),colorway:"primary",closable:!0,closeAction:p})}},81694:(e,n,t)=>{"use strict";t.d(n,{An:()=>A,PQ:()=>D,ce:()=>k,mC:()=>E});var r=t(20837),o=t(45009),i=t(30632),a=t(72813),l=t(42891),s=t(81074),c=t(12603),u=t(94060);function d(){var e=(0,o._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,o._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,o._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,o._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,o._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}function m(){var e=(0,o._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    org {\n      id\n    }\n    project {\n      id\n      title\n    }\n    user {\n      id\n      ...OrgReplCreator\n    }\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n    ...ComponentsReplActions\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,o._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,o._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,o._)(["\n  query OrgRepls($orgId: String!, $replsInput: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}var b={},S=(0,i.J1)(d()),Y=(0,i.J1)(p()),x=(0,i.J1)(f()),_=(0,i.J1)(h()),A=(0,i.J1)(g()),C=(0,i.J1)(m(),u._L,s.r,S,Y,x,_,A,l.X),k=(0,i.J1)(v(),C),D=(0,i.J1)(w(),c.wW),R=(0,i.J1)(y(),D,k);function E(e){var n=(0,r._)({},b,e);return a.I(R,n)}},94060:(e,n,t)=>{"use strict";t.d(n,{P4:()=>h,Qs:()=>f,_L:()=>d});var r=t(20837),o=t(45009),i=t(30632),a=t(72813);function l(){var e=(0,o._)(["\n  fragment OrgReplCreator on User {\n    id\n    displayName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,o._)(["\n  query UserSelectorSearch($orgId: String!, $searchInput: OrgMembersInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          members(input: $searchInput) {\n            __typename\n            ... on Error {\n              message\n            }\n            ... on OrgMemberConnection {\n              __typename\n              items {\n                member {\n                  id\n                  user {\n                    id\n                    ...OrgReplCreator\n                  }\n                }\n                type\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,o._)(["\n  query UserSelectorGetUser($id: Int!) {\n    user(id: $id) {\n      id\n      ...OrgReplCreator\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,i.J1)(l()),p=(0,i.J1)(s(),d);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}var h=(0,i.J1)(c(),d)},47758:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(66622),o=t(94086),i=t(30758),a=t(90935),l=t(25407),s=t(24955),c=t(10168),u=t(32842),d=t(37535),p=t(65599),f=t(8367),h=t(16021),g=t(70953),m=t(63516),v=t(10001),w=t(83290),y=t(74894),b=t(14753),S=t(68753),Y=(0,c.x)({scopeSelector:[u.wp.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[u.wp.position.absolute,u.wp.top("50%"),u.wp.left(-4),{transform:"translate(-100%, -50%)"}]}),x=function(e){switch(e){case a.oO.Owner:return{icon:(0,o.Y)(y.A,{}),label:"Owner",description:"Full permissions including App deletion"};case a.oO.Deployer:return{icon:(0,o.Y)(m.A,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case a.oO.Editor:return{icon:(0,o.Y)(v.A,{}),label:"Editor",description:"Can edit code and view resources"};case a.oO.Viewer:return{icon:(0,o.Y)(w.A,{}),label:"Viewer",description:"Can only view code and fork Apps"};case a.oO.None:return{icon:(0,o.Y)(g.A,{}),label:"None",description:"Cannot search, view, or edit Apps"}}},_=function(e){switch(e){case a.oO.Owner:return a.Fv.Owner;case a.oO.Deployer:return a.Fv.Deployer;case a.oO.Editor:return a.Fv.Editor;case a.oO.Viewer:return a.Fv.Viewer}};let A=function(e){var n,t=e.group,c=e.repl,u=e.options,g=e.onScopeChange,m=e.iconSize,v=void 0===m?24:m,w=(0,r._)((0,i.useState)(!1),2),y=w[0],A=w[1],C=(0,r._)((0,i.useState)(u.find(function(e){return e.status===a.jL.Current})),2),k=C[0],D=C[1],R="".concat(c.id,"-role-").concat((0,i.useId)()),E=k?x(k.role).label:void 0,I=c.authorizations.editPermissions.isAuthorized,U=(0,r._)((0,l.k6)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(g(),A(!0),setTimeout(function(){return A(!1)},2e3))}}),2),F=U[0],P=U[1],T=P.data,O=P.loading,L=P.error,N=(null==T?void 0:T.updateOrgGroupScopes)&&"OrgGroup"!==T.updateOrgGroupScopes.__typename?T.updateOrgGroupScopes.message:null==L?void 0:L.message;return n=N?(0,o.Y)(p.m_,{tooltip:N,children:(0,o.Y)(S.A,{size:v,color:s.LU.accentNegativeDefault})}):O?(0,o.Y)(b.A,{size:v}):y?(0,o.Y)(h.A,{size:v,color:s.LU.accentPositiveDefault}):null,(0,o.FD)(f.S,{css:Y.scopeSelector,row:!0,gap:8,justify:"end",children:[n?(0,o.Y)(f.S,{css:Y.icon,children:n}):null,(0,o.Y)(p.m_,{tooltip:"You cannot edit this group's permissions.",isDisabled:I,children:(0,o.Y)(d.in,{id:R,label:null!=E?E:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(c.title),onAction:function(e){var n=u.find(function(n){return n.role===e});if(n&&n.role!==(null==k?void 0:k.role)){D(n);var r=n.role===a.oO.None?[]:[{resourceId:c.id,role:_(n.role)}],o=n.role===a.oO.None?[{resourceType:a.mW.Repl,resourceId:c.id}]:[];F({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:o}}})}},items:u,disallowEmptySelection:!0,isDisabled:!I,children:function(e){var n=x(e.role),r=e.status===a.jL.Unavailable;return(0,o.Y)(d.Dr,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:Y.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},91113:(e,n,t)=>{"use strict";t.d(n,{P_:()=>p,kh:()=>u});var r=t(20837),o=t(45009),i=t(30632),a=t(75838);function l(){var e=(0,o._)(["\n  fragment DeleteReplDialogRepl on Repl {\n    id\n    title\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,o._)(["\n  mutation DeleteReplDialogReplDelete($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,i.J1)(l()),d=(0,i.J1)(s());function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},24946:(e,n,t)=>{"use strict";t.d(n,{Sc:()=>p,pV:()=>u});var r=t(20837),o=t(45009),i=t(30632),a=t(75838);function l(){var e=(0,o._)(["\n  fragment EditReplFormRepl on Repl {\n    id\n    title\n    description\n    imageUrl\n    iconUrl\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,o._)(["\n  mutation EditReplFormEdit($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditReplFormRepl\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,i.J1)(l()),d=(0,i.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},12618:(e,n,t)=>{"use strict";t.d(n,{L:()=>x});var r=t(20837),o=t(43952),i=t(16530),a=t(66622),l=t(94086),s=t(30758),c=t(20243),u=t(41656),d=t(10168),p=t(32842),f=t(57542),h=t(95235),g=t(28354),m=t(31955),v=t(17605),w=t(70953),y=t(14753),b=t(99413),S=(0,d.x)({field:[p.wp.display.grid,{gridTemplateAreas:'\n      "label label"\n      "input icon-right"\n      "description description"\n      ',gridTemplateColumns:"1fr 32px"}]}),Y=(0,s.forwardRef)(function(e,n){var t=e.dataCy,a=e.children,s=(0,i._)(e,["dataCy","children"]),u=(0,r._)({"data-cy":t,ref:n},s);return(0,l.Y)(c.L,(0,o._)((0,r._)({},u),{children:a}))});function x(e){var n=e.label,t=e.description,c=e.errorMessage,d=e.isLoading,p=(0,i._)(e,["label","description","errorMessage","isLoading"]),x=(0,a._)((0,s.useState)(!1),2),_=x[0],A=x[1],C=(0,s.useRef)(null);return(0,s.useEffect)(function(){var e=C.current;if(e){var n=function(){A(!0)};e.addEventListener("mouseenter",n);var t=function(){A(!1)};return e.addEventListener("mouseleave",t),function(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",t)}}},[C]),(0,l.Y)(Y,(0,o._)((0,r._)({},p),{css:S.field,children:function(e){var r=e.isEmpty;return(0,l.FD)(l.FK,{children:[(0,l.Y)(u.J,{style:{gridArea:"label"},children:n}),(0,l.Y)(g.pd,{"aria-busy":d,style:{gridArea:"input /input / icon-right / icon-right",paddingRight:32}}),(0,l.Y)(m.ui,{elevated:!0,style:{gridArea:"icon-right",alignSelf:"center",justifySelf:"center"},innerRef:C,children:r?(0,l.Y)(l.FK,{children:d?(0,l.Y)(y.A,{}):(0,l.Y)(b.A,{})}):(0,l.Y)(h.K0,{alt:"Clear field",children:_?(0,l.Y)(w.A,{}):d?(0,l.Y)(y.A,{}):(0,l.Y)(w.A,{})})}),t?(0,l.Y)(v.A3,{style:{gridArea:"description"},children:t}):null,(0,l.Y)(f.bg,{children:c})]})}}))}},76805:(e,n,t)=>{"use strict";t.d(n,{U:()=>l});var r=t(94086),o=t(30758),i=t(84899),a=t(20243),l=function(e){var n=e.children,t=(0,o.useRef)(null),l=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=function(e){var n,r,o=e.target;if(o&&"ArrowUp"===e.key){var i=t.current;i&&(null===(n=o.parentElement)||void 0===n?void 0:n.firstElementChild)===o&&(null===(r=i.querySelector("input"))||void 0===r||r.focus())}},n=l.current;if(n)return n.addEventListener("keydown",e,!1),function(){return n.removeEventListener("keydown",e,!1)}},[l,t]),(0,r.Y)(i.JC.Provider,{value:{ref:l,"aria-label":"Search Results"},children:(0,r.Y)(a.a.Provider,{value:{ref:t,onKeyDown:function(e){if("ArrowDown"===e.key){var n;e.preventDefault(),null===(n=l.current)||void 0===n||n.focus()}}},children:n})})}},49531:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(20837),o=t(43952),i=t(94086),a=t(55335),l=(0,t(10168).x)({table:{maxWidth:"100%",minWidth:"100%",outline:"none",borderSpacing:1,alignSelf:"start"}});let s=function(e){return(0,i.Y)(a.XI,(0,o._)((0,r._)({css:l.table},e),{children:e.children}))}},27791:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),o=t(43952),i=t(94086),a=t(55335);let l=function(e){return(0,i.Y)(a.BF,(0,o._)((0,r._)({},e),{children:e.children}))}},19537:(e,n,t)=>{"use strict";t.d(n,{V:()=>f});var r=t(20837),o=t(43952),i=t(94086),a=t(60620),l=t(55335),s=t(10168),c=t(32842),u=t(29048),d=t(30111),p=(0,s.x)({column:[c.wp.px(8),c.wp.py(6),c.wp.textAlign.left,c.wp.align.center,{whiteSpace:"nowrap",wordBreak:"break-word"}],columnSortIcon:[c.wp.px(2)]});function f(e){var n=(0,a.v)(e.style,{cursor:e.allowsSorting?"pointer":"default"});return(0,i.Y)(l.VP,(0,o._)((0,r._)({},e),{css:p.column,style:n,children:function(n){var t=n.allowsSorting,r=n.sortDirection;return(0,i.FD)(i.FK,{children:[e.children,t&&(0,i.Y)("span",{"aria-hidden":"true",css:p.columnSortIcon,children:"ascending"===r?(0,i.Y)(d.A,{}):(0,i.Y)(u.A,{})})]})}}))}},87260:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(20837),o=t(43952),i=t(16530),a=t(94086),l=t(55335),s=t(29390),c=t(24955),u=t(10168),d=t(32842),p=t(47303),f=t(31955),h=t(19537),g=(0,u.x)({tableHeader:[d.wp.color.foregroundDimmer,d.wp.textAlign.left,{"[data-focused]":[d.wp.focusRing,{outlineColor:c.LU.accentPrimaryDefault}]}],checkboxColumn:[d.wp.width(16),d.wp.px(8)]});function m(e){var n=e.columns,t=e.children,c=(0,i._)(e,["columns","children"]),u=(0,l.mz)(),d=u.selectionBehavior,m=u.selectionMode;return(0,a.Y)(f.ui,{children:function(e){return(0,a.FD)(l.A0,(0,o._)((0,r._)({clsx:e,css:g.tableHeader},c),{children:["toggle"===d&&(0,a.Y)(h.V,{css:g.checkboxColumn,children:"multiple"===m&&(0,a.Y)(p.S,{slot:"selection",name:"select-all"})}),(0,a.Y)(s.pM,{items:n,children:t})]}))}})}},2219:(e,n,t)=>{"use strict";t.d(n,{n:()=>a,u:()=>i});var r=t(94086),o=t(52757);function i(){return(0,r.Y)(o.mL,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.Y)(o.mL,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},96362:(e,n,t)=>{"use strict";t.d(n,{P:()=>o});var r=t(1670),o=function(e,n){var t=n.resourceUsageType,o=n.precision,i=n.truncateToMillions;return 0===e||void 0===e?"-":(0,r.h7)(e,{resourceUsageType:t,precision:o,skipUnits:!0,truncateToMillions:i})}},2329:(e,n,t)=>{"use strict";t.d(n,{o:()=>p});var r=t(13454),o=t(5482),i=t(66622),a=t(53654),l=t(7020),s=t(96367),c=t(19327);function u(){return(u=(0,r._)(function(e){var n,t,u,d,p,f,h,g,m;function v(){return(v=(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if("function"==typeof n)return[2,n()];return[4,n.getConfig()];case 1:return[2,null===(e=t.sent().config)||void 0===e?void 0:e.entrypoint]}})})).apply(this,arguments)}function w(){return(w=(0,r._)(function(){var e,n;return(0,o.YH)(this,function(r){switch(r.label){case 0:if(!(e=p))return[2,null];if(!(0,a._6)(e))return[2,g.includes(e)?e:null];return[4,t.stat(e)];case 1:return[2,(n=r.sent()).exists&&n.type===c.pt.File?e:null]}})})).apply(this,arguments)}return(0,o.YH)(this,function(r){switch(r.label){case 0:return n=e.dotReplit,[4,Promise.all([(t=e.fs).readDir(s.Dl),function(){return v.apply(this,arguments)}()])];case 1:if(d=(u=i._.apply(void 0,[r.sent(),2]))[0],p=u[1],!d||d.error)throw Error("Could not read files");return h=(f=d.children).find(function(e){return e.type===c.pt.File&&e.filename.toLowerCase().endsWith("readme.md")}),g=f.filter(function(e){return e.type===c.pt.File}).map(function(e){return e.filename}),[4,function(){return w.apply(this,arguments)}()];case 2:var o,y;if(m=r.sent())return[2,{entrypoint:m,readmeFile:null==h?void 0:h.filename}];return[2,{entrypoint:(y=(o=g).find(function(e){return e.toLowerCase().endsWith("readme.md")}))?y:o.includes("Makefile")?"Makefile":o.find(a.e$)||o.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,l.RZ)(e)&&!(0,l._L)(e)}),readmeFile:null==h?void 0:h.filename}]}})})).apply(this,arguments)}var d=t(99019);function p(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){return(0,o.YH)(this,function(n){if(!d.V)throw Error("Expected apollo client");return[2,function(e){return u.apply(this,arguments)}(e)]})})).apply(this,arguments)}},17595:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_b});var r,o,i,a,l,s,c,u,d=t(66622),p=t(94086),f=t(60049),h=t(30758),g=t(20837),m=t(45009),v=t(30632),w=t(72813),y=t(5601),b=t(98686),S=t(29309);function Y(){var e=(0,m._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}var x={},_=(0,v.J1)(Y(),b.cL,y.I,S.VU,S.V4,S.aU,b.dL),A=t(71887),C=t(63679),k=t(54487),D=t(77494),R=t(51824),E=t(7428);function I(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}var U=t(37954),F=t(62580),P=t(32904),T=t(99655),O=t(85471),L=t(53460),N=t(68736),M=t(27189),G=t(13454),B=t(5482),H=t(70452),W=t(51423),z=t(82436),$=t(51102),j=t(77119),q=t(28668),K=t(80062),Z=t(29504),V=t(83515);function J(e){var n,t=(0,E.dm)().setAssistantMode,r=(0,E.NC)(),o=(0,h.useCallback)((n=(0,G._)(function(n){var o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:return[4,r.sessions.create({sessionType:q.dF3.CHAT})];case 1:if(!(o=a.sent()).ok)return[2];return e({pane:{type:"ghostwriterChat",data:{sessionId:(i=o.payload).id}}}),t("basic"),[4,i.appendEvent({kind:"message",message:n,intent:q.qRv.NONE,model:q.e3q.BASIC})];case 2:return a.sent(),(0,z.u4)(z.AZ.ASSISTANT_USED,{action:"message_sent",intent_type:"explain",model:"basic",user_model_selection:"basic",message_content:n,message_source:"ask_ai_command_bar"}),[2]}})}),function(e){return n.apply(this,arguments)}),[r,e,t]);return(0,P.A)(function(){return{data:{type:"context",label:"Assistant",icon:(0,p.Y)(V.A,{size:16}),key:"assistantAgent"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,K.u4)({defaultScore:Z.q.askAi,matchScoreMultiplier:Z.B.askAi,filterLowMatchScores:!1}),data:{type:"action",label:"Ask Assistant: ".concat(n),icon:(0,p.Y)(V.A,{size:16}),run:function(){return o(n)}}}]:[]}}},[o])}var Q=t(19346),X=t(99413);function ee(e){var n=(0,Q.Vv)();return(0,P.A)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,p.Y)(X.A,{}),key:"codeSearch"},commands:function(t){var r=t.searchQuery;if(!r)return[];var o={type:"searchReplace",data:{initialQuery:r}};return[{match:(0,K.u4)({defaultScore:Z.q.codeSearch,matchScoreMultiplier:Z.B.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:n.getTitle(o),icon:n.Icon({pane:o}),run:function(){e({pane:o})}}}]}}},[n,e])}var en=t(39952),et=t(24481),er=t(39428),eo=t(50052),ei=t(15656),ea=t(20041),el=t(51681),es=t(20888),ec=t(72250),eu=t(88859),ed=t(99966),ep=t(72700),ef=t(8280),eh=t(14195),eg=t(43249),em=t(96955);function ev(e){var n,t=e.currentPaneId,r=e.type,o=(0,Q.Vv)(),i=(0,en.US)(),a=(0,en.LA)(),l=(0,eu.t3)(),s=(0,ec.gB)(),c=t?"Move existing tab here":"Jump to existing tab";return(0,h.useCallback)((n=(0,G._)(function(e){var n,u,f,h,g,m,v,w,y,b,S,Y,x,_,A,C,k,D,R,E,I,U,F,P,T,O;return(0,B.YH)(this,function(L){switch(L.label){case 0:if(n=e.searchQuery,u=l(),!(f=t?u.filter(function(e){return(0,d._)(e,1)[0]!==t}):u).length||!n&&"files"===r)return[2,[]];h=new Map,g=[],m=!0,v=!1,w=void 0;try{for(y=f[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)(S=(0,d._)(b.value,2))[0],Y=S[1],(0,Q.xS)(Y)&&Y.data.path&&g.push(Y.data.path)}catch(e){v=!0,w=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw w}}return[4,(0,ei.UI)(n,g)];case 1:x=L.sent(),_=!0,A=!1,C=void 0;try{for(k=x[Symbol.iterator]();!(_=(D=k.next()).done);_=!0)R=D.value,h.set(R.path,{score:R.score,ranges:R.ranges})}catch(e){A=!0,C=e}finally{try{_||null==k.return||k.return()}finally{if(A)throw C}}E=[],I=!0,U=!1,F=void 0;try{for(P=function(){var e=(0,d._)(O.value,2),n=e[0],l=e[1],u=(0,Q.NM)(l);if("tools"===r&&!u||"tools"===r&&"commands"===l.type||"files"===r&&u)return"continue";var f=(0,Q.xS)(l)?l.data.path:null,g=f?h.get(f):null;if("deployments"===l.type){var m=s(n);if((null==m?void 0:m.type)==="deployments"){var v=m.getTabs();if(v)return E.push({match:K.KK,data:{type:"context",label:o.getTitle(l),icon:(0,p.Y)(o.Icon,{pane:l})},commands:function(){return v.map(function(e){return{match:K.KK,data:{key:n+e.id,type:"action",label:e.label,icon:(0,p.Y)(e.Icon,{size:16}),run:function(){a(n),m.setTab(e.id)}}}})}}),"continue"}}var w=f&&g?function(){return{score:g.score,render:(0,ei.SS)({path:f,ranges:g.ranges,description:c})}}:K.KK,y=o.getTitle(l),b=o.Icon({pane:l});E.push({match:w,data:{key:n,type:"action",label:y,icon:b,run:function(){return t?i({a:t,b:n}):a(n)},description:c}})},T=f[Symbol.iterator]();!(I=(O=T.next()).done);I=!0)P()}catch(e){U=!0,F=e}finally{try{I||null==T.return||T.return()}finally{if(U)throw F}}return[2,E]}})}),function(e){return n.apply(this,arguments)}),[t,l,o,a,i,s,c,r])}function ew(e){var n=(0,Q.Vv)(),t=(0,ed.Tb)(),r=(0,eu.t3)();return(0,h.useCallback)(function(){var o=r().map(function(e){var n=(0,d._)(e,2);return(n[0],n[1]).type}),i=[],a=!0,l=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)!function(){var t=c.value;if(!((0,Q.gG)(t.type)&&o.includes(t.type))){var r=n.getTitle(t),a=n.Icon({pane:t});i.push({match:(0,ea.T)({pane:t,aliases:el.f.get(t.type)}),data:{key:"extension"===t.type?"extension-".concat(t.data.installationId,"-").concat(t.data.path):void 0,type:"action",label:r,description:n.getDescription(t,{short:!0}),icon:a,run:function(){e({pane:t})}}})}}()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return i},[t,e,r,n])}function ey(e){var n=e.currentPaneId,t=e.openPane,r=(0,et.A)(),o=r.fs,i=r.container,a=ew(t),l=ev({currentPaneId:n,type:"tools"}),s=ev({currentPaneId:n,type:"files"}),c=(0,h.useCallback)(function(e){var n=e.path;t({pane:{type:(0,Q.QY)({path:n}),data:{path:n}}})},[t]),u=(0,eu.Sx)(),d=(0,es.J)(),f=ee(t),g=J(t);return(0,P.A)(function(){var e,n,t,r,h=(0,er.g)({openFile:c,fs:o,shouldHideFile:d,getRecentFiles:u,getCurrentlyOpenFilePanesCommands:s}),m=(0,eo.Y)({container:i,openFile:c}),v={data:{type:"context",label:ef.Ve,icon:(0,p.Y)(em.A,{})},commands:(e=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,l({searchQuery:e.searchQuery})];case 1:return[2,M._.apply(void 0,[n.sent()]).concat((0,M._)(a()))]}})}),function(n){return e.apply(this,arguments)})},w=(t=(n={fs:o,openFile:c}).openFile,r=n.fs,{match:K.KK,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,p.Y)(eg.A,{})},commands:function(e){var n=e.searchQuery,o=e.active;return n&&o?[{match:K.G2,data:{type:"action",description:"Create a new file",label:n,icon:(0,p.Y)(ep.A,{path:n}),run:function(){return(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,r.stat(n)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(n,'" already exists')}];return[4,r.writeFile(n,j.A.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+n+'"'}];return t({path:n}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Ask AI, search for files & open tools"},commands:function(){return[w,h,v,f,g,m]}}},[i,o,u,a,l,s,d,c,f,g])}var eb=t(74495),eS=t(38047),eY="Ask AI & search";function ex(){var e=(0,W.Xr)($.mV),n=(0,en.e4)(),t=(0,W.md)($.Ik);return(0,h.useCallback)(function(r){t||n(),e(r)},[n,t,e])}var e_=t(68062),eA=t(10168),eC=t(32842),ek=t(76985),eD=t(31955),eR=t(70013),eE={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,e_.FM)({cmdOrCtrl:!0,key:"k"})};function eI(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,W.Xr)($.S3);(0,h.useEffect)(function(){if(n)return t(function(n){return(0,M._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var eU=(0,eA.x)({surface:[eC.wp.maxHeight("70vh"),eC.wp.borderRadius(8)]});let eF=(0,h.memo)(function(){var e,n,t,r,o,i,a,l,s,c=(0,W.md)($.Ik),u=ex(),d=(e=(0,en.Us)(),n=(0,en.ni)(),t=(0,C._P)({controlName:"flag-modal-panes"}),r=ew((0,h.useCallback)(function(r){if((0,z.u4)(z.AZ.TOOL_OPENED,{source:"Command Bar",tool:r.pane.type}),t){n(r.pane);return}e(r)},[e,n,t])),o=ev({type:"tools"}),i=(0,eb.Jn)("toggleGlobalCommandBarCommand"),a=(0,P.A)(function(){return{type:"context",icon:(0,p.Y)(eS.A,{}),label:"",description:eY,keyboardShortcut:i}},[i]),l=(0,P.A)(function(){return(0,H.eU)(function(e){var n,t=e($.S3),i={data:{type:"context",label:ef.Ve,icon:(0,p.Y)(em.A,{})},commands:(n=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,o({searchQuery:e.searchQuery})];case 1:return[2,M._.apply(void 0,[n.sent()]).concat((0,M._)(r()))]}})}),function(e){return n.apply(this,arguments)})};return{data:a,commands:function(){return(0,M._)(t).concat([i])}}})},[r,a,o]),s=(0,P.A)(function(){return(0,H.eU)(function(e){var n=e(l),t=e($.rT);return t?[n,t]:n})},[l]),(0,W.md)(s)),f=(0,eb.Jn)(eE.id);return(0,p.Y)(ek.a,{hideCloseButton:!0,isOpen:c,onRequestClose:u,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,p.Y)(eD.ui,{css:eU.surface,children:(0,p.Y)(eR.r,{keyboardShortcut:f,onAction:function(){return u()},command:d,autoFocus:!0})})})});var eP=t(37607);function eT(){var e=(0,m._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return eT=function(){return e},e}var eO=(0,v.J1)(eT(),eP.Fz,eP.Tu),eL=t(14178),eN=t(57827),eM=t(77781),eG=t(83733),eB=t(99019),eH=t(40172),eW=t(40889),ez=t(8367),e$=(0,eA.x)({container:eC.wp.colWithGap(24)});function ej(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,p.FD)(ez.S,{css:e$.container,children:[(0,p.Y)(eW.Y9,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,p.FD)(eW.EY,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,p.FD)(ez.S,{row:!0,gap:12,justify:"end",children:[(0,p.Y)(eH.$n,{onClick:function(){return t()},text:"Cancel"}),(0,p.Y)(eH.$n,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var eq=t(26190),eK=t(39651),eZ=t(96489),eV=t.n(eZ),eJ=t(64212);function eQ(){var e=(0,eu.RG)(),n=(0,en.SK)(),t=(0,en.je)(),r=(0,en.vs)(),o=(0,en.hT)(),i=(0,en.rQ)(),a=(0,en.TM)(),l=(0,en.aB)(),s=(0,en.k8)(),c=(0,en.yD)();return(0,h.useCallback)(function(u){var p=u.pane,f=u.activate,h=u.updateOnReveal,g=e(),m=(0,Q.xS)(p)?l():s();m||(m=function(e){var n,t,r=e.panes,o=e.pane;if((0,Q.xS)(o)){var i,a,l=o.data.path;return null!==(a=null===(i=r.find(function(e){var n=(0,d._)(e,2)[1];return(0,Q.xS)(n)&&n.data.path===l}))||void 0===i?void 0:i[0])&&void 0!==a?a:null}if((0,Q.En)(o))return null!==(c=null===(s=r.find(function(e){var n=(0,d._)(e,2)[1];return!!(0,Q.En)(n)&&n.data.installationId===o.data.installationId&&n.data.path===o.data.path&&n.data.filePath===o.data.filePath}))||void 0===s?void 0:s[0])&&void 0!==c?c:null;if("diff"===o.type){var s,c,u,p=r.find(function(e){var n=(0,d._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&eV()(t.data,o.data)});return null!==(u=null==p?void 0:p[0])&&void 0!==u?u:null}return(0,Q.gG)(o.type)&&null!==(t=null===(n=r.find(function(e){return(0,d._)(e,2)[1].type===o.type}))||void 0===n?void 0:n[0])&&void 0!==t?t:null}({panes:(0,M._)(n()).concat((0,M._)(t())),pane:p}));var v=c();if(m&&g){var w,y,b=r().layout,S=null===(w=(0,eJ.gj)(b,g))||void 0===w?void 0:w.paneGroup,Y=null===(y=(0,eJ.gj)(b,m))||void 0===y?void 0:y.paneGroup;if(!v||(null==S?void 0:S.id)===(null==Y?void 0:Y.id))return(void 0===h||h)&&a({paneId:m,pane:p}),i({paneId:m,activate:f}),m}var x=u.placement;return v&&null!=g?x={type:"after",paneId:g}:(null==x?void 0:x.type)!=="secondary"||x.relativeTo||(x={type:"secondary",relativeTo:g}),o({pane:p,activate:f,placement:x})},[e,l,s,o,n,t,r,c,i,a])}var eX=t(12975);function e0(){var e,n=(0,en.q5)(),t=(0,eu.T_)(),r=(e=(0,eu.dm)(),(0,P.A)(function(){return function(n){return e.subscribe(n)}},[e])),o=(0,eu.w1)(),i=(0,eK.A)(),a=eQ(),l=(0,eu.RG)(),s=(0,en.vs)(),c=(0,en.HM)(),u=(0,eX.A)(),d=(0,eq.A)(u),p=(0,h.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:l()}})},[a,l]);return(0,P.A)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:o,activatePane:t,toasts:i,revealOrInsertTool:p,getLayoutState:s,setLayoutState:c,getSshConfig:function(){return d.current}}},[n,r,o,t,i,p,s,c,d])}var e1=t(96954),e2=t(32670),e5=t(94450),e4=t(44603),e3=t(53234),e8=t(43952),e7=t(28281),e6=t(20740),e9=t(43035),ne=t(73540),nn=t(42847),nt=t(72275),nr=t(60762),no=function(e){return e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER",e}({}),ni=function(e){return e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE",e}({}),na=Symbol("Comlink.proxy"),nl=Symbol("Comlink.endpoint"),ns=Symbol("Comlink.releaseProxy"),nc=Symbol("Comlink.thrown"),nu=function(e){return(void 0===e?"undefined":(0,nr._)(e))==="object"&&null!==e||"function"==typeof e},nd=new Map([["proxy",{canHandle:function(e){return nu(e)&&e[na]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return np(e,t),[r,[r]]},deserialize:function(e){var n;return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=!1,i=new Proxy(r,{get:function(r,a){if(nh(o),a===ns)return function(){return nb(n,{type:ni.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){nf(n),o=!0})};if("then"===a){if(0===t.length)return{then:function(){return i}};var l=nb(n,{type:ni.GET,path:t.map(function(e){return e.toString()})}).then(ny);return l.then.bind(l)}return e(n,(0,M._)(t).concat([a]))},set:function(e,r,i){nh(o);var a=(0,d._)(nw(i),2),l=a[0],s=a[1];return nb(n,{type:ni.SET,path:(0,M._)(t).concat([r]).map(function(e){return e.toString()}),value:l},s).then(ny)},apply:function(r,i,a){nh(o);var l=t[t.length-1];if(l===nl)return nb(n,{type:ni.ENDPOINT}).then(ny);if("bind"===l)return e(n,t.slice(0,-1));var s=(0,d._)(ng(a),2),c=s[0],u=s[1];return nb(n,{type:ni.APPLY,path:t.map(function(e){return e.toString()}),argumentList:c},u).then(ny)},construct:function(e,r){nh(o);var i=(0,d._)(ng(r),2),a=i[0],l=i[1];return nb(n,{type:ni.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(ny)}});return i}(e,[],n)}}],["throw",{canHandle:function(e){return nu(e)&&nc in e},serialize:function(e){var n=e.value;return[n instanceof Error?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function np(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(o){if(o&&o.data&&(!t||o.origin===t.origin&&o.source===t.source)){var i,a=(0,g._)({path:[]},o.data),l=a.id,s=a.type,c=a.path,u=(o.data.argumentList||[]).map(ny);try{var p=c.slice(0,-1).reduce(function(e,n){return e[n]},e),f=c.reduce(function(e,n){return e[n]},e);switch(s){case ni.GET:i=f;break;case ni.SET:p[c.slice(-1)[0]]=ny(o.data.value),i=!0;break;case ni.APPLY:i=f.apply(p,u);break;case ni.CONSTRUCT:var h=(0,nn._)(f,(0,M._)(u));i=nv(h);break;case ni.ENDPOINT:var m,v=new MessageChannel,w=v.port1,y=v.port2;np(e,y),m=[w],nm.set(w,m),i=w;break;case ni.RELEASE:i=void 0;break;default:return}}catch(e){i=(0,nt._)({value:e},nc,0)}Promise.resolve(i).catch(function(e){return(0,nt._)({value:e},nc,0)}).then(function(e){var t=(0,d._)(nw(e),2),o=t[0],i=t[1];n.postMessage((0,e8._)((0,g._)({},o),{id:l}),i),s===ni.RELEASE&&(n.removeEventListener("message",r),nf(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),nf(n)}}function nf(e){"MessagePort"===e.constructor.name&&e.close()}function nh(e){if(e)throw Error("Proxy has been released and is not useable")}function ng(e){var n,t=e.map(nw);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var nm=new WeakMap;function nv(e){return Object.assign(e,(0,nt._)({},na,!0))}function nw(e){var n=!0,t=!1,r=void 0;try{for(var o,i=nd[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var a=(0,d._)(o.value,2),l=a[0],s=a[1];if(s.canHandle(e)){var c=(0,d._)(s.serialize(e),2),u=c[0],p=c[1];return[{type:no.HANDLER,name:l,value:u},p]}}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}return[{type:no.RAW,value:e},nm.get(e)||[]]}function ny(e){switch(e.type){case no.HANDLER:return nd.get(e.name).deserialize(e.value);case no.RAW:return e.value}}function nb(e,n,t){return new Promise(function(r){var o=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===o&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,g._)({id:o},n),t)})}var nS=t(30175),nY=t(12867),nx=Symbol("timeout"),n_=t(96095);function nA(){var e=(0,m._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return nA=function(){return e},e}function nC(){var e=(0,m._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return nC=function(){return e},e}function nk(){var e=(0,m._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return nk=function(){return e},e}function nD(){var e=(0,m._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return nD=function(){return e},e}function nR(){var e=(0,m._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return nR=function(){return e},e}function nE(){var e=(0,m._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return nE=function(){return e},e}function nI(){var e=(0,m._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return nI=function(){return e},e}function nU(){var e=(0,m._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return nU=function(){return e},e}function nF(){var e=(0,m._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return nF=function(){return e},e}function nP(){var e=(0,m._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return nP=function(){return e},e}function nT(){var e=(0,m._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return nT=function(){return e},e}function nO(){var e=(0,m._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return nO=function(){return e},e}function nL(){var e=(0,m._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nL=function(){return e},e}function nN(){var e=(0,m._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nN=function(){return e},e}function nM(){var e=(0,m._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nM=function(){return e},e}function nG(){var e=(0,m._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return nG=function(){return e},e}function nB(){var e=(0,m._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nB=function(){return e},e}function nH(){var e=(0,m._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nH=function(){return e},e}var nW=(0,v.J1)(nA()),nz=(0,v.J1)(nC()),n$=(0,v.J1)(nk()),nj=(0,v.J1)(nD(),n_.y),nq=(0,v.J1)(nR()),nK=(0,v.J1)(nE()),nZ=(0,v.J1)(nI()),nV=(0,v.J1)(nU()),nJ=(0,v.J1)(nF()),nQ=(0,v.J1)(nP()),nX=(0,v.J1)(nT(),nQ),n0=(0,v.J1)(nO(),nQ),n1=(0,v.J1)(nL(),nW,nz,n$,nj),n2=(0,v.J1)(nN(),nQ,nq,nK,nZ),n5=(0,v.J1)(nM(),nQ,nq,nK,nZ),n4=(0,v.J1)(nG()),n3=(0,v.J1)(nB(),nV,nJ,nX,n0),n8=(0,v.J1)(nH(),nV,nJ,nX,n0);function n7(e){var n;return n=(0,G._)(function(n){var t,r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return[4,null===eB.V||void 0===eB.V?void 0:eB.V.query({query:e,variables:n||void 0})];case 1:if(null==(t=o.sent())?void 0:t.data)return[2,t.data];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})}),function(e){return n.apply(this,arguments)}}var n6=t(40174),n9=t(49711);function te(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=!0,a=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)(0,s.value)()}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return n.apply(void 0,(0,M._)(r))}}(e,n[r]));return t}function tn(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(!t.scopes.has(s)){var c="Scope not declared in extension.json: ".concat(s);if(e.flagEnforceScopes)throw e.logger.error(c),Error(c);e.logger.warn("".concat(c,". In the future this will throw an error"))}}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}}var tt=n6.ZU.Record(n6.ZU.String(),n6.ZU.String({minLength:1})),tr=t(29808);function to(){var e=(0,m._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return to=function(){return e},e}var ti=(0,v.J1)(to());function ta(e){var n,t;return{registerCommand:(n=(0,G._)(function(n,t){var r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:if(t)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,[4,(0,e4.c)(r,e)];case 1:if(!(i=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in i.data))throw Error("Command: In ".concat(i.data.id,", contributions should be an array"));return 0===i.data.contributions.length&&e.logger.warn("Command: ".concat(i.data.id," has no contributions")),(o={commandId:i.data.id,contributions:i.data.contributions}).contributions||(e.logger.warn("Command: '".concat(i.data.id,"' has no contributions")),o.contributions=[]),[3,4];case 2:return o=n,r=t,[4,(0,e4.c)(r,e)];case 3:i=a.sent(),a.label=4;case 4:return e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,eN.eb)(o.commandId),contributions:o.contributions,create:(0,G._)(function(){return(0,B.YH)(this,function(e){return[2,i]})})}}),[2]}})}),function(e,t){return n.apply(this,arguments)}),registerCreateCommand:(t=(0,G._)(function(n,t){var r,o;return(0,B.YH)(this,function(i){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in nY.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(nY.P))),o={id:(0,eN.eb)(n.commandId),contributions:n.contributions,create:(a=(0,G._)(function(n){var r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(r=o.sent()))return[2,null];return[2,(0,e4.c)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:o}),[2]})}),function(e,n){return t.apply(this,arguments)})}}function tl(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var ts=t(53654),tc=t(61766),tu=t(19327);function td(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var tp=t(35642),tf=t(66733),th=t(21980),tg=function(e,n){var t=e.extension,r=n.showMessage,o=n.hideMessage,i=n.hideAllMessages,a=function(e){return function(n){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,c=Date.now();c-s>=6e4&&(s=c,l=0);var u=null!==(o=t.manifest.name.trim())&&void 0!==o?o:"Unknown Extension";l<10?(r({content:(0,p.FD)(p.FK,{children:[n,(0,p.Y)("div",{children:(0,p.Y)(eW.EY,{variant:"small",children:u})})]}),type:e,time:i>1e4?1e4:i,style:a}),l++):th.vF.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,s=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:o,hideAllMessages:i}},tm=t(23821),tv=t(82542);function tw(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,o=e.paneId,i=e.environmentAPIs,a=e.filePath,l=(0,h.useRef)(null),s=(0,eG.A)(),c=(0,eM.T)(),u=(0,et.A)(),p=(0,h.useRef)(),f=(0,C._P)({controlName:"flag-extensions-enforce-scopes",default:!1,type:"boolean",logFlagToAnalytics:!1}),m=(0,tm.p9)(),v=(0,e5.X_)(null==n?void 0:n.installationId),w=(0,tv.D)(),y=(0,h.useRef)(w),b=(0,h.useRef)([]);y.current=w;var S=(0,P.A)(function(){return{}},[]),Y=(0,ne.A)(u.container),x=(0,d._)((0,h.useState)(!1),2),_=x[0],A=x[1];(0,h.useEffect)(function(){Y===e7.KN.CONNECTED&&A(!0)},[Y]),(0,h.useEffect)(function(){b.current.forEach(function(e){return e(w.theme)})},[w.theme]),(0,h.useEffect)(function(){return function(){p.current&&p.current()}},[]);var k=(0,h.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),D=(0,h.useCallback)(function(){if(l.current&&k()&&n&&v&&c){p.current&&p.current();var e={extension:n,extensionIframe:l.current,services:u,paneId:o,replId:s,flagEnforceScopes:f,getThemeContext:function(){return y.current},onThemeChange:function(e){return b.current.push(e),function(){b.current.splice(b.current.indexOf(e),1)}},store:m,extensionStateAtom:v,environmentAPIs:i,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:c,ghostwriter:S};p.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,o,i,a,l,s,c,u,d,p,f,h,m=e.filePath,v=e.replId,w=e.environmentAPIs,y=e.logger.createLogger({api:"debug"});function b(){return(b=(0,G._)(function(n){var t,r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!==(t=a.sent())&&void 0!==t?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return i=null!==(o=a.sent())&&void 0!==o?o:"(unset)",(0,z.u4)(z.AZ.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:i,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,G._)(function(){var n,t,o;return(0,B.YH)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((o=JSON.parse(null===(n=t.output)||void 0===n?void 0:n.trim()))===i)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(i,", but the latest version is ").concat(o),{clientVersion:i,latestVersion:o}),[2]}})})(),[2,{success:!0}]}})})).apply(this,arguments)}return(0,e8._)((0,g._)({filePath:m},function(e){var n=e.services.fs,t=e.logger.createLogger({api:"fs"});function r(){return(r=(0,G._)(function(e,t){var r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:if(r=(0,tc.Fd)(e),"string"!=typeof t)return[3,1];return o=t,[3,4];case 1:if(!(t instanceof Blob))return[3,3];return i=j.A.from,[4,t.arrayBuffer()];case 2:return o=i.apply(j.A,[a.sent()]),[3,4];case 3:o=j.A.from(t),a.label=4;case 4:return[4,n.writeFile(r,o)];case 5:return[2,td(a.sent())]}})})).apply(this,arguments)}function o(){return(o=(0,G._)(function(e){var t,r,o,i=arguments;return(0,B.YH)(this,function(a){switch(a.label){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"utf8",r=(0,tc.Fd)(e),[4,n.readFile(r)];case 1:var l,s;if((o=a.sent()).error)return[2,{error:o.error,content:null}];return[2,{error:null,content:(l=o.content,"utf8"===(s=t)?l.toString():"binary"===s?l.toBuffer():l)}]}})})).apply(this,arguments)}function i(){return(i=(0,G._)(function(e){var t,r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return t=(0,tc.Fd)(e),[4,n.readDir(t)];case 1:if((r=o.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})).apply(this,arguments)}function a(){return(a=(0,G._)(function(e){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return t=(0,tc.Fd)(e),[4,n.createDir(t)];case 1:return[2,td(r.sent())]}})})).apply(this,arguments)}function l(){return(l=(0,G._)(function(e){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return t=(0,tc.Fd)(e),[4,n.deleteDir(t)];case 1:return[2,td(r.sent())]}})})).apply(this,arguments)}function s(){return(s=(0,G._)(function(e){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return t=(0,tc.Fd)(e),[4,n.deleteFile(t)];case 1:return[2,td(r.sent())]}})})).apply(this,arguments)}function c(){return(c=(0,G._)(function(e,t){var r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:return r=(0,tc.Fd)(e),[4,n.stat(r)];case 1:if(!(o=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(o.type!==tu.pt.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return i=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:i=a.sent(),a.label=5;case 5:return[2,td(i)]}})})).apply(this,arguments)}function u(){return(u=(0,G._)(function(e,t){var r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return r=(0,tc.Fd)(e),[4,n.copyFile(r,t)];case 1:return[2,td(o.sent())]}})})).apply(this,arguments)}return te([tn(e,["read"])],(0,g._)({readFile:function(e){return o.apply(this,arguments)},readDir:function(e){return i.apply(this,arguments)},watchFile:function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",i=(0,tc.Fd)(e);(0,ts.m6)(i)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(i,{onChange:function(e){if("utf8"===o){r.onChange(e.toString("utf8"));return}r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return nv(function(){a()})},watchDir:function(e,t){var r=(0,tc.Fd)(e),o=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,tc.me)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return nv(function(){o()})}},te([tn(e,["write-exec"])],{createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return l.apply(this,arguments)},writeFile:function(e,n){return r.apply(this,arguments)},deleteFile:function(e){return s.apply(this,arguments)},copyFile:function(e,n){return u.apply(this,arguments)},move:function(e,n){return c.apply(this,arguments)},watchTextFile:function(e,r){(0,ts.m6)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var o,i=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,o=e.transformSelection,i=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(nv({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:o,updateSelections:i}))},onChange:(o=(0,G._)(function(e){var n,t,o,i;return(0,B.YH)(this,function(a){return n=e.latestContent,t=e.changeSource,o=e.changes,i=e.version,r.onChange({latestContent:n.toString(),version:i,changeSource:t,changes:o.toJSON()}),[2]})}),function(e){return o.apply(this,arguments)}),onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return nv(function(){i()})}})))}(e),function(e){var n=e.services.container,t=null;function r(){return o.apply(this,arguments)}function o(){return(o=(0,G._)(function(){var e;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})).apply(this,arguments)}function i(){return(i=(0,G._)(function(e,o){return(0,B.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(o))];case 2:return i.sent(),[2]}})})).apply(this,arguments)}function a(){return(a=(0,G._)(function(e){return(0,B.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,o.sent().output]}})})).apply(this,arguments)}function l(){return(l=(0,G._)(function(e){var o;return(0,B.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((o=i.sent()).error||!o.output)return[2,{error:o.error}];return[2,{keys:o.output.split("\n")}]}})})).apply(this,arguments)}function s(){return(s=(0,G._)(function(e){var o;return(0,B.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((o=i.sent()).error||!o.output)return[2,{error:o.error}];return[2,{keys:o.output.split("\n")}]}})})).apply(this,arguments)}return te([tn(e,["repldb:read"])],(0,g._)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},te([tn(e,["repldb:write"])],{setReplDbValue:function(e,n){return i.apply(this,arguments)},deleteReplDbKey:function(e){return s.apply(this,arguments)}})))}(e),{watchActiveFile:function(e){return nv(a.environmentAPIs.watchActiveFile(e))},openFile:(a=e).environmentAPIs.openFile,getActiveFile:function(){return a.environmentAPIs.getActiveFile()}},(l=e.getThemeContext,s=e.onThemeChange,{getCurrentTheme:function(){return l().theme},getCurrentThemeValues:function(){return l().theme.values.global},onThemeChange:function(e){var n=s(e);return nv(function(){n()})},onThemeChangeValues:function(e){var n=s(function(n){return e(n.values.global)});return nv(function(){n()})}}),tg(e,w.toasts),{currentUser:n7(n1),userById:n7(n5),userByUsername:n7(n2),currentRepl:function(e){return n7(n3)((0,g._)({id:v},e))},replById:n7(n3),replByUrl:n7(n8)},function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return(r=(0,G._)(function(e){var r,o,i,a;return(0,B.YH)(this,function(l){switch(l.label){case 0:return[4,e.args];case 1:return r=l.sent(),[4,e.env];case 2:if(o=l.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:o}),!n9.WT.Check(tt,o))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return i=l.sent(),a=function(){},[2,nv({dispose:function(){a()},promise:new Promise(function(l){a=n.openChannel({service:"exec"},function(n){var s=n.channel;s.onCommand(function(n){i?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),s.request({exec:{args:r,env:o,splitStderr:!!i}}).then(function(n){if(n.ok){l({exitCode:0,error:null});return}if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),l({exitCode:null,error:t});return}if("open"===s.status&&a(),n.error){var r,o,i=Number(null===(o=n.error)||void 0===o?void 0:null===(r=o.match(/-?[0-9]+/g))||void 0===r?void 0:r[0]);l({exitCode:"number"==typeof i?i:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})})})})})]}})})).apply(this,arguments)}return(0,g._)({},te([tn(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),(c=e.extension,u=e.paneId,d=e.environmentAPIs,p=!1,{activatePane:function(){u&&(d.activatePane(u),p||(p=!0,(0,z.u4)(z.AZ.EXTENSION_USED,{extensionId:c.extensionId,extensionName:c.manifest.name})))}})),{commands:{registerCommand:(f=(0,G._)(function(n,t){var r;return(0,B.YH)(this,function(o){switch(o.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),[4,(0,e4.c)(t,e)];case 1:return r=o.sent(),e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,G._)(function(){return(0,B.YH)(this,function(e){return[2,r]})})}}),[2]}})}),function(e,n){return f.apply(this,arguments)}),registerCreateCommand:(h=(0,G._)(function(n,t){var r,o;return(0,B.YH)(this,function(i){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in nY.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(nY.P))),o={id:n.commandId,contributions:n.contributions,create:(a=(0,G._)(function(n){var r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(nx)},50)})])];case 1:if(null===(r=o.sent()))return[2,null];if(r===nx)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,e4.c)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:o}),[2]})}),function(e,n){return h.apply(this,arguments)})},experimental:(0,e8._)((0,g._)({},te([tl(e)],{hasExperimentalApi:function(){return!0}})),{editor:te([tl(e)],(0,g._)({},function(){function e(){return(e=(0,G._)(function(){var e,n,t,r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return[4,null===eB.V||void 0===eB.V?void 0:eB.V.query({query:n4})];case 1:if(null==(t=o.sent())?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.workspacePreferences)return[2,(0,tr.o)(t.data.currentUser.workspacePreferences)];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})})).apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}())),commands:te([tl(e)],(0,g._)({},ta(e))),auth:te([tl(e)],(0,g._)({},{getAuthToken:function(){return(0,G._)(function(){var n,t;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===eB.V||void 0===eB.V?void 0:eB.V.query({query:ti,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:te([tl(e)],(0,g._)({},ta(e)))}),internal:(n=e).store.get(n.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},runner:(t=n.services.runner,{getRunState:function(){return t.getRunState()},onStateChanged:function(e){var n=t.onStateChanged(e);return nv(function(){n()})}}),container:(r=n.services.container,{getConnectionState:function(){return r.getConnectionState()},onConnectionStateChanged:function(e){var n=r.onConnectionStateChanged(e);return nv(function(){n()})}}),layout:{revealOrInsertTool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=n.logger.createLogger({api:"revealOrInsertTool"});if(!n.extension.manifest.tools){t.warn("No tools defined in extension manifest");return}if(n.extension.manifest.tools.length<e+1){t.warn("Tool index out of bounds");return}var r=n.extension.manifest.tools[e],o=r.name||n.extension.manifest.name,i=r.handler;n.environmentAPIs.revealOrInsertTool({extensionId:n.extension.extensionId,installationId:n.extension.installationId,baseUrl:n.extension.baseUrl,path:i,name:o})},getLayoutState:function(){return n.environmentAPIs.getLayoutState()},setLayoutState:function(e){return n.environmentAPIs.setLayoutState(e)}},secrets:(o=n.services.secrets,{setSecret:function(e){var n=e.key,t=e.value;return(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,o.addEntries([{key:n,value:t}])];case 1:return e.sent(),[2,(0,tp.Ok)(!0)]}})})()},getSecret:function(e){return(0,G._)(function(){var n;return(0,B.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o.read()];case 1:return[2,tp.Ok.apply(void 0,[t.sent().get(e.key)])];case 2:return n=t.sent(),[2,(0,tp._)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,G._)(function(){return(0,B.YH)(this,function(n){return[2,(0,tf.M)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(i=n.services.dotReplit).getConfig,update:i.updateDotReplit},ssh:{getSshConfig:function(){return(0,G._)(function(){return(0,B.YH)(this,function(e){return[2,n.environmentAPIs.getSshConfig()]})})()}},commands:ta(n)}:null,debug:{info:function(e,n){return y.info(e,n)},warn:function(e,n){return y.warn(e,n)},error:function(e,n){return y.error(e,n)}},handshake:function(e){return b.apply(this,arguments)}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var o=np(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),i=function(r){if(r.origin===t&&n.contentWindow===r.source){var o=r.data;o.payload&&e.logger.warn("Extension sent deprecated postMessage",o)}};return window.addEventListener("message",i),function(){o(),window.removeEventListener("message",i)}}(e)}},[c,y,u,k,o,f,m,v,i,s,a,n,t,r,S]);return{isValidExtensionPaneUrl:k,didConnectOnce:_,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,e8._)((0,g._)({title:r,src:t},e6.A,e),{ref:(0,e9.P)(l,e.ref,{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:190"}),onLoad:function(n){D(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,h.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function ty(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,e5.X_)(n.installationId),o=tw({extension:n,sandboxUrl:(0,e3.sU)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),i=o.didConnectOnce,a=o.isValidExtensionPaneUrl,l=o.getIframeProps;return a()&&i&&r?(0,p.Y)("iframe",(0,g._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var tb=t(56677),tS=t(74026),tY=t(94614),tx=t(39274),t_=t(2209);function tA(){var e=(0,eG.A)(),n=(0,eM.T)(),t=(0,et.A)().container,r=(0,e2.A)(t),o=(0,tb.oR)(),i=(0,e5.Sc)(),a=(0,en.Us)(),l=(0,tS.yb)(),s=(0,e5.hS)(),c=(0,tS.iD)();(0,tb.Ju)();var u=(0,e5.Ot)(),f=e0(),g=(0,d._)((0,h.useState)(!1),2),m=g[0],v=g[1];(0,h.useEffect)(function(){e&&n&&c({replId:e,userId:n})},[e,n,c]);var w=(0,nS.xx)(),y=(0,en.GB)();(0,h.useEffect)(function(){y(w)},[w,y]);var b=(0,en.OC)();(0,e1.Yz)();var S=(0,en.GP)(),Y=(0,en.up)(),x=function(t){var r,o=t.filterUser;return r=(0,G._)(function(t){var r,a;return(0,B.YH)(this,function(l){switch(l.label){case 0:if(!t.active)return[2,[]];return[4,null===eB.V||void 0===eB.V?void 0:eB.V.query({query:eO,variables:{replId:e,userId:o?n:void 0}})];case 1:if(!(r=l.sent())||r.error||!(a=r.data.extensionList))return[2,[]];return[2,a.map(function(n){var t;return{match:K.G2,data:{type:"action",label:n.name,icon:(0,p.Y)(t_.A,{}),description:null!==(t=n.description)&&void 0!==t?t:"",run:function(){n.url&&(n.installation?s({installationId:(0,eN.qq)(n.installation.id)}):i({replId:e,extensionId:(0,eN.PM)(n.id)}))}}}})]}})}),function(e){return r.apply(this,arguments)}},_=(0,nS.Zp)(nY.P.CommandBar);return eI({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(_.map((t=(0,G._)(function(n){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,e4.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})},{enabled:!0}),eI({match:K.G2,commands:function(e){return e.active||""!==e.searchQuery?[{match:K.G2,data:{type:"action",label:"Extension Devtools",icon:(0,p.Y)(eg.A,{}),description:"Manage and deploy this Repl as an extension",run:function(){a({pane:{type:"extensionDevtools"}})}}},{match:K.G2,data:{type:"action",label:"URL",icon:(0,p.Y)(eg.A,{}),description:"Add an extension by URL",run:function(){v(!0)}}},{match:K.G2,data:{type:"action",label:"From this Repl",icon:(0,p.Y)(eg.A,{}),description:"Load this Repl as an extension",run:function(){r&&l(r)}}},{match:K.G2,data:{type:"context",label:"My Extensions",icon:(0,p.Y)(t_.A,{}),description:"Browse extensions you have created"},commands:x({filterUser:!0})},{match:K.G2,data:{type:"action",label:"Docs",icon:(0,p.Y)(tx.A,{}),description:"Read the Extensions docs",run:function(){a({pane:{type:"docs",data:{url:eL.ik.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,p.Y)(t_.A,{}),description:"Manage extensions"}},{enabled:o}),(0,p.FD)(p.FK,{children:[(0,p.Y)(ek.a,{isOpen:m,onRequestClose:function(){return v(!1)},children:(0,p.Y)(tY.A,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return v(!1)},onConfirm:function(e){l(e)}})}),(0,p.Y)(ek.a,{isOpen:!!S,onRequestClose:function(){return Y(null)},children:S?(0,p.Y)(ej,{fileExtension:S.fileExtension,extensionId:S.extensionId,fileHandlerId:S.fileHandlerId,onCancel:function(){return Y(null)},onConfirm:(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,b({fileExtension:S.fileExtension,newAssociation:{extensionId:S.extensionId,fileHandlerId:S.fileHandlerId}})];case 1:return e.sent(),Y(null),[2]}})})}):null}),u.map(function(e){return e.manifest.background?(0,p.Y)(ty,{environmentAPIs:f,extension:e},e.installationId):null})]})}var tC=t(94463),tk=t(71971),tD=t(54858),tR=t(86976);function tE(){var e=(0,en.t_)(),n=(0,tk.A)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,o=n.showMoreDetail,i=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,s=n.setSelectedFile,c=n.reviewingPrompt,u=n.onChoice,d=n.local,f=n.remote,h=[eC.wp.minHeight("7em"),eC.wp.maxHeight("50vh"),eC.wp.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,p.Y)(ek.a,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,p.FD)(ez.S,{gap:24,children:[(0,p.Y)(eW.Y9,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,p.FD)(eW.EY,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",i.length>1?"these files":"this file"," you'd like to keep."," ",i.length>1?(0,p.FD)("strong",{children:["There are ",i.length," files impacted by this."]}):""]}),t?(0,p.Y)(tR.A,{}):(0,p.FD)(p.FK,{children:[a.length?(0,p.Y)(tD.l,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){s(e.path)}}):null,o?(0,p.FD)(ez.S,{css:[eC.wp.pt(16),eC.wp.p(8),eC.wp.backgroundColor.redDimmest,eC.wp.font.code],row:!0,gap:16,justify:"start",align:"center",children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,p.FD)(eW.EY,{multiline:!1,children:["Divergence type: ",null==c?void 0:c.case]})]}):null,(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),{flexBasis:0}],children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,p.Y)(eD.ui,{elevated:!0,css:[eC.wp.flex.growAndShrink(1),eC.wp.py(8)],children:(0,p.Y)(ez.S,{css:h,children:(0,p.Y)(tC.N,{diffViewer:d})})}),(0,p.FD)(ez.S,{css:[eC.wp.pt(16)],children:[(0,p.Y)(eW.EY,{css:[eC.wp.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,p.Y)(eH.$n,{onClick:function(){u("local")},text:"Reset to Mine"})]})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),{flexBasis:0}],children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,p.Y)(eD.ui,{elevated:!0,css:[eC.wp.flex.growAndShrink(1),eC.wp.py(8)],children:(0,p.Y)(ez.S,{css:h,children:(0,p.Y)(tC.N,{diffViewer:f})})}),(0,p.FD)(ez.S,{css:[eC.wp.pt(16),eC.wp.justify.end],children:[(0,p.Y)(eW.EY,{css:[eC.wp.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,p.Y)(eH.$n,{onClick:function(){u("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var tI=t(55344),tU=t(2750),tF=t(97285),tP=t(79254),tT=t(47079),tO=t(20543),tL=t(65245),tN=t(45234),tM=t(55922),tG=t(52757),tB=t(24955),tH=t(65599),tW=t(85670),tz=t(75276),t$=t(42022);function tj(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var tq=(0,tG.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),tK=(0,eA.x)({root:[eC.wp.height(20),eC.wp.width(20),eC.wp.center]}),tZ=(0,eA.x)({root:[tK.root],pulseRoot:[tK.root,{animation:"".concat(tq," 2s infinite")}]});function tV(){var e=(0,tM.A)(),n=e.isSaving;return e.isOffline?(0,p.Y)(tH.m_,{tooltip:"Reconnecting, changes will be synced when youâ€™re online",placement:"right",children:(0,p.Y)(ez.S,{css:tZ.root,children:(0,p.Y)(tj,{size:16,color:tB.LU.redDefault})})}):n?(0,p.Y)(tH.m_,{tooltip:"Saving",placement:"right",children:(0,p.Y)(ez.S,{css:tZ.pulseRoot,children:(0,p.Y)(tW.A,{size:16,color:tB.LU.foregroundDimmest})})}):(0,p.Y)(tH.m_,{tooltip:"Saved",placement:"right",children:(0,p.Y)(ez.S,{css:tZ.root,children:(0,p.Y)(tz.A,{size:16,color:tB.LU.foregroundDimmest})})})}var tJ=t(47475),tQ=t(9408),tX=t(72068),t0=t(37787),t1=t(26030),t2=t(60221),t5=t(22846),t4=t(89094),t3=t(14740),t8=t(75165),t7=t(95235),t6=t(68522),t9=t(73197),re=t(83290),rn=t(98335),rt=t(59062),rr=t(4320),ro=t(24572),ri=t(44718),ra=t(73128);function rl(e){var n=e.filetree,t=(0,eG.A)(),r=(0,t8.xu)(),o=(0,t8.xi)(),i=(0,h.useRef)(null),a=(0,h.useRef)(null),l=(0,t0.k)(),s=(0,h.useCallback)(function(){var e=[{icon:(0,p.Y)(rt.A,{}),label:"New file",run:function(){n.create(tu.pt.File)}},{icon:(0,p.Y)(ro.A,{}),label:"New folder",run:function(){n.create(tu.pt.Directory)}},{icon:(0,p.Y)(rr.A,{}),label:t2.SS.UploadFile.text,run:function(){i.current&&(i.current.click(),(0,t3.A)({replId:t,action:"uploaded",fileType:tu.pt.File}))}}];return l&&e.push({icon:(0,p.Y)(ri.A,{}),label:t2.SS.UploadFolder.text,run:function(){a.current&&(a.current.click(),(0,t3.A)({replId:t,action:"uploaded",fileType:tu.pt.Directory}))}}),e.push({icon:(0,p.Y)(t9.A,{}),label:t2.SS.DownloadZip.text,run:function(){return(0,t4._)(t)}},{icon:o?(0,p.Y)(rn.A,{}):(0,p.Y)(re.A,{}),label:o?t2.SS.HideHiddenFiles.text:t2.SS.ShowHiddenFiles.text,run:function(){r(!o)}}),n.getExpandedDirs()&&e.push({icon:(0,p.Y)(t6.A,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,M._)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,p.Y)(X.A,{})},commands:function(){return e.map(function(e){return{match:K.G2,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[o,r,t,l,n]),c=(0,t1.EF)().openContextMenu,u=(0,h.useRef)(null);return(0,p.FD)(p.FK,{children:[(0,p.Y)(t7.K0,{alt:"menu",tooltipBehavior:"hidden",ref:u,onClick:function(){return u.current&&c({target:u.current,command:s()})},children:(0,p.Y)(ra.A,{color:tB.LU.foregroundDimmest})}),(0,p.Y)(t5.v,{fileUploadInputRef:i,dirUploadInputRef:a,uploadFiles:n.upload})]})}var rs={type:"context",icon:(0,p.Y)(X.A,{}),label:"",description:"Search"},rc=(0,eA.x)({root:[eC.wp.height(32),eC.wp.px(4),{"& > div > div label + div":[{zIndex:4}],'& [role="listbox"]':[eC.wp.position.absolute,eC.wp.top(56),eC.wp.height("calc(100% - ".concat(32,"px)")),eC.wp.left(0),eC.wp.width("100%"),eC.wp.zIndex(3),eC.wp.pt(4),{backgroundColor:tQ.s}],'& [role="option"] > div':{backgroundColor:"transparent"},'& [aria-selected="true"] > div':[eC.wp.backgroundColor.backgroundHigher]}]});function ru(){var e=(0,et.A)().fs,n=(0,eu.Sx)(),t=(0,en.q5)(),r=(0,es.J)(),o=(0,h.useMemo)(function(){var o=(0,er.g)({openFile:t,fs:e,shouldHideFile:r,getRecentFiles:n});return o.data=rs,delete o.match,o},[t,e,r,n]);return(0,p.Y)(ez.S,{css:rc.root,children:(0,p.Y)(eR.r,{fullWidth:!0,command:o,openOnInput:!0,compact:!0})})}var rd=t(26928),rp=t(75008),rf=t(1979),rh=t(18131),rg=t(96367),rm=t(98734),rv=t(63581),rw=t(50809),ry=t(30321),rb=t(48729),rS=t(2459),rY=t(30846),rx=t(10001),r_=t(85213),rA=t(42838),rC=t(33747),rk=t(47265),rD=t(8351);function rR(e){return{match:K.G2,data:{type:"action",label:"Rename",icon:(0,p.Y)(rx.A,{}),run:e}}}function rE(e){return[{label:"Copy file path",icon:(0,p.Y)(rS.A,{}),run:function(){return(0,rm.default)(e)}},{label:"Copy link",icon:(0,p.Y)(r_.A,{}),run:function(){return(0,rm.default)((0,ry.Ax)({path:e}))}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:K.G2,data:{type:"action",label:n,icon:t,run:r}}})}function rI(e){return{match:K.G2,data:{type:"action",icon:(0,p.Y)(rD.A,{color:tB.LU.redDefault}),label:"Delete",run:e}}}function rU(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,p.Y)(rb.A,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var rF=/[*]{2}\/[*]\.([a-z0-9.]+)/,rP=t(40219),rT=t(78350),rO=t(30919),rL=t(1478),rN=t(1694),rM={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,e_.FM)({cmdOrCtrl:!0,shift:!0,key:"b"})},rG=(0,rL.v)(["width","height","transform","borderColor","backgroundColor","display","resizeHandleWidth","resizeHandleTransform","resizeGripOpacity","resizeGripColor"]),rB=rG.cssVars,rH=rG.styleTokens,rW=(0,eA.x)({root:[eC.wp.borderRadius(),{position:"absolute",top:0,left:0,bottom:0,width:rH.width,height:rH.height,transform:rH.transform,display:"var(".concat(rB.display,", none)"),border:"1px solid",borderColor:rH.borderColor,zIndex:en.WO.filetreeDragLayer,backgroundColor:rH.backgroundColor}],header:[eC.wp.height(32),eC.wp.align.center,eC.wp.pl(6),eC.wp.pr(4)],headerLeft:[eC.wp.flex.growAndShrink(1)],title:{fontSize:13},content:[eC.wp.flex.growAndShrink(1),{background:"transparent"}],files:[eC.wp.flex.growAndShrink(1)],footerButtons:[eC.wp.p(4),{"& button":[{width:"calc(50% - 2px)"}]}]});function rz(e){var n,t=(e.isOpen,tQ.s),r=e.isOpen?t:"transparent";return n={},(0,nt._)(n,rB.width,e.width+"px"),(0,nt._)(n,rB.height,e.height+"px"),(0,nt._)(n,rB.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,nt._)(n,rB.display,e.isOpen?"flex":"none"),(0,nt._)(n,rB.borderColor,r),(0,nt._)(n,rB.backgroundColor,t),n}var r$=(0,h.memo)(function(){var e,n,t,r,o,i,a,l,s,c,u,f,m,v,w,y,b,S,Y,x,_,A,k,D,R,E,I,U,P,T,O,L,N,H,W,z,$,j,q,Z,V=(0,h.useRef)(null),J=(0,en.zL)().view;(0,tO.d)(V,J,rz);var ee=(e=(0,eG.A)(),t=(n=(0,d._)((0,h.useState)(null),2))[0],r=n[1],o=(0,en.q5)(),i=(0,rT.v)(),a=(0,es.J)(!0),l=(0,h.useCallback)(function(e){return!a(e.filename)},[a]),s=(0,et.A)().fs,c=(0,F.gc)("multiselectModifierKey").preferences,u=(0,en.HN)(),f="cmdOrCtrlKey"===c.multiselectModifierKey?"cmdOrCtrlKey":"altKey",m=(0,eu.Sx)(),v=(0,h.useCallback)(function(e){return(0,rO.J9)(e,m)},[m]),w=(0,C._P)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),y=(0,t1.EF)().onContextMenu,b=(0,eG.A)(),S=(0,et.A)().fs,Y=(0,en.q5)(),x=(0,en.$6)(),_=(0,en.Wx)(),A=(0,nS.Zp)(nY.P.FiletreeContextMenu),k=(0,en.C3)(),D=(0,en.OC)(),R=(0,C._P)({controlName:"flag-open-with-default",type:"boolean",default:!1}),E=(0,en.up)(),I=(0,h.useCallback)(function(e){if(R){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,o=k[t];o&&o.extensionId===n&&o.fileHandlerId===r||E(e)}},[E,R,k]),U=(0,C._P)({controlName:"flag-draft-buffers"}),P=(0,h.useCallback)(function(e,n){var t,r=e.path,o=[{data:{type:"group",key:"rename"},commands:function(){return[rR(function(){return n.rename(r)})]}}];(0,ts.m6)(r)&&U&&o.push({data:{type:"group",key:"saveFile"},commands:function(){var e;return[(e=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,S.flush(new Set([r]),tu.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})}),{match:K.G2,data:{type:"action",label:"Save file",icon:(0,p.Y)(rA.A,{}),run:e}})]}}),o.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,o=[{type:tu.pt.File,path:n}],i=!0,a=!1,l=void 0;try{for(var s,c=t()[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=(0,d._)(s.value,2),f=u[0],h=u[1];h!==tu.pt.Directory&&f!==n&&o.push({path:f,type:h})}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}var g=o.length,m=1===g?"Open":"Open ".concat(g," files");return[{label:m,icon:(0,p.Y)(re.A,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var i,a=o[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var l=i.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:m+" in split",icon:(0,p.Y)(rk.A,{}),run:function(){var e=(0,rp._)(o),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var i=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;r({path:u.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:K.G2,data:{type:"action",label:n,icon:t,run:r}}})}({path:r,getSelectedNodes:n.getSelectedNodes,openFile:Y})}});var i=function(e){var n=function(e){var n=r[e],o=(0,rf.tL)(n.glob);if(!o||!o.exec(t))return"continue";var l=rF.exec(n.glob),s=n.icon?n.icon:n.extension.manifest.icon,c=n.name?n.name:n.extension.manifest.name,d=s?(0,e3.sU)(n.extension.baseUrl,s):null;u.push({match:K.G2,data:{type:"action",icon:d?(0,p.Y)(rU,{size:16,name:c,iconUrl:d}):(0,p.Y)(re.A,{}),label:"Open with "+c,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),i({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,o=e.filetypeAssociations,i=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,s=(0,rh.QC)(t),c=s?o[s]:null,u=[];for(var d in r)n(d);return c&&s&&u.length&&u.push({match:K.G2,data:{icon:(0,p.Y)(rD.A,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:s,newAssociation:null})}}}),u}({path:r,handlers:_,filetypeAssociations:k,requestAssociateFiletype:I,associateFiletype:D,openFile:Y});return i.length&&o.push({data:{type:"group",key:"extensions"},commands:function(){return i}}),o.push({data:{type:"group",key:"copy"},commands:function(){return rE(r)}}),o.push((t=(0,G._)(function(){var e;return(0,B.YH)(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,rv.A)(r,S)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,t3.A)({replId:b,action:"duplicated",fileType:tu.pt.File}),n.rename(e),[2]}})}),{match:K.G2,data:{type:"action",label:"Duplicate file",icon:(0,p.Y)(rY.A,{}),run:t}})),o.push((0,rw.Gp)(r,S)),o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[rI(function(){return n.deleteNodes(e)})]}}),o.push({data:{type:"group",key:"extensions"},commands:(0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{filePath:r,fileType:tu.pt.File}}],[4,Promise.all(A.map((t=(0,G._)(function(n){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,e4.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),o},[Y,I,D,b,A,_,k,S,U]),T=(0,t8.xu)(),O=(0,t8.xi)(),L=(0,h.useCallback)(function(e,n){var t,r=e.path,o=r===rg.Dl,i=o?[]:[{data:{type:"group",key:"rename"},commands:function(){return[rR(function(){return n.rename(e.path)})]}}];return i.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:K.G2,data:{type:"action",icon:(0,p.Y)(X.A,{}),label:"Search this directory",run:function(){x({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),i.push.apply(i,(0,M._)((t=function(t){return n.create(t,e.path)},[{label:"Add file",icon:(0,p.Y)(rt.A,{}),run:function(){return t(tu.pt.File)}},{label:"Add folder",icon:(0,p.Y)(ro.A,{}),run:function(){return t(tu.pt.Directory)}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:K.G2,data:{type:"action",label:n,icon:t,run:r}}})))),i.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:K.G2,data:{type:"action",label:"Open shell here",icon:(0,p.Y)(rC.A,{}),run:function(){x({pane:{type:"shell",data:{initialPwd:r}},edge:"left"})}}}]}}),o||i.push({data:{type:"group",key:"copy"},commands:function(){return rE(r)}}),n.getExpandedDirs()&&i.push({match:K.G2,data:{icon:(0,p.Y)(t6.A,{}),type:"action",label:"Collapse "+(o?"all":"child folders"),run:function(){var e=n.getExpandedDirs(r);e&&n.collapse((0,M._)(e))}}}),o||i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[rI(function(){return n.deleteNodes(e)})]}}),o&&i.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:K.G2,data:{type:"action",label:(O?"Hide":"Show")+" hidden files",icon:O?(0,p.Y)(rn.A,{}):(0,p.Y)(re.A,{}),run:function(){T(!O)}}}]}}),i.push({data:{type:"group",key:"extensions"},commands:(0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{dirPath:r,fileType:tu.pt.Directory}}],[4,Promise.all(A.map((t=(0,G._)(function(n){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,e4.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),i},[O,T,A,x]),N=(0,h.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,p.Y)(X.A,{})},commands:function(){return e.type===tu.pt.Directory?L(e,n):P(e,n)}}},[P,L]),H=(0,t8.Qd)(),W=(0,tL.u)({fs:s,filter:l,fontSize:13,onFileDoubleClick:function(e,n){u(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===f?(0,rd.T$)(r):r.altKey;o({path:n,newTab:a}),i(n,{newTab:a})},onCreate:function(e){e.type===tu.pt.File&&o({opener:{paneType:(0,Q.QY)({path:e.path})},path:e.path})},multiselectModifierKey:f,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return y(e,{command:N(n,W)})},autocomplete:v,localCacheKey:w?e+":sidebar":void 0,onFileRenameStart:H,onFileRenameEnd:function(){return H(null)}}),z=(0,rP._)(),(0,h.useEffect)(function(){return W.setFileStatus(z)},[W,z]),$=(0,eu.dm)(),(0,h.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:if(null===e)return W.select(null),[2];return[4,W.select({path:e,type:tu.pt.File})];case 1:if(n.sent(),$.current!==e)return[2];return W.scrollToPath(e),[2]}})})).apply(this,arguments)}return e($.current),$.subscribe(e)},[$,W]),j=(0,en.zL)(),q=(0,eu.Mg)(),Z=(0,eu.JZ)(),(0,h.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return j.isOpen.current||j.toggle(),[4,W.select({path:e,type:tu.pt.File})];case 1:return n.sent(),W.scrollToPath(e),Z(null),[2]}})})).apply(this,arguments)}return e(q.current),q.subscribe(e)},[q,Z,W,j]),{filetree:W,activeModal:t,closeModal:function(){return r(null)}}),er=ee.filetree,eo=ee.activeModal,ei=ee.closeModal;return(0,p.FD)(p.FK,{children:[(0,p.FD)(eD.ui,{css:rW.root,innerRef:V,children:[(0,p.Y)(rj,{filetree:er}),(0,p.FD)(ez.S,{css:rW.content,children:[(0,p.Y)(ru,{}),(0,p.Y)(ez.S,{css:rW.files,dataCy:"sidebar-filetree-section",children:(0,p.Y)(tL.J,{store:er.store})}),(0,p.FD)(ez.S,{css:rW.footerButtons,row:!0,gap:4,justify:"end",align:"center",children:[(0,p.Y)(eH.$n,{dataCy:"filetree-add-file",size:"small",variant:"outlined",iconLeft:(0,p.Y)(rt.A,{}),text:"File",onClick:function(){er.create(tu.pt.File)}}),(0,p.Y)(eH.$n,{size:"small",variant:"outlined",iconLeft:(0,p.Y)(ro.A,{}),text:"Folder",onClick:function(){er.create(tu.pt.Directory)}})]})]}),(0,p.Y)(rK,{})]}),(0,p.FD)(ek.a,{isOpen:!!eo,onRequestClose:ei,children:[(null==eo?void 0:eo.type)==="conflicts"?(0,p.Y)(tN.A,{paths:eo.data.conflicts.map(function(e){return e.path}),onCancel:ei,onConfirm:function(){var e=eo.data;"move"===e.type?er.move({nodes:e.nodes,to:e.to,overwrite:!0}):er.upload({files:e.files,parentPath:e.to,overwrite:!0}),ei()}}):null,(null==eo?void 0:eo.type)==="deleteNode"?(0,p.Y)(rN.A,(0,e8._)((0,g._)({},(0,tJ.D)(eo.data.nodes)),{delete:function(){return eo.data.confirm()},hideModal:ei})):null]})]})});function rj(e){var n=e.filetree;return(0,p.FD)(ez.S,{css:rW.header,row:!0,gap:4,children:[(0,p.FD)(ez.S,{css:rW.headerLeft,row:!0,gap:4,align:"center",children:[(0,p.Y)(eW.EY,{css:rW.title,children:"Files"}),(0,p.Y)(tV,{})]}),(0,p.Y)(ez.S,{row:!0,gap:0,align:"center",children:(0,p.Y)(rl,{filetree:n})})]})}var rq=(0,eA.x)({root:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.right(0),eC.wp.height("100%"),eC.wp.center,{cursor:"ew-resize",transform:rH.resizeHandleTransform,width:rH.resizeHandleWidth}],grip:[eC.wp.center,eC.wp.height(tX.r5),eC.wp.width(2),eC.wp.borderRadius(4),{opacity:rH.resizeGripOpacity,backgroundColor:rH.resizeGripColor}]});function rK(){var e=(0,en.zL)(),n=(0,h.useRef)(null);(0,tO.d)(n,e.resizeHandleView,function(n){var t,r=e.isOpen?"translateX(calc(100% + 1px))":"translateX(100%)";return t={},(0,nt._)(t,rB.resizeGripOpacity,n.isOpen?"1":"0"),(0,nt._)(t,rB.resizeHandleTransform,r),(0,nt._)(t,rB.resizeGripColor,tB.LU.outlineDimmest),(0,nt._)(t,rB.resizeHandleWidth,n.width+"px"),t});var t=(0,h.useRef)(null);return(0,p.Y)(ez.S,{css:rq.root,innerRef:n,onPointerDown:function(n){(0,tT.j)(n,{start:function(){document.activeElement instanceof HTMLElement&&(t.current=document.activeElement),e.resize.start()},move:function(n){var t=n.delta;e.resize.update(t.x)},end:function(){var n,r;e.resize.end(),null===(r=t.current)||void 0===r||null===(n=r.focus)||void 0===n||n.call(r),t.current=null}})},children:(0,p.Y)(ez.S,{css:rq.grip})})}var rZ=t(19551),rV=t.n(rZ),rJ=t(90935),rQ=t(20521),rX=t(54341),r0=t(25204),r1=t.n(r0);function r2(){var e=(0,m._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return r2=function(){return e},e}function r5(){var e=(0,m._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return r5=function(){return e},e}var r4=(0,v.J1)(r2()),r3=(0,v.J1)(r5(),r4),r8=t(40811),r7=t(44147),r6=t(95344),r9=t(53535),oe=t(16709),on=(0,eA.x)({root:[eC.wp.rowWithGap(8),eC.wp.align.center,eC.wp.px(8),{textDecoration:"none"}],info:[eC.wp.flex.growAndShrink(1)],meta:{fontSize:10}});function ot(e){var n=e.repl,t=e.height,r=e.isActive,o=e.searchQuery,i=n.title,a=(0,h.useMemo)(function(){return o?r8.A.match(o,i):null},[o,i]);return(0,p.Y)(r1(),{legacyBehavior:!0,href:n.url,passHref:!0,children:(0,p.FD)(ez.D.a,{style:{height:t},css:on.root,children:[(0,p.Y)(r6.Ay,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,p.FD)(ez.S,{css:on.info,gap:2,children:[(0,p.Y)(r9.e,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,p.FD)(eW.EY,{css:on.meta,color:"dimmest",multiline:!1,children:[n.owner.username," â€¢ edited ",(0,r7.K)(n.timeUpdated)]})]})]})})}function or(){return(or=(0,G._)(function(e){var n;return(0,B.YH)(this,function(t){switch(t.label){case 0:if(!eB.V)throw Error("Expected apolloClient");return[4,eB.V.query({query:r3,variables:e})];case 1:return[2,(null===(n=t.sent().data.currentUser)||void 0===n?void 0:n.search.repls.filter(function(e){return!!e.owner}))||[]]}})})).apply(this,arguments)}var oo=t(69932),oi=t(98427),oa=t(72602),ol=t(976),os=t(46086),oc=["isLayoutStacked","fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","chatAudioNotification","multiselectModifierKey","completeCodeEngine","codeSuggestion","chatEngine","ghostwriterModelSelection"],ou=t(84504),od=t(22380),op=t(99182),of=t(78385),oh=t(20387),og=t(78563),om=t(40904),ov=t(95427),ow=t(30433),oy=t(4595),ob=t(50514),oS=t(41725),oY=t(2091),ox=t(34605);function o_(e){return(0,p.FD)(t$.Ay,(0,e8._)((0,g._)({},e),{children:[(0,p.Y)("path",{d:"M15.721.681A2.137 2.137 0 0 1 18.146.28l4.638 2.233a2.142 2.142 0 0 1 1.213 1.93v.299h-.735v-.303c0-.54-.31-1.033-.797-1.267L17.828.942a1.403 1.403 0 0 0-1.6.272c.485-.486 1.294-.195 1.396.445l-.115-.055a.667.667 0 0 0-.762.13l-.016.015-8.786 8.01-1.19-.902L15.72.68Z"}),(0,p.Y)("path",{d:"m17.634 5.968-7.343 5.571 1.215.922 6.128-4.649V5.968ZM6.798 14.189l1.104 1.006-3.975 3.016a1.673 1.673 0 0 1-2.136-.095l-1.24-1.128a1.673 1.673 0 0 1-.002-2.473l3.303-3.012 1.09.994-3.403 3.104a.203.203 0 0 0 0 .3l1.24 1.128c.073.066.182.07.26.011l3.759-2.851Z"}),(0,p.Y)("path",{d:"M16.228 22.786c.42.421 1.063.53 1.6.272l4.637-2.23c.487-.234.797-.727.797-1.267v-.302H24v.298c0 .824-.472 1.575-1.214 1.933l-4.639 2.233a2.14 2.14 0 0 1-2.428-.402L.547 9.488a1.676 1.676 0 0 1 .002-2.479l1.24-1.127a1.676 1.676 0 0 1 2.14-.095l13.705 10.397v1.852L3.037 6.964a.2.2 0 0 0-.255.01l-1.24 1.128a.2.2 0 0 0 0 .296l15.2 13.86.007.007c.2.2.504.252.758.13l.117-.057c-.1.643-.91.936-1.396.45Z"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M16.576 1.562 15.88.865A1.896 1.896 0 0 1 18.04.497l4.637 2.23a1.9 1.9 0 0 1 1.077 1.712v15.122a1.9 1.9 0 0 1-1.076 1.712l-4.638 2.23a1.896 1.896 0 0 1-2.162-.368l.697-.698c.209.209.565.061.565-.234V1.797a.331.331 0 0 0-.565-.235Zm1.541 20.81 4.134-1.988a.914.914 0 0 0 .518-.823V4.439a.914.914 0 0 0-.518-.823l-4.134-1.988c.007.055.01.111.01.169v20.406c0 .058-.003.114-.01.169Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M15.706.692a2.141 2.141 0 0 1 2.441-.416l4.638 2.23A2.145 2.145 0 0 1 24 4.44v15.122c0 .824-.473 1.575-1.215 1.933l-4.637 2.229a2.14 2.14 0 0 1-2.442-.415l-.173-.173 1.043-1.044.173.173a.086.086 0 0 0 .147-.06V1.796a.086.086 0 0 0-.147-.061l-.173-.174-.173.174-.87-.87.173-.174Zm.908.562a.577.577 0 0 1 .772.543v20.406a.577.577 0 0 1-.773.544l-.375.375a1.65 1.65 0 0 0 1.697.16l4.637-2.23c.574-.276.938-.855.938-1.491V4.439c0-.636-.364-1.215-.938-1.491L17.935.718a1.651 1.651 0 0 0-1.697.16l.376.376Zm1.207-.04 4.316 2.075.107-.224.442.213-.12.247c.28.217.448.553.448.914v15.122c0 .445-.255.85-.657 1.044l-4.536 2.181.053-.444c.006-.044.009-.09.009-.139V1.797c0-.048-.003-.095-.009-.14l-.053-.443Zm.551.808v19.956l3.773-1.815a.669.669 0 0 0 .379-.602V4.439a.669.669 0 0 0-.379-.602l-3.773-1.815Z",clipRule:"evenodd"})]}))}var oA={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,nt._)({},rJ._9.DesktopApp,(0,e_.FM)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,nt._)({},rJ._9.DesktopApp,(0,e_.FM)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,nt._)({},rJ._9.DesktopApp,(0,e_.FM)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,nt._)({},rJ._9.DesktopApp,(0,e_.FM)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,nt._)({},rJ._9.DesktopApp,(0,e_.FM)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,e_.FM)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:eo.G},run:{id:"repl.run",name:"Run Repl",default:(0,e_.FM)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,e_.FM)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,e_.FM)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,nt._)({},rJ._9.DesktopApp,(0,e_.FM)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,e_.FM)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},oC=Object.values(oA);let ok=(0,h.memo)(function(e){var n,t,r,o,i,a,l,s,c,u,d,f=e.isAdmin,h=e.isSubscribed,g=ex(),m=(0,eu.Sx)(),v=(0,et.A)(),w=v.fs,y=v.container,b=v.runner,S=(0,oh.jP)(),Y=(0,oh.g3)(),x=(0,og.Z)(),_=x.fork,A=x.isForking,k=(0,oh.Ah)(b),D=(0,es.J)(),R=(0,en.q5)(),I=(0,en.x6)(),U=(0,en.LG)(),T=(0,en.wR)(),L=(0,en.Ou)(),N=(0,en.l7)(),H=(0,en.Ot)(),W=(0,en.Fr)(),$=(0,en.zn)(),j=(0,en.ah)(),q=(0,en.wI)(),V=(0,en.IT)().toggleMaximizePane,Q=(0,en.RI)(),X=(0,en.Rk)(),ei=(0,en.V2)(),ea=(0,en.yT)(),el=(0,ec.eq)($),ed=(0,O.pE)("replUrl","string"),ep=(0,eG.A)(),ef=(0,rX.A)(),eh=(0,en.ir)(),eg=(0,en.Us)(),em=(0,en.ni)(),ew=(0,eX.A)(),ey=(0,op.A)(),eS=(0,e2.A)(y),eY=(0,eK.A)().showNotice,e_=(0,of.A)("vscode"),eA=e_.openEditor,eC=e_.onConfirmConfig,eD=e_.isConfigModalOpen,eR=e_.closeConfigModal,eU=rV()(function(e){return(0,z.u4)(z.AZ.PROJECT_RAN,{replId:ep,placement:e})},500);(0,eb.SJ)(function(){return[oA.saveAllFiles.id,function(){w.flush(void 0,tu.sT.MANUAL_SAVE)}]},[w]),(0,eb.SJ)(function(){return[oA.newTab.id,function(){return I()}]},[I]),(0,eb.SJ)(function(){return[oA.nextTab.id,function(){return H("next")}]},[H]),(0,eb.SJ)(function(){return[oA.previousTab.id,function(){return H("previous")}]},[H]),(0,eb.SJ)(function(){return[oA.closeTab.id,function(){return U()||eh()>0}]},[U,eh]),(0,eb.SJ)(function(){return[oA.reopenClosedTab.id,function(){return L()}]},[L]),(0,eb.SJ)(function(){return[oA.moveTabUpGroup.id,function(){return T("above")}]},[T]),(0,eb.SJ)(function(){return[oA.moveTabRightGroup.id,function(){return T("rightOf")}]},[T]),(0,eb.SJ)(function(){return[oA.moveTabLeftGroup.id,function(){return T("leftOf")}]},[T]),(0,eb.SJ)(function(){return[oA.moveTabDownGroup.id,function(){return T("below")}]},[T]),(0,eb.SJ)(function(){return $?[oA.keepTab.id,function(){return W($)}]:void 0},[$,W]),(0,eb.SJ)(function(){return $?[oA.insertPaneGroupUp.id,function(){return ea({paneId:$,placement:"above",autoFocus:!0})}]:void 0},[$]),(0,eb.SJ)(function(){return $?[oA.insertPaneGroupRight.id,function(){return ea({paneId:$,placement:"rightOf",autoFocus:!0})}]:void 0},[$]),(0,eb.SJ)(function(){return $?[oA.insertPaneGroupLeft.id,function(){return ea({paneId:$,placement:"leftOf",autoFocus:!0})}]:void 0},[$]),(0,eb.SJ)(function(){return $?[oA.insertPaneGroupDown.id,function(){return ea({paneId:$,placement:"below",autoFocus:!0})}]:void 0},[$]),(0,eb.SJ)(function(){return[eE.id,function(){return g()}]},[g]);var eF=(0,eb.Jn)(oA.findFile.id);(0,eb.SJ)(function(){return[oA.findFile.id,function(){return g(er.g({openFile:R,fs:w,shouldHideFile:D,getRecentFiles:m,keyboardShortcut:eF}))}]},[g]);var eP=ev({type:"files"});eI(er.g({openFile:R,fs:w,shouldHideFile:D,getRecentFiles:m,getCurrentlyOpenFilePanesCommands:eP,keyboardShortcut:eF}));var eT=(0,eb.Jn)(oA.searchFileContents.id),eO=(0,en.Us)();(0,eb.SJ)(function(){return[oA.searchFileContents.id,function(){(0,z.u4)(z.AZ.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==el?void 0:el.type)==="codeEditor"&&(n=null===(e=el.getCurrentSelectionText)||void 0===e?void 0:e.call(el)),eO({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[el,eO]),(0,eb.SJ)(function(){return $?[oA.toggleFloatPaneGroup.id,function(){return q($)}]:void 0},[$]),(0,eb.SJ)(function(){return $?[oA.toggleMaximizePaneGroup.id,function(){return V($)}]:void 0},[$]),(0,eb.SJ)(function(){return j?[oA.removePaneGroup.id,function(){Q({paneGroupId:j}),ei()}]:void 0},[j]),(0,eb.SJ)(function(){return $?[oA.removeOthersInPaneGroup.id,function(){X($)}]:void 0},[$]),(0,eb.SJ)(function(){return[oA.moveFocusUp.id,function(){return N("above")}]},[]),(0,eb.SJ)(function(){return[oA.moveFocusDown.id,function(){return N("below")}]},[]),(0,eb.SJ)(function(){return[oA.moveFocusRight.id,function(){return N("rightOf")}]},[]),(0,eb.SJ)(function(){return[oA.moveFocusLeft.id,function(){return N("leftOf")}]},[]);var eL=(0,C._P)({controlName:"flag-modal-panes"});eI(ee(function(e){if(eL){em(e.pane);return}eg(e)})),eI(J(function(e){if(eL){em(e.pane);return}eg(e)})),eI(eo.Y({container:y,keyboardShortcut:eT,openFile:R})),(0,eb.SJ)(function(){return k===ou.ll.OFFLINE?void 0:S&&Y?[oA.run.id,function(){var e,n;(null==Y?void 0:Y.step)===ou.ll.RUNNING&&(null===(n=Y.stop)||void 0===n||n.call(Y)),eU("shortcut_cmd_enter"),null===(e=Y.run)||void 0===e||e.call(Y,ou.QG.KEYBOARD_SHORTCUT)}]:[oA.run.id,function(){k===ou.ll.RUNNING&&b.stopRun(),eU("shortcut_cmd_enter"),b.run(ou.QG.KEYBOARD_SHORTCUT)}]},[k,S,null==Y?void 0:Y.step]);var eN=(0,eb.Jn)(oA.run.id);eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(ow.A,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){rQ.M.openNewWindow()}}},{enabled:ef}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(oy.A,{}),label:"Run",description:"Run Repl",run:function(){b.run(ou.QG.KEYBOARD_SHORTCUT)},keyboardShortcut:eN}},{enabled:k===ou.ll.IDLE}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(ox.A,{}),label:"Stop",description:"Stop Repl",run:function(){b.stopRun()}}},{enabled:k===ou.ll.RUNNING}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(ob.A,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){y.exec("kill","1")}}},{enabled:f}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(om.A,{}),label:"Open development URL",run:function(){if(!eS)throw Error("Expected dotdevUrl");window.open(eS,"_blank")}}},{enabled:!0}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(ov.A,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!ed)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(ed);window.open(e,"_blank")}}},{enabled:!ef}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(o_,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,z.u4)(z.AZ.OPEN_IN_VSCODE_CLICKED,{source:"command_bar",editor:"vscode"}),eA()}}},{enabled:!!ew&&h}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(rY.A,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!ew)throw Error("Expected sshConfig");var e=ew.sshPort,n=ew.sshUser,t=ew.sshHostname,r="ssh -i ".concat(ey,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,z.u4)(z.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,rm.default)(r),eY("Copied SSH command")}}},{enabled:!!ew&&h}),eI((t=(n={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,r=n.onRun,o=(0,eq.A)(r),(0,P.A)(function(){return{match:(0,K.u4)({defaultScore:Z.q.myRepls}),data:{type:"context",label:"My Apps",icon:(0,p.Y)(oe.A,{}),description:t},commands:function(e){var n=e.searchQuery,t=e.active;return(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2,[]];return[4,function(e){return or.apply(this,arguments)}({query:n,count:50})];case 1:return[2,e.sent().map(function(e){var t,r,i,a;return r=(t={repl:e,searchQuery:n,run:function(){return o.current(e)}}).repl,i=t.searchQuery,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,p.Y)(ot,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,p.Y)(r6.Ay,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})})()}}},[t,o]))),eI({match:(0,K.u4)({defaultScore:Z.q.fork}),data:{type:"action",label:"Remix",icon:(0,p.Y)(oS.A,{}),description:"Remix App",run:function(){A||_()}}}),a=(i=F.gc.apply(void 0,(0,M._)(oc))).preferences,l=i.update,s=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,z.u4)(z.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),l(e)},u=(c=(0,tv.D)()).setActiveTheme,d=c.theme,eI({match:(0,K.u4)({defaultScore:Z.q.settings,matchScoreMultiplier:Z.B.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,p.Y)(os.A,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,K.u4)({defaultScore:Z.q.settings,matchScoreMultiplier:Z.B.settings}),data:{type:"context",label:"Theme",icon:(0,p.Y)(ol.A,{}),description:"Change Replit Theme"},commands:function(){return oi.U.map(function(e){return{match:(0,K.u4)({defaultScore:Z.q.settings,matchScoreMultiplier:Z.B.settings}),data:{type:"action",label:e.title,icon:d.id===e.id?(0,p.Y)(oa.A,{}):(0,p.Y)(os.A,{opacity:0}),description:"Use "+e.title+" theme "+(d.id===e.id?" (current)":""),run:function(){u(e.id)}}}})}},o=Object.values(oo.KY).filter(function(e){return -1!==oc.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,K.u4)({defaultScore:Z.q.settings,matchScoreMultiplier:Z.B.settings}),data:{type:"context",label:e.name,icon:(0,p.Y)(os.A,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=a[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,K.u4)({defaultScore:Z.q.settings,matchScoreMultiplier:Z.B.settings}),data:{type:"action",label:n.title,icon:r?(0,p.Y)(oa.A,{}):(0,p.Y)(os.A,{opacity:0}),description:n.description,run:function(){return(0,G._)(function(){return(0,B.YH)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,s((0,nt._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,M._)(o).concat([r])}},{enabled:!0});var eM=(0,E.Wq)(),eB=(0,E.jt)();return eI({match:K.KK,data:{type:"action",label:"Show ".concat(E.g$," chat"),icon:(0,p.Y)(oY.A,{}),run:function(){eM()}}},{enabled:f&&!eB}),(0,p.Y)(p.FK,{children:(0,p.Y)(ek.a,{isOpen:eD,onRequestClose:eR,centered:!0,children:(0,p.Y)(od.A,{onConfirm:eC})})})});var oD=t(9491),oR=t(18682),oE=t(44087),oI=t(62514),oU=t(84761),oF=t(48701),oP=(0,tG.i7)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),oT=(0,eA.x)({root:[eC.wp.color.foregroundDimmest,eC.wp.position.relative,eC.wp.width("100%"),eC.wp.height("100%"),{overflow:"hidden"}],arrows:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),eC.wp.flex.row,eC.wp.flex.wrap,eC.wp.width("200%"),eC.wp.height("200%"),{animationName:oP,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[eC.wp.width("50%"),eC.wp.height("50%"),eC.wp.center]});function oO(e){var n=e.delay,t=e.duration;return(0,p.Y)(ez.S,{css:oT.root,children:(0,p.FD)(ez.S,{css:oT.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,p.Y)(ez.S,{css:oT.arrow,children:(0,p.Y)(oI.A,{size:12})}),(0,p.Y)(ez.S,{css:oT.arrow,children:(0,p.Y)(oU.A,{size:12})}),(0,p.Y)(ez.S,{css:oT.arrow,children:(0,p.Y)(oa.A,{size:12})}),(0,p.Y)(ez.S,{css:oT.arrow,children:(0,p.Y)(oF.A,{size:12})})]})})}var oL=t(16530),oN=t(70953),oM=t(53323),oG=(0,eA.x)({root:[eC.wp.position.relative],circle:[eC.wp.top(-6),eC.wp.right(-6),eC.wp.minWidth(12),eC.wp.borderRadius(8),eC.wp.position.absolute,eC.wp.backgroundColor.backgroundHighest,eC.wp.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:tB.LU.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function oB(e){var n=e.count,t=(0,oL._)(e,["count"]);return(0,p.FD)(ez.S,{css:oG.root,children:[(0,p.Y)(oN.A,(0,g._)({},t)),(0,p.Y)(ez.S,{css:[oG.circle,oG.count],children:n})]})}function oH(){return(0,p.FD)(ez.S,{css:oG.root,children:[(0,p.Y)(oN.A,{}),(0,p.Y)(ez.S,{css:oG.circle,children:(0,p.Y)(oa.A,{size:6})})]})}function oW(e){var n=e.paneId,t=e.paneGroupId,r=(0,Q.Vv)(),o=(0,en.KN)(n),i=(0,en.MC)(),a=(0,en._3)(),l=(0,en.Rk)(),s=(0,en.hR)({paneId:n}),c=(0,en.C0)({paneGroupId:t});return(0,P.A)(function(){var e=r.getTitle(o),t=[{match:K.G2,data:{type:"action",label:"Close "+e,icon:(0,p.Y)(oN.A,{}),run:function(){i(n)}}}];return c&&c>1&&(null!==s&&s<c-1&&t.push({match:K.G2,data:{type:"action",label:"Close to the right",icon:(0,p.Y)(oH,{}),run:function(){a(n)}}}),t.push({match:K.G2,data:{type:"action",label:"Close all other tabs",icon:(0,p.Y)(oB,{count:c-1}),run:function(){l(n)}}})),t},[r,o,c,s,i,n,a,l])}function oz(){var e=(0,en.aJ)(),n=(0,en.Fr)();return(0,h.useCallback)(function(t){var r=e(t),o=r.isCommitted,i=r.pane;return!o&&(0,Q.xS)(i)?{match:K.G2,data:{type:"action",label:"Keep open",icon:(0,p.Y)(oM.A,{}),run:function(){return n(t)}}}:null},[e,n])}var o$=t(3274),oj=t(17504);function oq(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 10.75H3A1.75 1.75 0 0 1 1.25 9V3ZM3 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6A.25.25 0 0 0 9.25 9V3A.25.25 0 0 0 9 2.75H3ZM13.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 10.75h-6A1.75 1.75 0 0 1 13.25 9V3ZM15 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25V3a.25.25 0 0 0-.25-.25h-6ZM1.25 15c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 22.75H3A1.75 1.75 0 0 1 1.25 21v-6ZM3 14.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25H3Zm10.25.25c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 22.75h-6A1.75 1.75 0 0 1 13.25 21v-6Zm1.75-.25a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25h-6Z",clipRule:"evenodd"})}))}var oK=new Map([["left",{label:"Move Left",icon:(0,p.Y)(oU.A,{})}],["right",{label:"Move Right",icon:(0,p.Y)(oa.A,{})}],["up",{label:"Move Up",icon:(0,p.Y)(oF.A,{})}],["down",{label:"Move Down",icon:(0,p.Y)(oI.A,{})}]]);function oZ(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H9.75v10.5H19c.69 0 1.25-.56 1.25-1.25V9.75Zm-12 10.5V9.75h-4.5V19c0 .69.56 1.25 1.25 1.25h3.25Z",clipRule:"evenodd"})}))}var oV=new Map([["leftOf",{label:"Move Left",icon:(0,p.Y)(oU.A,{})}],["rightOf",{label:"Move Right",icon:(0,p.Y)(oa.A,{})}],["above",{label:"Move Up",icon:(0,p.Y)(oF.A,{})}],["below",{label:"Move Down",icon:(0,p.Y)(oI.A,{})}]]),oJ=t(75820);function oQ(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}var oX=t(97551),o0=t(25986),o1=t(8609),o2=new Map([["leftOf",{commandId:oA.insertPaneGroupUp.id,label:"Insert Left",icon:(0,p.Y)(rk.A,{})}],["rightOf",{commandId:oA.insertPaneGroupRight.id,label:"Insert Right",icon:(0,p.Y)(o0.A,{})}],["above",{commandId:oA.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,p.Y)(o1.A,{})}],["below",{commandId:oA.insertPaneGroupDown.id,label:"Insert Down",icon:(0,p.Y)(oX.A,{})}]]);function o5(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M14.25 3a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0V4.81l-5.72 5.72a.75.75 0 1 1-1.06-1.06l5.72-5.72H15a.75.75 0 0 1-.75-.75Zm-3.72 10.47a.75.75 0 0 1 0 1.06l-5.72 5.72H9a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})}))}function o4(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M21.53 2.47a.75.75 0 0 1 0 1.06l-5.72 5.72H20a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0ZM4 14.75a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H4Z",clipRule:"evenodd"})}))}function o3(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}var o8=t(62578),o7=t(34805),o6=t(54867),o9=t(55337);function ie(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}function it(e){var n,t,r,o,i,a,l,s,c=e.paneId,u=(n=(0,Q.Vv)(),t=(0,ed.N0)(),r=(0,en.Mm)(),(0,h.useCallback)(function(){return{data:{type:"context",label:ef.Ve,icon:(0,p.Y)(em.A,{})},commands:function(){return t().map(function(e){return{match:K.G2,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,z.u4)(z.AZ.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:c,pane:e})}}}})}}},[t,n,r,c])),d=(o=(0,eu.Sx)(),i=(0,eu.L4)(),a=(0,en.Mm)(),(0,h.useCallback)(function(){var e=i(),n=o().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,p.Y)(eh.A,{})},commands:function(e){var t=e.searchQuery;return(0,er.h)({paths:n,searchQuery:t,run:function(e){a({paneId:c,pane:{type:(0,Q.QY)({path:e}),data:{path:e}}})}})}}},[o,a,c,i])),f=(l=(0,et.A)().fs,s=(0,en.Mm)(),(0,P.A)(function(){return{match:K.G2,data:{type:"context",label:"Files",icon:(0,p.Y)(oM.A,{})},commands:function(e){var n=e.searchQuery,t=e.active;return(0,G._)(function(){var e;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((e=r.sent()).error)return[2,[]];if(!e.files)throw Error("Expected files");return[2,(0,er.h)({paths:e.files,searchQuery:n,run:function(e){s({paneId:c,pane:{type:(0,Q.QY)({path:e}),data:{path:e}}})}})]}})})()}}},[l,s,c]));return(0,P.A)(function(){return{match:K.G2,data:{type:"context",label:"Change tab",icon:(0,p.Y)(ie,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[d(),f,u()]:[]}}},[d,u,f])}var ir=(0,tG.AH)(eC.wp.center,{fontSize:tB.LU.fontSizeSmall,border:"1px solid",borderColor:tB.LU.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},eC.wp.borderRadius(8));function io(e){return(0,p.Y)(ez.S,{css:ir,children:(0,p.Y)(ez.S,{css:{lineHeight:1},children:e.count})})}var ii=t(6083),ia=(0,H.eU)([]);function il(e,n){var t=n.run,r=n.enabled,o=void 0===r||r,i=(0,W.Xr)(ia);(0,h.useEffect)(function(){if(o){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return i(function(e){return(0,M._)(e).concat((0,M._)(n))}),function(){i(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,i,o])}function is(){var e=(0,W.md)(ia);return(0,h.useEffect)(function(){var n=function(n){var t=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l,s=i.value,c=s.shortcut,u=s.run;!!c.cmdOrCtrlKey==!!(0,rd.T$)(n)&&!!c.altKey==!!n.altKey&&!!c.shiftKey==!!n.shiftKey&&(null===(l=c.key)||void 0===l?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),u(c))}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var ic=t(73943),iu=(0,eA.x)({overlay:[eC.wp.p(16),eC.wp.position.absolute,eC.wp.overflow("hidden"),eC.wp.zIndex(en.WO.overlay)],surface:[eC.wp.position.relative,eC.wp.borderRadius(8),eC.wp.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:tB.LU.outlineDefault,opacity:0},eC.wp.shadow(3)],innerSurface:[eC.wp.flex.growAndShrink(1),eC.wp.borderRadius(8)]}),id=(0,eA.x)({root:[eC.wp.p(8),{borderTop:"1px solid",borderColor:tB.LU.outlineDimmer}],row:[eC.wp.rowWithGap(2),eC.wp.align.center,eC.wp.justify.spaceBetween]});function ip(){var e=(0,e_.Kg)();return(0,p.FD)(ez.S,{css:id.root,gap:8,children:[(0,p.FD)(ez.S,{css:id.row,children:[(0,p.Y)(eW.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,p.FD)(ez.S,{row:!0,gap:4,children:[(0,p.Y)(eb._y,{keyCombo:"".concat(e),small:!0}),(0,p.Y)(ii.Js,{text:(0,p.Y)(oO,{duration:6e3,delay:6e3})})]})]}),(0,p.FD)(ez.S,{css:id.row,children:[(0,p.Y)(eW.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,p.FD)(ez.S,{row:!0,gap:4,children:[(0,p.Y)(eb._y,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,p.Y)(ii.Js,{text:(0,p.Y)(oO,{duration:6e3,delay:1500})})]})]})]})}var ih=(0,h.memo)(function(){var e=function(){var e=(0,en.qN)(),n=(0,en.zS)();if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,o=t.height,i=t.transform,a={border:"1px solid",borderColor:tB.LU.accentPrimaryStronger,borderRadius:tB.LU.borderRadius6,boxShadow:tB.LU.shadow3,transitionProperty:"transform, height, width",transitionDuration:ic.Ds.duration,transitionTimingFunction:ic.Ds.timingFunction};return(0,g._)({width:r,height:o,transform:i},e?void 0:a)}}(),n=(0,en.V2)(),t=(0,oR.A)(n,[]);return(0,h.useEffect)(function(){var e=setTimeout(function(){(0,oE.U)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,p.Y)(oD.n1,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,p.Y)(ez.S,{style:e,css:iu.overlay,align:"end",children:(0,p.Y)(eD.ui,{innerRef:t,elevated:!0,css:iu.surface,children:(0,p.Y)(eD.ui,{css:iu.innerSurface,elevated:!0,children:(0,p.Y)(iw,{})})})})})}),ig={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},im={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},iv=Object.keys(ig),iw=(0,h.memo)(function(){var e=(0,en.l7)(),n=(0,en.cK)(),t=(0,en.ul)(),r=(0,en.qN)();il({key:"Escape"},{run:function(){t()}}),il(iv.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(ig[n.key])},enabled:!r}),il(iv.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:im[e.key]})},enabled:!r});var o=(0,en.LR)();return o&&"sidebar"!==o.target?(0,p.Y)(iy,{paneGroupId:o.paneGroupId,paneId:o.paneId}):null});function iy(e){var n,t,r,o,i,a,l,s,c,u,f,h,m,v,w,y,b,S,Y,x,_,A,C,k,D,R,E,I,U,F,T,O,L,N,G,B,H,W,$,j,q,Z,V,J,X,ee,et,er,eo,ei,ea,el,es,eu,ed,ep,ef,eh,em,ev,ew,ey,eS,eY,ex,e_,eA,eC,ek,eD,eE,eI,eU,eF,eP,eT,eO,eL=(0,en.qN)(),eN=(0,en.V2)(),eM=(0,en.ul)(),eG=(ef=e.paneGroupId,ev=(em={paneId:eh=e.paneId,paneGroupId:ef}).paneId,ew=em.paneGroupId,ey=(0,Q.Vv)(),eS=(0,en.KN)(ev),eY=(0,ec.eq)(ev),ex=oz(),e_=oW({paneId:ev,paneGroupId:ew}),eA=(0,P.A)(function(){var e=ey.getTitle(eS),n=function(e){return!!e&&(void 0===e?"undefined":(0,nr._)(e))==="object"&&"data"in e},t=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,t;return(null!==(t=null==eY?void 0:null===(e=eY.commands)||void 0===e?void 0:e.flatMap(function(e){return e.commands}))&&void 0!==t?t:[]).filter(n)}},{data:{type:"group",key:"pane-close"},commands:function(){return[ex(ev)].concat((0,M._)(e_)).filter(n)}}];return{match:K.G2,data:{type:"context",label:e,icon:(0,p.Y)(ey.Icon,{pane:eS})},commands:function(e){var n=e.active,r=e.searchQuery;return n||r?t:[]}}},[eS,eY,ey,ev,e_,ex]),ek=(eC={paneId:eh,paneGroupId:ef}).paneGroupId,eD=eC.paneId,eE=(0,en.kU)(),eI=(0,Q.Vv)(),eU=(0,en.rQ)(),eF=(0,en.wl)(),eP=it({paneId:eD}),eT=(0,P.A)(function(){var e=eE.tiling,n=eE.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:K.G2,data:{type:"action",label:"New tab",icon:(0,p.Y)(eg.A,{}),run:function(){eF({paneGroupId:ek,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[eP,{match:K.G2,data:{type:"context",label:(0,o7.A)("Tab",t),icon:(0,p.Y)(io,{count:t})},commands:function(t){var o=t.active,i=t.searchQuery;if(!(o||i))return[];var a=(0,M._)(e).concat((0,M._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1];return{match:K.G2,data:{type:"action",label:eI.getTitle(r),icon:(0,p.Y)(eI.Icon,{pane:r}),run:function(){eU({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[eP,r]},[eE,eI,eU,eF,ek,eP]),er=(n={paneGroupId:ef,paneId:eh}).paneGroupId,ei=(i=(t={paneId:eo=n.paneId,paneGroupId:er}).paneId,a=t.paneGroupId,l=(0,en.uG)(a),s=(0,oj.A)(l.isMaximized),c=(0,oj.A)(l.isFloating),u=!s&&!c,f=(r=(0,oJ.RI)(),o=(0,en.yT)(),(0,P.A)(function(){return(0,M._)(o2.entries()).map(function(e){var n,t,a=(0,d._)(e,2),l=a[0],s=a[1],c=s.commandId,u=s.label,p=s.icon;return{match:K.G2,data:{label:u,icon:p,type:"action",keyboardShortcut:null!==(t=null===(n=r.get(c))||void 0===n?void 0:n.shortcut)&&void 0!==t?t:void 0,run:function(){o({placement:l,paneId:i,autoFocus:!0}),(0,z.u4)(z.AZ.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[r,o,i])),(0,P.A)(function(){return u?[{match:K.G2,data:{type:"context",label:"Add pane",icon:(0,p.Y)(oQ,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?f:[]}}]:[]},[u,f])),ea=(h=(0,en.h7)(eo),m=(0,en.qN)(),v=(0,oj.A)(h.isFloating),w=!m&&!v,y=(0,en.wR)(),(0,P.A)(function(){var e=(0,M._)(oV.entries()).map(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1],o=r.label,i=r.icon;return{match:K.G2,data:{label:o,icon:i,type:"action",run:function(){y(t)}}}});return w?[{match:K.G2,data:{type:"context",label:"Move tab",icon:(0,p.Y)(oZ,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[w,y])),el=(b=(0,en.uG)(er),S=(0,oj.A)(b.isMaximized),Y=(0,oj.A)(b.isFloating),x=!S&&!Y,_=(0,en.cK)(),(0,P.A)(function(){var e=(0,M._)(oK.entries()).map(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1],o=r.label,i=r.icon;return{match:K.G2,data:{label:o,icon:i,type:"action",run:function(){_({direction:t})}}}});return x?[{match:K.G2,data:{type:"context",label:"Move group",icon:(0,p.Y)(oq,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[x,_])),es=(C=(A=(0,en.IT)()).maximizePaneGroup,k=A.restoreMaximizedPaneGroup,D=(0,en.uG)(er),R=(0,oj.A)(D.isMaximized),E=(0,en.$P)(),I=(0,eb.Jn)(oA.toggleMaximizePaneGroup.id),(0,P.A)(function(){return R?E?[]:[{match:K.G2,data:{type:"action",label:"Restore",icon:(0,p.Y)(o4,{}),run:function(){return k()},keyboardShortcut:I}}]:[{match:K.G2,data:{type:"action",label:"Maximize",icon:(0,p.Y)(o5,{}),run:function(){return C({paneGroupId:er})},keyboardShortcut:I}}]},[R,I,E,k,C,er])),eu=(U=(0,en.RI)(),F=(0,en.V2)(),T=(0,en.$P)(),O=(0,eb.Jn)(oA.removePaneGroup.id),(0,P.A)(function(){return T?[]:[{match:K.G2,data:{type:"action",label:"Close",icon:(0,p.Y)(oN.A,{}),run:function(){F(),U({paneGroupId:er})},keyboardShortcut:O}}]},[F,U,T,O,er])),ed=(N=(L={paneId:eo,paneGroupId:er}).paneId,G=L.paneGroupId,B=(0,en.wI)(),H=(0,en.uG)(G),W=(0,oj.A)(H.isMaximized),$=(0,oj.A)(H.isFloating),j=(0,eb.Jn)(oA.toggleFloatPaneGroup.id),(0,P.A)(function(){return W?[]:[{match:K.G2,data:{type:"action",label:$?"Unfloat":"Float",icon:$?(0,p.Y)(o8.A,{}):(0,p.Y)(ow.A,{}),keyboardShortcut:j,run:function(){B(N)}}}]},[N,B,j,$,W])),ep=(q={paneId:eo,paneGroupId:er},Z=(0,en.uG)(q.paneGroupId),V=(0,en.h7)(q.paneId),J=(0,en.Hz)(q.paneGroupId),X=(0,en.t3)(),ee=(0,en.SA)(),et=(0,oj.A)(Z.isMaximized),(0,P.A)(function(){return et?[]:[{match:K.G2,data:{type:"action",label:"New window",icon:(0,p.Y)(o3,{}),run:function(){var e=(0,o$.A)(),n=X().filter(function(e){var n=(0,d._)(e,1)[0];return J.panes.current.includes(n)});ee({popupId:e,state:{sidebarPercent:0,type:"saved",layout:{floating:[],tiling:{id:(0,o$.A)(),type:"paneGroup",percent:100,activeIndex:J.activeIndex.current,panes:J.panes.current}},data:n.reduce(function(e,n){var t=(0,d._)(n,2),r=t[0],o=t[1];return(0,e8._)((0,g._)({},e),(0,nt._)({},r,o))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(V.size.current.height,"px,width=").concat(V.size.current.width,"px")),(0,z.u4)(z.AZ.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,d._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,d._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,d._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,d._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[et,J.activeIndex,J.panes,X,ee,V.size])),eO=(0,P.A)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,M._)(ei).concat((0,M._)(ea),(0,M._)(el),(0,M._)(es),(0,M._)(ed),(0,M._)(ep),(0,M._)(eu))}}]},[ei,ea,el,es,ed,ep,eu]),(0,P.A)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[eA].concat((0,M._)(eT),(0,M._)(eO))}}},[eA,eT,eO]));return(0,p.Y)(eR.r,{iconBreadcrumbs:!0,command:eG,onAction:function(){return eN()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),eM();return}(0,rd.T$)(e)&&e.preventDefault()},footer:eL?null:(0,p.Y)(ip,{}),compact:!0})}var ib={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,e_.FM)({cmdOrCtrl:!0,key:"j"})};function iS(){var e=(0,en.fU)(),n=(0,en.fn)();return((0,eb.SJ)(function(){return[ib.id,function(){return e()}]},[e]),n)?(0,p.Y)(ih,{}):null}var iY=t(26205),ix=t(90857),i_=t(18226),iA=t(70299),iC=[rM,eE,ib].concat((0,M._)(oC),(0,M._)(tP.ke),(0,M._)(ix.$f),[iA.B,iY.G,i_.Ws]),ik=t(97902);function iD(e){var n=(0,ik.O)();return(0,p.Y)(eb.jM,{commands:iC,onChange:n,keybindings:e.keybindings,children:e.children})}var iR=t(32363),iE=t(75771),iI=t(271);function iU(e){var n=e.children,t=(0,P.A)(function(){return new tI.Y(tF.A.get("stateCache","object"))},[]);return(0,p.Y)(tI.H.Provider,{value:t,children:n})}function iF(e){var n,t,r,o,i,a=e.ui,l=e.repl,s=e.services,c=e.userKeybindings,u=e.children,d=l.id,f=l.language,h=l.config.isExtension,g=null===(r=l.source)||void 0===r?void 0:null===(t=r.release)||void 0===t?void 0:null===(n=t.repl)||void 0===n?void 0:n.id,m=(0,P.A)(function(){return{id:d,language:f,replConfigIsExtension:h,sourceReplId:g}},[d,f,h,g]);return(0,p.Y)(iD,{keybindings:c,children:(0,p.Y)(Q.lQ,{value:a,children:(0,p.Y)(iU,{children:(0,p.Y)(iR.A.Provider,{value:s,children:(0,p.Y)(iI.A.Provider,{value:m,children:(0,p.Y)(tU.F,{replId:l.id,orgId:null===(o=l.org)||void 0===o?void 0:o.id,container:s.container,fs:s.fs,dotReplit:s.dotReplit,ports:s.ports,secrets:s.secrets,children:(0,p.Y)(og.B,{repl:l,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:(null===(i=l.owner)||void 0===i?void 0:i.__typename)==="Team"?l.owner.id:void 0,children:(0,p.Y)(tm.Ey,{children:(0,p.Y)(iE.A,{children:u})})})})})})})})})}var iP=t(2329),iT=function(){var e=(0,G._)(function(e){var n,t,r,o;return(0,B.YH)(this,function(i){switch(i.label){case 0:if(!(0,ry.Fp)())return[2,null];return[4,(0,ry.Eb)(e)];case 1:if(t=(n=i.sent()).path,r=n.line,o=n.col,!t)return[2,null];return[2,{path:t,line:r,col:o}]}})});return function(n){return e.apply(this,arguments)}}();function iO(e){var n,t,r,o,i,a,l,s,c,u,p,f,m,v,w,y,b;return n=({repl:e.repl}).repl,r=(t=(0,et.A)()).fs,o=t.dotReplit,i=(0,en.mU)(),a=(0,eq.A)(i),s=(l=(0,d._)((0,h.useState)(!1),2))[0],c=l[1],u=(0,en.q5)(),p=(0,h.useCallback)(function(e){var n;(0,ts.e$)(e.path.toLowerCase())?n={paneType:"markdown"}:(0,ts.Zy)(e.path.toLowerCase())&&(n={paneType:"csvPreview"}),u((0,e8._)((0,g._)({},e),{opener:n}))},[u]),f=I(n),m=(0,en.CA)(),v=(0,en.$P)(),w=(0,E.jt)(),y=(0,t8.eg)(),b=(0,h.useRef)(!1),(0,h.useEffect)(function(){if(s&&!b.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,e8._)((0,g._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,ry.cg)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,e8._)((0,g._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[s,i]),(0,h.useEffect)(function(){if(!s){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,G._)(function(){var n,t;return(0,B.YH)(this,function(i){switch(i.label){case 0:if(!m)return[2];if(y||a.current)return c(!0),[2];return[4,iT(r)];case 1:if(n=i.sent(),e)return[2];if(n)return p(n),c(!0),[2];if(a.current||"saved"===m||v||w)return c(!0),[2];return[4,(0,iP.o)({fs:r,dotReplit:o})];case 2:return t=i.sent().entrypoint,e||!t||f||p({path:t}),c(!0),[2]}})})).apply(this,arguments)}},[r,p,o,a,m,s,v,f,w,y]),(0,h.useEffect)(function(){if(m){var e,n=(e=(0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:return b.current=!0,[4,iT(r)];case 1:return(e=n.sent())&&p(e),b.current=!1,[2]}})}),function(){return e.apply(this,arguments)});return window.addEventListener("hashchange",n),function(){window.removeEventListener("hashchange",n)}}},[m,r,p]),null}function iL(){var e=(0,t8.W9)(),n=(0,t8.gi)(),t=(0,et.A)().fs,r=function(){n(null)};return(0,p.Y)(ek.a,{isOpen:!!e,onRequestClose:r,children:e?(0,p.Y)(rN.A,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var iN=t(16170),iM=t(92517),iG=t(96216);function iB(){var e,n,t,r,o,i,a,l,s=(0,f.useRouter)(),c=(0,T.ME)(s,"mobileBridge"),u=(0,en.zL)(),d=(0,tM.A)(),p=d.isSaving,g=d.isOffline,m=(0,h.useRef)(null),v=(0,iG.d)(),w=(0,en.Us)(),y=ex(),b=(n=(e={runner:(0,et.A)().runner}).runner,t=e.onRunInitiated,r=(0,oh.g3)(),o=(0,oh.Ah)(n),i=(0,oh.qP)(),a=(0,h.useMemo)(function(){return r&&o!==ou.ll.OFFLINE?r.step:o},[o,r]),l=(0,h.useCallback)(function(){a===ou.ll.IDLE&&(null==t||t()),i()},[a,i,t]),{runState:a,toggleRunState:l}),S=b.runState,Y=b.toggleRunState,x=(0,h.useCallback)(function(e){var n=function(e){switch(e){case iM.TK.OPEN_FILETREE:u.toggle();break;case iM.TK.TOGGLE_RUN_STATE:Y();break;case iM.TK.TOGGLE_ALLPANES:y();break;case iM.TK.OPEN_NEW_PANE:case iM.TK.TOGGLE_DRAWER:break;default:(0,o6.A)(e)}},t=function(e){v(e)},r=function(e){var n=e.type,t=e.messageId;try{w({pane:{type:n}})}catch(e){(0,iN.Cf)(t)}};(0,iN.E6)(e,function(e){var o=e.type;switch(o){case iM.tF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case iM.tF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case iM.tF.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,o6.A)(o)}})},[Y,v,w,y,u]);return(0,h.useEffect)(function(){if(c){var e={messageType:iM.tF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:p,isOffline:g,runState:S,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},n=m.current;return(null==n||JSON.stringify(e)!==JSON.stringify(n))&&((0,iN._z)(e,(0,o$.A)()),m.current=e),window.addEventListener("message",x),function(){window.removeEventListener("message",x)}}},[c,x,S,p,g,m]),null}var iH=t(56671);function iW(){var e=(0,m._)(["\n  fragment AccountStorageUtilization on AccountStorageUtilization {\n    __typename\n    total\n    perRepl {\n      __typename\n      usage\n      percentage\n      repl {\n        __typename\n        id\n        slug\n        url\n        title\n        nextPagePathname\n        iconUrl\n      }\n    }\n  }\n"]);return iW=function(){return e},e}function iz(){var e=(0,m._)(["\n  query ManageAccountStorageUtilizationCurrentUser(\n    $input: UsageOverviewUsageByReplInput\n  ) {\n    currentUser {\n      ...UsageBreakdownCurrentUser\n      usageInterval {\n        ... on UsageInterval {\n          __typename\n          resources {\n            developmentStorage {\n              displayName\n              unitPrice\n              allotment\n              usage\n              percentage\n              overageCostsUSD\n              totalRepls\n              usageByReplConnection(input: $input) {\n                ... on UnitPriceReplUsageTypeConnection {\n                  ...UnitPriceReplUsageConnection\n                }\n              }\n            }\n          }\n        }\n        ... on ServiceUnavailable {\n          __typename\n          message\n        }\n        ... on UserError {\n          __typename\n          message\n        }\n        ... on UnauthorizedError {\n          __typename\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return iz=function(){return e},e}function i$(){var e=(0,m._)(["\n  query ManageAccountStorageUtilizationCurrentRepl($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return i$=function(){return e},e}function ij(){var e=(0,m._)(["\n  query ManageAccountStorageUtilizationStorageQuota {\n    currentUser {\n      __typename\n      id\n      storageInfo {\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n      }\n    }\n  }\n"]);return ij=function(){return e},e}var iq={};iW();var iK=(0,v.J1)(iz(),iH.J9,iH.YK),iZ=(0,v.J1)(i$()),iV=(ij(),t(3596)),iJ=t(97407),iQ=t(80470),iX=t(1670),i0=t(96362),i1=t(3460),i2=t(25877),i5=t(2269),i4=t(88323),i3=t(53055),i8=t(25688),i7=(0,eA.x)({dot:[eC.wp.flex.grow(1),eC.wp.width(8),eC.wp.height(8),eC.wp.minWidth(8),eC.wp.maxHeight(8),{borderRadius:"50%"}],title:[eC.wp.flex.grow(1),eC.wp.color.foregroundDefault,(0,nt._)({},(0,i8.kT)("mobileMax"),[eC.wp.flex.shrink(1),eC.wp.truncate])],line:[eC.wp.flex.growAndShrink(1),eC.wp.height(8),eC.wp.width("100%"),(0,nt._)({},(0,i8.kT)("mobileMax"),[eC.wp.flex.shrink(4)])]}),i6=ez.D.a,i9=ez.D.li,ae=function(e){var n=e.color,t=e.title,r=e.usage,o=e.resourceUsageType,i=e.linkedRepl,a=e.username,l=i?(0,i3.q1)(i):(0,i4.Mh)(a);return(0,p.Y)(i9,{children:(0,p.Y)(r1(),(0,e8._)((0,g._)({legacyBehavior:!0},l),{passHref:!0,children:(0,p.Y)(i6,{children:(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)("div",{css:i7.dot,style:{backgroundColor:n}}),i?(0,p.Y)(r6.Ay,{size:16,iconUrl:i.iconUrl,alt:t}):null,(0,p.Y)(eW.EY,{css:i7.title,multiline:!1,children:t}),(0,p.Y)(ez.S,{css:i7.line,children:(0,p.Y)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,p.Y)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:tB.LU.outlineDefault})})}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:(0,iX.h7)(r,{resourceUsageType:o})})]})})}))})},an=(0,eA.x)({self:[eC.wp.colWithGap(4)]}),at=ez.D.ul,ar=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,o=e.context,i=e.username,a=e.resourceUsageType,l=n.findIndex(function(e){return e.repl.id===o.replId});return -1===l?(0,p.Y)(ez.S,{gap:4,children:(0,p.Y)(eW.EY,{multiline:!1,children:"No storage usage"})}):(0,p.FD)(at,{css:an.self,children:[n.map(function(e,n){return(0,p.Y)(ae,{color:n===l?tB.LU.accentPrimaryDefault:tB.LU.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,resourceUsageType:a,linkedRepl:e.repl,username:i},n)}),0!==t.length?(0,p.Y)(ae,{color:tB.LU.backgroundHighest,title:"+".concat(t.length," more"),usage:r,resourceUsageType:a,username:i}):null]})},ao=function(e,n){var t=e.findIndex(function(e){var t;return(null===(t=e.repl)||void 0===t?void 0:t.id)===n.replId});if(t<iV.gw)return{contextReplIndex:t,individualSummaries:e.slice(0,iV.gw),groupedSummaries:e.slice(iV.gw)};var r=e[t];return{contextReplIndex:iV.gw,individualSummaries:e.slice(0,iV.gw).concat(r),groupedSummaries:e.slice(iV.gw,t).concat(e.slice(t+1))}},ai=t(78017),aa=t(29048),al=t(30111),as=[eC.wp.width("100%"),eC.wp.rowWithGap(1),eC.wp.height(16),eC.wp.borderRadius(4),eC.wp.overflow("hidden"),eC.wp.backgroundColor.backgroundHigher],ac={small:(0,eA.x)({bar:[as,eC.wp.height(10)]}),base:(0,eA.x)({bar:[as,eC.wp.height(16)]})},au=(0,eA.x)({selfPlaceholder:[eC.wp.width("100%"),eC.wp.rowWithGap(1),eC.wp.height(16),eC.wp.borderRadius(4),eC.wp.overflow("hidden"),eC.wp.backgroundColor.backgroundHigher,i1.S.backgroundPulse(tB.LU.backgroundHigher,tB.LU.backgroundRoot)],barWrapper:[eC.wp.flex.grow(1)],self:[eC.wp.flex.growAndShrink(1)]}),ad=function(e){var n=e.summary,t=e.context,r=e.username,o=e.resourceUsageType,i=e.overageSummary,a=e.small,l=a?12:24,s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=n.lineItems,g=Math.max(n.total,n.limit),m=ao((0,M._)(f).filter(function(e){return e.percentage>0}).sort(function(e,n){return n.usage-e.usage}),t),v=m.individualSummaries,w=m.groupedSummaries,y=m.contextReplIndex,b=v.filter(function(e){return null!==e.repl&&void 0!==e.repl}),S=w.filter(function(e){return null!==e.repl&&void 0!==e.repl}),Y=S.reduce(function(e,n){return e+n.usage},0),x=0===g?0:Y/g,_=(0,ai.k)(b,x,Y,S.length),A=tB.LU.backgroundHigher,C=(0,p.Y)(t7.K0,{alt:c?"Hide Apps":"Show Apps",size:l,children:c?(0,p.Y)(al.A,{onClick:function(){return u(!c)},size:l}):(0,p.Y)(aa.A,{onClick:function(){return u(!c)},size:l})}),k=_.length>0;return(0,p.FD)(ez.S,{css:au.self,gap:8,children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[i||(0,p.Y)(ez.S,{css:au.barWrapper,children:(0,p.Y)(ez.S,{css:a?ac.small.bar:ac.base.bar,style:{backgroundColor:A},children:_.map(function(e,n){return(0,p.Y)(i5.JA,{color:n===y?tB.LU.accentPrimaryDefault:tB.LU.accentPrimaryDimmest,resourceUsageType:o,section:e},n)})})}),k?C:null]}),k&&c?(0,p.FD)(p.FK,{children:[(0,p.Y)(ar,{topRepls:b,groupedRepls:S,groupedTotal:Y,context:t,username:r,resourceUsageType:o}),(0,p.Y)(i2.a,{})]}):null]})},ap=function(){return(0,p.Y)(ez.S,{children:(0,p.Y)(ez.S,{css:au.selfPlaceholder})})},af=t(26649),ah=(0,eA.x)({summaryWrapper:[eC.wp.colWithGap(8),eC.wp.align.start],replSummaryDot:[eC.wp.backgroundColor.accentPrimaryDefault,eC.wp.width(8),eC.wp.height(8),{borderRadius:"50%"}],summaryRow:[eC.wp.rowWithGap(8),eC.wp.justify.start,eC.wp.align.center,eC.wp.fontSize(14),eC.wp.height(14)],summaryRowWrap:[eC.wp.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[eC.wp.color.accentPrimaryStronger],replSummaryUsage:[eC.wp.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[i1.S.backgroundPulse(tB.LU.backgroundHigher,tB.LU.backgroundRoot),{opacity:.5},eC.wp.borderRadius(4),eC.wp.height("100%"),eC.wp.width(78)],replUsagePlaceholder:[i1.S.backgroundPulse(tB.LU.backgroundHigher,tB.LU.backgroundRoot),{opacity:.5},eC.wp.borderRadius(4),eC.wp.height("100%"),eC.wp.width(64)],totalUsagePlaceholder:[i1.S.backgroundPulse(tB.LU.backgroundHigher,tB.LU.backgroundRoot),{opacity:.5},eC.wp.borderRadius(4),eC.wp.height("100%"),eC.wp.width(140)],availablePlaceholder:[i1.S.backgroundPulse(tB.LU.backgroundHigher,tB.LU.backgroundRoot),{opacity:.5},eC.wp.borderRadius(4),eC.wp.height("100%"),eC.wp.width(64)],availableText:[eC.wp.color.foregroundDimmest,(0,nt._)({},eC.$_.max(390),eC.wp.pl(16))]}),ag=function(e){var n,t,r=e.data,o=(0,eG.A)(),i=(0,d._)((0,h.useState)(!1),2),a=i[0],l=i[1];if((0,h.useEffect)(function(){var e,n,t,i;r&&(null===(n=r.currentUser)||void 0===n?void 0:null===(e=n.usageInterval)||void 0===e?void 0:e.__typename)==="UsageInterval"&&(null===(i=r.currentUser)||void 0===i?void 0:null===(t=i.usageInterval.resources.developmentStorage.usageByReplConnection.items.find(function(e){var n;return(null===(n=e.usageRepl)||void 0===n?void 0:n.id)===o}))||void 0===t?void 0:t.__typename)==="UnitPriceReplUsageType"&&l(!0)},[r,o]),r&&(null===(t=r.currentUser)||void 0===t?void 0:null===(n=t.usageInterval)||void 0===n?void 0:n.__typename)==="UsageInterval"&&a){var s,c=r.currentUser,u=c.username,f=c.isCore,m=r.currentUser.usageInterval.resources.developmentStorage,v=m.usage,w=m.allotment,y=m.usageByReplConnection.items,b=f?iJ.en:"Starter",S=(0,i0.P)(w,{resourceUsageType:"GiB",precision:0}),Y=Math.max(w-v,0),x="(".concat((0,iX.h7)(Y,{precision:1,resourceUsageType:"GiB"})," available)"),_=y.map(function(e){return(0,e8._)((0,g._)({},e),{usage:e.usage*iQ.O8})}),A=_.find(function(e){var n;return(null===(n=e.usageRepl)||void 0===n?void 0:n.id)===o}),C=0!==w?(0,p.Y)(eW.EY,{css:ah.availableText,multiline:!1,children:x}):null;return(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(ad,{context:{replId:o},summary:(0,af.s)({replUsageOverview:_,usage:v,allotment:w,__typename:"UsageOverviewUnitPriceSku"}),username:u,resourceUsageType:"Bytes"}),(0,p.FD)(ez.S,{css:ah.summaryWrapper,children:[(0,p.FD)(ez.S,{css:ah.summaryRowWrap,row:!0,gap:8,justify:"start",align:"center",children:[(0,p.FD)(eW.EY,{multiline:!1,children:["Replit ",b," storage: ",S," GiB"]}),C]}),(0,p.FD)(ez.S,{css:ah.summaryRow,children:[(0,p.Y)("div",{css:ah.replSummaryDot}),(0,p.Y)(eW.EY,{css:ah.replSummaryText,multiline:!1,children:"This Repl:"}),A?(0,p.Y)(eW.EY,{css:ah.replSummaryUsage,multiline:!1,children:(s=A.usage)>2*iQ.O8?"".concat((0,iX.$p)(s).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,iX.lX)(s)).toLocaleString()," MiB")}):(0,p.Y)(ez.S,{css:ah.replUsagePlaceholder})]})]})]})}return(0,p.Y)(am,{})},am=function(){return(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(ap,{}),(0,p.FD)(ez.S,{css:ah.summaryWrapper,children:[(0,p.FD)(ez.S,{css:ah.summaryRow,children:[(0,p.Y)(ez.S,{css:ah.totalUsagePlaceholder}),(0,p.Y)(ez.S,{css:ah.availablePlaceholder})]}),(0,p.FD)(ez.S,{css:ah.summaryRow,children:[(0,p.Y)(ez.S,{css:ah.replSummaryTextPlaceholder}),(0,p.Y)(ez.S,{css:ah.replUsagePlaceholder})]})]})]})},av=t(75895),aw=t(51297),ay=t(88165),ab=t(76862),aS={isConnecting:!0,channel:null,context:null};function aY(e){var n=e.container,t=e.service,r=e.name,o=e.skip,i=void 0!==o&&o,a=(0,d._)((0,h.useState)(aS),2),l=a[0],s=a[1];return(0,h.useEffect)(function(){s(aS);var e=!1,o=n.openChannel({service:t,name:r,skip:function(){return i}},function(n){if(!e)return s({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||s({isConnecting:n.willReconnect,channel:null,context:null})}});return function(){e=!0,o()}},[n,t,r,i]),l}var ax=t(71549);function a_(e,n){var t=100*n;return e.slice(0,aI).filter(function(e){return e>=t}).length}function aA(e){return a_(e,aE)>=aU?"danger":a_(e,aR)>=aU?"warning":"ok"}function aC(e){return Math.round(10*e)/10}function ak(e){return Math.round((e+Number.EPSILON)*100)/100}function aD(e){return e/1024/1024}var aR=.9,aE=1,aI=10,aU=5,aF=n6.ZU.Union([n6.ZU.Literal("ok"),n6.ZU.Literal("warning"),n6.ZU.Literal("danger")]),aP=n6.ZU.Object({cpuUtilizationPercent:n6.ZU.Number(),memoryUsageRssBytes:n6.ZU.Number(),memoryUsageCacheBytes:n6.ZU.Number(),memorySoftLimitBytes:n6.ZU.Number(),memoryHardLimitBytes:n6.ZU.Number(),numVCpu:n6.ZU.Number(),user:n6.ZU.Object({cpuUtilizationPercent:n6.ZU.Number()}),system:n6.ZU.Object({cpuUtilizationPercent:n6.ZU.Number()}),storage:n6.ZU.Object({diskLimitBytes:n6.ZU.Number(),diskUsedBytes:n6.ZU.Number(),diskUsedWorkspaceBytes:n6.ZU.Number(),diskUsedNixBytes:n6.ZU.Number(),scratchDiskLimitBytes:n6.ZU.Number(),scratchDiskUsedBytes:n6.ZU.Number()})});n6.ZU.Object({cpu:n6.ZU.Object({numVCpu:n6.ZU.Number(),utilPercent:n6.ZU.Number(),recentUtilPercents:n6.ZU.Array(n6.ZU.Number()),status:aF,user:n6.ZU.Object({utilPercent:n6.ZU.Number(),recentUtilPercents:n6.ZU.Array(n6.ZU.Number())}),system:n6.ZU.Object({utilPercent:n6.ZU.Number(),recentUtilPercents:n6.ZU.Array(n6.ZU.Number())})}),memory:n6.ZU.Object({softLimitBytes:n6.ZU.Number(),hardLimitBytes:n6.ZU.Number(),usageBytes:n6.ZU.Number(),recentUtilPercents:n6.ZU.Array(n6.ZU.Number()),status:aF,rss:n6.ZU.Object({usageBytes:n6.ZU.Number(),recentUtilPercents:n6.ZU.Array(n6.ZU.Number())}),cache:n6.ZU.Object({usageBytes:n6.ZU.Number(),recentUtilPercents:n6.ZU.Array(n6.ZU.Number())})}),storage:n6.ZU.Object({usedBytes:n6.ZU.Number(),totalBytes:n6.ZU.Number(),scratchUsedBytes:n6.ZU.Number(),scratchTotalBytes:n6.ZU.Number(),nixUsedBytes:n6.ZU.Number(),workspaceUsedBytes:n6.ZU.Number()})});var aT={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},aO=(0,H.eU)(aT),aL=(0,H.eU)(!0),aN=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(n?Math.round(e):e,100)};function aM(e,n){e.unshift(n),e.pop()}var aG=(0,H.eU)(null,function(e,n,t){n(aO,function(e){return(0,aw.jM)(e,function(e){var n,r,o,i,a,l,s,c,u,d,p,f,h,g;s=e.cpu,c=e.memory,u=e.storage,s.numVCpu=t.numVCpu,s.utilPercent=aN(t.cpuUtilizationPercent,!0),s.recentUtilPercents.unshift(s.utilPercent),s.status=aA(s.recentUtilPercents),d=s.user,p=s.system,d.utilPercent=aN(t.user.cpuUtilizationPercent),aM(d.recentUtilPercents,d.utilPercent),p.utilPercent=aN(t.system.cpuUtilizationPercent),aM(p.recentUtilPercents,p.utilPercent),c.softLimitBytes=t.memorySoftLimitBytes,c.hardLimitBytes=t.memoryHardLimitBytes,c.usageBytes=t.memoryUsageRssBytes,f=c.usageBytes/c.softLimitBytes*100,aM(c.recentUtilPercents,f),c.status=aA(c.recentUtilPercents),h=c.rss,g=c.cache,h.usageBytes=t.memoryUsageRssBytes,aM(h.recentUtilPercents,t.memoryUsageRssBytes/t.memorySoftLimitBytes*100),g.usageBytes=t.memoryUsageCacheBytes,aM(g.recentUtilPercents,t.memoryUsageCacheBytes/t.memorySoftLimitBytes*100),u.usedBytes=(null===(n=t.storage)||void 0===n?void 0:n.diskUsedBytes)||0,u.totalBytes=(null===(r=t.storage)||void 0===r?void 0:r.diskLimitBytes)||0x40000000,u.scratchUsedBytes=(null===(o=t.storage)||void 0===o?void 0:o.scratchDiskUsedBytes)||0,u.scratchTotalBytes=(null===(i=t.storage)||void 0===i?void 0:i.scratchDiskLimitBytes)||0x40000000,u.nixUsedBytes=(null===(a=t.storage)||void 0===a?void 0:a.diskUsedNixBytes)||0,u.workspaceUsedBytes=(null===(l=t.storage)||void 0===l?void 0:l.diskUsedWorkspaceBytes)||0})})}),aB=(0,ay.mg)(aO,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),aH=(0,ay.mg)(aO,function(e){return"ok"!==e.memory.status?e.memory.status:null}),aW=(0,H.eU)(function(e){var n=e(aH);if(n)return{type:"ram_alert",status:n};var t=e(aB);return t?{type:"cpu_alert",status:t}:null}),az=(0,H.eU)(function(e){for(var n=e(aO),t=n.cpu,r=n.memory,o=0,i=["danger","warning"];o<i.length;o++){var a=i[o];if(t.status===a||r.status===a)return"danger"}return"ok"}),a$=(0,ay.mg)(aO,function(e){var n=aC((0,iX.$p)(e.memory.softLimitBytes));return{numVCpu:aC(e.cpu.numVCpu),ramTotalGB:n}},eV()),aj=(0,ay.mg)(aO,function(e){var n=e.cpu,t=n.status,r=n.recentUtilPercents,o=n.user,i=n.system,a=ak(n.utilPercent),l=ak(o.utilPercent),s=ak(i.utilPercent);return{status:t,currentPercent:a,recentUtilPercents:r,currentUserPercent:l,recentUserUtilPercents:o.recentUtilPercents,currentSystemPercent:s,recentSystemUtilPercents:i.recentUtilPercents}},eV()),aq=(0,ay.mg)(aO,function(e){var n=e.memory,t=n.status,r=n.recentUtilPercents,o=n.cache,i=n.rss,a=n.softLimitBytes,l=n.usageBytes,s=aD(a);return{status:t,currentPercent:Math.round(100*Math.min(1,Math.round(ak(aD(l)))/s)),currentRssInBytes:1048576*Math.round(ak(aD(i.usageBytes))),currentCacheInBytes:1048576*Math.round(ak(aD(o.usageBytes))),recentUtilPercents:r,recentRssUtilPercents:i.recentUtilPercents,recentCacheUtilPercents:o.recentUtilPercents}},eV()),aK=(0,ay.mg)(aO,function(e){var n=e.storage;return{replUsedInMib:aD(n.usedBytes),scratchUsedInMib:aD(n.scratchUsedBytes),nixUsedInMib:aD(n.nixUsedBytes),workspaceUsedInMib:aD(n.workspaceUsedBytes)}},eV()),aZ=(0,ay.mg)(aO,function(e){var n=e.cpu,t=e.memory;return{numVCpu:n.numVCpu,ramQuotaMiBs:aD(t.softLimitBytes),cpuRecentUtilPercents:n.recentUtilPercents,ramRecentUtilPercents:t.recentUtilPercents}},eV()),aV=((0,ay.mg)(aO,function(e){return e.cpu.numVCpu}),(0,ay.mg)(aO,function(e){return aD(e.memory.softLimitBytes)}),(0,ay.mg)(aO,function(e){return aD(e.storage.totalBytes)}));function aJ(){return(0,ax.h)(aV)}var aQ=(0,ay.mg)(aO,function(e){return aD(e.storage.usedBytes)});function aX(){return(0,ax.h)(aQ)}var a0=t(14968),a1=t(47303),a2=t(93478),a5=(0,eA.x)({header:[eC.wp.align.center]});function a4(){var e,n,t,r=(0,et.A)().fs,o=(0,d._)((0,h.useState)(null),2),i=o[0],a=o[1],l=(0,eG.A)(),s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)(!1),2),m=f[0],v=f[1],y=(0,d._)((0,h.useState)(!0),2),b=y[0],S=y[1],Y=(e={variables:{input:{count:iV.gw}}},n=(0,g._)({},iq,e),w.I(iK,n)),x=Y.data,_=Y.loading,A=(0,h.useId)(),k=(0,C._P)({controlName:"flag-areobotany-blues",logFlagToAnalytics:!1}),D=(0,h.useRef)(!1),R=aJ(),E=aX(),I=R>0?E/R:0,U=(0,eq.A)(I),F=null==x?void 0:null===(t=x.currentUser)||void 0===t?void 0:t.id,P=(0,eq.A)(null),T=(0,h.useCallback)(function(e){null===R||null===E||"sampling"===e&&c||(a(e),th.vF.info("disk quota exceeded modal displayed",{replid:l,userid:F,currentReportedUtilization:1048576*E,totalReportedReplQuota:1048576*R}),(0,z.u4)(z.AZ.MODAL_VIEWED,{modalName:"disk_quota_exceeded_modal",cause:"storage",unsolicited:!0}))},[c,a,E,l,R,F]);(0,h.useEffect)(function(){var e=setTimeout(function(){S(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,h.useEffect)(function(){if(!m){var e=r.onDiskQuotaExceeded(function(){1024===R?P.current=setTimeout(function(){T("filesystem_service")},3e4):T("filesystem_service")});return function(){e()}}},[r,R,m,T,P]),(0,h.useEffect)(function(){return function(){P.current&&clearTimeout(P.current)}},[P]);var O=(0,ax.h)(aL);(0,h.useEffect)(function(){var e;if(!i&&!D.current&&!m&&!c&&k&&!O)return I>.9999&&(D.current=!0,e=setTimeout(function(){D.current=!1,U.current>.9999&&T("sampling")},1e4)),function(){clearTimeout(e)}},[m,c,I,D,i,T,U,k,O]);var L=(0,h.useCallback)(function(){"sampling"===i&&u(!0),a(null)},[i]);return b?null:(0,p.Y)(ek.a,{isOpen:!!i,onRequestClose:L,children:(0,p.Y)(ez.S,{gap:24,children:(0,p.FD)(ez.S,{gap:24,children:[(0,p.FD)(eW.Y9,{css:a5.header,level:3,variant:"headerDefault",children:["Your account is out of storage ",(0,p.Y)(a2.A,{size:20})]}),(0,p.Y)(eW.EY,{children:"To free up space remove files until it's under the limit, delete other Apps, or upgrade your account storage."}),!_&&x?(0,p.Y)(ag,{data:x}):(0,p.Y)(am,{}),"filesystem_service"===i?(0,p.FD)(ez.S,{row:!0,gap:8,tag:"label",children:[(0,p.Y)(a1.S,{id:A,checked:m,onChange:v}),(0,p.Y)(eW.EY,{variant:"small",children:"Do not show this message again for this session."})]}):null,(0,p.Y)(ez.S,{children:(0,p.Y)(a0.v,{href:"/usage#storage",text:"View Usage"})})]})})})}var a3=t(22414);function a8(){var e=(0,et.A)().fs,n=(0,d._)((0,h.useState)(!1),2),t=n[0],r=n[1],o=(0,d._)((0,h.useState)(!1),2),i=o[0],a=o[1],l=(0,h.useId)();(0,h.useEffect)(function(){if(!i)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,i]);var s=(0,h.useCallback)(function(){r(!1)},[r]);return(0,p.Y)(ek.a,{isOpen:t,onRequestClose:s,children:(0,p.Y)(ez.S,{gap:24,children:(0,p.FD)(ez.S,{gap:24,children:[(0,p.FD)(eW.Y9,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,p.Y)(a3.A,{color:tB.LU.accentNegativeDefault,size:20})]}),(0,p.FD)(eW.EY,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,p.Y)(oM.A,{})," icon on the left."]}),(0,p.Y)(eW.EY,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,p.FD)(ez.S,{row:!0,gap:8,tag:"label",children:[(0,p.Y)(a1.S,{id:l,checked:i,onChange:a}),(0,p.Y)(eW.EY,{variant:"small",children:"Do not show this message again for this session."})]}),(0,p.Y)(eH.$n,{onClick:s,text:"Close"})]})})})}function a7(){var e,n,t,r,o=(t={variables:{replId:(0,eG.A)()}},r=(0,g._)({},iq,t),w.I(iZ,r)),i=o.data,a=o.loading,l=(null==i?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"&&(null===(n=i.repl.owner)||void 0===n?void 0:n.__typename)==="Team";return a&&!i?null:l?(0,p.Y)(a8,{}):(0,p.Y)(a4,{})}var a6=t(55195),a9=t(75838);function le(){var e=(0,m._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n        authorizations {\n          editFileContents {\n            isAuthorized\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return le=function(){return e},e}function ln(){var e=(0,m._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return ln=function(){return e},e}function lt(){var e=(0,m._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return lt=function(){return e},e}function lr(){var e=(0,m._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return lr=function(){return e},e}var lo={},li=(0,v.J1)(le()),la=(0,v.J1)(ln()),ll=(lt(),(0,v.J1)(lr())),ls=t(1987),lc=t(27230),lu=t(3005),ld=t(43650),lp=t(43812),lf=t.n(lp),lh=t(78125),lg=t(88538),lm=t.n(lg),lv={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},lw={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:lv,javascript:lv,vue:{18:"vue-node-18",20:"vue-node-20"}};function ly(e,n){if(void 0===e)return!1;if(void 0===n)return!0;var t=lf()(e);if(null===t)return!1;var r=lf()(n);return null===r||lm()(t,r)}var lb=t(43751);function lS(){var e=(0,m._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return lS=function(){return e},e}var lY={},lx=(0,v.J1)(lS()),l_=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},lA=new Map([["hintsList","hints"]]);function lC(){return(lC=(0,G._)(function(e){var n,t,r,o,i,a,l,s,c,u,p,f,h,m,v;function w(){return y.apply(this,arguments)}function y(){return(y=(0,G._)(function(){var e,t,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:if(!(e="object"===(0,nr._)(r.env)?r.env:null)||0===Object.keys(e).length)return[2];return i=(t="object"===(0,nr._)(o.env)?o.env:null)?(0,g._)({},e,t):e,[4,n.updateDotReplit([l_("env",i)])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}function b(){return S.apply(this,arguments)}function S(){return(S=(0,G._)(function(){var e,i,a,l;return(0,B.YH)(this,function(s){switch(s.label){case 0:if(null===(e=o.nix)||void 0===e?void 0:e.channel)return[2];if(null==r?void 0:null===(i=r.nix)||void 0===i?void 0:i.channel)return[3,2];return[4,t.getLatestStableChannel()];case 1:if(!(l=s.sent()).channel)return[2];return a=l.channel,[3,3];case 2:a=r.nix.channel,s.label=3;case 3:return[4,n.updateDotReplit([l_("nix/channel",a)])];case 4:return s.sent(),[2]}})})).apply(this,arguments)}function Y(){return(Y=(0,G._)(function(e){var t,i,a,l,s;return(0,B.YH)(this,function(c){switch(c.label){case 0:if(i=!!(t=o[e]),Array.isArray(t)?i=t.length>0:t&&(void 0===t?"undefined":(0,nr._)(t))==="object"&&(i=Object.keys(t).length>0),l=null!==(a=lA.get(e))&&void 0!==a?a:e,i||!r[l])return[2];return s=l_(l,r[l]),[4,n.updateDotReplit([s])];case 1:return c.sent(),[2]}})})).apply(this,arguments)}return(0,B.YH)(this,function(g){switch(g.label){case 0:n=e.dotReplit,t=e.nixService,r=e.templateConfig,o=e.config,i=[],a={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:b,env:w,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},l=[],s=!0,c=!1,u=void 0;try{for(p=Object.entries(a)[Symbol.iterator]();!(s=(f=p.next()).done);s=!0)m=(h=(0,d._)(f.value,2))[0],v=h[1],null!==v&&("function"==typeof v?l.push(v()):l.push(function(e){return Y.apply(this,arguments)}(m)))}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}return[4,Promise.all(l)];case 1:return g.sent(),[2,i]}})})).apply(this,arguments)}function lk(e,n){return new Promise(function(t){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:n}}).then(function(e){e.ok,r(),t()}),function(e){e.willReconnect&&r()}})})}function lD(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}function lR(e){return e.replace(/'/g,"'\"'\"'")}var lE=function(e){var n,t,r,o,i,a,l,s,c,u,p,g,m,v=e.checkoutBranch,w=(0,f.useRouter)(),y=(0,et.A)(),b=y.container,S=y.dotReplit,Y=y.runner,x=y.git,_=y.fs,A=(n=aY({container:b,service:"exec"}).channel,t=(0,h.useRef)(!1),r=(0,h.useRef)([]),o=(0,eq.A)((0,G._)(function(){var e,i,a,l,s,c,u,p,f,h;return(0,B.YH)(this,function(g){switch(g.label){case 0:if(t.current||!r.current.length||(null==n?void 0:n.status)!=="open")return[2];if(!(e=r.current.pop()))throw Error("Expected request");return l=(a=(i=(0,d._)(e,2))[0]).args,s=a.env,c=i[1],u="",p=n.onCommand(function(e){e.output&&(u+=e.output)}),t.current=!0,[4,n.request({exec:{args:l,env:s,noUserEnv:!0}})];case 1:return f=g.sent(),t.current=!1,p(),h=f.channelClosed?"Channel closed":f.error,c(h?{error:h,output:u||null}:{output:u,error:null}),o.current(),[2]}})})),i=null==n?void 0:n.status,(0,h.useEffect)(function(){"open"===i&&o.current()},[i,o]),(0,h.useCallback)(function(e){var n=e.args,t=e.env;return new Promise(function(e){r.current.push([{args:n,env:t},e]),o.current()})},[o])),C=(a=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,x.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return a.apply(this,arguments)}),k=(l=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,x.addRemote({name:"origin",url:e})];case 1:return n.sent(),[2]}})}),function(e){return l.apply(this,arguments)}),D=(s=(0,G._)(function(){var e,n;return(0,B.YH)(this,function(t){switch(t.label){case 0:return[4,A({args:lD("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=t.sent()).output)return[2,"main"];return(n=(0,d._)(e.output.split(": "),2))[0],[2,n[1].trim()]}})}),function(){return s.apply(this,arguments)}),R=(c=(0,G._)(function(e){var n;return(0,B.YH)(this,function(t){switch(t.label){case 0:return[4,A({args:lD("git checkout -f -b '".concat(lR(e),"' 'origin/").concat(lR(e),"'"))})];case 1:if((n=t.sent()).error)throw Error("Failed to checkout branch: ".concat(n.error));return[2]}})}),function(e){return c.apply(this,arguments)}),E=(u=(0,G._)(function(e){var n,t,r,o;return(0,B.YH)(this,function(i){switch(i.label){case 0:if(t=void 0!==(n=e.deepen)&&n,r=e.remote,o=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,A({args:lD("git fetch '".concat(lR(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return i.sent(),[2];case 2:if(!(o&&t))return[3,4];return[4,A({args:lD("git fetch origin '".concat(lR(o),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,i.sent()];case 4:if(!o)return[3,6];return[4,A({args:lD("git fetch origin '".concat(lR(o),"' --progress --depth=10"))})];case 6:return[4,A({args:lD("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return u.apply(this,arguments)}),I=(p=(0,G._)(function(){var e,n,t,r,o,i,a;return(0,B.YH)(this,function(l){switch(l.label){case 0:return[4,_.readDir(rg.Dl)];case 1:if((r=l.sent()).error)return[2];return[4,S.getConfig()];case 2:if(!(null===(n=(o=l.sent()).config)||void 0===n?void 0:null===(e=n.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return i=o.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),a=function(e){return i.some(function(n){return null!=e.match(n)})},[4,Promise.all(r.children.filter(function(e){return!a(e.filename)}).map(function(e){return e.type===tu.pt.Directory?_.deleteDir(e.filename):_.deleteFile(e.filename)}))];case 3:return l.sent(),[3,6];case 4:if(!(null===(t=o.config)||void 0===t?void 0:t.entrypoint))return[3,6];return[4,_.deleteFile(o.config.entrypoint)];case 5:l.sent(),l.label=6;case 6:return[2]}})}),function(){return p.apply(this,arguments)}),U={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},F=(g=(0,G._)(function(){var e,n,t,r;return(0,B.YH)(this,function(o){switch(o.label){case 0:for(n in e=[],U)e.push(n);t=0,o.label=1;case 1:if(!(t<e.length))return[3,5];return r=e[t],[4,_.stat(r)];case 2:if(!o.sent().exists)return[3,4];return[4,A({args:["git","clean","-fdx"].concat((0,M._)(U[r]))})];case 3:o.sent(),o.label=4;case 4:return t++,[3,1];case 5:return[2]}})}),function(){return g.apply(this,arguments)});return m=(0,G._)(function(e){var n,t,r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:return n=e.remote,t=e.accessToken,[4,I()];case 1:return a.sent(),th.vF.info("GitHub Import: Removed template boilerplate"),[4,C()];case 2:return a.sent(),[4,k(n)];case 3:return a.sent(),[4,D()];case 4:return r=a.sent(),[4,Promise.all([E({deepen:!1,remote:n,remoteToken:t,branch:r}),v?E({deepen:!1,remote:n,remoteToken:t,branch:v}):null])];case 5:var l;if(a.sent(),l=(0,G._)(function(){var e;return(0,B.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,R(r)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),th.vF.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(w.query),checkoutBranch:v,githubRepo:n}),[3,3];case 3:return[2]}})}),o=function(){return l.apply(this,arguments)},!v)return[3,11];a.label=6;case 6:return a.trys.push([6,8,,10]),[4,R(v)];case 7:case 9:return a.sent(),[3,10];case 8:return i=a.sent(),th.vF.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(i),query:JSON.stringify(w.query),checkoutBranch:v,githubRepo:n}),[4,o()];case 10:return[3,13];case 11:return[4,o()];case 12:a.sent(),a.label=13;case 13:if("html"!==Y.mode)return[3,16];return[4,lk(b,rg.Dl)];case 14:return a.sent(),[4,Y.run(ou.QG.GITHUB_IMPORT)];case 15:a.sent(),a.label=16;case 16:return[4,F()];case 17:return a.sent(),th.vF.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return m.apply(this,arguments)}},lI=t(78709);function lU(){var e=(0,d._)((0,h.useState)(!1),2),n=e[0],t=e[1],r=(0,en.DX)(),o=(0,en.q5)(),i=(0,et.A)().replspaceApi;return((0,h.useEffect)(function(){if(n)return i.onConfirmSendToken(function(e){e&&e(!0,!1)})},[n,i]),function(e){var n,t,r,o,i,a,l,s,c,u,p,m,v,y,b,S,Y,x,_,A,C,k,D,R,E,I,U=e.insertConfigPlugin,F=e.setConfigScreenLockIsOpen,P=e.openFile,T=(0,f.useRouter)(),L=(0,eG.A)(),N=(0,d._)((n=(0,g._)({},lo,void 0),a9.n(la,n)),2),M=N[0],H=N[1],W=(0,d._)((0,h.useState)(null),2),$=W[0],j=W[1],q=(0,et.A)(),K=q.fs,Z=q.runner,V=q.dotReplit,J=(0,eK.A)(),Q=J.showError,X=J.showConfirm,ee=(r=(t=(0,et.A)()).dotReplit,o=t.nixService,i=(0,eG.A)(),l=(0,d._)((a=(0,g._)({},lY,void 0),lb._(lx,a)),1)[0],c=(s=(0,eK.A)()).showWarning,u=s.showError,(0,h.useCallback)((p=(0,G._)(function(e){var n,t,a,s,d,p,f,h,g,m,v,w;return(0,B.YH)(this,function(y){switch(y.label){case 0:return[4,r.getConfig()];case 1:if(!(t=y.sent().config)||(null===(n=t.modules)||void 0===n?void 0:n.length))return[2];return[4,l({variables:{replId:i}})];case 2:if(!(null==(s=(null==(a=y.sent().data)?void 0:a.repl.__typename)==="Repl"?a.repl:null)?void 0:s.rootOriginReplUrl))return[2];try{d=(0,lh.qg)(e.toString())}catch(e){return u("Failed to parse template .replit file"),th.vF.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!d)return[2];return[4,function(e){return lC.apply(this,arguments)}({nixService:o,dotReplit:r,config:t,templateConfig:d})];case 3:p=y.sent(),f=!0,h=!1,g=void 0;try{for(m=p[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)w=v.value,c(w,1e3)}catch(e){h=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw g}}return[2]}})}),function(e){return p.apply(this,arguments)}),[i,c,u,r,o,l])),en=(m=(0,O.pE)("importBranch","string"))?decodeURIComponent(m):null,er=(0,ld.A)(),eo=(0,lu.ET)().orgId;(0,h.useEffect)(function(){H.error&&Q("Failed to finish cloning Repl - "+H.error)},[H.error,Q]),(0,h.useEffect)(function(){$&&Q("Failed to finish cloning Repl - "+$)},[$,Q]),(0,h.useEffect)(function(){H.data&&X("Finished cloning Repl")},[H.data,X]);var ei=(v={variables:{replId:L},fetchPolicy:"no-cache"},y=(0,g._)({},lo,v),w.I(li,y)).data,ea=(b=(0,ld.A)(),Y=(S=(0,et.A)()).fs,x=S.dotReplit,D=(null==(k=(A={skip:!((_=(null==ei?void 0:ei.repl.__typename)==="Repl"?ei.repl.config.gitRemoteUrl:void 0)&&b),variables:_?{input:{githubRepoUrl:_}}:void 0},C=(0,g._)({},lo,A),w.I(ll,C)).data)?void 0:k.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?k.githubRepoInfo.topLanguages:void 0,{addRecommendedModules:(0,h.useCallback)((0,G._)(function(){var e,n,t,r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:if(!(D&&b))return[3,4];return e=D.map(function(e){return{language:e}}),[4,Y.readFile("package.json")];case 1:return"content"in(n=a.sent())&&(t=function(e){var n,t,r=null;try{t=JSON.parse(e)}catch(e){return null}if(null===(n=t.engines)||void 0===n?void 0:n.node){var o=lf()(t.engines.node);o&&(r="".concat(o.major))}return r}(n.content.toString()))&&(e.push({language:"javascript",version:t}),D.includes("Vue")&&e.push({language:"vue",version:t})),[4,Y.readFile("pyproject.toml")];case 2:return"content"in(n=a.sent())&&(r=function(e){var n,t,r,o,i,a=null;try{i=(0,lh.qg)(e)}catch(e){return null}var l=(null===(r=i.tool)||void 0===r?void 0:null===(t=r.poetry)||void 0===t?void 0:null===(n=t.dependencies)||void 0===n?void 0:n.python)||(null===(o=i.project)||void 0===o?void 0:o["requires-python"]);if(l){var s=lf()(l);s&&(a="".concat(s.major,".").concat(s.minor))}return a}(n.content.toString()))&&e.push({language:"python",version:r}),o=function(e,n){var t=new Map,r=!0,o=!1,i=void 0;try{for(var a,l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value,u=lw[c.language.toLowerCase()];if(u){var p=t.get(u);(!p||ly(c.version,p.version))&&t.set(u,c)}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}var f=new Map;null===(a=n.fullModules)||void 0===a||a.forEach(function(e){(null==e?void 0:e.id)&&f.set(e.id,e)});var h=new Set,g=!0,m=!1,v=void 0;try{for(var w,y=t.entries()[Symbol.iterator]();!(g=(w=y.next()).done);g=!0){var b=(0,d._)(w.value,2),S=b[0],Y=b[1];if("string"==typeof S){var x=f.get(S);x&&h.add(x)}else{var _=Y.version;if(!_||!S[_]){var A=Object.keys(S);A.sort(function(e,n){return ly(e,n)?-1:1}),_=A[0]}var C=S[_],k=f.get(C);k&&h.add(k)}}}catch(e){m=!0,v=e}finally{try{g||null==y.return||y.return()}finally{if(m)throw v}}return Array.from(h)}(e,b),i=[{op:"add",path:"nix/channel",value:'"stable-24_05"'}],o.length>0?(th.vF.info("GitHub Import: recommended modules:",Object.fromEntries(o.map(function(e){return[e.id,e.name]}))),i.push({op:"add",path:"modules",value:JSON.stringify(o.map(function(e){return e.id}))})):th.vF.warn("GitHub Import: no recommended modules found"),[4,x.updateDotReplit(i)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[x,Y,b,D]),topLanguages:D}),el=ea.addRecommendedModules,es=ea.topLanguages,ec=(R=(0,G._)(function(){var e,n,t,r,o,i,a;return(0,B.YH)(this,function(l){switch(l.label){case 0:if(!ei||"Repl"!==ei.repl.__typename||(n=ei.repl,t=ei.currentUser,"Repl"!==n.__typename||!t||"CurrentUser"!==t.__typename)||(o=null!==(r=null===(e=t.gitHubInfo)||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,!(i=n.config.gitRemoteUrl)||!n.config.doClone||!es))return[2];if(!ei.repl.authorizations.editFileContents.isAuthorized)return j("You do not have permission to edit this Repl"),th.vF.warn("GitHub Import: Attempt to doClone for user without authorization"),[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),F(!0),[4,em({remote:i,accessToken:o})];case 2:return l.sent(),(0,z.u4)(z.AZ.NIX_GH_IMPORT_USED,{action:lc.s.ImportEnded,replId:n.id,orgContext:(0,lu.po)(eo?{id:eo}:void 0)}),[3,5];case 3:return a=l.sent(),th.vF.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(a),query:JSON.stringify(T.query),githubRepo:i,hasAccessToken:!!o}),a6.Cp(a,{extra:{query:JSON.stringify(T.query),githubRepo:i,hasAccessToken:!!o}}),j(String(a)),[3,5];case 4:return F(!1),[7];case 5:return[2]}})}),function(){return R.apply(this,arguments)}),eu=(0,d._)((0,h.useState)(!1),2),ed=eu[0],ep=eu[1];(0,h.useEffect)(function(){er&&ei&&"Repl"===ei.repl.__typename&&es&&ep(!0)},[ei,er,ed,es]),(0,h.useEffect)(function(){ed&&ec()},[ed]);var ef=(E=(0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,(0,iP.o)({dotReplit:V,fs:K})];case 1:return(e=n.sent().entrypoint)&&P({path:e,opener:(0,ts.e$)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return E.apply(this,arguments)});function eh(){return K.readFile(ls.v)}var eg=lE({checkoutBranch:en}),em=(I=(0,G._)(function(e){var n,t,r,o,i;return(0,B.YH)(this,function(a){switch(a.label){case 0:if(n=e.remote,t=e.accessToken,!er||!(ei&&"Repl"===ei.repl.__typename))return[2];return th.vF.info("GitHub Import: Starting client-side GitHub import flow"),[4,eh()];case 1:return r=a.sent(),[4,eg({remote:n,accessToken:t})];case 2:if(a.sent(),th.vF.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==r.error)return[3,5];return[4,V.updateDotReplit([])];case 3:return a.sent(),[4,eh()];case 4:r=a.sent(),a.label=5;case 5:if("content"in r)return[3,6];return th.vF.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,11];case 6:return[4,eh()];case 7:return o=a.sent(),i=""!==r.content.toString()&&"content"in o&&o.content.toString()!==r.content.toString(),[4,ee(r.content)];case 8:if(a.sent(),th.vF.info("GitHub Import: Patched dotreplit"),!i)return[3,9];return th.vF.info("GitHub Import: Repo has .replit",{githubURL:n}),[3,11];case 9:return[4,el()];case 10:a.sent(),th.vF.info("GitHub Import: Added recommended modules"),a.label=11;case 11:return[4,M({variables:{input:{id:L,doClone:!1}}})];case 12:if(a.sent(),!en)return[3,14];return[4,K.persist()];case 13:a.sent(),(0,O.HQ)({router:T,params:[{mode:"delete",key:"importBranch"}]}),a.label=14;case 14:return th.vF.info("GitHub Import: Disabled doClone on Repl. Done."),[4,ef()];case 15:if(a.sent(),"html"===Z.mode)return[2];return U(),[2]}})}),function(e){return I.apply(this,arguments)})}({insertConfigPlugin:function(){return r({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:t,openFile:o}),n)?(0,p.Y)(lI.A,{reason:"Importing..."}):null}var lF=t(85800);function lP(){var e=(0,m._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return lP=function(){return e},e}function lT(){var e=(0,m._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return lT=function(){return e},e}var lO={},lL=(0,v.J1)(lP()),lN=(0,v.J1)(lT()),lM=t(63048);function lG(){var e=(0,m._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    ...LayoutHeaderAvatarDropdownCurrentUser\n  }\n  ","\n"]);return lG=function(){return e},e}function lB(){var e=(0,m._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    org {\n      id\n      type\n    }\n    authorizations {\n      viewPermissions {\n        isAuthorized\n      }\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return lB=function(){return e},e}function lH(){var e=(0,m._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return lH=function(){return e},e}var lW={},lz=(0,v.J1)(lG(),lF.yL),l$=(0,v.J1)(lB(),lL,lM.c),lj=(0,v.J1)(lH(),l$,lz),lq=t(66100),lK=t(69343),lZ=t(54191),lV=t(21374),lJ=t(33170),lQ=t(13117),lX=t(64251),l0=t(71032),l1=function(e){return e.Welcome="Welcome",e.AiFirstWorkspace="AiFirstWorkspace",e.Assistant="Assistant",e.Agent="Agent",e.SidebarDock="SidebarDock",e.Run="Run",e.Deploy="Deploy",e}({}),l2=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},l5=(0,eA.x)({tooltipContainer:[eC.wp.width("100%"),eC.wp.maxWidth(300),eC.wp.center,eC.wp.position.relative,eC.wp.colWithGap(8),eC.wp.pb(8)],image:[eC.wp.borderRadius(8)],textContent:[eC.wp.width("100%")]}),l4={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,p.FD)(ez.S,{css:l5.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,p.FD)(eW.EY,{css:l5.textContent,children:["Your workspace comes with two AI-powered tools:"," ",(0,p.Y)("strong",{children:E.BP})," and ",(0,p.Y)("strong",{children:E.g$}),"."]}),(0,p.Y)(rb.A,{css:l5.image,src:"/public/images/ai/ai-first-workspace.png",alt:"AI-first Workspace",layout:"fixed",width:300,height:168}),(0,p.Y)(eW.EY,{css:l5.textContent,children:"Let's take a quick look at each tool and how to choose which one to use."})]})}},l3={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,p.FD)(ez.S,{css:l5.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,p.FD)(eW.EY,{css:l5.textContent,children:["Your workspace has a powerful AI chat called"," ",(0,p.Y)("strong",{children:E.BP})," which can be used in all your projects."]}),(0,p.Y)(rb.A,{css:l5.image,src:"/public/images/ai/assistant.png",alt:"Assistant available",layout:"fixed",width:300,height:168})]})}},l8={id:"Assistant",title:"".concat(E.BP,": Chat & quick edits"),icon:function(){return(0,p.Y)(V.A,{size:16})},content:function(){return(0,p.FD)(ez.S,{css:l5.tooltipContainer,children:[(0,p.FD)(eW.EY,{css:l5.textContent,children:[(0,p.Y)("strong",{children:E.BP})," is a general AI chat for your project."]}),(0,p.Y)(lQ.A,{src:l2("assistant-dark"),autoPlay:!0,loop:!0}),(0,p.Y)(lX.s,{css:l5.textContent,children:(0,p.FD)("p",{children:["Use ",(0,p.Y)("strong",{children:E.BP})," when you want toâ€¦",(0,p.FD)("ul",{children:[(0,p.Y)("li",{children:"Chat with AI about any topic"}),(0,p.Y)("li",{children:"Request quick, one-off edits to code"}),(0,p.Y)("li",{children:"Ask questions about your project"})]})]})}),(0,p.FD)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:[iV.a7," cents per ",iV.go]})]})},autoSkipIfNoTarget:!0},l7={id:"Agent",title:"".concat(E.g$,": Automated developer"),icon:function(){return(0,p.Y)(l0.A,{size:16})},content:function(){return(0,p.FD)(ez.S,{css:l5.tooltipContainer,children:[(0,p.FD)(eW.EY,{css:l5.textContent,children:[(0,p.Y)("strong",{children:E.g$})," is an automated developer that plans and generates entire projects, occasionally pausing to ask you for feedback."]}),(0,p.Y)(lQ.A,{src:l2("agent-dark"),autoPlay:!0,loop:!0}),(0,p.Y)(lX.s,{css:l5.textContent,children:(0,p.FD)("p",{children:["Use ",(0,p.Y)("strong",{children:E.g$})," when you want toâ€¦",(0,p.FD)("ul",{children:[(0,p.Y)("li",{children:"Build a new project from scratch"}),(0,p.Y)("li",{children:"Generate a build plan for your project"}),(0,p.Y)("li",{children:"Make complex, multi-step changes"})]})]})}),(0,p.FD)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:[iV.ri," cents per ",iV.v7]})]})},autoSkipIfNoTarget:!0},l6={id:"SidebarDock",title:"Dock: Open files & tools",icon:function(){return(0,p.Y)(oq,{size:16})},content:function(){return(0,p.FD)(ez.S,{css:l5.tooltipContainer,children:[(0,p.Y)(eW.EY,{css:l5.textContent,children:"In addition to AI tools, you can access code files and other workspace features via the Dock."}),(0,p.Y)(lQ.A,{src:l2("sidebar"),autoPlay:!0,loop:!0}),(0,p.FD)(eW.EY,{css:l5.textContent,children:["Notice that ",(0,p.Y)("strong",{children:"Files"})," has its own button at the top left."]})]})}},l9={id:"Run",title:"Run Button: Preview your App",icon:function(){return(0,p.Y)(oy.A,{size:16})},content:function(){return(0,p.FD)(ez.S,{css:l5.tooltipContainer,children:[(0,p.FD)(eW.EY,{css:l5.textContent,children:["When working with ",E.BP,", you can click the"," ",(0,p.Y)("strong",{children:"Run button"})," at any time to see its output."]}),(0,p.Y)(lQ.A,{src:l2("run-button"),autoPlay:!0,loop:!0})]})},advanceOnTargetClick:!0},se="workspace-desktop-tour-2024",sn=t(4723);function st(){var e=(0,m._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return st=function(){return e},e}var sr={},so=(0,v.J1)(st());function si(e){var n=(0,g._)({},sr,e);return w.I(so,n)}function sa(){var e=(0,m._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return sa=function(){return e},e}var sl={},ss=(0,v.J1)(sa()),sc=t(60095),su=new Date("2022-07-08"),sd=(0,ay.tG)("useCelebrateFirstReplPlay",!1),sp=t(14753),sf=t(86955),sh=t(49321);function sg(e){var n=e.runState,t=e.size,r=void 0===t?16:t;switch(n){case ou.ll.IDLE:return(0,p.Y)(sf.A,{size:r});case ou.ll.RUNNING:return(0,p.Y)(sh.A,{size:r});default:return(0,p.Y)(sp.A,{size:r})}}var sm=(cb={},(0,nt._)(cb,ou.ll.IDLE,"Run"),(0,nt._)(cb,ou.ll.RUNNING,"Stop"),(0,nt._)(cb,ou.ll.STOPPING,"Stopping"),(0,nt._)(cb,ou.ll.OFFLINE,"Working"),(0,nt._)(cb,ou.ll.BEFORE_RUN,"Working"),cb),sv=(cS={small:48,large:85},(0,nt._)(cS,ou.ll.IDLE,68),(0,nt._)(cS,ou.ll.RUNNING,72),(0,nt._)(cS,ou.ll.STOPPING,92),(0,nt._)(cS,ou.ll.OFFLINE,86),(0,nt._)(cS,ou.ll.BEFORE_RUN,86),cS),sw=(0,tG.AH)([eC.wp.py(12),eC.wp.width(sv.small),eC.wp.flex.row,eC.wp.center,eC.wp.borderRadius(),eC.wp.backgroundColor.accentPositiveDimmest,eC.wp.color.accentPositiveStrongest,eC.wp.cursor.pointer,eC.wp.focusRing,(cY={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},eC.wp.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:tB.LU.accentPositiveStrongest}]},(0,nt._)(cY,(0,i8.wm)("tabletMax"),[eC.wp.width(sv.large)]),(0,nt._)(cY,":focus-visible",{outlineColor:"".concat(tB.LU.accentPositiveStrongest)}),cY)]),sy=(0,tG.AH)([eC.wp.color.foregroundDimmer,eC.wp.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},eC.wp.backgroundColor.backgroundHighest],"&:active":[{borderColor:tB.LU.accentPrimaryDefault}]}]),sb=(0,h.forwardRef)(function(e,n){var t,r,o,i,a,l,s,c,u,f,m,v,y,b,S,Y,x=e.runner,_=e.onRunInitiated,A=e.style,C=e.disableTooltip,k=e.shortcut,D=e.allowPid1Runner,R=void 0===D||D,E=e.hideLabel,I=e.iconSize,U=void 0===I?12:I,P=(0,oh.g3)(),O=(0,eG.A)(),L=(0,oh.Ah)(x),N=(0,T.m6)(),M=(0,h.useMemo)(function(){return P||R?P&&L!==ou.ll.OFFLINE?{runState:P.step}:{runState:L}:{runState:ou.ll.IDLE,forceDisable:!0}},[R,L,P]),H=M.runState,$=M.forceDisable,j=si({variables:{id:O}}).data,q=(null==j?void 0:j.repl.__typename)==="Repl"?j.repl:null,K=(t=(0,g._)({},sl,void 0),i=w.I(ss,t),a=(0,F.gc)("extraDelight").preferences.extraDelight,l=(0,sc.mO)().fireCircularBurstFrom,c=(s=(0,d._)((0,W.fp)(sd),2))[0],u=s[1],f=null!==(o=null===(r=i.data)||void 0===r?void 0:r.currentUser)&&void 0!==o?o:null,m=!c&&f&&new Date(f.timeCreated)>=su,{hasCelebrated:c,celebrate:function(e){if(!e){a6.Cp(Error("Cannot find element for celebrate Repl run confetti"));return}(a||m)&&l({element:e}),m&&u(!0)}}).celebrate,Z=$||H!==ou.ll.IDLE&&H!==ou.ll.RUNNING,V=(0,eK.A)().showError,J=(0,h.useRef)(null),Q=(v=(0,G._)(function(){var e,n,t,r,o,i,a,l;return(0,B.YH)(this,function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),H!==ou.ll.IDLE)return[3,4];if(_&&_(),J.current&&K(J.current),!(null==P?void 0:P.run))return[3,1];return P.run(ou.QG.RUN_BUTTON_CLICKED),[3,3];case 1:return[4,x.run(ou.QG.RUN_BUTTON_CLICKED)];case 2:s.sent(),s.label=3;case 3:return q&&(0,z.u4)(z.AZ.PROJECT_RAN,{placement:"primary_btn",replId:q.id,replTitle:q.title,rootOriginReplUrl:q.rootOriginReplUrl,templateTitle:null===(t=q.source)||void 0===t?void 0:null===(n=t.release)||void 0===n?void 0:null===(e=n.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=q.source)||void 0===a?void 0:null===(i=a.release)||void 0===i?void 0:null===(o=i.repl)||void 0===o?void 0:null===(r=o.owner)||void 0===r?void 0:r.username,isBonsai:N}),[2];case 4:if(H===ou.ll.RUNNING){if(null==P?void 0:P.stop)return[2,P.stop({graceful:!0})];return[2,x.stopRun()]}return[3,6];case 5:if(V((l=s.sent()).toString()),th.vF.error("run button error",{errorMessage:l.message}),H===ou.ll.RUNNING){if(null==P?void 0:P.stop)return[2,P.stop()];return[2,x.stopRun()]}return[3,6];case 6:return[2]}})}),function(){return v.apply(this,arguments)}),X=H===ou.ll.IDLE&&!$;return"inline-small"===(void 0===A?"default":A)?(0,p.FD)("button",{"data-cy":"ws-run-btn",onClick:Q,ref:J,disabled:Z,css:[eC.wp.p(12),eC.wp.flex.row,eC.wp.center,eC.wp.borderRadius(8),X?eC.wp.backgroundColor.accentPositiveDimmest:eC.wp.backgroundColor.backgroundHigher,X?eC.wp.color.accentPositiveStronger:eC.wp.color.foregroundDimmer,{border:"1px solid",borderColor:X?tB.LU.accentPositiveDimmest:tB.LU.backgroundHigher},eC.wp.width("100%"),eC.wp.height("100%")],children:[(0,p.Y)(sg,{runState:H}),(0,p.Y)(eW.EY,{variant:"subheadDefault",css:[eC.wp.pl(8)],multiline:!1,children:sm[H]})]}):(0,p.Y)(tH.m_,{placement:"bottom",isDisabled:C||!k,tooltip:(b=(y={shortcut:k,runState:H,forceDisable:$}).runState,S=y.shortcut,Y=y.forceDisable,b===ou.ll.IDLE&&Y?"Run button is not configured":S?(0,p.Y)(eb._y,{keyCombo:S,fontSize:12}):null),children:function(e,t){return(0,p.FD)("button",(0,e8._)((0,g._)({},e),{onClick:Q,disabled:Z,ref:(0,e9.P)(J,t,n,{breadcrumb:"client/workspace/components/RunButton/index.tsx:307"}),css:[sw,!X&&sy,eC.wp.height(32),(0,nt._)({transition:"width 80ms ease-out"},(0,i8.wm)("tabletMax"),eC.wp.width(sv[H]))],children:[(0,p.Y)(sg,{runState:H,size:U}),E?null:(0,p.Y)(eW.EY,{multiline:!1,css:[eC.wp.pl(6),eC.wp.display.none,eC.wp.fontWeight.medium,(0,nt._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(ic.LO.tabletMax,"px)"),[eC.wp.display.block])],children:sm[H]})]}))}})}),sS=(0,tG.AH)([eC.wp.noDragRegion,eC.wp.position.relative,eC.wp.rowWithGap(8),eC.wp.align.center]);function sY(e){var n=e.attachTourRefs,t=(0,E.jt)(),r=sx(),o=r.tourRefs,i=r.isAnyTourStepActive,a=(0,eb.Jn)(oA.run.id),l=(0,et.A)().runner;return(0,p.Y)(ez.S,{innerRef:void 0!==n&&n?o:void 0,dataCy:"ws-run-btn",css:sS,children:(0,p.Y)(sb,{runner:l,disableTooltip:i,shortcut:a,allowPid1Runner:!t})})}function sx(){var e=(0,et.A)().runner,n=(0,sn.kD)(),t=(0,sn.oZ)(),r=(0,h.useCallback)(function(){var r=e.getRunState();null==n&&(r===ou.ll.RUNNING?t("user"):r===ou.ll.BEFORE_RUN&&t("async"))},[e,n,t]),o=(0,sn.Os)(lV.C.id,lV.j.Run),i=(0,sn.Os)(se,l1.Run),a=(0,sn.Os)(lJ.IW.id,lJ.Gp.RunApp,{onEnter:r}),l=(0,sn.Os)(lJ.IW.id,lJ.Gp.RunAppWithGeneratedCode,{onEnter:r}),s=(0,sn.Os)(lJ._t.id,lJ.ij.RunApp),c=(0,sn.Os)(lJ._t.id,lJ.ij.RunAppWithGeneratedCode),u=(0,sn.Os)(lJ._t.id,lJ.ij.RunAppWithNewImages),d=(null==o?void 0:o.isActive)||(null==i?void 0:i.isActive)||(null==a?void 0:a.isActive)||(null==l?void 0:l.isActive)||(null==s?void 0:s.isActive)||(null==c?void 0:c.isActive)||(null==u?void 0:u.isActive);return{tourRefs:(0,e9.P)(o.tourRef,i.tourRef,a.tourRef,l.tourRef,s.tourRef,c.tourRef,u.tourRef,{breadcrumb:"client/replEnvironmentDesktop/Header/DynamicRunButton.tsx:138"}),isAnyTourStepActive:d}}var s_=t(67825);function sA(){var e=(0,m._)(['\n  fragment DesktopAppNavMenuCurrentUser on CurrentUser {\n    id\n    hasSeenWorkspaceTour: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return sA=function(){return e},e}function sC(){var e=(0,m._)(["\n  query DesktopAppNavMenuTour {\n    currentUser {\n      id\n      ...DesktopAppNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return sC=function(){return e},e}var sk={},sD=(0,v.J1)(sA()),sR=(0,v.J1)(sC(),sD),sE=t(73225),sI=t(99047),sU=t(80242),sF={id:"DesktopAppNavMenu",title:"Native App Navigation",content:function(){return(0,p.Y)(ez.S,{dataCy:"desktop-app-nav-menu-tour",children:(0,p.Y)(eW.EY,{children:"In the desktop app, you can use this menu to switch between your Apps, create new ones, and open more windows."})})}};function sP(e){var n,t=e.targetElement,r=(0,sE.A)("workspace","desktop-app-nav-menu"),o=r.shouldDisplay,i=r.register,a=r.dismiss,l=(n=(0,g._)({},sk,void 0),w.I(sR,n));return((0,h.useEffect)(function(){if(!l.loading&&(null===(e=l.data)||void 0===e?void 0:e.currentUser)){var e,n=l.data.currentUser,t=n.hasSeenWorkspaceTour,r=n.hasSeenSidebarTour;(t||r)&&i()}},[i,l]),t&&o)?(0,p.FD)(p.FK,{children:[(0,p.Y)(sI.J,{targetElement:t}),(0,p.Y)(sU.w,{placement:"bottom-start",targetElement:t,activeStep:sF,currentStepIndex:0,done:a,goto:function(){},totalSteps:1,disableAnimation:!0,onClickOutside:a})]}):null}var sT=t(26308),sO=t(47579),sL=t(2298),sN=t(94629),sM=t(2301),sG=(0,eA.x)({button:[eC.wp.viewStyle,eC.wp.reset.button,sL.b.nofill,eC.wp.flex.row,eC.wp.height(32),eC.wp.width(40),eC.wp.center,eC.wp.color.foregroundDefault,eC.wp.cursor.pointer,eC.wp.borderRadius(),{":hover svg":{fill:tB.LU.foregroundDefault}}],wrapper:[eC.wp.borderRadius(),eC.wp.width(300),eC.wp.maxHeight("60vh"),eC.wp.flex.column],newReplButtonWrapper:[eC.wp.p(8)],newWindowButtonWrapper:[eC.wp.p(8),eC.wp.pt(0)],replsListContainer:[eC.wp.flex.shrink(1),eC.wp.borderRadius("container")]});function sB(){var e=(0,d._)((0,h.useState)(!1),2),n=e[0],t=e[1],r=(0,f.useRouter)(),o=(0,d._)((0,sO.A)("DesktopNavMenu"),2),i=o[0],a=o[1];return(0,p.FD)(p.FK,{children:[(0,p.FD)(sM.Wv,{background:"default",isOpen:n,onOpenChange:function(e){t(e)},placement:"bottom start",label:"Navigation menu",noArrow:!0,children:[function(e){var n=e.ref,t=(0,oL._)(e,["ref"]);return(0,p.FD)("button",(0,e8._)((0,g._)({css:sG.button,"data-cy":"global-nav-dropdown-btn",ref:(0,e9.P)(n,a,{breadcrumb:"client/desktopApp/components/DesktopNavMenu/index.tsx:80"})},t),{children:[(0,p.Y)(sN.kw,{color:tB.LU.foregroundDefault,size:20}),(0,p.Y)(aa.A,{color:tB.LU.foregroundDimmest,size:12})]}))},(0,p.FD)(ez.S,{css:sG.wrapper,children:[(0,p.Y)(ez.S,{css:sG.newReplButtonWrapper,children:(0,p.Y)(a0.v,{iconLeft:(0,p.Y)(eg.A,{}),text:"Create a Repl",colorway:"primary",href:{pathname:"/new"}})}),(0,p.Y)(ez.S,{css:sG.newWindowButtonWrapper,children:(0,p.Y)(eH.$n,{text:"New window",iconLeft:(0,p.Y)(ow.A,{}),onClick:function(){rQ.M.openNewWindow()}})}),(0,p.Y)(ez.S,{css:sG.replsListContainer,children:(0,p.Y)(sT.A,{onClick:function(e,n,t){if(t){rQ.M.openWindow(e);return}r.push({pathname:"/replEnvironmentDesktop",query:{replUrl:e,replId:n}},{pathname:e})}})})]})]}),(0,p.Y)(sP,{targetElement:i.current})]})}var sH=t(48391);function sW(e){var n=e.org;return(0,rX.A)()?(0,p.Y)(sB,{}):(0,p.Y)(sH.C,{org:n})}var sz=t(81074),s$=t(15319);function sj(){var e=(0,m._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return sj=function(){return e},e}var sq={},sK=(0,v.J1)(sj(),s$.T,sz.r),sZ=t(73606),sV=t(20797),sJ=t(56071),sQ=t(18466),sX=t(63314),s0=t(27233),s1=t(37535),s2=t(76805),s5=t(12618),s4=t(95570),s3=t(16021),s8=(0,eA.x)({self:[eC.wp.display.grid,eC.wp.p(4),{gap:4,alignItems:"stretch"}],list:[eC.wp.maxHeight(640)],listItem:[s0.iF.item,eC.wp.px(8),eC.wp.height(28),{span:eC.wp.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[eC.wp.height(28),eC.wp.px(6),eC.wp.transition.none],currentReplIcon:[eC.wp.color.foregroundDimmer],tourWrapper:[eC.wp.p(8)]});function s7(e){var n=e.label,t=e.icon,r=(0,oL._)(e,["label","icon"]);return(0,p.FD)(s0.if,(0,e8._)((0,g._)({css:s8.listItem},r),{textValue:n,children:[(0,p.Y)(s0.PX,{css:s8.listItemLabel,children:n}),(0,p.Y)(t$.Z_,{size:16,children:t})]}))}var s6=(0,h.forwardRef)(function(e,n){var t,r,o,i,a,l,s,c,u,f,m,v,y=(0,eG.A)(),b=(0,d._)((0,h.useState)(""),2),S=b[0],Y=b[1],x=(0,sn.Os)(sX.X.id,sX.F.Forks),_=(t={variables:{id:y,input:{}},notifyOnNetworkStatusChange:!0},r=(0,g._)({},sq,t),w.I(sK,r)),A=_.refetch,C=(0,eK.A)(),k=C.showConfirm,D=C.showError,R=(0,d._)((0,sQ.B)({onFork:function(){k("App forked, redirecting...")},onError:function(){D("Error creating fork - please try again")}}),2),E=R[0],I=R[1].loading;(0,sZ.A)(function(){A({input:{filters:{title:{search:S}}},id:y})},[S],300);var U=(null===(o=_.data)||void 0===o?void 0:o.repl.__typename)==="Repl"?_.data.repl.project:null,F=(null===(i=_.previousData)||void 0===i?void 0:i.repl.__typename)==="Repl"?null===(a=_.previousData.repl.project)||void 0===a?void 0:a.repls.items:null,P=null!==(f=null==U?void 0:U.mainRepl)&&void 0!==f?f:(null===(l=_.previousData)||void 0===l?void 0:l.repl.__typename)==="Repl"&&null!==(u=null===(s=_.previousData.repl.project)||void 0===s?void 0:s.mainRepl)&&void 0!==u?u:null,T=(null===(c=_.data)||void 0===c?void 0:c.repl.__typename)==="Repl"?_.data.repl:null,O=(0,sV.Si)({orgId:e.org.id,projectId:e.projectId}),L=(0,sn.mR)();return(0,p.FD)("div",{css:s8.self,ref:n,children:[(0,p.FD)(s2.U,{children:[(0,p.Y)(s5.L,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:Y,isLoading:_.loading,autoFocus:!0}),(0,p.Y)(s0.qF,{isLoading:_.loading,items:null!==(v=null!==(m=null==U?void 0:U.repls.items)&&void 0!==m?m:F)&&void 0!==v?v:[],css:s8.list,children:function(e){var n;return(0,p.Y)(s7,(0,e8._)((0,g._)({icon:e.id===y?(0,p.Y)(tH.m_,{tooltip:"You are here",placement:"right",children:(0,p.Y)(s3.A,{css:s8.currentReplIcon})}):void 0,isDisabled:e.id===y,id:e.id,label:e.title},(0,i3.q1)(e)),{sessions:null!==(n=O[e.id])&&void 0!==n?n:[]}),e.id)}})]}),(0,p.Y)(i2.a,{}),(0,p.FD)(ez.S,{children:[(0,p.Y)(a0.v,(0,e8._)((0,g._)({alignment:"start"},(0,sJ.gm)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,p.Y)(om.A,{}),text:"Project dashboard",variant:"nofill",css:s8.listButtonLink})),(0,p.FD)(s1.in,{elevated:!1,placement:"right top",trigger:(0,p.Y)(eH.$n,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:I?(0,p.Y)(sp.A,{}):(0,p.Y)(eg.A,{}),loading:I,css:s8.listButtonLink}),children:[T?(0,p.Y)(s1.Dr,{label:"From here (".concat(T.title,")"),isDisabled:I,onAction:function(){E({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:T})}}):null,T&&P&&T.id!==P.id?(0,p.Y)(s1.Dr,{label:"From main App (".concat(P.title,")"),isDisabled:!P||I,onAction:function(){P&&E({orgId:e.org.id,repl:P,forkSource:"projectHeaderMenu"})}}):null]}),x.isActive&&L?(0,p.Y)("div",{css:s8.tourWrapper,children:(0,p.Y)(s4.p,{content:L.content,title:L.title,onDismiss:x.next,onCurrentStepChange:x.goto,currentStepIndex:sX.X.steps.findIndex(function(e){return e.id===sX.F.Forks}),totalSteps:sX.X.steps.length})}):null]})]})});function s9(){var e=(0,m._)(["\n  query GetReplIcon($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        iconUrl\n      }\n    }\n  }\n"]);return s9=function(){return e},e}var ce={},cn=(0,v.J1)(s9()),ct=t(40581),cr=(0,eA.x)({container:[eC.wp.position.relative],loadingGeneratedIcon:[i1.S.foregroundPulse(tB.LU.blurpleDimmest,tB.LU.blurpleDefault),eC.wp.borderRadius()]});function co(e){var n,t,r,o,i,a,l,s,c,u,f,m,v=e.replId,y=e.replIconUrl,b=(t=(n={replId:v,replIconUrl:y}).replId,r=n.replIconUrl,i=(o=(0,d._)((0,h.useState)(null),2))[0],a=o[1],l=(0,et.A)().container,s=(0,lK.U)(),m=(u={variables:{replId:t},pollInterval:(c=r===ct.QY&&null===i&&!s)?2e3:0,onCompleted:function(e){var n,t=(null==e?void 0:null===(n=e.getRepl)||void 0===n?void 0:n.__typename)==="Repl"?e.getRepl.iconUrl:null;t&&t!==ct.QY&&(l.exec("sh","-c","curl -o generated-icon.png ".concat(t)),a(t))}},f=(0,g._)({},ce,u),w.I(cn,f)).error,{loading:c,error:m,generatedIconUrl:i}),S=b.loading,Y=b.generatedIconUrl;return(0,p.Y)(ez.S,{css:cr.container,children:(0,p.Y)(ez.S,{css:S&&cr.loadingGeneratedIcon,children:(0,p.Y)(r6.Ay,{iconUrl:Y||y,size:20,alt:""})})})}var ci=t(50656),ca=(0,eA.x)({projectLinkTooltip:[eC.wp.maxWidth(400),eC.wp.flex.shrink(2)],projectLink:[eC.wp.px(6),eC.wp.noDragRegion,eC.wp.flex.growAndShrink(1)],inheritanceChevron:[eC.wp.color.outlineStrongest,{marginInline:-1}]});function cl(e){var n=e.repl,t=(0,d._)((0,h.useState)(!1),2),r=t[0],o=t[1],i=(0,sn.Os)(sX.X.id,sX.F.Welcome),a=(0,sn.Os)(sX.X.id,sX.F.Forks,{onEnter:function(){o(!0)},onExit:function(){o(!1)}});return n.project&&n.org?(0,p.FD)(p.FK,{children:[(0,p.Y)(tH.m_,{tooltip:"Project forks",css:ca.projectLinkTooltip,isOpen:!r&&void 0,children:(0,p.FD)(sM.Wv,{buttonRef:i.tourRef,label:"Project Menu",isOpen:r,onOpenChange:function(e){o(e),e&&i.isActive?i.next():!e&&a.isActive&&a.next()},noArrow:!0,placement:"bottom start",children:[(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(co,{replId:n.id,replIconUrl:n.iconUrl}),text:n.project.title,variant:"nofill",css:ca.projectLink}),(0,p.Y)(s6,{org:n.org,projectId:n.project.id,ref:a.tourRef})]})}),(0,p.Y)(ci.A,{size:12,css:ca.inheritanceChevron})]}):null}var cs=t(29668),cc=t.n(cs);function cu(){return(0,p.Y)(eD.ui,{background:"higher",clsx:cc().root,children:(0,p.Y)(eW.EY,{children:"Planning"})})}var cd=t(13249),cp={backgroundDefault:"var(--background-default)",backgroundHigher:"var(--background-higher)"},cf={primary:{strongest:"var(--accent-primary-strongest)",stronger:"var(--accent-primary-stronger)",default:"var(--accent-primary-default)",dimmer:"var(--accent-primary-dimmer)",dimmest:"var(--accent-primary-dimmest)"},positive:{strongest:"var(--accent-positive-strongest)",stronger:"var(--accent-positive-stronger)",default:"var(--accent-positive-default)",dimmer:"var(--accent-positive-dimmer)",dimmest:"var(--accent-positive-dimmest)"},negative:{strongest:"var(--accent-negative-strongest)",stronger:"var(--accent-negative-stronger)",default:"var(--accent-negative-default)",dimmer:"var(--accent-negative-dimmer)",dimmest:"var(--accent-negative-dimmest)"},red:{strongest:"var(--accent-red-strongest)",stronger:"var(--accent-red-stronger)",default:"var(--accent-red-default)",dimmer:"var(--accent-red-dimmer)",dimmest:"var(--accent-red-dimmest)"},orange:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},yellow:{strongest:"var(--accent-yellow-strongest)",stronger:"var(--accent-yellow-stronger)",default:"var(--accent-yellow-default)",dimmer:"var(--accent-yellow-dimmer)",dimmest:"var(--accent-yellow-dimmest)"},lime:{strongest:"var(--accent-lime-strongest)",stronger:"var(--accent-lime-stronger)",default:"var(--accent-lime-default)",dimmer:"var(--accent-lime-dimmer)",dimmest:"var(--accent-lime-dimmest)"},green:{strongest:"var(--accent-green-strongest)",stronger:"var(--accent-green-stronger)",default:"var(--accent-green-default)",dimmer:"var(--accent-green-dimmer)",dimmest:"var(--accent-green-dimmest)"},teal:{strongest:"var(--accent-teal-strongest)",stronger:"var(--accent-teal-stronger)",default:"var(--accent-teal-default)",dimmer:"var(--accent-teal-dimmer)",dimmest:"var(--accent-teal-dimmest)"},blue:{strongest:"var(--accent-blue-strongest)",stronger:"var(--accent-blue-stronger)",default:"var(--accent-blue-default)",dimmer:"var(--accent-blue-dimmer)",dimmest:"var(--accent-blue-dimmest)"},blurple:{strongest:"var(--accent-blurple-strongest)",stronger:"var(--accent-blurple-stronger)",default:"var(--accent-blurple-default)",dimmer:"var(--accent-blurple-dimmer)",dimmest:"var(--accent-blurple-dimmest)"},purple:{strongest:"var(--accent-purple-strongest)",stronger:"var(--accent-purple-stronger)",default:"var(--accent-purple-default)",dimmer:"var(--accent-purple-dimmer)",dimmest:"var(--accent-purple-dimmest)"},magenta:{strongest:"var(--accent-magenta-strongest)",stronger:"var(--accent-magenta-stronger)",default:"var(--accent-magenta-default)",dimmer:"var(--accent-magenta-dimmer)",dimmest:"var(--accent-magenta-dimmest)"},pink:{strongest:"var(--accent-pink-strongest)",stronger:"var(--accent-pink-stronger)",default:"var(--accent-pink-default)",dimmer:"var(--accent-pink-dimmer)",dimmest:"var(--accent-pink-dimmest)"},grey:{strongest:"var(--accent-grey-strongest)",stronger:"var(--accent-grey-stronger)",default:"var(--accent-grey-default)",dimmer:"var(--accent-grey-dimmer)",dimmest:"var(--accent-grey-dimmest)"},brown:{strongest:"var(--accent-brown-strongest)",stronger:"var(--accent-brown-stronger)",default:"var(--accent-brown-default)",dimmer:"var(--accent-brown-dimmer)",dimmest:"var(--accent-brown-dimmest)"},warning:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},brand:{strongest:"var(--brand-accent-strongest)",stronger:"var(--brand-accent-stronger)",default:"var(--brand-accent-default)",dimmer:"var(--brand-accent-dimmer)",dimmest:"var(--brand-accent-dimmest)"}},ch=new Map,cg=new Map,cm=new Map;Object.keys(cf),Object.keys(cf[Object.keys(cf)[0]]);var cv=!0,cw=!1,cy=void 0;try{for(var cb,cS,cY,cx,c_=Object.entries({borderRadius1:"--border-radius-1",borderRadius2:"--border-radius-2",borderRadius4:"--border-radius-4",borderRadius6:"--border-radius-6",borderRadius8:"--border-radius-8",borderRadius12:"--border-radius-12",borderRadius16:"--border-radius-16",borderRadiusDefault:"--border-radius-default",borderRadiusContainer:"--border-radius-container",borderRadiusRound:"--border-radius-round",space1:"--space-1",space2:"--space-2",space4:"--space-4",space6:"--space-6",space8:"--space-8",space12:"--space-12",space16:"--space-16",space24:"--space-24",space32:"--space-32",space40:"--space-40",space48:"--space-48",space56:"--space-56",space64:"--space-64",space80:"--space-80",space96:"--space-96",space128:"--space-128",space256:"--space-256",spaceDefault:"--space-default",shadow1:"--shadow-1",shadow2:"--shadow-2",shadow3:"--shadow-3",shadowDefault:"--shadow-default",fontFamilyDefault:"--font-family-default",fontFamilyCode:"--font-family-code",fontSizeSmall:"--font-size-small",fontSizeDefault:"--font-size-default",fontSizeSubheadDefault:"--font-size-subhead-default",fontSizeSubheadBig:"--font-size-subhead-big",fontSizeHeaderDefault:"--font-size-header-default",fontSizeHeaderBig:"--font-size-header-big",fontWeightRegular:"--font-weight-regular",fontWeightMedium:"--font-weight-medium",fontWeightBold:"--font-weight-bold",lineHeightSmall:"--line-height-small",lineHeightDefault:"--line-height-default",lineHeightSubheadDefault:"--line-height-subhead-default",lineHeightSubheadBig:"--line-height-subhead-big",lineHeightHeaderDefault:"--line-height-header-default",lineHeightHeaderBig:"--line-height-header-big",transitionDurationSnappy:"--transition-duration-snappy",transitionDurationChill:"--transition-duration-chill",transitionTimingFunctionSnappy:"--transition-timing-function-snappy",transitionTimingFunctionChill:"--transition-timing-function-chill",borderWidthDefault:"--border-width-default",singleLine:"--single-line",backgroundRoot:"--background-root",backgroundDefault:"--background-default",backgroundHigher:"--background-higher",backgroundHighest:"--background-highest",backgroundOverlay:"--background-overlay",foregroundDefault:"--foreground-default",foregroundDimmer:"--foreground-dimmer",foregroundDimmest:"--foreground-dimmest",outlineDimmest:"--outline-dimmest",outlineDimmer:"--outline-dimmer",outlineDefault:"--outline-default",outlineStronger:"--outline-stronger",outlineStrongest:"--outline-strongest",accentPrimaryStrongest:"--accent-primary-strongest",accentPrimaryStronger:"--accent-primary-stronger",accentPrimaryDefault:"--accent-primary-default",accentPrimaryDimmer:"--accent-primary-dimmer",accentPrimaryDimmest:"--accent-primary-dimmest",accentPositiveStrongest:"--accent-positive-strongest",accentPositiveStronger:"--accent-positive-stronger",accentPositiveDefault:"--accent-positive-default",accentPositiveDimmer:"--accent-positive-dimmer",accentPositiveDimmest:"--accent-positive-dimmest",accentNegativeStrongest:"--accent-negative-strongest",accentNegativeStronger:"--accent-negative-stronger",accentNegativeDefault:"--accent-negative-default",accentNegativeDimmer:"--accent-negative-dimmer",accentNegativeDimmest:"--accent-negative-dimmest",redStrongest:"--accent-red-strongest",redStronger:"--accent-red-stronger",redDefault:"--accent-red-default",redDimmer:"--accent-red-dimmer",redDimmest:"--accent-red-dimmest",orangeStrongest:"--accent-orange-strongest",orangeStronger:"--accent-orange-stronger",orangeDefault:"--accent-orange-default",orangeDimmer:"--accent-orange-dimmer",orangeDimmest:"--accent-orange-dimmest",yellowStrongest:"--accent-yellow-strongest",yellowStronger:"--accent-yellow-stronger",yellowDefault:"--accent-yellow-default",yellowDimmer:"--accent-yellow-dimmer",yellowDimmest:"--accent-yellow-dimmest",limeStrongest:"--accent-lime-strongest",limeStronger:"--accent-lime-stronger",limeDefault:"--accent-lime-default",limeDimmer:"--accent-lime-dimmer",limeDimmest:"--accent-lime-dimmest",greenStrongest:"--accent-green-strongest",greenStronger:"--accent-green-stronger",greenDefault:"--accent-green-default",greenDimmer:"--accent-green-dimmer",greenDimmest:"--accent-green-dimmest",tealStrongest:"--accent-teal-strongest",tealStronger:"--accent-teal-stronger",tealDefault:"--accent-teal-default",tealDimmer:"--accent-teal-dimmer",tealDimmest:"--accent-teal-dimmest",blueStrongest:"--accent-blue-strongest",blueStronger:"--accent-blue-stronger",blueDefault:"--accent-blue-default",blueDimmer:"--accent-blue-dimmer",blueDimmest:"--accent-blue-dimmest",blurpleStrongest:"--accent-blurple-strongest",blurpleStronger:"--accent-blurple-stronger",blurpleDefault:"--accent-blurple-default",blurpleDimmer:"--accent-blurple-dimmer",blurpleDimmest:"--accent-blurple-dimmest",purpleStrongest:"--accent-purple-strongest",purpleStronger:"--accent-purple-stronger",purpleDefault:"--accent-purple-default",purpleDimmer:"--accent-purple-dimmer",purpleDimmest:"--accent-purple-dimmest",magentaStrongest:"--accent-magenta-strongest",magentaStronger:"--accent-magenta-stronger",magentaDefault:"--accent-magenta-default",magentaDimmer:"--accent-magenta-dimmer",magentaDimmest:"--accent-magenta-dimmest",pinkStrongest:"--accent-pink-strongest",pinkStronger:"--accent-pink-stronger",pinkDefault:"--accent-pink-default",pinkDimmer:"--accent-pink-dimmer",pinkDimmest:"--accent-pink-dimmest",greyStrongest:"--accent-grey-strongest",greyStronger:"--accent-grey-stronger",greyDefault:"--accent-grey-default",greyDimmer:"--accent-grey-dimmer",greyDimmest:"--accent-grey-dimmest",brownStrongest:"--accent-brown-strongest",brownStronger:"--accent-brown-stronger",brownDefault:"--accent-brown-default",brownDimmer:"--accent-brown-dimmer",brownDimmest:"--accent-brown-dimmest",white:"--white",black:"--black",surfaceBackground:"--surface-background",interactiveBackground:"--interactive-background",interactiveBackgroundActive:"--interactive-background--active",interactiveBorder:"--interactive-border",interactiveBorderHover:"--interactive-border--hover",brandText:"--brand-text",brandTextSecondary:"--brand-secondary-text",brandTextLight:"--brand-text-light",brandBackground:"--brand-background",brandBackgroundDarker:"--brand-background-darker",brandBorder:"--brand-border",brandAccentStrongest:"--brand-accent-strongest",brandAccentStronger:"--brand-accent-stronger",brandAccentDefault:"--brand-accent-default",brandAccentDimmer:"--brand-accent-dimmer",brandAccentDimmest:"--brand-accent-dimmest",brandBlack:"--brand-black",fontFamilyBrand:"--font-family-brand",fontFamilyBrandVariable:"--font-family-brand-variable",fontFamilyBrandPixel:"--font-family-brand-pixel"})[Symbol.iterator]();!(cv=(cx=c_.next()).done);cv=!0){var cA=(0,d._)(cx.value,2),cC=cA[0],ck=cA[1];ch.set(cC,ck),cg.set(ck,cC),cm.set(cC,"var(".concat(ck,")"))}}catch(e){cw=!0,cy=e}finally{try{cv||null==c_.return||c_.return()}finally{if(cw)throw cy}}var cD=t(89968);function cR(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0L6.64 5.578a.742.742 0 0 1 .023.024l3.96 3.96c.056.042.105.09.147.146L23.53 22.47a.75.75 0 1 1-1.06 1.06l-6.72-6.72a.75.75 0 0 1-.704-.089 5.25 5.25 0 0 0-6.082 0 .75.75 0 0 1-.868-1.222 6.75 6.75 0 0 1 5.224-1.118l-3.408-3.408a10.19 10.19 0 0 0-4.43 2.152.75.75 0 1 1-.963-1.15 11.69 11.69 0 0 1 4.16-2.235L5.944 7.004a15.16 15.16 0 0 0-4.027 2.558.75.75 0 1 1-.994-1.124 16.66 16.66 0 0 1 3.888-2.567L.47 1.531A.75.75 0 0 1 .47.47Zm16.34 6.058a15.25 15.25 0 0 0-6.04-.73.75.75 0 0 1-.12-1.496 16.75 16.75 0 0 1 12.426 4.136.75.75 0 0 1-.992 1.124 15.25 15.25 0 0 0-5.274-3.034Zm-.764 4.203a.75.75 0 0 1 1.003-.345 11.69 11.69 0 0 1 2.436 1.592.75.75 0 0 1-.97 1.144 10.191 10.191 0 0 0-2.124-1.388.75.75 0 0 1-.345-1.003ZM11.25 20a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var cE=(0,eA.x)({metadata:[eC.wp.flex.growAndShrink(1)],iconWrapper:[eC.wp.position.relative,eC.wp.display.none,(0,nt._)({},eC.$_.min("tabletMax"),[eC.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[eC.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[eC.wp.flex.shrink(1),eC.wp.truncate],placeholderTitle:[eC.wp.width(100),eC.wp.borderRadius("default"),{alignSelf:"stretch"},i1.S.foregroundPulse(cp.backgroundDefault,cp.backgroundHigher)]});function cI(e){var n,t=e.repl,r=(0,cD.A)().didDisconnect;return(0,p.FD)(ez.S,{css:cE.metadata,row:!0,gap:6,align:"center",children:[(0,p.FD)(ez.S,{css:cE.iconWrapper,children:[(null===(n=t.project)||void 0===n?void 0:n.id)?null:(0,p.Y)(ez.S,{css:r&&cE.dimIcon,children:(0,p.Y)(co,{replId:t.id,replIconUrl:t.iconUrl})}),r?(0,p.Y)(tH.m_,{tooltip:"Reconnecting",children:(0,p.Y)(cR,{size:16,css:cE.diconnectedIcon})}):null]}),(0,p.Y)(eW.EY,{multiline:!1,css:cE.title,"data-cy":"header-repl-title",color:r?"dimmer":"default",children:t.title})]})}var cU=(0,eA.x)({popover:[eC.wp.maxWidth(460),eC.wp.width("100%")],button:[sL.b.nofill,eC.wp.height(32),eC.wp.flex.growAndShrink(1),eC.wp.align.center,eC.wp.rowWithGap(4),eC.wp.px(6),eC.wp.borderRadius(),eC.wp.color.foregroundDefault]});function cF(e){var n=e.repl,t=e.getDesktopLayoutState,r=(0,d._)((0,h.useState)(!1),2),o=r[0],i=r[1];return(0,p.FD)(sM.Wv,{isOpen:o,onOpenChange:function(e){i(e),e&&(0,z.u4)(z.AZ.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",noArrow:!0,css:cU.popover,children:[(0,p.Y)(ez.D.button,{dataCy:"ws-repl-info-container",css:cU.button,onClick:function(){(0,z.u4)(z.AZ.REPL_METADATA_OPENED)},children:(0,p.Y)(cI,{repl:n})}),(0,p.Y)(cd.A,{getDesktopLayoutState:t,setIsEditing:i})]})}var cP=t(40500),cT=t(73159),cO=t(40171),cL=t(79505),cN=ez.D.span,cM=(0,eA.x)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(tB.LU.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function cG(e){var n=e.label,t=e.children,r=(0,d._)(t,2),o=r[0],i=r[1],a=(0,d._)((0,h.useState)(!1),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1],g=(0,h.useRef)(!1);return(0,h.useEffect)(function(){u&&(g.current=!0);var e=setTimeout(function(){s(u)},200);return function(){clearTimeout(e)}},[u]),(0,p.FD)(sM.Wv,{label:n,isOpen:l,onOpenChange:function(){return s(!l)},placement:"right",offset:16,children:[(0,p.Y)(cN,{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},onClick:function(){return s(!0)},onKeyDown:function(e){"Enter"===e.key&&s(!0)},tabIndex:0,css:cM.triggerWrapper,children:o}),(0,p.Y)(cN,{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:i})]})}var cB=t(68753);function cH(e){return e>iQ.O8?"".concat((0,iX.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,iX.lX)(e)).toLocaleString()," MiB")}cL.t1.register(cL.No,cL.dN);var cW=(0,eA.x)({sectionPadding:[eC.wp.py(4),eC.wp.px(12)],rowSpacing:[eC.wp.rowWithGap(8),eC.wp.justify.spaceBetween,eC.wp.align.center]}),cz=(0,eA.x)({wrapper:[eC.wp.borderRadius(4),eC.wp.border({color:tB.LU.outlineDimmer}),eC.wp.overflow("hidden")],rowSection:[cW.sectionPadding,cW.rowSpacing],hoverRowSection:[cW.sectionPadding,cW.rowSpacing,{":hover":{backgroundColor:tB.LU.backgroundHigher}}],hoverColumnSection:[cW.sectionPadding,eC.wp.colWithGap(8),{":hover":{backgroundColor:tB.LU.backgroundHigher}}],sectionHeading:[eC.wp.fontWeight.bold],alignedRow:[eC.wp.rowWithGap(8),eC.wp.align.center],alignedSpaceBetweenRow:[cW.rowSpacing],detailContent:[eC.wp.p(8),eC.wp.colWithGap(8),eC.wp.width(260)],detailSectionsWrapper:[eC.wp.borderRadius(4),eC.wp.border({color:tB.LU.outlineDimmer}),eC.wp.overflow("hidden")],warningText:[eC.wp.color.orangeStronger],dangerText:[eC.wp.color.redStronger],chartWrapper:[eC.wp.width(22),eC.wp.height(18),eC.wp.borderRadius(2)],indentAgain:[eC.wp.pl(24)]});function c$(){var e=(0,ax.h)(a$);return(0,p.FD)(ez.S,{css:cz.wrapper,children:[(0,p.FD)(ez.S,{css:cz.rowSection,children:[(0,p.Y)(eW.EY,{css:cz.sectionHeading,children:"Compute"}),(0,p.Y)(ez.S,{css:cz.alignedRow,children:(0,p.FD)(eW.EY,{color:"dimmer",children:[e.numVCpu," vCPU, ",e.ramTotalGB," GiB RAM"]})})]}),(0,p.Y)(i2.a,{}),(0,p.Y)(cj,{}),(0,p.Y)(cq,{})]})}function cj(){var e=(0,ax.h)(aj);return(0,p.Y)(cK,{title:"CPU",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(e.currentUserPercent,"%"),recentPercents:e.recentUserUtilPercents},{title:"System",displayValue:"".concat(e.currentSystemPercent,"%"),recentPercents:e.recentSystemUtilPercents}]})}function cq(){var e=(0,ax.h)(aq);return(0,p.Y)(cK,{title:"RAM",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:cH(e.currentRssInBytes),recentPercents:e.recentRssUtilPercents},{title:"Cache",displayValue:cH(e.currentCacheInBytes),recentPercents:e.recentCacheUtilPercents}]})}function cK(e){var n=e.title,t=e.displayValue,r=e.status,o=e.recentPercents,i=e.detailText,a=e.detailRows;return(0,p.FD)(cG,{label:"Compute details",children:[(0,p.FD)(ez.S,{css:cz.hoverRowSection,children:[(0,p.FD)(ez.S,{css:cz.alignedRow,children:[(0,p.Y)(eW.EY,{children:n}),(0,p.Y)(cZ,{status:r})]}),(0,p.FD)(ez.S,{css:cz.alignedRow,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:t}),(0,p.Y)(ez.S,{css:cz.chartWrapper,children:(0,p.Y)(cV,{data:o,colorAreaUnderLine:!0})})]})]}),(0,p.FD)(ez.S,{css:cz.detailContent,children:[(0,p.Y)(eW.EY,{children:i}),(0,p.Y)(ez.S,{css:cz.detailSectionsWrapper,children:a.map(function(e,n){return(0,p.FD)(ez.S,{css:cz.rowSection,children:[(0,p.Y)(eW.EY,{children:e.title}),(0,p.FD)(ez.S,{css:cz.alignedRow,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:e.displayValue}),(0,p.Y)(ez.S,{css:cz.chartWrapper,children:(0,p.Y)(cV,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]})]})}function cZ(e){var n=e.status;return"warning"===n?(0,p.FD)(p.FK,{children:[(0,p.Y)(cB.A,{color:tB.LU.orangeStronger}),(0,p.Y)(eW.EY,{css:cz.warningText,children:"Near limit"})]}):"danger"===n?(0,p.FD)(p.FK,{children:[(0,p.Y)(cB.A,{color:tB.LU.redStronger}),(0,p.Y)(eW.EY,{css:cz.dangerText,children:"At limit"})]}):null}function cV(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,o=e.showHorizontalGridLines,i=(0,tv.D)().values,a=n.map(function(e,n){return{x:-n,y:e}}),l=aR-.05,s=aE-.02;return(0,p.Y)(cO.N1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==o&&o,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*l?i.global.orangeDimmer:i.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:a,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var o=t.createLinearGradient(0,r.bottom,0,r.top),a=i.global.blueDefault,c=i.global.orangeDefault,u=i.global.redDefault;return o.addColorStop(0,a),o.addColorStop(l-.08,a),o.addColorStop(l+.08,c),o.addColorStop(s-.08,c),o.addColorStop(s,u),o}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,o=t.ctx,c=t.chartArea;if(c){var u=o.createLinearGradient(c.left,0,c.right,0),d=cJ(i.global.blueDimmest),p=cJ(i.global.orangeDimmest),f=cJ(i.global.redDimmest);return a.forEach(function(e,t){if(u){var r=1-t/(n.length-1);e.y<100*l?u.addColorStop(r,d):e.y<100*s?u.addColorStop(r,p):u.addColorStop(r,f)}}),u}}}]}})}function cJ(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var o=r.r,i=r.g,a=r.b;return"rgba(".concat(o,", ").concat(i,", ").concat(a,", ",.5,")")}function cQ(e){var n=e.alertDialogType,t=e.onRequestUpgrade,r=(0,ax.h)(aZ);if(!r)return null;var o="cpu_alert"===n?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,i="cpu_alert"===n?"CPU":"RAM",a="You have been near the ".concat("cpu_alert"===n?"".concat(r.numVCpu," vCPU"):"".concat((0,iX.$p)(1048576*r.ramQuotaMiBs)," GiB RAM")," limit of the free plan ").concat(aU," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===n?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,p.FD)(ez.S,{css:cX.dialogContainer,children:[(0,p.Y)(cB.A,{color:tB.LU.orangeStrongest}),(0,p.FD)(eW.EY,{variant:"subheadDefault",multiline:!1,children:["High ",i," usage"]}),(0,p.Y)(eW.EY,{color:"dimmer",children:a}),(0,p.Y)(ez.S,{css:cX.chartWrapper,children:(0,p.Y)(cV,{data:o,showHorizontalGridLines:!0})}),(0,p.Y)(eH.$n,{size:"big",colorway:"warning",text:"Increase ".concat(i," limit"),onClick:function(){(0,z.u4)(z.AZ.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),t()}})]})}var cX=(0,eA.x)({dialogContainer:[eC.wp.p(8),eC.wp.colWithGap(8)],chartWrapper:[eC.wp.height(67),eC.wp.backgroundColor.backgroundRoot,eC.wp.borderRadius(12),eC.wp.py(12),eC.wp.px(16)]});function c0(){var e=(0,m._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n      }\n    }\n  }\n"]);return c0=function(){return e},e}function c1(){var e=(0,m._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n          type\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return c1=function(){return e},e}var c2={},c5=(0,v.J1)(c0()),c4=(0,v.J1)(c1()),c3=t(48091),c8=function(){var e=(0,cT.A)(),n=e.showResourcesUpsell,t=e.refetch,r=(0,d._)((0,h.useState)(!1),2),o=r[0],i=r[1];return n?(0,p.FD)(p.FK,{children:[(0,p.Y)(tH.m_,{tooltip:c7,children:(0,p.Y)(c3.a,{css:c6.pill,text:"CPU/RAM Limited",onClick:function(){return i(!0)}})}),(0,p.Y)(cP.A,{isOpen:o,onClose:function(){return i(!1)},type:"purchase",onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,p.FD)(p.FK,{children:[(0,p.Y)(eW.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,p.FD)(eW.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and ",(0,iX.$p)(iQ.RB)," ","GiB of storage"]})]}),analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]}):null},c7="Your development resources are limited. Upgrade for more speed, storage, better AI, and more.",c6=(0,eA.x)({pill:[eC.wp.cursor.pointer]});function c9(){var e=(0,m._)(["\n  query ReplResourcesCurrentUserStorageUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      storageInfo {\n        accountStorageUtilization {\n          ... on AccountStorageUtilization {\n            total\n          }\n        }\n      }\n    }\n  }\n"]);return c9=function(){return e},e}var ue={},un=(0,v.J1)(c9()),ut=t(34896),ur=t(71594);function uo(e){return e>iQ.O8?"".concat((0,iX.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,iX.lX)(e)).toLocaleString()," MiB")}function ui(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function ua(e){var n,t,r,o=e.isTeamRepl,i=e.isReplOwner,a=aX(),l=aJ(),s=(n=(0,g._)({},ue,void 0),w.I(un,n)),c=s.data,u=s.refetch,d=(null==c?void 0:null===(t=c.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(c.currentUser.storageInfo.accountStorageUtilization.total):0,f=(null==c?void 0:null===(r=c.currentUser)||void 0===r?void 0:r.userSubscriptionType)===rJ.Oh.HackerPro?iQ.RB:iQ.CN,m=(0,h.useMemo)(function(){return(0,ut.A)(function(){return u()},{wait:12e4,maxWait:3e5})},[u]);return(0,h.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,m()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),m.isScheduled()&&m.flush()}},[m,a,l,u]),(0,p.FD)(ez.S,{css:cz.wrapper,children:[(0,p.FD)(ez.S,{css:cz.rowSection,children:[(0,p.Y)(eW.EY,{css:cz.sectionHeading,children:"Storage"}),i?(0,p.Y)(ez.S,{css:cz.alignedRow,children:(0,p.Y)(eW.EY,{color:"dimmer",children:uo(d)})}):null]}),(0,p.Y)(i2.a,{}),i?(0,p.Y)(ul,{accountUsedInBytes:d,accountQuotaInBytes:f}):(0,p.Y)(us,{isReplOwner:i,isTeamRepl:o})]})}function ul(e){var n=e.accountUsedInBytes,t=e.accountQuotaInBytes,r=(0,d._)((0,h.useState)(!1),2),o=r[0],i=r[1],a=ui(n,t),l=(0,ax.h)(aK),s=l.replUsedInMib,c=l.scratchUsedInMib,u=l.nixUsedInMib,f=l.workspaceUsedInMib,g=[{title:"Total",usageDisplayText:"".concat(uo(n)),percentOfUsage:null},{title:"This Repl",usageDisplayText:"".concat(uo(1048576*s)),percentOfUsage:ui(1048576*s,n)},{title:"Workspace",usageDisplayText:"".concat(uo(1048576*f)),percentOfUsage:null,indentAgain:!0},{title:"Nix packages",usageDisplayText:"".concat(uo(1048576*u)),percentOfUsage:null,indentAgain:!0,nix:!0},{title:"Scratch disk",usageDisplayText:"".concat(uo(1048576*c)),percentOfUsage:ui(1048576*c,n)}];return(0,p.FD)(p.FK,{children:[(0,p.FD)(cG,{label:"Storage details",children:[(0,p.FD)(ez.S,{css:cz.hoverColumnSection,children:[(0,p.FD)(ez.S,{css:cz.alignedSpaceBetweenRow,children:[(0,p.FD)(eW.EY,{children:[uo(t)," included"]}),(0,p.FD)(ez.S,{css:cz.alignedRow,children:[(0,p.FD)(eW.EY,{color:"dimmer",multiline:!1,children:[Math.min(a,100),"%"]}),(0,p.Y)(ud,{percentage:a})]})]}),n>t?(0,p.FD)(ez.S,{css:cz.alignedSpaceBetweenRow,children:[(0,p.Y)(eW.EY,{children:"Additional usage"}),(0,p.Y)(eW.EY,{color:"dimmer",children:uo(n-t)})]}):null]}),(0,p.FD)(ez.S,{css:cz.detailContent,children:[(0,p.Y)(eW.EY,{children:"Your account storage usage."}),(0,p.Y)(ez.S,{css:cz.detailSectionsWrapper,children:g.map(function(e,n){return(0,p.FD)(ez.S,{css:cz.rowSection,children:[(0,p.FD)(ez.S,{css:cz.alignedRow,children:[n>0?(0,p.Y)(ez.S,{css:e.indentAgain&&cz.indentAgain,children:(0,p.Y)(ur.A,{color:tB.LU.outlineDefault,size:16})}):null,(0,p.Y)(eW.EY,{children:e.title})]}),e.nix?(0,p.Y)(ez.S,{css:cz.alignedRow,children:(0,p.Y)(t7.K0,{onClick:function(){return i(!0)},alt:"Delete Nix packages",disabled:u<1,children:(0,p.Y)(rD.A,{})})}):null,(0,p.FD)(ez.S,{css:cz.alignedRow,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,p.FD)(eW.EY,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]})]}),(0,p.Y)(up,{isOpen:o,onClose:function(){return i(!1)}})]})}function us(e){var n=e.isReplOwner,t=e.isTeamRepl,r=aX(),o=aJ(),i=1048576*r,a=ui(i,1048576*o);return(0,p.FD)(ez.S,{css:cz.rowSection,children:[(0,p.FD)(ez.S,{css:cz.alignedRow,children:[n?(0,p.Y)(ur.A,{color:tB.LU.outlineDefault,size:16}):null,(0,p.Y)(eW.EY,{children:"This Repl"})]}),(0,p.FD)(eW.EY,{color:"dimmer",children:[uo(i)," ",t?"(".concat(a,"% of total)"):null]})]})}var uc=(0,eA.x)({bar:[eC.wp.width(1.5),eC.wp.height(7),eC.wp.borderRadius(1)]}),uu=(0,eA.x)({dimBar:[uc.bar,eC.wp.backgroundColor.greyDimmest],blueBar:[uc.bar,eC.wp.backgroundColor.blueStronger],yellowBar:[uc.bar,eC.wp.backgroundColor.yellowStronger],redBar:[uc.bar,eC.wp.backgroundColor.redStronger]});function ud(e){var n=e.percentage,t=Math.round(n/10),r=(0,M._)(Array(7).fill(uu.blueBar)).concat((0,M._)([,,].fill(uu.yellowBar)),[uu.redBar]);return(0,p.Y)(ez.S,{row:!0,gap:1,children:r.map(function(e,o){var i=n>100?uu.blueBar:r[o];return(0,p.Y)(ez.S,{css:o<t?i:uu.dimBar},o)})})}var up=function(e){var n=e.onClose,t=e.isOpen,r=(0,et.A)().container;return(0,p.Y)(ek.a,{isOpen:t,onRequestClose:n,children:(0,p.Y)(rN.A,{name:"Nix Packages",description:"this Repl's Nix packages",confirmDescription:"Nix packages",hideModal:n,delete:function(){n();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(n){return n.channel.request({resetNixFilesystem:{}}).then(function(n){n.ok&&e()}),function(){}})}})})},uf=t(98541),uh=t(18576),ug=(0,eA.x)({replResourcesContainer:[eC.wp.p(8),eC.wp.colWithGap(8)],trialButton:[eC.wp.borderRadius(4)],loadingStateWrapper:[eC.wp.center,eC.wp.p(16)]});function um(e){var n,t,r,o,i,a,l,s,c,u,d,f,h,m,v,y,b,S,Y=e.onRequestUpgrade,x=(i=(0,g._)({},c2,void 0),w.I(c5,i)),_=x.data,A=x.loading,C=(a={variables:{replId:(0,eG.A)()}},l=(0,g._)({},c2,a),w.I(c4,l)),k=C.data,D=C.loading,R=(null==k?void 0:k.repl.__typename)==="Repl"?k.repl:null,E=(null==R?void 0:null===(s=R.org)||void 0===s?void 0:s.id)!==void 0&&(null==R?void 0:null===(c=R.org)||void 0===c?void 0:c.type)==="team",I=(null==R?void 0:null===(u=R.owner)||void 0===u?void 0:u.__typename)==="Team"||E,U=(null==R?void 0:null===(d=R.owner)||void 0===d?void 0:d.id)===(null==_?void 0:null===(f=_.currentUser)||void 0===f?void 0:f.id),F=null==_?void 0:null===(h=_.currentUser)||void 0===h?void 0:h.userSubscriptionType,P=(null==_?void 0:null===(v=_.currentUser)||void 0===v?void 0:null===(m=v.paymentMethod)||void 0===m?void 0:m.__typename)==="PaymentMethod"&&null!==_.currentUser.paymentMethod.id,T=null==_?void 0:null===(b=_.currentUser)||void 0===b?void 0:null===(y=b.userSubscription)||void 0===y?void 0:y.isTrial,O=U&&("HACKER_PRO"!==F||T&&!P)&&!E,L=(0,cT.A)().showResourcesUpsell,N=null==R?void 0:null===(S=R.authorizations)||void 0===S?void 0:S.editResources,M=(0,ax.h)(aL);return A||D||M||!N?(0,p.Y)(ez.S,{css:ug.loadingStateWrapper,children:(0,p.Y)(sp.A,{})}):(0,p.FD)(ez.S,{css:ug.replResourcesContainer,children:[(0,p.FD)(ez.S,{gap:4,children:[(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Resources"}),(0,p.Y)(uv,{resourceTier:(t=(n={isTeamRepl:I,isReplOwner:U,plan:F}).isTeamRepl,r=n.isReplOwner,o=n.plan,t?"team":r&&"HACKER_PRO"===o?"member":r&&null===o?"free":"hidden"),isOnTrial:T,showResourcesUpsell:L})]}),(0,p.Y)(eW.EY,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,p.Y)(c$,{}),E?null:(0,p.Y)(ua,{isTeamRepl:I,isReplOwner:U}),O?(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(eH.$n,{colorway:"blurple",iconLeft:(0,p.Y)(uh.A,{}),text:"Join Replit ".concat(iJ.en),onClick:function(){return Y()},css:ug.trialButton}),(0,p.FD)(eW.EY,{css:eC.wp.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,iX.$p)(iQ.RB)," GiB Storage"]})]}):null]})}function uv(e){var n=e.resourceTier,t=e.isOnTrial,r=e.showResourcesUpsell;switch(n){case"free":return r?(0,p.Y)(c8,{}):(0,p.Y)(uf.a,{text:"Free",colorway:"grey"});case"member":if(t)return(0,p.Y)(uf.a,{text:"".concat(iJ.en," Trial"),colorway:"blue"});return(0,p.Y)(uf.a,{text:"".concat(iJ.en),colorway:"purple"});case"team":return(0,p.Y)(uf.a,{text:"Team",colorway:"green"});default:return null}}var uw=t(87422);function uy(e){var n,t,r,o,i,a,l,s,c,u,g,m,v,w,y,b,S,Y,x,_,A,k=e.repl,D=e.currentUser,R=(0,d._)((0,h.useState)(!1),2),E=R[0],I=R[1],U=(0,d._)((0,h.useState)("resources"),2),F=U[0],P=U[1],O=(0,cT.A)(),L=O.showResourcesUpsell,N=O.refetch,M=(0,d._)((0,h.useState)(!1),2),G=M[0],B=M[1],H=(r=(n={repl:k,currentUser:D,onAlert:function(e){P(e),I(!0)}}).repl,o=n.currentUser,i=n.onAlert,a=(0,ax.AI)(aW),l=(0,f.useRouter)(),s=(0,et.A)().runner,c=(0,C._P)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),g=(u=(0,d._)((0,h.useState)(!1),2))[0],m=u[1],v=(null===(t=r.owner)||void 0===t?void 0:t.__typename)==="User"&&r.owner.id===(null==o?void 0:o.id),w=null==o?void 0:o.userSubscriptionType,b=(y=(0,sE.A)("announcement","resources-upgrade-modal")).shouldDisplay,S=y.register,Y=y.dismiss,(0,h.useEffect)(function(){!(0,T.Po)(l)&&v&&null===w&&c&&S()},[c,v,S,l,w]),_=(x=(0,d._)((0,h.useState)(!0),2))[0],A=x[1],(0,h.useEffect)(function(){var e=setTimeout(function(){A(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,h.useEffect)(function(){if(s&&!g)return s.onStateChanged(function(e){e!==ou.ll.RUNNING||g||m(!0)})},[s,g]),(0,h.useEffect)(function(){if(!(_||(0,T.Po)(l))&&b&&g)return a.subscribe(function(e){e&&i(e.type)})},[a,S,_,c,v,i,l,b,w,g]),{dismissAlert:Y}).dismissAlert,W=function(){H(),I(!1),P("resources")};return(0,p.FD)(p.FK,{children:[(0,p.FD)(sM.Wv,{isOpen:E,onOpenChange:function(e){I(e),e&&(0,z.u4)(z.AZ.REPL_RESOURCES_OPENED),e||"cpu_alert"!==F&&"ram_alert"!==F||W()},placement:"bottom start",label:"Repl resources",noArrow:!0,css:uS.popover,children:[(0,p.Y)(t7.K0,{"aria-label":"Repl resources",alt:"Repl resources","aria-expanded":E,dataCy:"repl-resources-button",css:uS.button,children:(0,p.FD)(ez.S,{css:uS.buttonWrapper,children:[(0,p.Y)(uw.A,{size:16}),(0,p.Y)(ub,{})]})}),(0,p.FD)(ez.S,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===F?(0,p.Y)(um,{onRequestUpgrade:function(){return B(!0)}}):null,"cpu_alert"===F||"ram_alert"===F?(0,p.FD)(ez.S,{css:uS.alertDialogWrapper,children:[(0,p.Y)(t7.K0,{onClick:W,alt:"Close",css:uS.alertDialogCloseButton,children:(0,p.Y)(oN.A,{})}),(0,p.Y)(cQ,{alertDialogType:F,onRequestUpgrade:function(){return B(!0)}})]}):null]})]}),(0,p.Y)(cP.A,{isOpen:G,onClose:function(){return B(!1)},onPurchaseComplete:function(){return N()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:L?(0,p.FD)(p.FK,{children:[(0,p.Y)(eW.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,p.FD)(eW.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and"," ",(0,iX.$p)(iQ.RB)," GiB of storage"]})]}):void 0,analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]})}function ub(){var e=(0,ax.h)(az);return"ok"===e?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.S,{css:uC.base}),(0,p.Y)(ez.S,{css:"warning"===e?uC.warningColors:uC.dangerColors})]})}var uS=(0,eA.x)({popover:[eC.wp.width(360)],buttonWrapper:[eC.wp.position.relative],button:[eC.wp.height(32),eC.wp.width(32),eC.wp.borderRadius()],alertDialogWrapper:[eC.wp.position.relative],alertDialogCloseButton:[eC.wp.position.absolute,eC.wp.top(8),eC.wp.right(8),eC.wp.zIndex(1)]}),uY=function(e){return"\n0% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 ".concat(e,";\n}\n\n70% {\n  transform: scale(1);\n  box-shadow: 0 0 0 6px transparent;\n}\n\n100% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 transparent;\n}\n")},ux=(0,tG.i7)(uY(tB.LU.orangeDefault)),u_=(0,tG.i7)(uY(tB.LU.redDefault)),uA={position:"absolute",width:8,height:8,borderRadius:"50%",top:-4,right:-4,outline:"2px solid "+tB.LU.backgroundRoot,borderStyle:"solid"},uC=(0,eA.x)({base:[uA,{backgroundColor:tB.LU.backgroundRoot}],warningColors:[uA,{backgroundColor:tB.LU.orangeStronger,animation:"".concat(ux," 2s infinite"),outlineColor:"transparent"}],dangerColors:[uA,{backgroundColor:tB.LU.redStronger,animation:"".concat(u_," 2s infinite"),outlineColor:"transparent"}]}),uk=(0,eA.x)({replInfo:[eC.wp.flex.shrink(1),eC.wp.maxWidth(530),{"& > span":[eC.wp.viewStyle,eC.wp.flex.shrink(1)]}]});function uD(e){var n,t=e.repl,r=e.currentUser,o=e.isAgentOnboarding,i=(0,en.vs)(),a=(0,en.Bm)(),l=(0,lK.U)();return(0,p.FD)(ez.S,{row:!0,align:"center",justify:"start",css:eC.wp.noDragRegion,children:[(0,p.Y)(s_.A,{}),(0,p.Y)(sW,{org:null!==(n=t.org)&&void 0!==n?n:void 0}),(0,p.Y)(cl,{repl:t}),(0,p.Y)(ez.S,{row:!0,align:"center",justify:"start",children:o?(0,p.Y)(uE,{repl:t}):(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.S,{row:!0,align:"center",css:uk.replInfo,children:(0,p.Y)(cF,{repl:t,getDesktopLayoutState:i})}),l&&("centered"===a||"lobbyAppProposal"===a)?(0,p.Y)(cu,{}):(0,p.Y)(uy,{repl:t,currentUser:r})]})})]})}var uR=(0,eA.x)({root:[eC.wp.px(12)]});function uE(e){var n=e.repl;return(0,p.Y)(ez.S,{css:uR.root,children:(0,p.Y)(eW.EY,{children:n.title})})}var uI=t(68670),uU=t(56458),uF=t(32764),uP=t(37658),uT=t(55916),uO=t(12603);function uL(){var e=(0,m._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return uL=function(){return e},e}function uN(){var e=(0,m._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return uN=function(){return e},e}function uM(){var e=(0,m._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return uM=function(){return e},e}function uG(){var e=(0,m._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return uG=function(){return e},e}function uB(){var e=(0,m._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return uB=function(){return e},e}function uH(){var e=(0,m._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return uH=function(){return e},e}function uW(){var e=(0,m._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return uW=function(){return e},e}var uz={},u$=(0,v.J1)(uL(),uO.wW),uj=(0,v.J1)(uN(),uT.Um),uq=(0,v.J1)(uM(),uj),uK=(0,v.J1)(uG(),uj),uZ=(0,v.J1)(uB(),u$,uq,uK),uV=(0,v.J1)(uH(),uZ),uJ=(0,v.J1)(uW(),uZ),uQ=t(25407),uX=t(55917),u0=t(45515),u1=t(95771),u2=t(47758),u5=t(81243),u4=t(93532),u3=t(74894),u8=t(89960),u7=(0,eA.x)({loader:[eC.wp.px(12),eC.wp.align.center,eC.wp.justify.center],headerSection:[eC.wp.px(12)],section:[eC.wp.colWithGap(12),eC.wp.px(12)],sectionWithBorders:[eC.wp.colWithGap(12),eC.wp.p(12),eC.wp.border({direction:"top"}),eC.wp.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[eC.wp.fontWeight.medium],subtitle:[eC.wp.fontWeight.medium],nested:[eC.wp.pl(24),eC.wp.colWithGap(12)],item:[eC.wp.rowWithGap(16),eC.wp.align.center,eC.wp.justify.spaceBetween],groupName:[eC.wp.colWithGap(6),eC.wp.justify.center],searchInput:[eC.wp.flex.growAndShrink(1)],scopeSelector:[eC.wp.pl(24),eC.wp.flex.row,eC.wp.align.center],visibilitySelector:[eC.wp.flex.growAndShrink(1),eC.wp.position.relative,eC.wp.justify.start,eC.wp.align.center]}),u6=function(e){var n=e.user,t=e.currentUserId,r=e.repl,o=e.group,i=e.options,a=e.onScopeChange,l=t===n.id;return(0,p.FD)(ez.S,{css:u7.item,children:[(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(u5.e,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,p.FD)(ez.S,{css:u7.groupName,children:[(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eW.EY,{height:"singleLine",children:n.username}),l?(0,p.Y)(eW.EY,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,p.Y)(ez.S,{children:(0,p.Y)(u2.A,{repl:r,group:o,options:i,onScopeChange:a})})]})},u9=function(e){var n=e.repl,t=e.group,r=e.options,o=e.onScopeChange;return(0,p.FD)(ez.S,{css:u7.item,children:[(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(uX.A,{group:t}),(0,p.FD)(ez.S,{css:u7.groupName,children:[(0,p.Y)(eW.EY,{height:"singleLine",children:t.name}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[t.isMember?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,o7.A)("member",t.memberCount,!0)}):null]})]})]}),(0,p.Y)(ez.S,{children:(0,p.Y)(u2.A,{repl:n,group:t,options:r,onScopeChange:o})})]})},de=function(e){var n,t=e.org;return(0,p.Y)(ez.S,{css:u7.item,children:(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(u5.e,{src:null!==(n=t.image)&&void 0!==n?n:null,username:t.name,size:32,layout:"responsive",isOrg:!0}),(0,p.FD)(ez.S,{css:u7.groupName,children:[(0,p.FD)(eW.EY,{height:"singleLine",children:["Everyone at ",t.name]}),(0,p.Y)(ez.S,{children:null!=t.membersCount?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,o7.A)("member",t.membersCount,!0)}):null})]})]})})},dn=function(e){var n,t,r,o,i,a,l,s,c=e.orgId,u=e.selectedGroups,f=e.repl,g=e.onScopeChange,m="group-search-".concat((0,h.useId)()),v=(0,d._)((0,h.useState)(),2),w=v[0],y=v[1],b=(0,d._)((0,h.useState)(""),2),S=b[0],Y=b[1],x=(0,d._)((0,uQ.qO)(),2),_=x[0],A=x[1],C=A.data,k=A.error,D=A.loading,R=C&&(null===(r=C.currentUser)||void 0===r?void 0:null===(t=r.org)||void 0===t?void 0:t.__typename)==="Org"&&"OrgGroup"===C.currentUser.org.group.__typename&&(null===(o=C.currentUser.org.group.replScopeOptions)||void 0===o?void 0:o.__typename)==="OrgGroupReplScopeOptions"?C.currentUser.org.group.replScopeOptions.items[0].options:void 0,E=(null==C?void 0:C.currentUser)&&"Org"!==C.currentUser.org.__typename?C.currentUser.org.message:void 0,I=(null==C?void 0:C.currentUser)&&"Org"===C.currentUser.org.__typename&&"OrgGroup"!==C.currentUser.org.group.__typename?C.currentUser.org.group.message:void 0,U=(null==C?void 0:C.currentUser)&&"Org"===C.currentUser.org.__typename&&"OrgGroup"===C.currentUser.org.group.__typename&&(null===(i=C.currentUser.org.group.replScopeOptions)||void 0===i?void 0:i.__typename)!=="OrgGroupReplScopeOptions"?null===(a=C.currentUser.org.group.replScopeOptions)||void 0===a?void 0:a.message:void 0,F=null!==(s=null!==(l=null!=E?E:I)&&void 0!==l?l:U)&&void 0!==s?s:null==k?void 0:k.message,P=(n=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),Y(""),y(void 0),[2]}})}),function(){return n.apply(this,arguments)});return(0,p.FD)(p.FK,{children:[(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(ez.S,{css:u7.searchInput,children:(0,p.Y)(u0.A,{inputId:m,orgId:c,types:[rJ.Oi.Custom,rJ.Oi.SystemIndividual],selectedGroups:u,value:S,setValue:Y,onSelect:function(e){y(e),Y(e.name),_({variables:{orgId:c,groupId:e.id,input:{replIds:[f.id]}}})},onClear:function(){return y(void 0)},placeholder:"Share with groups or other members"})}),w&&R||D?(0,p.FD)(ez.S,{css:u7.scopeSelector,children:[w&&R&&!D?(0,p.Y)(u2.A,{group:w,repl:f,options:R,onScopeChange:P}):null,D?(0,p.Y)(sp.A,{size:24}):null]}):null]}),F?(0,p.Y)(u4.N,{colorway:"negative",text:F}):null]})},dt=function(e){var n,t,r,o=e.repl,i=e.org,a=(0,d._)((0,h.useState)(),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(),2),u=c[0],f=c[1],m=(0,d._)((n={variables:{input:{id:o.id}},onError:function(e){f(e.message)}},t=(0,g._)({},uz,n),a9.n(uJ,t)),2),v=m[0],w=m[1].loading,y="repl-visibility-".concat((0,h.useId)()),b=o.authorizations.editVisibility.isAuthorized,S=o.authorizations.editVisibility.message,Y=[{id:"private",icon:(0,p.Y)(u8.A,{}),name:"Internal to ".concat(i.name),selected:o.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,p.Y)(u3.A,{}),name:"Public on Replit",selected:!o.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],x=Y.find(function(e){return e.selected}),_=x?(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[x.icon," ",x.name]}):void 0;return r=u?(0,p.Y)(tH.m_,{tooltip:u,children:(0,p.Y)(cB.A,{size:24,color:tB.LU.accentNegativeDefault})}):w?(0,p.Y)(sp.A,{size:24}):l?(0,p.Y)(s3.A,{size:24,color:tB.LU.accentPositiveDefault}):null,(0,p.FD)(ez.S,{css:u7.visibilitySelector,row:!0,gap:4,children:[(0,p.Y)(tH.m_,{tooltip:S,isDisabled:b,children:(0,p.Y)(s1.in,{id:y,trigger:(0,p.Y)(eH.$n,{iconRight:(0,p.Y)(aa.A,{}),text:null!=_?_:"Control Repl visibility",disabled:!b}),"aria-label":"Control ".concat(o.title," visibility"),onAction:function(e){var n="private"===e;n!==o.isPrivate&&(f(void 0),v({variables:{input:{id:o.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,e8._)((0,g._)({},o),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(s(!0),setTimeout(function(){return s(!1)},2e3))}}))},items:Y,disallowEmptySelection:!0,isDisabled:!b,children:function(e){return(0,p.Y)(s1.Dr,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,p.Y)(ez.S,{children:r}):null]})};let dr=function(e){var n,t,r,o,i,a,l,s,c,u,d,f,h=e.replId,m=(0,eM.T)(),v=(0,rX.A)(),y=(n={variables:{replId:h}},t=(0,g._)({},uz,n),w.I(uV,t)),b=y.data,S=y.loading,Y=y.error,x=y.refetch,_=(null==b?void 0:null===(o=b.repl)||void 0===o?void 0:o.__typename)==="Repl"?b.repl:void 0,A=(null!==(u=null==_?void 0:null===(i=_.multiplayerStatus)||void 0===i?void 0:i.groups)&&void 0!==u?u:[]).filter(function(e){return"custom"!==e.group.type}),C=(null!==(d=null==_?void 0:null===(a=_.multiplayerStatus)||void 0===a?void 0:a.groups)&&void 0!==d?d:[]).filter(function(e){return"custom"===e.group.type}),k=null!==(f=null==_?void 0:null===(l=_.multiplayerStatus)||void 0===l?void 0:l.individuals)&&void 0!==f?f:[],D=A.map(function(e){return e.group}).concat(C.map(function(e){return e.group})).concat(k.map(function(e){return e.group})),R=(r=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),[2]}})}),function(){return r.apply(this,arguments)});return(null==Y?void 0:Y.message)?(0,p.Y)(ez.S,{gap:12,children:(0,p.Y)(u4.N,{colorway:"negative",text:Y.message})}):S||!_?(0,p.Y)(ez.S,{css:u7.loader,children:(0,p.Y)(sp.A,{})}):(0,p.FD)(ez.S,{gap:12,children:[(0,p.FD)(ez.S,{tag:"header",css:u7.headerSection,gap:2,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Share App"}),(0,p.FD)(ez.S,{css:u7.subtitle,row:!0,gap:4,children:[_.org?(0,p.FD)(eW.EY,{variant:"small",color:"dimmer",children:[_.org.name," /"]}):null,(0,p.Y)(eW.EY,{variant:"small",children:_.title})]})]}),(null===(s=_.org)||void 0===s?void 0:s.id)&&_.authorizations.editPermissions.isAuthorized?(0,p.Y)(ez.S,{css:u7.sectionWithBorders,children:(0,p.Y)(dn,{orgId:_.org.id,selectedGroups:D,repl:_,onScopeChange:R})}):null,(0,p.FD)(ez.S,{css:u7.section,children:[(0,p.Y)(eW.EY,{variant:"small",css:u7.sectionTitle,children:"Groups with access"}),_.org?(0,p.Y)(de,{org:_.org}):null,(0,p.Y)(ez.S,{css:u7.nested,children:A.map(function(e){var n=e.group,t=e.options;return(0,p.Y)(u9,{repl:_,group:n,options:t,onScopeChange:R},n.id)})}),C.map(function(e){var n=e.group,t=e.options;return(0,p.Y)(u9,{repl:_,group:n,options:t,onScopeChange:R},n.id)})]}),k.length>0?(0,p.FD)(ez.S,{css:u7.section,children:[(0,p.Y)(eW.EY,{variant:"small",css:u7.sectionTitle,children:"People with access"}),k.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,p.Y)(u6,{currentUserId:m,repl:_,group:n,user:t,options:r,onScopeChange:R},t.id)})]}):null,(0,p.Y)(ez.S,{css:u7.section,children:(0,p.Y)(u1.R,{type:"repl"})}),(null===(c=_.org)||void 0===c?void 0:c.id)?(0,p.Y)(ez.S,{css:u7.sectionWithBorders,children:(0,p.FD)(ez.S,{row:!0,justify:"space-between",children:[(0,p.Y)(dt,{repl:_,org:_.org}),v?null:(0,p.Y)(a0.v,(0,e8._)((0,g._)({prefetch:!1},(0,i3.z9)(_)),{iconRight:(0,p.Y)(om.A,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})};var di=t(87520),da=t.n(di),dl=t(88940);function ds(){var e=(0,m._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ds=function(){return e},e}var dc={},du=(0,v.J1)(ds(),dl._9),dd=t(83627),dp=t(8478),df=(0,eA.x)({root:[eC.wp.color.foregroundDefault,eC.wp.p(24),eC.wp.display.grid,{gap:tB.LU.space24}],controls:[eC.wp.display.grid,{gap:tB.LU.space8,gridAutoFlow:"column"}],message:[eC.wp.pb(16)],textContainer:[eC.wp.textAlign.center]});function dh(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,p.FD)("div",{css:df.root,children:[(0,p.Y)(dp.A,{level:3,align:"center",children:"Are you sure?"}),(0,p.Y)("div",{css:df.textContainer,children:(0,p.FD)(eW.EY,{variant:"text",children:[(0,p.Y)("p",{css:df.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,p.Y)("p",{children:n})]})}),(0,p.FD)("div",{css:df.controls,children:[(0,p.Y)(eH.$n,{onClick:r,text:"Cancel"}),(0,p.Y)(eH.$n,{colorway:"primary",onClick:t,text:"Invite"})]})]})}var dg=t(88444),dm=t(6552),dv=t(53536),dw=t(43730);function dy(e){var n,t,r,o,i,a,l,s,c,u,m,v,y=e.replId,b=(0,f.useRouter)(),S=(0,T.Po)(b),Y=(0,t8.Q4)(),x=(0,d._)((0,h.useState)(null),2),_=x[0],A=x[1],C=(n={variables:{replId:y}},t=(0,g._)({},dc,n),w.I(du,t)),k=C.data,D=C.loading,R=(null==k?void 0:null===(r=k.currentUser)||void 0===r?void 0:r.id)||null,E=(null==k?void 0:k.repl.__typename)==="Repl"?k.repl:null,I=(0,dd.A)({isMobileApp:S,isTeam:!0,replId:y}),U=I.addOrInviteReplMultiplayer,F=I.loadingAddMutation;if(E&&!E.owner)throw Error("Cannot manage members on anon repls");if((null==E?void 0:E.owner)&&(null==E?void 0:E.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var P=(null==E?void 0:null===(o=E.owner)||void 0===o?void 0:o.__typename)==="Team"?E.owner:null,O=!(null==P?void 0:null===(i=P.capabilities)||void 0===i?void 0:i.hasValidSubscription)&&!(null==P?void 0:null===(a=P.capabilities)||void 0===a?void 0:a.isBusinessPlan),L=(null!==(l=null==E?void 0:E.collaborators)&&void 0!==l?l:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),N=null==E?void 0:E.multiplayerInvites,M=(null!==(s=null==E?void 0:E.collaborators)&&void 0!==s?s:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),G=M.length,B=(null!==(c=null==E?void 0:E.collaborators)&&void 0!==c?c:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),H=(null!==(u=null==E?void 0:E.collaborators)&&void 0!==u?u:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),W=H.some(function(e){return e.id===R}),z=B.filter(function(e){return Y.some(function(n){return n.id===e.id})}),$=B.filter(function(e){return!Y.some(function(n){return n.id===e.id})}),j=null!==(m=null==E?void 0:E.authorizations.editPermissions.isAuthorized)&&void 0!==m&&m,q=null!==(v=null==E?void 0:E.authorizations.inviteGuests.isAuthorized)&&void 0!==v&&v;return D?(0,p.Y)(eD.ui,{css:[uP.Nx.root],background:"default",children:(0,p.FD)(ez.S,{css:uP.Nx.loading,children:[(0,p.Y)(sp.A,{color:tB.LU.foregroundDimmer}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,p.FD)(eD.ui,{css:uP.Nx.root,background:"default",children:[(0,p.Y)(ez.S,{css:[uP.Nx.header,S&&uP.Nx.header_mobile],children:(0,p.Y)(ez.S,{css:uP.Nx.titleContainer,children:(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),q?(0,p.Y)(ez.S,{css:uP.Nx.searchContainer,children:(0,p.Y)(dm.A,{existingUsernames:L,onSubmit:function(e){if(!F){if(da()(e)){A(e);return}U({variables:{input:{replId:y,target:{method:rJ.LI.Username,value:e},level:rJ.Hy.Rw}}})}},isDisabled:D})}):null,!q&&O?(0,p.Y)(ez.S,{css:[eC.wp.px(16)],children:(0,p.Y)(dv.d,{iconLeft:(0,p.Y)(dw.A,{}),text:'You can add people to this App by inviting them to the "'.concat(null==P?void 0:P.displayName,'" Friends Team.'),href:"/teams/".concat(null==P?void 0:P.username),target:"_blank"})}):null,(0,p.Y)(ek.a,{isOpen:!!_,onRequestClose:function(){return A(null)},children:_?(0,p.Y)(dh,{email:_,onInvite:function(){U({variables:{input:{replId:y,target:{method:rJ.LI.Email,value:_},level:rJ.Hy.Rw}}}),A(null)},onCancel:function(){return A(null)}}):null}),(0,p.FD)(eD.ui,{css:uP.Nx.userList,children:[(null==N?void 0:N.length)?(0,p.FD)(ez.S,{css:uP.Nx.userGroup.root,children:[(0,p.Y)(uP.jl,{title:"Pending Invitations",color:tB.LU.outlineStrongest,count:G}),null==N?void 0:N.map(function(e){return(0,p.Y)(dg.A,{canEditMultiplayers:W||!1,email:e.email,isPendingInvitation:!0,replId:y},e.email)})]}):null,M.length?(0,p.FD)(ez.S,{css:uP.Nx.userGroup.root,children:[(0,p.Y)(uP.jl,{title:"External Guests",color:tB.LU.outlineStrongest,count:null==M?void 0:M.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),M.map(function(e){return(0,p.Y)(dg.A,{canEditMultiplayers:W||!1,isPendingInvitation:!1,replId:y,user:e},e.id)})]}):null,z.length?(0,p.FD)(ez.S,{css:uP.Nx.userGroup.root,children:[(0,p.Y)(uP.jl,{title:"Online Members",color:tB.LU.greenStrongest,count:null==z?void 0:z.length}),z.map(function(e){return(0,p.Y)(dg.A,{isPendingInvitation:!1,canEditMultiplayers:!!W,replId:y,user:e},e.id)})]}):null,$.length?(0,p.FD)(ez.S,{css:uP.Nx.userGroup.root,children:[(0,p.Y)(uP.jl,{title:"Offline Members",color:tB.LU.outlineStrongest,count:null==$?void 0:$.length}),$.map(function(e){return(0,p.Y)(dg.A,{isPendingInvitation:!1,canEditMultiplayers:!!W,replId:y,user:e},e.id)})]}):null,H.length?(0,p.FD)(ez.S,{css:uP.Nx.userGroup.root,children:[(0,p.Y)(uP.jl,{title:"Admins",color:tB.LU.accentPrimaryStronger,count:H.length}),H.map(function(e){return(0,p.Y)(dg.A,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:y},e.id)})]}):null,j||D?null:(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var db=function(){var e=(0,cT.A)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,d._)((0,h.useState)(!1),2),o=r[0],i=r[1];return n?(0,p.FD)(ez.S,{css:dS.self,children:[(0,p.Y)(ez.S,{tag:"button",css:dS.bannerWrapper,onClick:function(){return i(!0)},children:(0,p.Y)(u4.N,{icon:(0,p.Y)(re.A,{}),colorway:"yellow",text:"This App is publicly visible. Upgrade for unlimited private Apps, better AI, more storage, speed, and more."})}),(0,p.Y)(cP.A,{isOpen:o,onClose:function(){return i(!1)},onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,p.FD)(p.FK,{children:[(0,p.Y)(eW.EY,{variant:"subheadBig",children:"Upgrade for private Apps"}),(0,p.Y)(eW.EY,{multiline:!0,children:"Keep your code secure and private"})]}),analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}},highlightUpsell:"replLimit"})]}):null},dS=(0,eA.x)({bannerWrapper:[eC.wp.cursor.pointer,eC.wp.borderRadius(),eC.wp.textAlign.left],self:[eC.wp.px(12)]}),dY=t(14436),dx=(0,eA.x)({self:[eC.wp.py(12),eC.wp.borderRadius(8),eC.wp.align.stretch,eC.wp.flex.growAndShrink(1),eC.wp.maxHeight("calc(100vh - ".concat(dY.uF+12,"px)")),eC.wp.backgroundColor.backgroundDefault]});let d_=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,o=e.isTeamRepl,i=e.org;return n=i?(0,p.Y)(dr,{replId:t}):o?(0,p.Y)(dy,{replId:t}):(0,p.Y)(uP.Ay,{replId:t,handleUpgradeTriggered:r}),(0,p.FD)(ez.S,{css:dx.self,gap:12,children:[n,i&&"personal"!==i.type?null:(0,p.Y)(db,{}),i?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(i2.a,{}),(0,p.Y)(uF.A,{replId:t})]})]})};var dA={owner:"Owner",editor:"Can edit"};function dC(){var e=(0,m._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return dC=function(){return e},e}function dk(){var e=(0,m._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return dk=function(){return e},e}var dD={},dR=(0,v.J1)(dC()),dE=(0,v.J1)(dk(),dR),dI=t(77325),dU=(0,eA.x)({container:[eC.wp.pl(8),eC.wp.pr(16),eC.wp.py(4),eC.wp.flex.row,eC.wp.align.center,eC.wp.justify.start],button:[eC.wp.display.flex,eC.wp.align.center],img:[eC.wp.width(32),eC.wp.height(32),eC.wp.borderRadius("full"),eC.wp.backgroundColor.white,eC.wp.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[eC.wp.display.flex,eC.wp.flex.column,eC.wp.justify.center,eC.wp.ml(8),eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)]});let dF=function(e){var n=e.id,t=e.username,r=e.image,o=e.isOwner,i=e.color,a=e.hideModal,l=e.canClickAvatar,s=e.isCurrentUser,c=e.onAvatarClick,u=function(){l&&(c({username:t,id:n}),a())};return(0,p.FD)("div",{css:[dU.container,o&&sL.b.listItem],style:(0,g._)({cursor:l?"pointer":"auto"},l&&sL.b.listItem),role:"button",onClick:u,onKeyDown:u,tabIndex:0,children:[(0,p.FD)("div",{css:dU.button,children:[(0,p.Y)(rb.A,{src:r,alt:"",css:dU.img,style:{borderColor:i},width:32,height:32}),l?(0,p.FD)(dI.s,{children:["Observe ",t]}):null]}),(0,p.FD)("div",{css:dU.usernameContainer,children:[(0,p.FD)(eW.EY,{multiline:!1,children:["@",t,s?" (you)":null]}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmer",multiline:!1,children:o?dA.owner:dA.editor})]})]})};var dP=(0,eA.x)({loading:[eC.wp.p(32)],loaded:[eC.wp.py(8),eC.wp.maxHeight(330),{overflowY:"auto"}]});let dT=function(e){var n,t,r=e.replId,o=e.activeUsers,i=e.hideModal,a=e.onAvatarClick,l=(n={variables:{replId:r}},t=(0,g._)({},dD,n),w.I(dE,t)),s=l.data,c=l.loading,u=l.error;if(c)return(0,p.Y)(ez.S,{css:dP.loading,row:!0,justify:"center",children:(0,p.Y)(sp.A,{})});if(u)return(0,p.Y)("div",{children:u.message});if((null==s?void 0:s.repl.__typename)==="Repl"){var d=s.repl,f=s.currentUser,h=d.user,m=h&&o.find(function(e){return e.username===h.username}),v=d.multiplayers.filter(function(e){var n;return e&&(n=e.id,o.some(function(e){return e.id===n}))}).slice(2);return(0,p.Y)(ez.S,{css:dP.loaded,gap:8,children:(0,p.FD)(ez.S,{children:[h?(0,p.Y)(dF,(0,e8._)((0,g._)({},h),{color:m?m.color:"transparent",isOwner:!0,hideModal:i,isCurrentUser:h.id===(null==f?void 0:f.id),canClickAvatar:!!m&&h.id!==(null==f?void 0:f.id),onAvatarClick:a})):null,v.map(function(e){if(!e)throw Error("Expected user");var n=o.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==f?void 0:f.id);return(0,p.Y)(dF,(0,e8._)((0,g._)({isCurrentUser:e.id===(null==f?void 0:f.id)},e),{canClickAvatar:t,color:n.color,hideModal:i,isOwner:!1,onAvatarClick:a}),"chat-user-list-".concat(e.username))})]})})}return(null==s?void 0:s.repl.__typename)==="ReplRedirect"?(0,p.FD)("div",{children:["This App has moved to"," ",(0,p.Y)("a",{href:s.repl.replUrl,children:s.repl.replUrl})]}):(null==s?void 0:s.repl.__typename)==="SubscriptionExpiredError"?(0,p.FD)("div",{children:["Your subscription has expired.",(0,p.Y)("a",{href:"/pricing",children:"Upgrade here"})]}):null};var dO=t(40460),dL=t(82489);let dN=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,o=e.onAvatarClick,i=(0,eG.A)(),a=(0,dO.Q4)();return(0,p.FD)(dL.A,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,p.Y)(dT,{replId:i,activeUsers:a,hideModal:t,onAvatarClick:o})]})};var dM=t(89020),dG=(0,eA.x)({root:[eC.wp.backgroundColor.backgroundDefault],userStack:[eC.wp.px(8),eC.wp.py(4),(0,nt._)({},eC.$_.max(ic.LO.mobileMax+100),[eC.wp.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[eC.wp.borderRadius("full"),eC.wp.minWidth(24),eC.wp.height(24),eC.wp.fontSize(10),eC.wp.border({color:tB.LU.outlineDefault})]});function dB(e){var n=(0,d._)((0,h.useState)(!1),2),t=n[0],r=n[1],o=(0,t8.Q4)();if(0===o.length)return null;var i=o.slice(0,2),a=o.length-2;return(0,p.Y)(ez.S,{css:dG.root,row:!0,align:"center",children:(0,p.FD)(ez.S,{tag:"ul",css:dG.userStack,row:!0,gap:4,align:"center","aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[i.map(function(n){return(0,p.Y)("li",{css:dG.userStackListItem,children:(0,p.Y)(dM.A,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,p.Y)("li",{css:dG.userStackListItem,children:(0,p.Y)(ez.S,{children:(0,p.Y)(dN,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,p.Y)(eD.ui,{background:"root",css:dG.overflowContainer,children:(0,p.Y)(eH.$n,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:dG.overflowButton})})})})}):null]})})}function dH(){var e=ex(),n=(0,eb.Jn)(eE.id),t=n?"".concat(eY," (").concat(n,")"):eY;return(0,p.Y)(t7.K0,{alt:t,onClick:function(){return e()},size:32,children:(0,p.Y)(X.A,{})})}var dW=t(58133),dz=t(59193),d$=t(6497),dj=t(12154),dq=t(63516),dK=(0,eA.x)({self:[eC.wp.position.relative,eC.wp.borderRadius(4,0,0,4)],dotWrapper:[eC.wp.position.absolute,eC.wp.top("-3px"),eC.wp.right("-3px"),eC.wp.width("10px"),eC.wp.height("10px"),eC.wp.borderRadius("full"),eC.wp.border({color:tB.LU.backgroundDefault,width:2})],dot:[eC.wp.width("100%"),eC.wp.height("100%"),eC.wp.borderRadius("full")]});function dZ(e){var n=e.color;return(0,p.FD)(ez.S,{css:dK.self,children:[(0,p.Y)(dq.A,{}),(0,p.Y)(ez.S,{tag:"span",css:dK.dotWrapper,children:(0,p.Y)(ez.S,{tag:"span",css:dK.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var dV=(0,tG.AH)([eC.wp.flex.growAndShrink(1),eC.wp.borderRadius(4,0,0,4),(0,nt._)({},eC.$_.max("tabletMin"),{"div span":[eC.wp.display.none],"div svg":[eC.wp.mr(0)]})]),dJ=(0,tG.AH)([dV,eC.wp.borderRadius()]),dQ={base:{self:dV,loading:(0,tG.AH)([dV,i1.S.backgroundPulse()])},rounded:{self:dJ,loading:(0,tG.AH)([dJ,i1.S.backgroundPulse()])}};function dX(e){var n=e.text,t=e.icon,r=e.disabled,o=e.rounded,i=e.onClick,a=e.tooltip,l=e.loading,s=(0,p.Y)(eH.$n,{text:n,iconLeft:t,css:dQ[o?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:i});return a?(0,p.Y)(tH.m_,{tooltip:a,children:s}):s}function d0(){var e,n,t=(0,uI.uS)(),r=!1,o=!1;switch(t){case dW.d.Ready:case dW.d.Suspended:case dW.d.ProcessingLifecycleCommand:e="Deploy",n=(0,p.Y)(dq.A,{});break;case dW.d.Loading:e="Deploy",n=(0,p.Y)(dq.A,{}),r=!0,o=!0;break;case dW.d.Preparing:e="Preparing",n=(0,p.Y)(dq.A,{}),r=!0,o=!0;break;case dW.d.Deploying:e="Deploying",n=(0,p.Y)(sp.A,{}),o=!0;break;default:(0,o6.A)(t)}var i=(0,en.Us)(),a=(0,C._P)({controlName:"flag-modal-panes"}),l=(0,en.ni)(),s=!!(0,dj.Q)(),c=(0,d$.A)(),u=(0,C._P)({controlName:"flag-skip-deployment-target"});return(0,p.Y)(dX,{text:e,icon:n,onClick:function(){if(t===dW.d.Ready&&(0,z.u4)(z.AZ.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:s}),a){l({type:"deployments"});return}i({pane:(0,g._)({type:"deployments"},u&&{flow:{skipIntro:null!==c&&s,isAgentDeployment:null!==c&&s}})})},disabled:r,loading:o,rounded:!0})}var d1={self:eC.wp.rowWithGap(1),open:(0,tG.AH)([eC.wp.borderRadius(0,4,4,0),eC.wp.px(4)])};function d2(){var e,n,t,r=(0,uI.uS)(),o=(0,uI.Jz)(),i=(0,uI.GQ)(),a=(0,uI.Tp)().redeployWithNoNewOptions,l=(0,en.Us)(),s=(0,eK.A)().showError,c=(0,E.jt)(),u=(e=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:if(r===dW.d.Deploying||r===dW.d.Suspended||r===dW.d.ProcessingLifecycleCommand||r===dW.d.Preparing)return l({pane:{type:"deployments"}}),[2];if(g&&(m(void 0),g===rJ.nH.Failed)||o)return l({pane:{type:"deployments",data:{view:dz.P.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a({hasAgentSession:c})];case 2:return e.sent(),[3,4];case 3:return s(e.sent().message),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),f=(0,d._)((0,h.useState)(void 0),2),g=f[0],m=f[1];(0,h.useEffect)(function(){if(i&&"HostingBuildDeployStatusAction"===i.__typename)switch(i.status){case rJ.nH.Success:case rJ.nH.Failed:m(i.status)}},[i]),(0,h.useEffect)(function(){r===dW.d.Deploying&&m(void 0)},[r]);var v=void 0,w=!1,y=!1;switch(r){case dW.d.Ready:n="Redeploy",t=(0,p.Y)(dq.A,{}),g&&(g===rJ.nH.Success?(t=(0,p.Y)(dZ,{color:tB.LU.accentPositiveDefault}),v="Success"):(t=(0,p.Y)(dZ,{color:tB.LU.accentNegativeDefault}),v="An error occurred"));break;case dW.d.Suspended:n="Redeploy",t=(0,p.Y)(dZ,{color:tB.LU.greyDefault}),v="Deployment suspended";break;case dW.d.Loading:n="Redeploy",t=(0,p.Y)(dq.A,{}),w=!0,y=!0;break;case dW.d.ProcessingLifecycleCommand:n="Redeploy",t=(0,p.Y)(dZ,{color:tB.LU.orangeStronger}),y=!0,v="Updating deployment";break;case dW.d.Preparing:n="Preparing",t=(0,p.Y)(sp.A,{}),y=!0,w=!0;break;case dW.d.Deploying:n="Deploying",t=(0,p.Y)(sp.A,{}),y=!0;break;default:(0,o6.A)(r)}return o&&(n="Error",t=(0,p.Y)(dZ,{color:tB.LU.accentNegativeDefault}),v=o),(0,p.FD)(ez.S,{css:d1.self,children:[(0,p.Y)(dX,{text:n,icon:t,tooltip:v,onClick:u,disabled:w,loading:y}),(0,p.Y)(tH.m_,{tooltip:"Open Deployments pane",children:(0,p.Y)(eH.$n,{text:"",iconLeft:(0,p.Y)(ow.A,{}),onClick:function(){l({pane:{type:"deployments"}})},css:d1.open})})]})}var d5=function(){var e=(0,en.Us)(),n=(0,C._P)({controlName:"flag-modal-panes"}),t=(0,en.ni)();return(0,p.Y)(eH.$n,{text:"Redeploy",iconLeft:(0,p.Y)(dq.A,{}),onClick:function(){if(n){t({type:"deployments"});return}e({pane:{type:"deployments"}})}})};function d4(){var e=(0,uI.i$)(),n=(0,uI.cF)(),t=(0,uI.mj)().deployability;return e&&n?t.deploy.isAuthorized||t.redeploy.isAuthorized?(0,p.Y)(d2,{}):(0,p.Y)(d5,{}):(0,p.Y)(d0,{})}var d3=t(94424),d8=t(17045),d7="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651",d6=t(32625),d9=t(29010),pe=t(1536),pn=t(73966),pt=t(77953),pr=t(50375),po=t(73670);let pi=function(e){var n,t,r,o,i,a,l=e.lessonSlug,s=e.courseSlug,c=(0,eK.A)().showConfirm;if(!l||!s)return null;var u=(0,d8.so)(s),d=(0,d8.Hi)(s,l);if(!d)return null;var f=d.ordinalLabel,h=(0,d8.HE)(u.socialSharingText,d),g="".concat(h," ").concat(u.sharableLink),m=(0,d9.A)({text:h,url:u.sharableLink}),v=(0,d6.A)({url:u.sharableLink}),w=(t=(n={url:u.sharableLink,hashtag:u.socialHashtag}).url,r=n.hashtag,o=n.redirectBackTo,(i=new URLSearchParams).append("href",t),o&&i.append("redirect_uri",o),r&&(r.startsWith("#")||(r="#".concat(r)),i.append("hashtag",r)),a=i.toString(),"".concat(d7,"&").concat(a)),y=[{url:m,icon:po.A,base:d9.l,cta:"Share on X",color:pn.A.brands.twitter},{url:v,icon:pr.A,base:d6.l,cta:"",color:pn.A.brands.linkedin},{url:w,icon:pt.A,base:d7,cta:"",color:pn.A.brands.facebook}];return(0,p.FD)(ez.S,{children:[(0,p.FD)(ez.S,{row:!0,gap:16,css:[eC.wp.pr(24)],align:"center",children:[(0,p.Y)(ez.S,{css:{fontSize:48},children:"\uD83E\uDD73"}),(0,p.FD)(eW.EY,{variant:"headerDefault",multiline:!1,children:["Congrats on completing ",f,"!"]})]}),(0,p.Y)(eW.EY,{variant:"subheadDefault",css:[eC.wp.py(12)],multiline:!1,children:"Share your progress"}),(0,p.FD)(ez.S,{css:[eC.wp.position.relative,eC.wp.borderRadius(8),eC.wp.backgroundColor.backgroundHigher,eC.wp.py(8),eC.wp.px(12)],children:[(0,p.Y)(ez.S,{css:eC.wp.pr(16),children:g}),(0,p.Y)(t7.K0,{css:[eC.wp.position.absolute,eC.wp.top(8),eC.wp.right(8)],alt:"Copy",size:18,tooltipBehavior:"hidden",onClick:function(){c("Copied to clipboard!"),(0,rm.default)(g),(0,pe._)({action:"copied_share_text",lessonSlug:l,courseSlug:s,origin:"lesson_complete_modal"})},children:(0,p.Y)(rY.A,{size:16})})]}),(0,p.FD)(ez.S,{css:[eC.wp.pt(16),eC.wp.align.center],row:!0,gap:16,justify:"center",children:[(0,p.Y)(a0.v,{variant:"outlined",text:"Back to the learning hub",href:"/learn/".concat(s,"/hub")}),(0,p.Y)(ez.S,{row:!0,gap:8,align:"center",children:y.map(function(e){var n=e.url,t=e.icon,r=e.base,o=e.cta,i=e.color;return(0,p.Y)(eH.$n,{css:[{backgroundColor:i,color:"white"}],onClick:function(){window.open(n,"_blank"),(0,z.u4)(z.AZ.EXTERNAL_LINK_VIEWED,{url:r,placement:"lesson-complete-modal",campaign:s,lessonSlug:l})},text:o,iconLeft:(0,p.Y)(t,{})},n)})})]})]})};function pa(e){var n=e?1560:1400;return(0,eA.x)({desktopButton:(0,nt._)({},eC.$_.max(n),[eC.wp.display.none]),mobileButton:(0,nt._)({},eC.$_.min(n),[eC.wp.display.none])})}let pl=function(e){var n,t,r=e.lesson,o=(0,eK.A)().showError,i=(0,sc.mO)().fireCircularBurstFrom,a=(0,h.useRef)(null),l=(0,d3.j)(),s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,cT.A)().showPrivateUpsell,m=(0,d._)((n={onError:function(){return o("Something went wrong")},onCompleted:function(e){var n,t;(null===(n=e.completeUserCourseLesson)||void 0===n?void 0:n.__typename)!=="UpdatedUserCourseLesson"?o((null===(t=e.completeUserCourseLesson)||void 0===t?void 0:t.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===r.id?(a.current&&!l&&i({element:a.current}),u(!0)):o("Something went wrong")}},t=(0,g._)({},lO,n),a9.n(lN,t)),2),v=m[0],w=m[1].loading,y="Lesson completed \uD83C\uDF89",b="Mark lesson completed",S=function(){(0,pe._)({action:"completed",lessonSlug:r.lessonSlug,courseSlug:r.course.courseSlug}),v({variables:{input:{userLessonId:r.id}}})};return(0,p.FD)(p.FK,{children:[null!==r.timeCompleted?(0,p.FD)(p.FK,{children:[(0,p.Y)(eH.$n,{ref:a,disabled:!0,text:y,colorway:"primary",css:pa(f).desktopButton}),(0,p.Y)(tH.m_,{tooltip:y,css:pa(f).mobileButton,children:(0,p.Y)(eH.$n,{ref:a,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,p.FD)(p.FK,{children:[(0,p.Y)(eH.$n,{onClick:S,text:w?"Verifyingâ€¦":b,colorway:"primary",loading:w,css:pa(f).desktopButton}),(0,p.Y)(tH.m_,{tooltip:b,css:pa(f).mobileButton,children:(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(s3.A,{}),onClick:S,text:"",colorway:"primary",loading:w})})]}),(0,p.Y)(ek.a,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,p.Y)(pi,{lessonSlug:r.lessonSlug,courseSlug:r.course.courseSlug})})]})};var ps=t(92578);function pc(e){var n=e.lesson,t=(0,en.EC)(),r=(0,en.RO)(),o=(0,cT.A)().showPrivateUpsell,i="Show tutorial",a=(0,p.Y)(ps.A,{}),l=function(){return r()};return t?(0,p.Y)(pl,{lesson:n}):(0,p.FD)(p.FK,{children:[(0,p.Y)(eH.$n,{colorway:"primary",iconLeft:a,text:i,css:pa(o).desktopButton,onClick:l}),(0,p.Y)(tH.m_,{tooltip:i,css:pa(o).mobileButton,children:(0,p.Y)(eH.$n,{colorway:"primary",iconLeft:a,text:"",onClick:l})})]})}var pu=t(91301),pd=t(75921),pp=t(58283);function pf(e){var n=e.repl,t=e.currentUser,r=e.isAgentOnboarding,o=e.isMainContentHidden;return(0,p.FD)(ez.S,{row:!0,gap:6,align:"center",justify:"end",css:eC.wp.noDragRegion,children:[o||r?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(dH,{}),(0,p.Y)(pg,{repl:n})]}),(0,p.Y)(pm,{currentUser:t,isAgentOnboarding:r})]})}var ph={socialGroup:(0,tG.AH)([eC.wp.rowWithGap(1),eC.wp.align.stretch,eC.wp.borderRadius(),eC.wp.overflow("hidden")]),invitePopover:(0,tG.AH)([eC.wp.width(400)]),inviteButton:(0,tG.AH)((0,M._)((0,eH.gX)({size:16})).concat([sL.b.filled,(0,nt._)({borderTopLeftRadius:0,borderBottomLeftRadius:0},eC.$_.max("tabletMax"),{svg:[eC.wp.mr(0)],span:[eC.wp.display.none]})]))};function pg(e){var n,t,r,o,i,a,l,s,c,u,f,g,m,v,w,y,b,S,Y,x,_,A,C,k=e.repl,D=(0,d._)((0,h.useState)(!1),2),R=D[0],E=D[1],I=(0,sn.Os)(lV.C.id,lV.j.Share),U=(0,d._)((0,h.useState)(!1),2),F=U[0],P=U[1],T=(0,en.Us)(),O=(w=(0,en.q5)(),y=(0,et.A)().presence,b=(0,eu.w1)(),S=(0,eq.A)(w),(0,h.useCallback)(function(e){var n=e.username,t=e.id,r=y.getFollowedUser();if((null==r?void 0:r.username)===n){y.unfollowUser();return}y.followUser(n);var o=y.getActiveFileForUser(t),i=b();o&&o!==i&&S.current({path:o})},[S,b,y])),L=(0,tb.oR)(),N=(0,h.useRef)(null),M=(0,h.useRef)(null),G=(0,h.useRef)(R&&(null==I?void 0:I.isActive));(0,h.useEffect)(function(){!G.current||(null==I?void 0:I.isActive)||E(!1),G.current=R&&(null==I?void 0:I.isActive)},[I,R]),(0,h.useEffect)(function(){if(null==I?void 0:I.isActive){if(R&&M.current){null==I||I.tourRef(M.current);return}I.tourRef(N.current)}},[I,R,M]);var B=(null===(Y=k.owner)||void 0===Y?void 0:Y.__typename)==="Team",H=k.authorizations.viewPermissions.isAuthorized,W=(null===(x=k.org)||void 0===x?void 0:x.type)==="team"?"Access":"Invite",$=(null==k?void 0:null===(A=k.authorizations)||void 0===A?void 0:null===(_=A.viewDeploymentConfig)||void 0===_?void 0:_.isAuthorized)&&!L;(0,eb.SJ)(function(){return[oA.toggleInviteDialog.id,function(){return E(function(e){return!e})}]},[E]);var j=(0,eb.Jn)(oA.toggleInviteDialog.id);eI({match:K.G2,data:{type:"action",label:"Invite",icon:(0,p.Y)(dw.A,{}),description:"Open invite dialog",keyboardShortcut:j,run:function(){E(!0)}}});var q=(n=(0,uI.i$)(),t=(0,uI.cF)(),r=!!n||null!=t,o=(0,en.Us)(),i=function(){o({pane:{type:"deployments"},activate:!0})},a=(0,sn.Jw)(se,l1.Deploy),l=(0,sn.Os)(lJ.IW.id,lJ.Gp.OpenDeployments,{onEnter:function(){r&&(i(),l.goto(lJ.Gp.MonitorDeployment))}}),s=(0,sn.Os)(lJ._t.id,lJ.ij.OpenDeployments,{onEnter:function(){r&&(i(),s.goto(lJ.ij.MonitorDeployment))}}),c=(0,e9.P)(a,l.tourRef,s.tourRef,{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:362"}),u=(0,sn.Jw)(lJ.IW.id,lJ.Gp.OpenMultiplayer),f=(0,sn.Jw)(lJ._t.id,lJ.ij.OpenMultiplayer),g=(0,e9.P)(u,f,{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:378"}),m=(0,sn.Jw)(lJ.IW.id,lJ.Gp.InviteCollaborator),v=(0,sn.Jw)(lJ._t.id,lJ.ij.InviteCollaborator),{deployButton:c,inviteButton:g,invitePopover:(0,e9.P)(m,v,{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:392"})}),Z=(0,sn.qt)();return(0,p.FD)(p.FK,{children:[(null==k?void 0:k.lesson)?(0,p.Y)(pc,{lesson:k.lesson}):null,(0,p.FD)(eD.ui,{css:ph.socialGroup,background:"root",children:[(0,p.Y)(dB,{onAvatarClick:O}),H?(0,p.Y)(p.FK,{children:(0,p.Y)(ez.S,{innerRef:(0,e9.P)(N,q.inviteButton,{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:228"}),css:{"&:only-child .invite-button":[eC.wp.borderRadius()]},children:(0,p.FD)(sM.Wv,{isOpen:R,placement:"bottom end",label:W,css:ph.invitePopover,onOpenChange:function(e){if(R&&!F){E(!1),Z();return}e&&(0,z.u4)(z.AZ.INVITE_MODAL_OPENED,{replId:k.id,source:"replEnvironment"}),E(e)},noArrow:!0,children:[(0,p.FD)(eH.SC,{css:ph.inviteButton,className:"invite-button",children:[(0,p.Y)(pp.A,{}),(0,p.Y)(eW.EY,{children:W})]}),(0,p.Y)("div",{ref:(0,e9.P)(M,q.invitePopover,{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:277"}),children:(0,p.Y)(d_,{handleUpgradeTriggered:function(e){return P(e)},replId:k.id,isTeamRepl:B,org:null!==(C=k.org)&&void 0!==C?C:void 0})})]})})}):null]}),$&&k?(0,p.Y)(ez.S,{innerRef:q.deployButton,children:(0,p.Y)(d4,{})}):null,L?(0,p.Y)(eH.$n,{text:"Extension Devtools",iconLeft:(0,p.Y)(t_.A,{}),onClick:function(){T({pane:{type:"extensionDevtools"}})}}):null]})}function pm(e){var n=e.currentUser,t=e.isAgentOnboarding,r=(0,f.useRouter)(),o=(0,rX.A)();return(0,p.Y)(p.FK,{children:o?(0,p.Y)(p.FK,{children:(0,p.Y)(uU.L,{})}):(0,p.FD)(p.FK,{children:[t?null:(0,p.Y)(ez.S,{row:!0,children:(0,p.Y)(pd.A,{pathname:r.pathname,showCount:!1})}),(0,p.Y)(pu.Ay,{currentUser:n})]})})}var pv=t(27382),pw=t(29665);function py(e){return e[e.length-1]}var pb=(0,eA.x)({root:[eC.wp.colWithGap(4)],menuItem:[],menuItemSelector:[eC.wp.height(28),eC.wp.pl(4),{flex:1,transition:"none",span:{flex:1,textAlign:"left"}}],iconInvisible:[eC.wp.visibility.hidden],playControl:[eC.wp.height(28),eC.wp.width(28),eC.wp.color.foregroundDimmer,eC.wp.hover(eC.wp.color.foregroundDefault)],metadata:[],pid1MenuItem:[eC.wp.py(4),eC.wp.flex.row,eC.wp.justify.spaceBetween,eC.wp.borderRadius(),eC.wp.align.center,eC.wp.rowWithGap(8),eC.wp.cursor.pointer,{"&[data-hovered],&[data-focused]":{backgroundColor:tB.LU.interactiveBackground},"&[data-selected]":{backgroundColor:tB.LU.interactiveBackgroundActive},"&[aria-disabled]":{cursor:"not-allowed"}}]});function pS(e){var n=e.setDefault,t=e.onAction,r=e.name,o=e.isRunning,i=e.isRunButton?null:{css:pb.iconInvisible},a=(0,pv.y$)(r);return(0,p.FD)(ez.S,{row:!0,"aria-label":r,children:[(0,p.Y)(eH.$n,{css:pb.menuItemSelector,onClick:function(){return n(r)},text:r,iconLeft:(0,p.Y)(s3.A,(0,g._)({},i)),variant:"nofill"}),(0,p.Y)(t7.K0,{css:pb.playControl,alt:"".concat(o?sm[ou.ll.RUNNING]+" ".concat(a):sm[ou.ll.IDLE]+" ".concat(a)),onClick:t,children:o?(0,p.Y)(sh.A,{}):(0,p.Y)(sf.A,{})})]})}function pY(){var e,n,t,r,o,i=(0,et.A)().runner,a=(0,oh.g3)(),l=(0,oh.wS)(),s=(0,oh.z1)(),c=(0,oh.OK)(),u=(0,oh.If)(),d=(0,oh.MP)(),f=(0,oh.cz)(),g=f.isPid1RunnerRunning,m=f.runButtonRunsWorkflows,v=null==a?void 0:a.workflowId,w=m&&!!(null==c?void 0:null===(t=c.workflow)||void 0===t?void 0:null===(n=t.find(function(e){return e.name===v}))||void 0===n?void 0:null===(e=n.metadata)||void 0===e?void 0:e.generated),y=null==c?void 0:null===(o=c.workflow)||void 0===o?void 0:null===(r=o.find(function(e){var n;return null===(n=e.metadata)||void 0===n?void 0:n.dotReplitRun}))||void 0===r?void 0:r.name,b=(0,pw.I)(function(e){return function(n){return d(ou.QG.RUN_BUTTON_CLICKED),(0,z.u4)(z.AZ.WORKFLOW_RAN,{source:"dropdownMenu"}),e.workflows.runWorkflow.rpc({workflowId:n})}},[d]),S=(0,pw.I)(function(e){return function(n){return(0,z.u4)(z.AZ.WORKFLOW_STOPPED,{source:"dropdownMenu"}),e.workflows.stopRun.rpc({runId:n})}},[]),Y=function(e){(0,z.u4)(z.AZ.RUN_BUTTON_DEFAULT_CHANGED,{runner:e?"workflows":"pid1"}),s(e),l()},x=(0,h.useMemo)(function(){var e;return(null==c?void 0:c.workflow)&&null!==(e=null==c?void 0:c.workflow.filter(function(e){var n,t;return!(null!==(t=null===(n=e.metadata)||void 0===n?void 0:n.generated)&&void 0!==t&&t)}).map(function(e){var n=Object.values(null!=u?u:{}).filter(function(n){return n.workflow.name===e.name}).sort(function(e,n){return e.startTime-n.startTime});return{workflowConfig:e,workflowRunState:py(n)}}))&&void 0!==e?e:[]},[c,u]),_=(0,h.useMemo)(function(){if(y)return py(Object.values(null!=u?u:{}).filter(function(e){return y===e.workflow.name}).sort(function(e,n){return e.startTime-n.startTime}))},[u,y]),A=(0,h.useCallback)(function(){g?i.stopRun():i.run(ou.QG.RUN_BUTTON_CLICKED)},[g,i]);return(0,p.FD)(ez.S,{"aria-label":"Workflows",gap:4,children:[(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",children:"Default .replit run command"}),y?(0,p.Y)(pS,{isRunButton:w,isRunning:(null==_?void 0:_.step)==="RUNNING",onAction:function(){(null==_?void 0:_.step)!=="RUNNING"?null==b||b(y):_&&(null==S||S(_.runId))},setDefault:function(e){Y()},name:y}):(0,p.Y)(pS,{isRunButton:!v,isRunning:g,onAction:A,setDefault:function(){Y()},name:pv.Ov}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",children:"Workflows"}),(0,p.Y)(ez.S,{children:x.map(function(e,n){var t,r=e.workflowConfig,o=e.workflowRunState,i=(null==o?void 0:o.step)==="RUNNING";return(0,p.Y)(pS,{onAction:function(){i?o&&(null==S||S(o.runId)):null==b||b(r.name)},setDefault:Y,name:r.name,isRunning:i,isRunButton:r.name===v},r.name+"-"+n+"-"+(null!==(t=null==o?void 0:o.step)&&void 0!==t?t:"not-started"))})})]})}var px=[eC.wp.rowWithGap(4),eC.wp.justify.center,eC.wp.align.center,eC.wp.height(32),eC.wp.minWidth(48),eC.wp.px(8),eC.wp.borderRadius(4),eC.wp.cursor.pointer,eC.wp.position.relative,eC.wp.fontWeight.medium,eC.wp.zIndex(1)],p_="\ntransform 0.2s linear,\nopacity 0.2s linear\n",pA=(0,eA.x)({wrapper:[eC.wp.noDragRegion,eC.wp.position.relative,eC.wp.borderRadius("default")],runButtonLabel:[eC.wp.display.none,(0,nt._)({},"@media (min-width: ".concat(ic.LO.tabletMax,"px)"),[eC.wp.display.block])],runButtonIdle:(0,M._)(px).concat([eC.wp.color.accentPositiveStrongest,eC.wp.backgroundColor.accentPositiveDimmer,{border:"1px solid",borderColor:"transparent","&:hover":[{color:"white"},eC.wp.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:tB.LU.accentPositiveStrongest}],"&:disabled":[eC.wp.backgroundColor.backgroundHigher],":focus-visible":{outlineColor:"".concat(tB.LU.accentPositiveStrongest)}}]),runButtonRunning:(0,M._)(px).concat([eC.wp.color.foregroundDimmer,eC.wp.backgroundColor.backgroundHighest,{border:"1px solid",borderColor:"transparent","&:hover":[eC.wp.color.foregroundDefault,eC.wp.backgroundColor.greyDimmest],"&:active":[{borderColor:tB.LU.accentPrimaryDefault}]}]),runButtonRunByAgent:(0,M._)(px).concat([eC.wp.color.foregroundDefault,eC.wp.backgroundColor.blurpleDimmer,eC.wp.maxWidth(68),{border:"1px solid",borderColor:"transparent","&:before":[{content:'"Running"'}],"&:hover":[eC.wp.color.foregroundDimmer,eC.wp.backgroundColor.blurpleDimmest,eC.wp.minWidth(68),{"&::before":[{content:'"Stop"'}]}],"&:active":[{borderColor:tB.LU.accentPrimaryDefault}]}]),runButtonTooltip:[eC.wp.px(4),eC.wp.colWithGap(4),eC.wp.justify.center],dropDown:[{'&[data-visible="true"]':{visibility:"visible",maxWidth:"100px",transform:"translateX(-4px)",opacity:1},'&[data-visible="false"]':{visibility:"hidden",maxWidth:0,transform:"translateX(-20px)",opacity:0},zIndex:0,transition:p_}],dropDownButton:[eC.wp.reset.button,sL.b.filled,eC.wp.color.foregroundDimmer,eC.wp.height(32),eC.wp.minWidth(20),eC.wp.flex.column,eC.wp.justify.center,eC.wp.pr(2),eC.wp.pl(4),eC.wp.borderRadius(0,"default","default",0)],agentBanner:[eC.wp.colorMixBg(tB.LU.blurpleDimmest,"transparent",.6),eC.wp.borderRadius("default",0,0,"default"),{'&[data-visible="false"]':{visibility:"hidden",transform:"translateX(30px)",position:"absolute",maxWidth:0,opacity:0},'&[data-visible="true"]':{transform:"translateX(4px)",opacity:1,visibility:"visible",justifyContent:"center",height:"32px",maxWidth:"32px",paddingY:"4px",padding:"4px 8px 4px 6px"},transition:p_}],popoverWrapper:[eC.wp.minWidth(240)],popoverSection:[eC.wp.p(8),{":not(:last-of-type)":{borderBottom:"1px solid "+tB.LU.outlineDimmest}}],stopModal:[eC.wp.pt(12)]});function pC(e){var n=e.stop,t=e.cancel;return(0,p.FD)(ez.S,{children:[(0,p.Y)(eW.EY,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,p.FD)(ez.S,{css:pA.stopModal,row:!0,gap:12,justify:"end",children:[(0,p.Y)(eH.$n,{text:"Cancel",onClick:t}),(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(sh.A,{}),text:"Stop",onClick:function(){n(),t()},colorway:"negative"})]})]})}function pk(e){var n=e.isRunning,t=e.isAgentRunning,r=e.isDisabled,o=e.handleRunButtonClick,i=(0,d._)((0,h.useState)(!1),2),a=i[0],l=i[1];return t?(0,p.FD)(p.FK,{children:[(0,p.Y)(ek.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,p.Y)(pC,{stop:o,cancel:function(){return l(!1)}})}),(0,p.Y)(ez.S,{tag:"button",css:pA.runButtonRunByAgent,onClick:function(){return l(!0)}})]}):n?(0,p.FD)(ez.S,{tag:"button",css:pA.runButtonRunning,onClick:o,children:[(0,p.Y)(sh.A,{size:16}),(0,p.Y)(eW.EY,{multiline:!1,css:pA.runButtonLabel,children:sm[ou.ll.RUNNING]})]}):(0,p.FD)(ez.S,{tag:"button",disabled:r,css:pA.runButtonIdle,onClick:o,children:[(0,p.Y)(sf.A,{size:16}),(0,p.Y)(eW.EY,{multiline:!1,css:pA.runButtonLabel,children:sm[ou.ll.IDLE]})]})}function pD(e){var n,t=e.attachTourRefs,r=si({variables:{id:(0,eG.A)()}}).data,o=(null==r?void 0:r.repl.__typename)==="Repl"?r.repl:null,i=sx().tourRefs,a=(0,eb.Jn)(oA.run.id),l=(0,d._)((0,h.useState)(!1),2),s=l[0],c=l[1],u=(0,en.Us)(),f=(0,oh.g3)(),g=null!==(n=null==f?void 0:f.workflowId)&&void 0!==n?n:pv.Ov,m=(0,oh.cz)(),v=m.isRunning,w=m.isAgentRunning,y=m.isOffline,b=m.runButtonRunsWorkflows,S=m.isDisabled,Y=m.isHtmlRepl,x=!Y&&!y,_=(0,oh.qP)();(0,h.useEffect)(function(){w&&s&&c(!1)},[w,s]);var A=(0,h.useCallback)(function(){if(o){var e,n,t,r,i,a,l;(0,z.u4)(z.AZ.PROJECT_RAN,{placement:"primary_btn",replId:o.id,replTitle:o.title,rootOriginReplUrl:o.rootOriginReplUrl,templateTitle:null===(t=o.source)||void 0===t?void 0:null===(n=t.release)||void 0===n?void 0:null===(e=n.repl)||void 0===e?void 0:e.title,templateOwner:null===(l=o.source)||void 0===l?void 0:null===(a=l.release)||void 0===a?void 0:null===(i=a.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username})}var s=b?"workflows":"pid1";(0,z.u4)(z.AZ.RUN_BUTTON_CLICKED,{source:"header",runner:Y?"html":s}),_()},[o,b,_,Y]),C=(0,h.useCallback)(function(){(0,z.u4)(z.AZ.WORKFLOWS_SETTINGS_OPENED,{source:"runButton"}),u({pane:{type:"workflows"}}),c(!1)},[u]);return(0,p.FD)(ez.S,{innerRef:void 0!==t&&t?i:void 0,css:pA.wrapper,row:!0,align:"center",children:[(0,p.Y)(ez.S,{css:pA.agentBanner,"data-visible":w?"true":"false",children:(0,p.Y)(l0.A,{})}),(0,p.Y)(tH.m_,{placement:"bottom",tooltip:function(e){var n=e.isHtmlRepl,t=e.isOffline,r=e.isAgentRunning,o=e.isDisabled,i=e.isRunning,a=e.runButtonName,l=e.shortcut;if(n)return"Run app";if(t)return"Connecting to the workspace";if(r)return"Agent is running your App";if(o)return"Run button is not configured";var s=(0,pv.y$)(a);return(0,p.FD)(ez.S,{css:pA.runButtonTooltip,align:"center",children:[a?(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:i?sm[ou.ll.RUNNING]+" all workflows":sm[ou.ll.IDLE]+" ".concat(s)}):null,l?(0,p.Y)(eb._y,{keyCombo:l,fontSize:12}):null]})}({isHtmlRepl:Y,isRunning:v,isAgentRunning:w,isDisabled:S,isOffline:y,runButtonName:g,shortcut:a}),children:y?(0,p.FD)(ez.S,{tag:"button",disabled:!0,css:pA.runButtonRunning,children:[(0,p.Y)(sp.A,{size:16}),(0,p.Y)(eW.EY,{multiline:!1,css:pA.runButtonLabel,children:"Loading"})]}):(0,p.Y)(ez.S,{dataCy:"ws-run-btn",children:(0,p.Y)(pk,{isRunning:v,isAgentRunning:w,isDisabled:S,handleRunButtonClick:A})})}),x?(0,p.Y)(ez.S,{css:pA.dropDown,"data-visible":w?"false":"true",children:(0,p.FD)(sM.Wv,{isOpen:s,onOpenChange:function(e){(0,z.u4)(z.AZ.RUN_BUTTON_DROPDOWN_OPENED),c(e)},label:"Workflows",placement:"bottom start",noArrow:!0,children:[(0,p.Y)(ez.D.button,{css:pA.dropDownButton,children:(0,p.Y)(tH.m_,{tooltip:"Configure Run Button",children:(0,p.Y)(aa.A,{})})}),(0,p.FD)(ez.S,{css:pA.popoverWrapper,children:[(0,p.Y)(ez.S,{css:pA.popoverSection,children:(0,p.Y)(pY,{})}),(0,p.Y)(ez.S,{css:pA.popoverSection,children:(0,p.Y)(eH.$n,{text:"Manage Workflows",onClick:C,iconLeft:(0,p.Y)(os.A,{})})})]})]})}):null]})}var pR=(0,rL.v)(["opacity","pointerEvents"]),pE=pR.cssVars,pI=pR.styleTokens,pU=(0,tG.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),pF=(0,tG.i7)({from:{opacity:0},to:{opacity:1}}),pP={root:(0,tG.AH)([eC.wp.width("100%"),eC.wp.top(0),eC.wp.left(0),eC.wp.py(8),eC.wp.px(12),eC.wp.pl(8),eC.wp.position.absolute,eC.wp.dragRegion,{userSelect:"none",display:"grid",gridTemplateColumns:"1fr max-content 1fr",alignItems:"center",gap:8,pointerEvents:pI.pointerEvents,opacity:pI.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(pU," 0.2s ease-in-out, ").concat(pF," 0.2s ease-in-out")},animation:"".concat(pF," 0.2s ease-in-out")}]),center:(0,tG.AH)([eC.wp.noDragRegion,eC.wp.position.relative,eC.wp.rowWithGap(8),eC.wp.align.center])},pT={windowsOSRoot:(0,tG.AH)([pP.root,eC.wp.dragRegion,{paddingRight:lq.xn}])};let pO=(0,h.memo)(function(e){var n,t,r,o=e.isAgentOnboarding,i=void 0!==o&&o,a=(n={variables:{id:(0,eG.A)()},context:{noBatch:!0}},t=(0,g._)({},lW,n),w.I(lj,t)).data,l=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null,s=null==a?void 0:a.currentUser,c=(0,rX.A)(),u=(0,lZ.d0)(),d=(0,en.Bm)(),f="centered"===d||"lobbyAppProposal"===d,h=(0,C._P)({controlName:"flag-work-flows"})?(0,p.Y)(pD,{attachTourRefs:!0}):(0,p.Y)(sY,{attachTourRefs:!0}),m=(0,lK.U)();return l&&s?(0,p.FD)(ez.S,{style:(r={},(0,nt._)(r,pE.opacity,!m&&f?.5:1),(0,nt._)(r,pE.pointerEvents,!m&&f?"none":"all"),r),tag:"header",css:c&&u?pT.windowsOSRoot:pP.root,children:[(0,p.Y)(uD,{repl:l,currentUser:s,isAgentOnboarding:i}),f||i?(0,p.Y)(ez.S,{}):h,(0,p.Y)(pf,{repl:l,currentUser:s,isAgentOnboarding:i,isMainContentHidden:f})]}):null});var pL=t(14349);function pN(){var e=(0,m._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return pN=function(){return e},e}var pM=(0,v.J1)(pN());function pG(){return(pG=(0,G._)(function(e){var n,t;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(null===eB.V)return[2];return[4,eB.V.query({query:pM,variables:{username:e}})];case 1:return[2,null==(t=r.sent().data)?void 0:null===(n=t.user)||void 0===n?void 0:n.image]}})})).apply(this,arguments)}function pB(){return"Notification"in window?"true"===tF.A.get(pz,"string")?"dismissed":window.Notification.permission:"denied"}function pH(){return(pH=(0,G._)(function(){return(0,B.YH)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})).apply(this,arguments)}function pW(){return(pW=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,function(){return pH.apply(this,arguments)}()];case 1:return e.sent(),p$(!1),[2]}})})).apply(this,arguments)}var pz="notifications/dismissedModal";function p$(e){tF.A.set(pz,String(e))}var pj={};function pq(e){return pK.apply(this,arguments)}function pK(){return(pK=(0,G._)(function(e){var n,t,r,o,i,a,l,s,c,u,d;return(0,B.YH)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,o=e.icon,i=e.iconByUsername,a=e.tag,l=e.onClick,c=void 0===(s=e.cacheDuration)?0:s,!document.hidden&&document.hasFocus()||"granted"!==pB()||(u=Date.now(),a in pj&&pj[a]+c>u))return[2];if(!i)return[3,2];return[4,function(e){return pG.apply(this,arguments)}(i)];case 1:o=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:o||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),pj[a]=u,[2]}})})).apply(this,arguments)}var pZ=t(96861),pV=t(25930),pJ={base:(0,tG.AH)([eC.wp.position.absolute,eC.wp.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:ic.Ds.duration,transitionTimingFunction:ic.Ds.timingFunction}]),floating:(0,tG.AH)([{borderColor:tB.LU.outlineDimmest},eC.wp.shadow(2)]),dragging:(0,tG.AH)([{borderColor:tB.LU.outlineStronger},eC.wp.shadow(3)]),active:(0,tG.AH)([{borderColor:tB.LU.outlineDimmer}])};let pQ=(0,h.memo)(function(e){var n=e.paneId,t=(0,en.h7)(n),r=(0,oj.A)(t.isFloating),o=(0,oj.A)(t.isActive),i=(0,oj.A)(t.isBeingDragged),a=(0,oj.A)(t.hasBorder),l=(0,oj.A)(t.headerHeight);return a&&r?(0,p.Y)(ez.S,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(l,"px + 2px)"),top:-(l+1)},css:[pJ.base,r&&pJ.floating,o&&pJ.active,i&&pJ.dragging]}):null});var pX=ez.D.div,p0=(0,tG.AH)([eC.wp.width("100%"),eC.wp.position.absolute,eC.wp.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),p1=(0,tG.AH)([eC.wp.height("100%"),eC.wp.position.absolute,eC.wp.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),p2=(0,tG.AH)([eC.wp.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function p5(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var p4={topLeft:(0,tG.AH)([eC.wp.top(0),eC.wp.left(0),p5("topLeft")]),topRight:(0,tG.AH)([eC.wp.top(0),eC.wp.right(0),p5("topRight")]),bottomLeft:(0,tG.AH)([eC.wp.bottom(0),eC.wp.left(0),p5("bottomLeft")]),bottomRight:(0,tG.AH)([eC.wp.bottom(0),eC.wp.right(0),p5("bottomRight")])};function p3(e){var n=e.edge,t=e.size,r=e.onPointerDown;return"top"===n||"bottom"===n?(0,p.Y)(pX,{onPointerDown:r,style:(0,nt._)({height:t},n,-t),css:p0}):"right"===n||"left"===n?(0,p.Y)(pX,{onPointerDown:r,style:(0,nt._)({width:t},n,-t),css:p1}):(0,p.Y)(pX,{onPointerDown:r,style:{height:t,width:t,cursor:"topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize"},css:[p2,p4[n]]})}var p8=["bottom","right","left","bottomRight","bottomLeft"],p7=(0,h.memo)(function(e){var n=(0,en.e7)();return(0,p.Y)(p.FK,{children:p8.map(function(t){return(0,p.Y)(p3,{size:8,edge:t,onPointerDown:function(r){(0,tT.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),p6=["top","right","left","topRight","topLeft"],p9=(0,h.memo)(function(e){var n=(0,en.e7)();return(0,p.Y)(p.FK,{children:p6.map(function(t){return(0,p.Y)(p3,{size:8,edge:t,onPointerDown:function(r){(0,tT.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),fe=t(41732),fn=t(63360),ft=(0,rL.v)(["fixedPositionOffsetX","fixedPositionOffsetY","transformX","transformY","scale","transformOriginX","width","height","transitionDuration","transitionDelay","transitionProperty","opacity","interactionBlanketDisplay","pointerEvents","userSelect","borderTopLeftRadius","borderTopRightRadius","iframePointerEvents"]),fr=ft.cssVars,fo=ft.styleTokens,fi=(0,eA.x)({root:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),eC.wp.container("pane"),(0,nt._)({borderTopLeftRadius:fo.borderTopLeftRadius,borderTopRightRadius:fo.borderTopRightRadius,borderBottomLeftRadius:4,borderBottomRightRadius:4,transitionProperty:fo.transitionProperty,transitionDelay:fo.transitionDelay,transitionDuration:fo.transitionDuration,opacity:fo.opacity,transitionTimingFunction:"ease-out",transform:"translate(".concat(fo.transformX,", ").concat(fo.transformY,") scale(").concat(fo.scale,")"),transformOrigin:"".concat(fo.transformOriginX," top"),width:fo.width,height:fo.height,pointerEvents:fo.pointerEvents,"--fixed-position-offset-x":fo.fixedPositionOffsetX,"--fixed-position-offset-y":fo.fixedPositionOffsetY},eC.$_.prefersReducedMotion,{transitionProperty:"none"})],container:[eC.wp.position.relative,eC.wp.width("100%"),eC.wp.flex.growAndShrink(1),{overflow:"auto",zIndex:1,userSelect:fo.userSelect,iframe:{pointerEvents:fo.iframePointerEvents}}],interactionBlanket:[eC.wp.coverContainer,{zIndex:1,display:fo.interactionBlanketDisplay}],border:[eC.wp.borderRadius(),eC.wp.border({color:tB.LU.outlineDimmest}),{transition:"border-color 200ms",position:"absolute",width:"calc(100% + ".concat(8,"px)"),height:"calc(100% + ".concat(8,"px)"),transform:"translate(-".concat(4,"px, -").concat(4,"px)"),pointerEvents:"none",zIndex:1}]}),fa=(0,h.memo)(function(e){var n,t,r,o,i,a,l=e.paneId,s=(0,Q.Vv)().Content,c=(0,en.h7)(l),u=(0,oj.A)(c.isHidden),d=(0,oj.A)(c.data),f=(0,oj.A)(c.isActive),g=(0,oj.A)(c.isCommitted);(0,eu.a$)(l,d);var m=(n=eQ(),t=(0,en.v8)(),r=(0,en.TM)(),o=(0,en.Fr)(),i=(0,en.MC)(),(0,P.A)(function(){return function(e){switch(e.operation){case"commit":o(l);return;case"open":if(e.floating){t(e.pane,{commit:!0,location:"center"});return}n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:l}:{type:"after",paneId:l}});return;case"replace":r({paneId:l,pane:e.pane});return;case"remove":i(e.pane.id);return;case"openPip":return;default:(0,o6.A)(e)}}},[o,l,r,i,n,t])),v=(a=aY({container:(0,et.A)().container,service:"panetracker"}).channel,(0,h.useCallback)(function(e,n){a&&a.send({paneMetricsTracker:{pane:e,flow:n}})},[a]));return(0,p.Y)(s,{pane:d,options:{paneId:l,isHidden:u,performPaneOperation:m,isActive:f,isCommitted:g,emitPaneMetrics:v}})}),fl=(0,eA.x)({overlay:[eC.wp.coverContainer,eC.wp.position.fixed,eC.wp.backgroundColor.backgroundOverlay,eC.wp.zIndex(en.WO.floatingPane)]});function fs(){var e=(0,en.e4)();return(0,h.useEffect)(function(){var n=function(n){"Escape"===n.key&&e()};return document.addEventListener("keydown",n,!0),function(){document.removeEventListener("keydown",n,!0)}},[e]),(0,p.Y)(ez.S,{onClick:e,css:fl.overlay})}let fc=(0,h.memo)(function(e){var n,t,r,o,i=e.paneId,a=(0,en.T_)(),l=(t=(n=(0,d._)((0,pV.H)({accept:[tu.pt.File,fe.N.Pane,fe.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var t=n.getClientOffset();t&&o.drag({pageX:t.x,pageY:t.y,over:i})},drop:function(e,n){var t=n.getClientOffset();if(t){if(e.type===fe.N.Pane){o.drop({type:"pane",paneId:e.paneId,pageX:t.x,pageY:t.y,over:i});return}if("nodes"===e.type){var r=(0,Q.u9)(e.nodes);r.length>0&&o.drop({type:"newPaneGroup",panes:r,pageX:t.x,pageY:t.y,over:i})}if(e.type===fe.N.NewPane){var a=e.pane;o.drop({type:"newPaneGroup",panes:[a],pageX:t.x,pageY:t.y,over:i})}}}}),2))[0].isOver,r=n[1],o=(0,en.ui)({isOver:t}),r),s=(0,en.h7)(i),c=(0,oj.A)(s.isActive),u=(0,oj.A)(s.isFloating),f=(0,oj.A)(s.isModal),g=(0,oj.A)(s.paneType),m=(0,rX.A)(),v=(0,lZ.vm)(),w=(0,lZ.d0)(),y=(v||w)&&m?dY.uF:0,b=!u,S=(0,h.useRef)(null);(0,tO.d)(S,s.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,fr.width,t+"px"),(0,nt._)(n,fr.height,r+"px"),n}),(0,tO.d)(S,s.position,function(e){var n,t=e.x,r=e.y;return n={},(0,nt._)(n,fr.transformX,Math.round(t)+"px"),(0,nt._)(n,fr.transformY,Math.round(r)+"px"),n}),(0,tO.d)(S,s.scale,function(e){return(0,nt._)({},fr.scale,e.toString())}),(0,tO.d)(S,s.transformOriginXAtom,function(e){return(0,nt._)({},fr.transformOriginX,e)}),(0,tO.d)(S,s.viewportInset,function(e){var n,t=e.x,r=e.y;return n={},(0,nt._)(n,fr.fixedPositionOffsetX,-t+"px"),(0,nt._)(n,fr.fixedPositionOffsetY,-r-y+"px"),n}),(0,tO.d)(S,s.isHidden,function(e){var n;return n={},(0,nt._)(n,fr.opacity,e?"0":"1"),(0,nt._)(n,fr.pointerEvents,e?"none":"auto"),n}),(0,tO.d)(S,s.transition,function(e){var n,t,r;return r={},(0,nt._)(r,fr.transitionDuration,(null!==(n=null==e?void 0:e.duration)&&void 0!==n?n:0)+"ms"),(0,nt._)(r,fr.transitionDelay,(null!==(t=null==e?void 0:e.delay)&&void 0!==t?t:0)+"ms"),(0,nt._)(r,fr.transitionProperty,e?"transform, width, height, background-color, opacity":"none"),r}),(0,tO.d)(S,s.zIndex,function(e){return{"z-index":e.toString()}}),(0,tO.d)(S,s.disableInteractions,function(e){var n;return n={},(0,nt._)(n,fr.interactionBlanketDisplay,e?"block":"none"),(0,nt._)(n,fr.userSelect,e?"none":"auto"),(0,nt._)(n,fr.iframePointerEvents,e?"none":"auto"),n});var Y=c?void 0:function(){a(i,{commit:"codeEditor"!==g})},x=(0,ec.kg)(),_=(0,en.Bm)(),A=("centered"===_||"lobbyAppProposal"===_)&&"agentChat"===g,C=A?{borderTopLeftRadius:4,borderTopRightRadius:4}:{};"lobbyAppProposal"===_&&"agentProgress"===g&&(C.backgroundColor="transparent");var k=(0,lK.U)(),D=(0,h.useCallback)(function(e){(0,e9.P)(S,b?l:null)(e)},[S,b,l]);return(0,p.FD)(p.FK,{children:[f&&c?(0,p.Y)(fs,{}):null,(0,p.Y)(ec.ph,{value:i,children:(0,p.Y)(eD.ui,{role:"tabpanel",id:i,"aria-labelledby":"tab-".concat(i),innerRef:D,css:fi.root,style:C,elevated:!A&&!("lobbyAppProposal"===_&&"agentProgress"===g),children:(0,p.FD)(fn.A,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,P.A)(function(){return{paneType:g}},[g]),children:[(0,p.Y)(pQ,{paneId:i}),(0,p.FD)(ez.S,{css:fi.container,onMouseDown:Y,onContextMenu:Y,innerRef:function(e){return x(i,e)},style:"agentChat"===g?{overflowX:"hidden"}:void 0,children:[(0,p.Y)(ez.S,{tabIndex:-1}),(0,p.Y)(fa,{paneId:i})]}),u&&!f?(0,p.Y)(p7,{paneId:i}):null,A&&!k?(0,p.Y)(ez.S,{css:fi.border}):null,(0,p.Y)(ez.S,{css:fi.interactionBlanket})]},i)})})]})});var fu=t(57810);let fd=(0,h.memo)(function(){var e=(0,en.Is)(),n=(0,fu.A)();return e&&n?(0,p.Y)("div",{css:[eC.wp.position.absolute,eC.wp.width(e.width),eC.wp.height(e.height),eC.wp.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null});var fp=(0,rL.v)(["opacity","pointerEvents"]),ff=fp.styleTokens,fh=fp.cssVars,fg={opacity:ff.opacity,pointerEvents:ff.pointerEvents};function fm(e){(0,tO.d)(e,(0,en.SC)(),function(e){var n,t;switch(e){case"centered":case"lobbyAppProposal":return n={},(0,nt._)(n,fh.pointerEvents,"none"),(0,nt._)(n,fh.opacity,"0"),n;default:return t={},(0,nt._)(t,fh.pointerEvents,"auto"),(0,nt._)(t,fh.opacity,"1"),t}})}function fv(){var e=(0,et.A)().presence,n=(0,d._)((0,h.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,h.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function fw(){var e=(0,m._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return fw=function(){return e},e}var fy={},fb=(0,v.J1)(fw()),fS=t(58663);function fY(e){var n,t,r=(n={variables:{userIds:e.slice(0,fS.Ry)},skip:0===e.length},t=(0,g._)({},fy,n),w.I(fb,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var fx={root:(0,tG.AH)([eC.wp.rowWithGap(4),eC.wp.align.center]),text:(0,tG.AH)([eC.wp.flex.shrink(1),eC.wp.align.center]),username:(0,tG.AH)([eC.wp.flex.shrink(2),eC.wp.maxWidth(140),eC.wp.truncate])};function f_(){var e=fv();return 0===e.length?null:1===e.length?(0,p.Y)(fA,{user:e[0]}):(0,p.FD)(eW.EY,{variant:"small",color:"dimmest",css:fx.text,multiline:!1,children:[e.length," users are observing you"]})}function fA(e){var n=e.user,t=n.id,r=n.username,o=n.color,i=fY([t]),a={id:t,username:r,color:o,image:null==i?void 0:i.get(t)};return(0,p.FD)(ez.S,{css:fx.root,children:[(0,p.Y)(u5.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmer",css:fx.username,multiline:!1,children:r}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",css:fx.text,multiline:!1,children:"is observing you"})]})}var fC={root:(0,tG.AH)([eC.wp.rowWithGap(4),eC.wp.align.center]),text:(0,tG.AH)([eC.wp.flex.shrink(1),eC.wp.align.center]),username:(0,tG.AH)([eC.wp.flex.shrink(2),eC.wp.maxWidth(140),eC.wp.truncate])};function fk(e){var n=e.id,t=e.username,r=e.color,o=fY([n]),i=(0,et.A)().presence,a={id:n,username:t,color:r,image:null==o?void 0:o.get(n)};return(0,p.FD)(ez.S,{css:fC.root,children:[(0,p.Y)(u5.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,p.Y)(eW.EY,{css:fC.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,p.Y)(eW.EY,{css:fC.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,p.Y)(t7.K0,{alt:"Stop observing",size:18,onClick:function(){i.unfollowUser()},children:(0,p.Y)(oN.A,{})})]})}var fD=(0,eA.x)({root:[eC.wp.px(4),eC.wp.rowWithGap(8),eC.wp.height("100%"),eC.wp.border({color:tB.LU.outlineDimmest,direction:"bottom"}),eC.wp.highRes({borderBottomWidth:.5}),eC.wp.align.center]});function fR(e){var n,t,r,o=e.paneId,i=(0,en.KN)(o),a=(n=(0,fu.A)(),t=(0,en.sH)({paneId:o}),n&&t?n:null),l=(r=fv(),(0,en.sH)({paneId:o})&&r.length>0?r:null),s=(0,Q.xS)(i)?i.data.path:null,c=null;return(a&&(c=(0,p.Y)(fk,{id:a.id,username:a.username,color:a.color})),null!==c||l)?(0,p.FD)(ez.S,{css:fD.root,children:[l&&s?(0,p.Y)(f_,{}):null,c]}):null}var fE=(0,eA.x)({handle:[eC.wp.flex.growAndShrink(1),eC.wp.minWidth(16),eC.wp.height("100%"),eC.wp.border({direction:"bottom",color:tB.LU.outlineDimmest}),eC.wp.highRes({borderBottomWidth:.5})]});function fI(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=(0,en.$b)({paneGroupId:n}),o=r.isDragging,i=r.dnd,a=(0,en.IT)().toggleMaximizedPaneGroup,l=(0,en.uG)(n),s=(0,oj.A)(l.isMaximized),c=(0,en.T_)();return i?(0,p.Y)(ez.S,{onDoubleClick:function(){a({paneGroupId:n})},title:s?"Double click to restore.":"Double click to maximize. Drag to move.",css:fE.handle,style:{cursor:s?void 0:o?"grabbing":"grab"},onPointerDown:function(e){c(t),!s&&"button"in e&&0===e.button&&(0,tT.j)(e,{start:i.start,move:i.update,end:i.end})}}):null}function fU(){return(0,p.Y)(ez.S,{css:fE.handle})}var fF=(0,eA.x)({container:[eC.wp.width("100%"),eC.wp.height("100%")],iconAndTitle:[eC.wp.pl(6),eC.wp.rowWithGap(6),eC.wp.height("100%"),eC.wp.align.center,eC.wp.border({direction:"bottom",color:tB.LU.outlineDimmest}),eC.wp.highRes({borderBottomWidth:.5})],text:[eC.wp.fontSize(13)]});function fP(e){var n=e.headerId,t=e.paneId,r=e.disableDrag,o=(0,en.KN)(t),i=(0,Q.Vv)(),a=i.getTitle(o),l=i.Icon({pane:o,size:16});return(0,p.FD)(ez.S,{css:fF.container,row:!0,children:[(0,p.FD)(ez.S,{css:fF.iconAndTitle,children:[l,(0,p.Y)(eW.EY,{css:fF.text,children:a})]}),void 0!==r&&r?(0,p.Y)(fU,{}):(0,p.Y)(fI,{paneGroupId:n,activeTabPaneId:t})]})}var fT=t(92384),fO=t(26176),fL=t(76306),fN=t(39735),fM=t(12084),fG=t(89814),fB=t(94740),fH=(0,H.eU)(null),fW=function(){return(0,ax.h)(fH)},fz=function(){var e=(0,ax.ob)(fH),n=fW(),t=(0,h.useCallback)(function(n){return new Promise(function(t){e({paths:n,onCallback:function(n){t(n),e(null)}})})},[e]);return(0,h.useMemo)(function(){return{isShown:null!==n,show:t}},[n,t])},f$=(0,rL.v)(["fontStyle","iconOpacity","tabTitleContainerPaddingRight","closeButtonOpacity","unsavedChanges","closeIconDisplay"]),fj=f$.cssVars,fq=f$.styleTokens,fK=ez.D.div,fZ=(0,tG.AH)([eC.wp.display.inlineFlex,eC.wp.height("100%"),eC.wp.flex.row,eC.wp.align.center,eC.wp.position.relative,eC.wp.minWidth(tB.LU.space96),{userSelect:"none","& > span":[{"& > *":eC.wp.height("100%")},eC.wp.display.flex,eC.wp.flex.grow(1),eC.wp.flex.row,eC.wp.align.center,eC.wp.height("100%")]}]),fV=(0,tG.AH)([eC.wp.position.relative,eC.wp.cursor.pointer,eC.wp.align.center,eC.wp.rowWithGap(6),eC.wp.px(6),eC.wp.focusRing,eC.wp.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),fJ=(0,eA.x)({rootDragging:[eC.wp.width(0),eC.wp.visibility.hidden],root:[eC.wp.border({direction:"bottom",color:tB.LU.outlineDimmest}),(0,nt._)({":not(:last-of-type)":[eC.wp.border({direction:"right",color:tB.LU.outlineDimmest}),eC.wp.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},eC.wp.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},eC.wp.highRes({width:"calc(100% + 0.5px)"})]},eC.$_.canHover,[(r={},(0,nt._)(r,fj.closeButtonOpacity,0),(0,nt._)(r,"&:hover",(0,nt._)({},fj.closeButtonOpacity,1)),r)])],notificationDot:[eC.wp.top(3),eC.wp.right(0)],tabBaseDefault:[fZ,eC.wp.color.foregroundDimmer,{backgroundColor:"transparent"}],tabBaseActive:[fZ,eC.wp.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+tB.LU.surfaceBackground,"data-pane-tab-primary-button":[eC.wp.transition.none,eC.wp.hover({boxShadow:"0 1px 0 0 "+tB.LU.interactiveBackground})]}],tabTitleContainer:[eC.wp.align.baseline,eC.wp.position.relative,{paddingRight:fq.tabTitleContainerPaddingRight}],tabTitle:[eC.wp.truncate,eC.wp.maxWidth(180),eC.wp.display.inlineBlock,eC.wp.fontSize(13),{fontStyle:fq.fontStyle,"::after":{display:"block",content:"attr(title)",height:"0",fontStyle:"normal",color:"transparent",overflow:"hidden",visibility:"hidden"}}],uniquePath:[eC.wp.truncate,eC.wp.maxWidth(180),eC.wp.display.inlineBlock,eC.wp.fontSize(12),eC.wp.color.foregroundDimmest,{fontStyle:fq.fontStyle}],tabIcon:[eC.wp.width(16),eC.wp.height(16),eC.wp.position.relative,{opacity:fq.iconOpacity}],buttonDefault:[sL.b.listItem,fV],buttonActive:[fV],activeLine:[eC.wp.height(1),eC.wp.top(0),eC.wp.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:tB.LU.accentPrimaryDefault},eC.wp.highRes({left:-.5,width:"calc(100% + 1px)"})],closeWrapper:[eC.wp.height("100%"),{button:[eC.wp.width(20),eC.wp.height("100%"),eC.wp.borderRadius(0),eC.wp.color.foregroundDimmer,(a={},(0,nt._)(a,eC.$_.canHover,[(i={},(0,nt._)(i,fj.unsavedChanges,"block"),(0,nt._)(i,fj.closeIconDisplay,"none"),(0,nt._)(i,"&:hover",(o={},(0,nt._)(o,fj.unsavedChanges,"none"),(0,nt._)(o,fj.closeIconDisplay,"block"),o)),i)]),(0,nt._)(a,"paddingBottom",3),a)]}],unsavedChangesContainer:[{display:fq.unsavedChanges}],closeIconContainer:[{display:fq.closeIconDisplay}],displayNone:[eC.wp.display.none],displayBlock:[eC.wp.display.block],unsavedChangesIndicator:[eC.wp.width(8),eC.wp.height(8),eC.wp.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]}),fQ=(0,h.memo)(function(e){var n,t,r,o,i,a,l,s,c,u,f,g,m,v,w=e.paneId,y=e.paneGroupId,b=e.isActive,S=e.selectTab,Y=e.removePane,x=e.dragGroup,_=(0,et.A)().fs,A=fz().show,C=(0,en.h7)(w),k=(0,oj.A)(C.isCommitted),D=(0,en.Fr)(),R=(0,en.KN)(w),E=(0,Q.Vv)(),I=E.getTitle(R),U=E.Icon({pane:R,size:16}),F=(0,oj.A)(C.isActivePane),P=(0,t8.F9)({paneType:R.type}),T="codeEditor"===R.type,O=(0,fB.A)(_,T?R.data.path:null),L="agentChat"===R.type?(0,p.Y)(fM.A,{}):void 0,N=(0,eu.WM)((0,Q.xS)(R)?R.data.path:null),G=void 0;(0,Q.xS)(R)&&R.data.path&&(G=R.data.path);var B=(0,d3.j)(),H=(0,h.useRef)(null),W=(0,d._)((0,fL.i)({type:fe.N.Pane,item:function(){var e,n=(null===(e=H.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:fe.N.Pane,paneId:w,width:n}},collect:function(e){return{isDragging:e.isDragging()}}}),2),$=W[0].isDragging,j=W[1],q=(0,en.gf)();(0,h.useEffect)(function(){return q($)},[q,$]);var Z=(0,en.$b)({paneGroupId:y}).dnd,V=(0,h.useCallback)(function(e){if(1!==e.button){if(ee.current=b,Z&&x){(0,tT.j)(e,{start:Z.start,move:Z.update,end:Z.end});return}b||(a6.ZQ({category:"pane",message:"Tab clicked: "+R.type}),(0,z.u4)(z.AZ.WS_TAB_OPENED,{paneType:R.type}),S(w))}},[R.type,Z,x,b,w,S]);(0,h.useEffect)(function(){b&&H.current&&(0,fN.A)(H.current,{behavior:B?"auto":"smooth",scrollMode:"if-needed"},!0)},[b,B,H]);var J=(a=(n={paneId:w,paneGroupId:y}).paneId,l=n.paneGroupId,s=(0,ec.gB)(),c=(0,en.aJ)(),u=it({paneId:a}),f=oW({paneId:a,paneGroupId:l}),g=(t=(0,en.aJ)(),r=(0,en.p3)(),o=(0,en.PA)(),i=(0,en.p7)(),(0,h.useCallback)(function(){var e=t(a).pane,n=i(e);switch(n){case"notAllowed":return null;case"add":return{match:K.G2,data:{label:"Add to dock",type:"action",icon:(0,p.Y)(eg.A,{}),run:function(){r({pane:e})}}};case"remove":return{match:K.G2,data:{label:"Remove from dock",type:"action",icon:(0,p.Y)(o9.A,{}),run:function(){o(e.type)}}};default:(0,o6.A)(n)}},[a,i,t,r,o])),m=oz(),v=(0,Q.Vv)(),(0,h.useCallback)(function(){var e=c(a).pane,n=s(a),t=function(e){return!!e&&(void 0===e?"undefined":(0,nr._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,p.Y)(v.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!==(r=null==n?void 0:null===(e=n.commands)||void 0===e?void 0:e.flatMap(function(e){return e.commands}))&&void 0!==r?r:[]).filter(t)}},{data:{type:"group",key:"secondary"},commands:function(){return[g(),m(a),u].concat((0,M._)(f)).filter(t)}}]}}},[s,v,c,a,u,f,g,m])),X=(0,t1.EF)().onContextMenu,ee=(0,h.useRef)(!1),er=(0,h.useMemo)(function(){if(b&&!k)return function(){ee.current&&D(w)}},[D,b,k,w]),eo=function(e){void 0===e?a6.ZQ({category:"pane",message:"Tab closed: "+R.type}):a6.ZQ({category:"pane",message:"Tab closed: "+R.type,data:{reason:e}}),(0,z.u4)(z.AZ.WS_TAB_CLOSED,{paneType:R.type}),Y(w)},ei=function(e){"confirm"===e?eo("save changes"):"discard"===e&&eo("discard changes")};return(0,p.Y)(p.FK,{children:(0,p.Y)(fK,{ref:H,css:$?fJ.rootDragging:fJ.root,onMouseUp:function(e){if(1===e.button){var n;e.preventDefault(),e.stopPropagation(),T&&O&&(null===(n=R.data)||void 0===n?void 0:n.path)?A([R.data.path]).then(ei):eo("middle click")}},children:(0,p.Y)(f2,{innerRef:x?void 0:j,hasUnsavedChanges:O,uniquePath:N,title:I,icon:"commands"!==R.type?U:void 0,isActive:b,isActivePane:F,italicizeTitle:!k&&"commands"!==R.type,tooltip:G,paneId:w,indicatorColor:P,onClick:er,onContextMenu:function(e){return X(e,{command:J()})},onPointerDown:V,onClose:function(){T&&O?R.data.path&&A([R.data.path]).then(ei):eo()},detailsPill:L})})})}),fX=ez.D.button,f0=function(){return(0,p.Y)(ez.S,{css:fJ.unsavedChangesIndicator})};function f1(e){var n=e.onClick,t=e.tabIndex,r=e.hasUnsavedChanges,o=r?fJ.unsavedChangesContainer:fJ.displayNone,i=r?fJ.closeIconContainer:fJ.displayBlock;return(0,p.Y)(t7.K0,{onClick:n,alt:r?"Close tab (unsaved changes)":"Close tab",tabIndex:t,size:12,children:(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.S,{css:o,children:(0,p.Y)(f0,{})}),(0,p.Y)(ez.S,{css:i,children:(0,p.Y)(oN.A,{})})]})})}function f2(e){var n=e.title,t=e.uniquePath,r=e.hasUnsavedChanges,o=e.onClick,i=e.onContextMenu,a=e.onClose,l=e.isActive,s=e.isActivePane,c=e.italicizeTitle,u=e.innerRef,f=e.icon,g=e.onPointerDown,m=e.paneId,v=e.indicatorColor,w=e.tooltip,y=e.detailsPill,b=(0,t8.eg)(),S=(0,h.useRef)(null),Y=(0,d._)((0,fO.A9)(S,!1),4),x=Y[0],_=Y[1],A=Y[2],C=Y[3];return(0,fO.xK)(_,S),(0,p.FD)(eD.ui,{elevated:l,innerRef:u,css:l?fJ.tabBaseActive:fJ.tabBaseDefault,children:[(0,p.Y)(tH.m_,{isDisabled:!w,tooltip:w,maxWidth:600,delay:"long",closeDelay:"none",children:(0,p.FD)(fX,{role:"tab",ref:S,tabIndex:x,onKeyDown:A,onClick:function(e){C(),null==o||o(e)},onPointerDown:g,onContextMenu:i,css:l?fJ.buttonActive:fJ.buttonDefault,"aria-selected":l,"aria-controls":m,id:"tab-".concat(m),"data-pane-tab-primary-button":!0,children:[f?(0,p.Y)(ez.S,{style:(0,nt._)({},fj.iconOpacity,l?"1":"0.6"),css:fJ.tabIcon,children:f}):null,(0,p.FD)(ez.S,{style:(0,nt._)({},fj.tabTitleContainerPaddingRight,v?"12px":"0px"),css:fJ.tabTitleContainer,row:!0,gap:8,children:[(0,p.Y)(eW.EY,{multiline:!1,css:fJ.tabTitle,title:n,style:(0,nt._)({},fj.fontStyle,c?"italic":"inherit"),children:n}),t?(0,p.Y)(eW.EY,{multiline:!1,css:fJ.uniquePath,style:(0,nt._)({},fj.fontStyle,c?"italic":"inherit"),children:t}):null,v?(0,p.Y)(fG.b,{css:fJ.notificationDot,color:v}):null,y]})]})}),s?(0,p.Y)(ez.S,{css:fJ.activeLine,"data-active-pane-line":!0}):null,b?null:(0,p.Y)(ez.S,{style:{opacity:l?1:fq.closeButtonOpacity},css:fJ.closeWrapper,children:(0,p.Y)(f1,{hasUnsavedChanges:r,onClick:a,tabIndex:_?0:-1})})]})}var f5=(0,eA.x)({container:[eC.wp.height("100%"),eC.wp.width("100%")],newTabContainer:[eC.wp.height("100%"),eC.wp.pl(4),eC.wp.justify.center,eC.wp.align.center,eC.wp.border({direction:"bottom",color:tB.LU.outlineDimmest}),eC.wp.border({direction:"left",color:tB.LU.outlineDimmest}),{"& > button":[eC.wp.height(24),eC.wp.width(24)]},eC.wp.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],tabScrollAreaRoot:[eC.wp.flex.row,eC.wp.align.center,eC.wp.height("100%"),eC.wp.overflowX("hidden"),eC.wp.overflowY("hidden"),{"--scrollbar-size":"6px"}],tabScrollAreaViewport:[eC.wp.height("100%"),{"& > div":{height:"100%",width:"max-content",display:"block !important"}}],tabScrollAreaScrollbar:[eC.wp.display.flex,eC.wp.backgroundColor.backgroundOverlay,eC.wp.height("var(--scrollbar-size)"),eC.wp.flex.column,{touchAction:"none",transition:"background 160ms ease-out",userSelect:"none","&:hover":{backgroundColor:tB.LU.backgroundOverlay}}],tabScrollAreaThumb:[eC.wp.flex.grow(1),eC.wp.backgroundColor.outlineDimmest,eC.wp.borderRadius(4),eC.wp.position.relative,{"&::before":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:"44px",minHeight:"44px"}}],tabContainer:[eC.wp.height("100%")],tabPreviewWrap:[eC.wp.p(4)],tabPreview:[eC.wp.borderRadius(4),eC.wp.height("100%"),eC.wp.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(tB.LU.accentPrimaryDimmer)}]});function f4(e){var n,t,r,o,i,a,l=e.headerId,s=(0,en.LA)(),c=(0,en.wl)(),u=(0,en.wJ)(),f=(0,en.MC)(),g=(0,h.useRef)(null),m=(0,en.Hz)(l),v=(0,oj.A)(m.activeIndex),w=(0,oj.A)(m.activeTabPaneId),y=(0,oj.A)(m.panes),b=(0,h.useCallback)(function(e){if(g.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=g.current.scrollLeft,r=Math.max(0,Math.min(g.current.scrollWidth,t+n));g.current.scrollLeft=r}},[]),S=(0,d._)((0,pV.H)({accept:[tu.pt.File,fe.N.Pane,fe.N.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&C({item:e,panes:y,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==k?void 0:k.index)!==null?null==k?void 0:k.index:y.length;if("nodes"===e.type){var r=(0,Q.u9)(e.nodes);r.length>0&&c({activate:!0,commit:!0,paneGroupId:l,index:t,panes:r});return}if(e.type===fe.N.NewPane){c({activate:!0,paneGroupId:l,index:t,panes:[e.pane]});return}if("paneId"in e){var o=y.includes(e.paneId)?y.length-1:y.length;u({paneId:e.paneId,index:void 0!==t&&t<o?t:o,toPaneGroupId:l})}}}}),2),Y=S[0],x=S[1],_=(n=({isOver:Y.isOver}).isOver,r=(t=(0,d._)((0,h.useState)(null),2))[0],o=t[1],i=(0,h.useRef)(null),a=(0,h.useRef)([]),(0,h.useEffect)(function(){if(!n){a.current=[],o(null);return}i.current&&(a.current=(0,M._)(i.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[n]),{tabContainerRef:i,hover:(0,h.useCallback)(function(e){if(0!==a.current.length){var n=e.item.type===fe.N.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,i=(null==n?void 0:n.width)||80,l=a.current.map(function(e,n){return -1===r||r>n?e:e+i/2}).findIndex(function(n){return n>e.sourceClientOffset}),s=-1===r?e.panes.length:e.panes.length-1;o({index:-1===l?s:Math.min(l,s),paneId:t,width:i})}},[]),dropState:r}),A=_.tabContainerRef,C=_.hover,k=_.dropState,D=k?k.index:null;if((null==k?void 0:k.paneId)&&null!==D){var R=y.indexOf(k.paneId);R>-1&&R<D&&D++}var E=k&&null!==D?(0,M._)(y.slice(0,D)).concat([k],(0,M._)(y.slice(D))):y;return(0,p.FD)(ez.S,{css:f5.container,row:!0,align:"center",innerRef:x,role:"tablist",children:[(0,p.FD)(fO.Se,{children:[(0,p.FD)(fT.bL,{css:f5.tabScrollAreaRoot,onWheel:b,children:[(0,p.Y)(fT.LM,{css:f5.tabScrollAreaViewport,ref:g,children:(0,p.Y)(ez.S,{innerRef:A,css:f5.tabContainer,row:!0,children:E.map(function(e,n){return"string"!=typeof e?(0,p.Y)(ez.S,{css:f5.tabPreviewWrap,children:(0,p.Y)(ez.S,{style:{width:e.width},css:f5.tabPreview})},"preview"):(0,p.Y)(fQ,{dragGroup:1===y.length,paneId:e,paneGroupId:l,isActive:v===n,selectTab:s,removePane:f},e)})})}),(0,p.Y)(fT.Ze,{css:f5.tabScrollAreaScrollbar,orientation:"horizontal",children:(0,p.Y)(fT.zi,{css:f5.tabScrollAreaThumb})})]}),(0,p.Y)(ez.S,{css:f5.newTabContainer,children:(0,p.Y)(t7.K0,{alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){c({paneGroupId:l,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,p.Y)(eg.A,{})})})]}),(0,p.Y)(fI,{paneGroupId:l,activeTabPaneId:w})]})}var f3=t(93508),f8=(0,eA.x)({left:[eC.wp.flex.growAndShrink(1),eC.wp.align.center,eC.wp.height("100%"),{border:"none"}],right:[eC.wp.border({direction:"bottom",color:tB.LU.outlineDimmest}),eC.wp.highRes({borderBottomWidth:.5})],rightActionsContainer:[eC.wp.pr(4),eC.wp.height(31),eC.wp.highRes(eC.wp.highRes(eC.wp.height(31.5)))],moreActions:[eC.wp.color.foregroundDimmest]}),f7=(0,h.memo)(function(e){var n=e.headerId,t=(0,f3.eg)(),r=(0,en.uG)(n),o=(0,oj.A)(r.isMaximized),i=(0,en.IT)().restoreMaximizedPaneGroup,a=(0,oj.A)(r.isModal),l=(0,oj.A)(r.isFloating),s=(0,en.wI)(),c=(0,en.MC)(),u=(0,en.Hz)(n),d=(0,oj.A)(u.activeTabPaneId),f=(0,oj.A)(u.panes),h=f.length>1,g=(0,en.aJ)(),m=1===f.length&&"workspaceTourGuide"===g(f[0]).pane.type,v=(0,eu.AU)("workspaceTourGuide"),w=(0,oj.A)(r.isBeingDragged),y=(0,en._o)(),b=(0,eb.Jn)(ib.id),S=(0,p.Y)(t7.K0,{css:f8.moreActions,onClick:function(){return y(d)},alt:"Pane actions",tooltipBehavior:void 0===b?"hidden":void 0,tooltipPlacement:"left",tooltipContents:b?(0,p.Y)(eb._y,{fontSize:12,keyCombo:b}):null,children:(0,p.Y)(ra.A,{color:tB.LU.foregroundDimmest})}),Y=(0,p.Y)(t7.K0,{alt:"Close pane",onClick:function(){return f.forEach(c)},children:(0,p.Y)(oN.A,{color:tB.LU.foregroundDimmest})}),x=w?null:(0,p.FD)(ez.S,{css:f8.rightActionsContainer,row:!0,gap:4,align:"center",children:[l?(0,p.Y)(t7.K0,{alt:"Unfloat",onClick:function(){return s(d)},children:(0,p.Y)(o8.A,{color:tB.LU.foregroundDimmest})}):null,o?(0,p.Y)(t7.K0,{alt:"Restore pane",onClick:i,children:(0,p.Y)(o4,{color:tB.LU.foregroundDimmest})}):null,a?Y:S]});return(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.S,{css:f8.left,row:!0,children:a&&!h||m||t?(0,p.Y)(fP,{headerId:n,paneId:d,disableDrag:m||t}):(0,p.Y)(f4,{headerId:n})}),(0,p.Y)(fR,{paneId:d}),(0,p.Y)(ez.S,{css:f8.right,row:!0,children:t||m||v?null:x})]})}),f6=(0,rL.v)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration","transitionDelay","transitionProperty","transformX","transformY"]),f9=f6.cssVars,he=f6.styleTokens,hn=(0,tG.AH)([eC.wp.borderRadius(4,4,0,0),eC.wp.position.absolute,eC.wp.flex.row,eC.wp.align.center,fg],(0,nt._)({transformOrigin:"".concat(he.transformOriginX," bottom"),top:he.top,left:he.left,width:he.width,height:he.height,transform:"translate(".concat(he.transformX,", ").concat(he.transformY,") scale(").concat(he.scale,")"),transitionDuration:he.transitionDuration,transitionProperty:he.transitionProperty,transitionDelay:he.transitionDelay,transitionTimingFunction:"ease-out",backgroundColor:tQ.s,overflowX:"hidden"},eC.$_.prefersReducedMotion,{transitionProperty:"none"}));let ht=(0,h.memo)(function(e){var n=e.headerId,t=(0,en.Hz)(n),r=(0,oj.A)(t.activeTabPaneId),o=(0,en.uG)(n),i=(0,oj.A)(o.isFloating),a=(0,oj.A)(o.isModal),l=(0,h.useRef)(null);return(0,tO.d)(l,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,f9.width,t+"px"),(0,nt._)(n,f9.height,r+"px"),n}),(0,tO.d)(l,o.position,function(e){var n,t,r=e.x,o=e.y;return"transform"===e.positioning?(n={},(0,nt._)(n,f9.transformX,Math.round(r)+"px"),(0,nt._)(n,f9.transformY,Math.round(o)+"px"),(0,nt._)(n,f9.top,"0px"),(0,nt._)(n,f9.left,"0px"),n):(t={},(0,nt._)(t,f9.transformX,"0px"),(0,nt._)(t,f9.transformY,"0px"),(0,nt._)(t,f9.top,Math.round(o)+"px"),(0,nt._)(t,f9.left,Math.round(r)+"px"),t)}),(0,tO.d)(l,o.scale,function(e){return(0,nt._)({},f9.scale,e.toString())}),(0,tO.d)(l,o.transformOriginX,function(e){return(0,nt._)({},f9.transformOriginX,e)}),(0,tO.d)(l,o.transition,function(e){var n,t,r;return r={},(0,nt._)(r,f9.transitionDuration,(null!==(n=null==e?void 0:e.duration)&&void 0!==n?n:0)+"ms"),(0,nt._)(r,f9.transitionDelay,(null!==(t=null==e?void 0:e.delay)&&void 0!==t?t:0)+"ms"),(0,nt._)(r,f9.transitionProperty,e?"top, left, width, height, transform, opacity":"none"),r}),(0,tO.d)(l,o.zIndex,function(e){return{"z-index":e.toString()}}),fm(l),(0,p.FD)(eD.ui,{innerRef:l,css:hn,children:[(0,p.Y)(f7,{headerId:n}),i&&!a?(0,p.Y)(p9,{paneId:r}):null]})});var hr=t(66061),ho=t(43282),hi=t(8143),ha=t(79261);function hl(){var e=(0,en.Us)(),n=(0,en.LA)(),t=(0,en.t3)();return(0,h.useCallback)(function(r){var o=t().find(function(e){var n,t=(0,d._)(e,2),o=(t[0],t[1]);return"agentProgress"===o.type&&(null===(n=o.data)||void 0===n?void 0:n.sessionId)===r});if(o){var i=o[0];return n(i),i}return e({pane:{type:"agentProgress",data:{sessionId:r}},commit:!0,activate:!1})},[t,e,n])}function hs(){var e=(0,en.Us)(),n=(0,en.t3)(),t=(0,en.TM)();return(0,h.useCallback)(function(){var r=n().find(function(e){var n=(0,d._)(e,2);return"agentProgress"===(n[0],n[1]).type});if(r)return t({paneId:r[0],pane:{type:"agentProgress",data:r[1].data},makeActive:!1,commit:!0,reveal:!0});e({pane:{type:"agentProgress"},activate:!1,commit:!0,reveal:!0})},[n,t,e])}function hc(){var e=(0,en.Us)(),n=hs();return(0,h.useCallback)(function(t){"website"===t.resultType&&n(),"shell_command"===t.resultType&&e({pane:{type:"runnerOutput"},activate:!1,commit:!0,reveal:!0}),"vnc_window"===t.resultType&&e({pane:{type:"vnc"},activate:!1,commit:!0,reveal:!0})},[e,n])}var hu=t(6328),hd=t(67363),hp=t(63826),hf=t(62782),hh=t(89851),hg=t(29382),hm=t(86964),hv=t(4363),hw=t(61302),hy=t(20373);function hb(e){var n,t,r,o,i,a,l,s,c,u,f,g=e.loading,m=e.sessionId,v=e.sendMessage,w=e.inputRef,y=e.onNewSession,b=e.openPane,S=e.highlightInput,Y=(0,et.A)().secrets,x=(0,h.useRef)(!0),_=(0,hy.A)(),A=(r=(0,E.WS)(),o=(0,ec.Hw)(),i=hc(),a=(0,ha.Ay)(),l=hl(),(0,h.useCallback)(function(e){var n,t,s=r(e);if(s){a({action:"event_item_selected",eventId:e,sessionId:s.sessionId});var c=s.contents.contents;if((null==c?void 0:c.$kind)==="agentTimelineEventContents"){if((null===(n=c.agentTimelineEventContents.toolData)||void 0===n?void 0:n.$kind)==="presentResultsToolData"){i(c.agentTimelineEventContents.toolData.presentResultsToolData);return}var u=(0,hi.flushSync)(function(){return l(s.sessionId)}),p=null===(t=o(function(e){return(0,d._)(e,1)[0]===u}))||void 0===t?void 0:t.bindings;(null==p?void 0:p.type)==="agentProgress"&&p.scrollToEventId(e)}}},[r,i,o,a,l])),C=(s=(0,E.WS)(),c=(0,ec.Hw)(),u=hc(),f=hl(),(0,h.useCallback)(function(e){var n,t,r=s(e);if(r){(0,ha.pI)({action:"event_item_selected",eventId:e,sessionId:r.sessionId});var o=r.contents.contents;if((null==o?void 0:o.$kind)==="agentTimelineEventContents"){if((null===(n=o.agentTimelineEventContents.toolData)||void 0===n?void 0:n.$kind)==="presentResultsToolData"){u(o.agentTimelineEventContents.toolData.presentResultsToolData);return}var i=(0,hi.flushSync)(function(){return f(r.sessionId)}),a=null===(t=c(function(e){return(0,d._)(e,1)[0]===i}))||void 0===t?void 0:t.bindings;(null==a?void 0:a.type)==="agentProgress"&&a.showEventOverlay(e)}}},[s,u,c,f])),k=(n=hc(),t=hs(),function(e){switch(e.$kind){case"presentResultsToolData":n(e.data);break;case"presentDeployData":t()}});(0,hp.E)(k);var D=(0,E.q4)(),R=(0,E.PP)(m),I=(0,hw.F)(),U=(0,hv.i)().agentCheckpoints,F=I?hh.G.Starter:hh.G.Paid,P=!!(I&&!(null==U?void 0:U.isUnderQuota)),T=!0===(0,hr.J2)((0,hf.e)())&&!!m&&!D&&!R&&!P,O=(0,E.dp)(),L=(0,h.useRef)(null),N=(0,hr.HJ)(0),M=(0,h.useCallback)(function(e){N.set(e)},[N]),G=(0,h.useCallback)(function(e){(0,e9.P)(w,L)(e)},[w]);return(0,p.FD)(p.FK,{children:[m?(0,p.Y)(hd.T,{sendMessage:v,addSecretEntries:Y.addEntries,removeSecretEntries:Y.removeEntries,replaceAllExternalSecrets:Y.replaceAllExternalSecrets,onEventClick:_?C:A,sessionId:m,shouldAutoscrollRef:x,waitingOnUserInput:T,onNewSession:y,openPane:b,showThoughtButton:!1,highlightInput:S,checkpointUsageIndicatorVariant:F,disableSendingMessages:P,statusBarHeight:N}):(0,p.Y)(hm.T,{sessionType:q.dF3.AGENT_SESSION,onPromptSuggestionClick:w?function(e){var n,t,r;null===(t=L.current)||void 0===t||null===(n=t.setValue)||void 0===n||n.call(t,e.text),null===(r=L.current)||void 0===r||r.focus()}:void 0}),(0,p.Y)(hu.F,{openPane:b,loading:g,sendMessage:v,inputRef:G,sessionId:m,onNewSession:y,shouldAutoscrollRef:x,waitingOnUserInput:T,feedbackButton:m?(0,p.Y)(hg.M,{sessionId:m,sendAgentFeedback:O}):null,onStatusBarHeightChange:M})]})}var hS=t(47378),hY=t(19404),hx=t(82270),h_=t(62044),hA=t(39667),hC=t(20662);function hk(e){var n,t=(0,lu.ET)(),r=t.orgId,o=t.orgSlug,i=(0,h_.e)(null!==(n=e.sessionId)&&void 0!==n?n:null),a=(0,C._P)({controlName:"flag-no-header-usage"}),l=r&&o?"".concat((0,sJ.EG)({slug:o}).usage.href,"#agent"):"/usage#agent";return(0,p.Y)(hA.A,{alt:i&&a?"Your usage for this chat: $".concat((i/100).toFixed(2)):"Usage Page",href:l,target:"_blank",onClick:function(){(0,z.u4)(z.AZ.AGENT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,p.Y)(hC.A,{})})}var hD=t(75897),hR=t(51326),hE=(0,eA.x)({root:[eC.wp.px(4),eC.wp.justify.spaceBetween,eC.wp.align.center,{height:28,zIndex:1,containerType:"size"}],left:[eC.wp.width(147),{"@container (max-width: 300px)":[eC.wp.width(64)]}],right:[eC.wp.width(147),{"@container (max-width: 300px)":[eC.wp.width(64)]}],center:[eC.wp.flex.growAndShrink(1),eC.wp.align.center],newChatButton:[{"@container (max-width: 300px)":{"& > button > div > span":eC.wp.display.none}}]});function hI(e){var n=e.sessionId,t=e.toggleSidebar,r=e.disableNewSessionButton,o=e.onNewSession,i=e.onCommitEventClick,a=(0,en.Bm)(),l=(0,f3.eg)(),s=(0,en.HU)(),c=(0,C._P)({controlName:"flag-no-header-usage"}),u=(0,hw.F)(),d=(0,hr.HJ)(!1),f="centered"===a?(0,p.Y)(ez.S,{css:hE.left,align:"center",row:!0,children:(0,p.Y)(t7.K0,{alt:"Enter workspace",onClick:function(){return s("tilingLayout")},children:(0,p.Y)(hR.A,{rotate:-90})})}):(0,p.FD)(ez.S,{css:hE.left,align:"center",row:!0,gap:4,children:[(0,p.Y)(t7.K0,{alt:"Chats",onClick:function(){return t()},children:(0,p.Y)(hD.A,{})}),(0,p.Y)(tH.m_,{isDisabled:!r,tooltip:"Cannot create a new chat while one is in progress",children:(0,p.Y)(ez.S,{css:hE.newChatButton,children:(0,p.Y)(eH.$n,{disabled:r,size:"small",iconLeft:(0,p.Y)(eg.A,{}),text:"New chat",variant:"nofill",onClick:function(){return o()}})})})]}),h=(0,p.FD)(ez.S,{css:hE.right,align:"center",row:!0,justify:"end",gap:4,children:["centered"===a?u?(0,p.Y)(hx.L,{}):n&&!c?(0,p.Y)(hY.F,{sessionId:n}):null:null,"tilingLayout"===a?u?(0,p.Y)(hx.L,{}):n&&!c?(0,p.Y)(hY.F,{sessionId:n}):(0,p.Y)(hk,{sessionId:n}):null]});return(0,p.FD)(ez.S,{row:!0,gap:4,css:hE.root,children:[l&&"tilingLayout"===a?(0,p.Y)(ez.S,{css:hE.left}):f,(0,p.Y)(ez.S,{css:hE.center,children:n?(0,p.Y)(hS.o,{sessionId:n,onCommitEventClick:i,showCheckpointsDropdown:!l,checkpointsOpenObs:d}):null}),l&&"tilingLayout"===a?(0,p.Y)(ez.S,{css:hE.right}):h]})}function hU(){var e=(0,en.q5)(),n=(0,en.Us)();return(0,h.useCallback)(function(t){return(0,Q.xS)(t)&&t.data.path?e((0,e8._)((0,g._)({},t.data),{path:t.data.path})):n({pane:t})},[n,e])}var hF=t(41848),hP=t(52512);function hT(){var e=(0,hP.C)().agentState;return(0,h.useMemo)(function(){return e?e.select(function(e){switch(null==e?void 0:e.state){case q.g32.AGENT_STATE_RUNNING:case q.g32.AGENT_STATE_PAUSING:return!0;default:return!1}}):null},[e])}function hO(e){var n=(0,h.useRef)(!1);(0,E.zv)("received-completed-event",function(t){if(!n.current){var r,o=t.event.contents.contents;(0,q.VFn)(o,"agentPlanEventContents")&&(null===(r=o.agentPlanEventContents.Approver)||void 0===r?void 0:r.approver.id)&&(n.current=!0,e())}})}var hL=t(85895),hN=t(59082),hM=t(18144),hG=(0,eA.x)({root:[eC.wp.flex.growAndShrink(1)],main:[eC.wp.position.relative,eC.wp.flex.growAndShrink(1)],sidebarBlanket:[eC.wp.coverContainer,{zIndex:3,backgroundColor:tB.LU.backgroundOverlay,pointerEvents:ho.Sl.sidebarBlanketPointerEvents,opacity:ho.Sl.sidebarBlanketOpacity}],sidebar:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),eC.wp.p(8),eC.wp.colWithGap(8),eC.wp.borderRadius(),{pointerEvents:ho.Sl.sidebarPointerEvents,width:ho.Sl.sidebarWidth,height:ho.Sl.sidebarHeight,opacity:ho.Sl.sidebarOpacity,transform:ho.Sl.sidebarTransform,border:"1px solid "+tB.LU.outlineDimmest,zIndex:3}],content:[{paddingLeft:ho.Sl.paddingLeft,paddingBottom:tB.LU.space8},eC.wp.flex.growAndShrink(1)]});function hB(e){return e?{id:e.id,sessionType:e.sessionType,title:e.title}:null}function hH(e){var n,t,r=hl(),o=(0,E.Au)({initialSessionId:e.initialSessionId,onSession:function(e){e&&(r(e),(0,ha.pI)({action:"created_new_session",sessionId:e}))}}),i=o.sessionId,a=o.setSessionId,l=o.sendMessage,s=o.loading,c=(0,E.J_)();!function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skip,r=(0,eq.A)(n);(0,h.useEffect)(function(){if(!t&&e){e.current&&r.current(e.current);var n=e.subscribe(function(e){r.current(e)});return function(){n()}}},[t,r,e])}((0,E.ac)(),function(e){!i&&e&&a(e)},{skip:!!e.initialSessionId});var u=(0,en.Bm)(),f=(0,en.HU)();hO(function(){return f("tilingLayout")});var g=(0,lK.U)(),m=(0,E.rE)({includeFirstSessionEvents:!1,sessionTypes:g?[q.dF3.REPL_CREATION_V3].concat((0,M._)(E.Ly)):E.Ly}).loading,v=(0,E.C6)(i,hB),w=(0,h.useRef)(null),y=(0,ho.r8)(),b=y.state,S=y.setSidebarContainerEl,Y=y.toggleSidebar,x=y.closeIfNeeded;(0,tO.d)(w,b,ho.aT);var _=(0,d._)((0,h.useState)(!1),2),A=_[0],k=_[1];(0,h.useEffect)(function(){m||c||k(!0)},[m,c,k]);var D=(0,E.OI)(),R=(0,C._P)({controlName:"flag-retry-budget-exceeded-ai-client"}),I=(0,d._)((0,h.useState)(null),2),U=I[0],F=I[1],P=e.inputRef;(0,h.useEffect)(function(){P(U)},[U,P]),(0,h.useEffect)(function(){U&&"centered"===u&&U.focus()},[U,u]);var T=(0,h.useCallback)(function(){setTimeout(function(){null==U||U.animatePlaceholder()})},[U]),O=(0,h.useCallback)(function(){k(!0),a(null),T(),Y(!1),(0,ha.pI)({action:"new_session"})},[T,Y,a]),L=(0,h.useCallback)(function(e){a(e),k(!1),T(),x()},[T,x,a]),N=(0,hF.w)(w),G=(0,hr.J2)(hT()),B=hU();return(0,p.FD)(p.FK,{children:[(0,p.FD)(ez.S,{css:hG.root,innerRef:w,children:[m?null:(0,p.Y)(hI,{toggleSidebar:Y,sessionId:i,disableNewSessionButton:!!G,onNewSession:O,onCommitEventClick:N}),(0,p.FD)(ez.S,{css:hG.main,innerRef:S,children:[(0,p.Y)(ez.S,{css:hG.sidebarBlanket,onClick:function(){return Y(!1)}}),(0,p.Y)(eD.ui,{css:hG.sidebar,children:(0,p.Y)(hL.AN,{sessionId:i,onNewSession:O,onSessionClick:L})}),(0,p.FD)(ez.S,{css:hG.content,children:[m?(0,p.Y)(hN.G,{}):null,A||v?(0,p.Y)(hb,{loading:s,sessionId:null!==(n=null==v?void 0:v.id)&&void 0!==n?n:null,sendMessage:l,inputRef:F,onNewSession:O,openPane:null!==(t=e.openPane)&&void 0!==t?t:B,highlightInput:T}):null]})]})]}),R?(0,p.Y)(hM.A,{isOpen:D,text:"We've encountered an issue and can't reconnect to the AI service. Please refresh the page to continue."}):null]})}var hW=t(88340),hz=t(75617),h$=t(77532),hj=t.n(h$);function hq(e){var n=e.onAppProposal,t=(0,E.NC)(),r=(0,hr.J2)(t.sessions.lobby);return r?(0,p.Y)(hz.h,{onAppProposal:n,session:r}):(0,p.Y)(ez.S,{align:"center",justify:"center",clsx:hj().loading,children:(0,p.Y)(sp.A,{})})}var hK=t(80001),hZ=t(99662),hV=t(78718);function hJ(e){var n,t,r=(0,E.NC)(),o=e.sessionId?r.sessions.get(e.sessionId):r.sessions.agent,i=e.onSessionChange;(0,hr.q3)(o,{next:function(n){n&&e.onSessionChange(n.id)}});var a=(0,hr.J2)(o),l=(0,en.Bm)(),s=(0,en.HU)();hO(function(){return s("tilingLayout")});var c=(0,h.useRef)(null),u=(0,ho.r8)(),f=u.state,g=u.setSidebarContainerEl,m=u.toggleSidebar,v=u.closeIfNeeded;(0,tO.d)(c,f,ho.aT);var w=(0,d._)((0,h.useState)(!1),2),y=w[0],b=w[1],S=(0,E.OI)(),Y=(0,C._P)({controlName:"flag-retry-budget-exceeded-ai-client"}),x=(0,d._)((0,h.useState)(null),2),_=x[0],A=x[1],k=e.inputRef;(0,h.useEffect)(function(){k(_)},[_,k]),(0,h.useEffect)(function(){_&&"centered"===l&&_.focus()},[_,l]);var D=(0,h.useCallback)(function(){setTimeout(function(){null==_||_.animatePlaceholder()})},[_]),R=(0,h.useCallback)(function(){b(!0),D(),m(!1),(0,ha.pI)({action:"new_session"})},[D,m]),I=(0,h.useCallback)(function(e){i(e),b(!1),D(),v()},[D,v,i]),U=(0,hF.w)(c),F=(0,hr.J2)(hT()),P=hU(),T=(0,et.A)(),O=T.secrets,L=T.fs;return(0,p.FD)(p.FK,{children:[(0,p.FD)(ez.S,{css:hG.root,innerRef:c,children:[(0,p.Y)(hI,{toggleSidebar:m,sessionId:null!==(n=null==a?void 0:a.id)&&void 0!==n?n:null,disableNewSessionButton:!!F,onNewSession:R,onCommitEventClick:U}),(0,p.FD)(ez.S,{css:hG.main,innerRef:g,children:[(0,p.Y)(ez.S,{css:hG.sidebarBlanket,onClick:function(){return m(!1)}}),(0,p.Y)(eD.ui,{css:hG.sidebar,children:(0,p.Y)(hL.AN,{sessionId:null!==(t=null==a?void 0:a.id)&&void 0!==t?t:null,onNewSession:R,onSessionClick:I})}),(0,p.FD)(ez.S,{css:hG.content,children:[void 0===a?(0,p.Y)(hN.G,{}):null,y||a?(0,p.Y)(hV.K,{onNewSession:R,onSessionCreated:function(e){return I(e.id)},openPane:P,readFile:L.readFile,session:y?null:null!=a?a:null,secrets:O,inputRef:A,onPromptSuggestionClick:function(e){var n;null==_||null===(n=_.setValue)||void 0===n||n.call(_,e.text),null==_||_.focus()}}):null]})]})]}),Y?(0,p.Y)(hM.A,{isOpen:S,text:"We've encountered an issue and can't reconnect to the AI service. Please refresh the page to continue."}):null]})}var hQ={Content:function(e){var n,t,r=(0,d._)((0,h.useState)(null),2),o=r[0],i=r[1];(0,ec.HP)(function(){return o},[o]);var a=e.options.performPaneOperation,l=(0,h.useCallback)(function(e){return a({operation:"open",pane:e,secondary:"ghostwriterChat"!==e.type})},[a]),s=(0,h.useCallback)(function(e){return a({operation:"replace",pane:{type:"agentChat",data:{sessionId:e}}})},[a]),c=(0,hW.M)(),u=(0,en.Bm)(),f=(0,lK.U)(),g=(0,en.HU)();return f&&("centered"===u||"lobbyAppProposal"===u)?(0,p.Y)(hq,{onAppProposal:function(){g("lobbyAppProposal")}}):c?(0,p.Y)(hJ,{sessionId:null===(t=e.pane.data)||void 0===t?void 0:t.sessionId,inputRef:i,openPane:l,onSessionChange:s}):(0,p.Y)(hH,{initialSessionId:null===(n=e.pane.data)||void 0===n?void 0:n.sessionId,inputRef:i,openPane:l})},Icon:function(e){var n=e.size;return(0,p.Y)(hK.l,{size:n})},getTitle:function(){return"Agent"},description:E.RB,category:Q.bY.WorkspaceFeatures,decode:function(e){return n9.WT.Decode(hZ.V,e)}},hX=t(94e3),h0=t(68958),h1=t(23033),h2=t(29835),h5=t(2484),h4=t(57829),h3=t(47442),h8=(0,eA.x)({spacer:[eC.wp.height(h3._b-2*h3.mt)],wrapper:[eC.wp.coverContainer,eC.wp.zIndex(1),eC.wp.p(h3.mt),{transform:"",transition:["opacity ".concat(h3.sj,"ms linear"),"transform ".concat(h3.EI,"ms ease"),"padding ".concat(h3.EI,"ms ease")].join(", ")}],drawer:[eC.wp.height("100%"),eC.wp.width("100%"),eC.wp.borderRadius(8),eC.wp.shadow(1),eC.wp.border({color:tB.LU.outlineDimmest,width:1})],contents:[eC.wp.height("auto"),eC.wp.flex.grow(1),eC.wp.overflow("hidden"),eC.wp.borderRadius(0,0,8,8),eC.wp.backgroundColor.backgroundHigher,{transition:"opacity ".concat(h3.EI,"ms linear")}]});function h7(e){var n=e.state,t=e.lowPadding,r=e.highlighted,o=e.onPeekHeightChanged,i=e.handle,a=e.children,l=(0,d._)((0,h.useState)(!1),2),s=l[0],c=l[1],u=(0,h.useRef)(o);u.current=o;var f="peeked"===n||"open"===n?h3.OS-h3.mt:h3._b-h3.mt,g="open"===n?"":"translateY(calc(100% - ".concat(f,"px))"),m=r?"2px solid ".concat(tB.LU.blurpleDimmer):"2px solid ".concat(tB.LU.backgroundHigher);return(0,h.useEffect)(function(){var e;null==u||null===(e=u.current)||void 0===e||e.call(u,f-h3._b+h3.mt)},[f]),(0,h.useEffect)(function(){var e=null;return"peeked"===n||"open"===n?c(!0):c(function(n){return n&&(e=setTimeout(function(){c(!1)},h3.EI)),n}),function(){e&&clearTimeout(e)}},[n]),(0,p.FD)(p.FK,{children:["hidden"===n?null:(0,p.Y)(ez.S,{css:h8.spacer}),(0,p.Y)(ez.S,{css:h8.wrapper,style:{transform:g,opacity:"hidden"===n?0:1,padding:t&&"open"===n?tB.LU.space2:void 0,pointerEvents:"hidden"===n?"none":"auto",backgroundColor:"open"===n?tB.LU.backgroundDefault:void 0},children:(0,p.FD)(ez.S,{css:h8.drawer,children:[i,s&&"disabled"!==n?(0,p.Y)(ez.S,{css:h8.contents,style:{borderLeft:m,borderRight:m,borderBottom:m,opacity:"closed"===n?0:1},children:a}):null]})})]})}var h6=(0,eA.x)({container:[eC.wp.position.relative,eC.wp.flex.row,eC.wp.align.center,eC.wp.justify.end],handle:[sL.b.filled,eC.wp.flex.row,eC.wp.align.center,eC.wp.flex.grow(1),eC.wp.px(8),eC.wp.py(6)],handleNonInteractive:[eC.wp.backgroundColor.backgroundHigher,eC.wp.flex.row,eC.wp.align.center,eC.wp.flex.grow(1),eC.wp.px(8),eC.wp.py(6)],pill:[eC.wp.position.absolute,eC.wp.top("50%"),eC.wp.left("50%"),{transform:"translate(-50%, -50%)"},eC.wp.height(4),eC.wp.width(48),eC.wp.backgroundColor.foregroundDimmer,eC.wp.borderRadius(2),{transition:"opacity 250ms linear"}],controls:[eC.wp.position.absolute,eC.wp.px(8)]});function h9(e){var n,t,r=e.state,o=e.highlighted,i=e.onClick,a=e.status,l=e.controls,s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,pL.A)(function(e){u(e.width<h3.hg)},{type:"throttle",wait:250});return(0,p.FD)(ez.S,{css:h6.container,children:[(0,p.FD)(ez.S,{innerRef:f,css:i?h6.handle:h6.handleNonInteractive,style:(n={borderRadius:"peeked"===r||"open"===r?"8px 8px 0 0":"8px"},(0,nt._)(n,tB.qo.interactiveBackground,o?tB.LU.blurpleDimmer:tB.LU.backgroundHigher),(0,nt._)(n,tB.qo.interactiveBackgroundActive,o?tB.LU.blurpleDefault:tB.LU.backgroundHighest),n),tabIndex:0,role:"button","aria-disabled":"disabled"===r||void 0,onClick:i,children:[(0,p.Y)(ez.S,{row:!0,gap:8,align:"center",children:a}),c||!i?null:(0,p.Y)(ge,{state:r})]}),(0,p.FD)(ez.S,{css:h6.controls,row:!0,gap:8,style:(t={},(0,nt._)(t,tB.qo.interactiveBackground,o?tB.LU.blurpleDefault:tB.LU.backgroundHighest),(0,nt._)(t,tB.qo.interactiveBackgroundActive,o?tB.LU.blurpleStronger:tB.LU.backgroundOverlay),t),children:[l,c&&i?(0,p.Y)(t7.K0,{alt:"open"===r?"Hide Output":"Show Output",disabled:"disabled"===r,onClick:i,children:"open"===r?(0,p.Y)(aa.A,{}):(0,p.Y)(al.A,{})}):null]})]})}function ge(e){var n=e.state;return(0,p.Y)(ez.S,{css:h6.pill,style:{opacity:"disabled"===n?0:1}})}var gn=t(47650),gt=t(21691),gr=t(12923);function go(e){var n,t,r=e.clientConnected,o=e.hasInflightRevert,i=e.isAgentControllingRunWorkflow,a=e.isWaitingForVisualFeedback,l=e.isWaitingOnUserInput,s=e.readyToDeploy,c=e.runState,u=e.startedWork,d=e.transitionReason,f=e.workflowState,g=(0,h.useRef)(null),m=(0,h.useRef)(null);if(r){if(o)n=(0,p.Y)(sp.A,{}),t="The agent is reverting.";else if(i)e:switch(c){case q.g32.AGENT_STATE_NOT_STARTED:n=(0,p.Y)(gn.A,{}),t="The agent has not started.";break;case q.g32.AGENT_STATE_PAUSING:n=(0,p.Y)(sp.A,{}),t="The agent is pausing.";break;case q.g32.AGENT_STATE_PAUSED:switch(null==d?void 0:d.$kind){case"error":n=(0,p.Y)(gt.A,{}),t="The agent encountered an error.";break e;case"planConcluded":n=(0,p.Y)(s3.A,{}),t="The agent has finished.";break e;case"requestedSecrets":n=(0,p.Y)(gr.A,{}),t="The agent needs your input.";break e;case"reverted":n=(0,p.Y)(gr.A,{}),t="The agent has reverted.";break e;case"waitingOnPlanApproval":n=(0,p.Y)(gr.A,{}),t="The agent is waiting for approval.";break e;case"waitingOnUserResponse":if(!l){n=(0,p.Y)(sp.A,{}),t="The agent is resuming.";break e}n=(0,p.Y)(gr.A,{}),t="The agent needs your feedback.";break e;default:n=(0,p.Y)(gr.A,{}),t="The agent was paused.";break e}case q.g32.AGENT_STATE_RUNNING:if(s){n=(0,p.Y)(sp.A,{}),t="The agent is wrapping up.";break}if(a){n=(0,p.Y)(sp.A,{}),t="There are changes you can review.";break}if(!u){n=(0,p.Y)(sp.A,{}),t="The agent is thinking.";break}n=(0,p.Y)(sp.A,{}),t="The agent is working.";break;default:if(g.current&&m.current){n=g.current,t=m.current;break}n=(0,p.Y)(sp.A,{}),t="The agent will start working soon."}else switch(f){case void 0:case h3.Io.NOT_RUNNING:case h3.Io.FAILED:n=(0,p.Y)(gn.A,{}),t="Your app is not running.";break;case h3.Io.CRASHED:n=(0,p.Y)(gn.A,{}),t="Your app crashed.";break;case h3.Io.STARTING:case h3.Io.RUNNING:n=(0,p.Y)(ov.A,{}),t="Preview your app here."}}else i?(n=(0,p.Y)(gt.A,{}),t="The agent lost connection."):(n=(0,p.Y)(gt.A,{}),t="Lost connection.");return g.current=n,m.current=t,(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[n,(0,p.Y)(eW.EY,{color:"dimmer",children:t})]})}var gi=t(14636),ga=t(9809),gl=t(97802),gs=t(64804),gc=(0,eA.x)({workflowFailed:[eC.wp.position.relative,eC.wp.height("100%"),eC.wp.width("100%"),eC.wp.p(16)],workflowIconWrapper:[eC.wp.position.absolute,eC.wp.coverContainer,eC.wp.center]});function gu(e){var n=e.isAgentControllingRunWorkflow,t=e.runState,r=e.openPane,o=e.text;return(0,p.Y)(ez.S,{css:gc.workflowFailed,align:"center",children:(0,p.FD)(ez.S,{css:gc.workflowIconWrapper,gap:16,children:[(0,p.Y)(gs.A,{art:"Cloud"}),(0,p.FD)(ez.S,{gap:8,align:"center",children:[(0,p.Y)(eW.EY,{children:o}),n?t===q.g32.AGENT_STATE_RUNNING?(0,p.FD)(eW.EY,{children:[E.g$," is runningâ€¦"]}):(0,p.Y)(gd,{}):(0,p.Y)(gp,{openPane:r})]})]})})}function gd(){var e=(0,dj.Q)(),n=(0,E.Au)({initialSessionId:e}).sendMessage;return(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(l0.A,{}),text:"Ask ".concat(E.g$," to debug"),onClick:(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,n({kind:"message",message:"The app failed to run, please debug and fix it.",model:q.e3q.ADVANCED,intent:q.qRv.AGENT})];case 1:return e.sent(),[2]}})})})}function gp(e){var n=e.openPane,t=(0,E.dm)(),r=t.assistantMode,o=t.getAssistantMessageModel,i=t.getAssistantMessageIntent,a=(0,ga.L)().authorizations,l=(0,gl.T)({mode:r,authz:a}),s=(0,E.Au)({onSession:function(e){n({type:"ghostwriterChat",data:{sessionId:e}})}}).sendMessage;return(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(gi.A,{}),text:"Ask ".concat(E.BP," to debug"),onClick:(0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:return e=i(),[4,s({kind:"message",message:"The app isn't running, review and fix errors in the Console",model:o(l),intent:e})];case 1:return n.sent(),[2]}})})})}var gf=t(12219),gh=t(58868),gg=t(7079);function gm(e){var n,t=e.openPane,r=e.onPeekHeightChanged,o=e.revealed,i=e.setRevealed,a=e.previewScreenSize,l=e.setPreviewScreenSize,s=(0,f3.eg)(),c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1],g=(0,d._)((0,h.useState)(!1),2),m=g[0],v=g[1],w=(0,eq.A)(u),y=(0,h.useRef)(null),b=(0,h.useCallback)(function(){var e;null===(e=y.current)||void 0===e||e.refresh()},[]),S=(0,h3.yI)({refresh:b}),Y=S.isAgentControllingRunWorkflow,x=S.clientConnected,_=S.hasBeenReady,A=S.runState,C=S.transitionReason,k=S.presentResultsEvent,D=S.isWaitingOnUserInput,R=S.hasInflightRevert,E=S.startedWork,I=S.isWaitingForVisualFeedback,U=S.readyToDeploy,F=S.workflowState,P=(0,et.A)().ports,T=(0,h2.w)(P),O=(0,h.useMemo)(function(){return T.some(function(e){return(0,h1.th)(e.configuration.localPort)})},[T]),L=(0,eq.A)(C),N=!Y&&F===h3.Io.STARTING||F===h3.Io.RUNNING||F===h3.Io.FAILED||F===h3.Io.CRASHED,M=!O&&(!N||!k&&Y),G=D||m;o&&M&&i(!1),n=_?M?"disabled":o||N&&!Y?"open":Y&&(m||F===h3.Io.FAILED||F===h3.Io.CRASHED||U||D&&I)?"peeked":"closed":"hidden";var B=(0,h.useCallback)(function(){M||(i(function(e){return!e}),v(!1))},[M,i]);return(0,h.useEffect)(function(){v(I)},[I]),(0,h.useEffect)(function(){O&&i(!0)},[O,i]),(0,h.useEffect)(function(){w.current||A!==q.g32.AGENT_STATE_PAUSED||(null==C?void 0:C.$kind)!=="planConcluded"||i(!0)},[w,A,C,i]),(0,h.useEffect)(function(){var e=L.current;!w.current&&D&&I&&(null==e?void 0:e.$kind)!=="requestedSecrets"&&(null==e?void 0:e.$kind)!=="reverted"&&i(!0)},[w,L,D,I,i]),(0,h.useEffect)(function(){w.current||!E||O||i(!1)},[w,E,O,i]),(0,p.Y)(h7,{state:n,lowPadding:!Y,highlighted:G,onPeekHeightChanged:r,handle:(0,p.Y)(h9,{state:n,highlighted:G,onClick:Y?B:void 0,status:(0,p.Y)(go,{clientConnected:x,hasInflightRevert:R,isAgentControllingRunWorkflow:Y,isWaitingForVisualFeedback:m,isWaitingOnUserInput:D,readyToDeploy:U,runState:A,startedWork:E||O,transitionReason:C,workflowState:F}),controls:(0,p.FD)(p.FK,{children:[s?null:(0,p.Y)(t7.K0,{alt:"Open Webview",onClick:function(){return t({type:"webview"})},children:(0,p.Y)(gf.A,{})}),Y?(0,p.Y)(t7.K0,{alt:u?"Unpin Output":"Pin Output",onClick:function(){return f(!u)},children:u?(0,p.Y)(gg.A,{}):(0,p.Y)(gh.A,{})}):null]})}),children:F===h3.Io.FAILED||F===h3.Io.CRASHED?(0,p.Y)(gu,{isAgentControllingRunWorkflow:Y,runState:A,openPane:t,text:h3.Io.CRASHED?"Your App crashed":"Your App failed to run"}):(0,p.Y)(p.FK,{children:Y?k?(0,p.Y)(h5.v,{ref:y,openPane:t,showDeployBanner:U,previewScreenSize:a,setPreviewScreenSize:l,initialPort:k.websitePort,initialPath:k.websiteRoute}):O?(0,p.Y)(h5.F,{ref:y,openPane:t,previewScreenSize:a,setPreviewScreenSize:l}):null:(0,p.Y)(h4.A,{openPane:t,starting:F===h3.Io.STARTING,previewScreenSize:a,setPreviewScreenSize:l})})})}var gv=t(55606),gw=t(75362),gy=t(13310),gb=t(7864),gS=t(12887),gY=(0,rL.v)(["thoughtBackgroundColor","thoughtDotsColor","thoughtDotsAnimation","thoughtBorderColor"]),gx=gY.styleTokens,g_=gY.cssVars,gA=(0,eA.x)({thoughts:[eC.wp.p(8),eC.wp.borderRadius(),eC.wp.border({width:1,color:gx.thoughtBorderColor}),(l={width:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},(0,nt._)(l,g_.thoughtBorderColor,tB.LU.outlineDimmest),(0,nt._)(l,g_.thoughtBackgroundColor,tQ.s),(0,nt._)(l,g_.thoughtDotsAnimation,"none"),(0,nt._)(l,g_.thoughtDotsColor,tB.LU.outlineDefault),l)],dot:[eC.wp.borderRadius("full"),{pointerEvents:"none",transitionProperty:"background-color, border-color",transitionDuration:"120ms",backgroundColor:gx.thoughtDotsColor,width:6,height:6,position:"absolute",'&[data-state="tl"]':{top:0,left:0,transform:"translate(-50%, -50%)"},'&[data-state="tr"]':{top:0,right:0,transform:"translate(50%, -50%)"},'&[data-state="bl"]':{bottom:0,left:0,transform:"translate(-50%, 50%)"},'&[data-state="br"]':{bottom:0,right:0,transform:"translate(50%, 50%)"}}]});function gC(e){return(0,p.FD)(eD.ui,{css:gA.thoughts,children:[(0,p.Y)(gS.d2,{text:e.text,messageState:q.qOk.COMPLETE}),["tl","tr","bl","br"].map(function(e){return(0,p.Y)(ez.S,{css:gA.dot,"data-state":e},e)})]})}var gk=t(71794),gD={direction:"reverse",state:{revertedToEventId:null},transformer:function(e,n){if(n.revertedToEventId===e.id&&(n.revertedToEventId=null),!n.revertedToEventId){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;if((null==r?void 0:r.$kind)==="revertData"){n.revertedToEventId=r.revertData.eventIdBeforeRevert;return}}var o=(0,gk.b)(e);if(o)switch(o.$kind){case null:case"presentResultsToolData":return;default:return o}}}},gR=t(5511),gE=t(717),gI=t.n(gE),gU=(0,tB.CK)("Scroller.module.css",["--y-position","--list-height","--item-min-height"]);function gF(e){var n=e.sessionId,t=e.openPane,r=e.offset,o=e.shouldAutoScrollRef,i=e.setProgressScrollerRef,a=(0,E.NC)(),l=(0,hr.Rj)(function(){return n?a.sessions.get(n):gw.cP.combine(a.sessions.agent,a.sessions.readonly.agent).select(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1];return t||(0,q.kjF)(r)})},[a,n]);return l?(0,p.Y)(gP,{shouldAutoScrollRef:o,progressScrollerRef:i,session:l,openPane:t,offset:r}):null}function gP(e){var n,t,r,o=e.session,i=e.openPane,a=e.offset,l=e.progressScrollerRef,s=e.shouldAutoScrollRef,c=e.initialEventId,u=(0,h.useRef)(new Map),f=(0,E.hT)(),g=(0,h.useMemo)(function(){return null==o?void 0:o.transform(gD,100)},[o]),m=(0,hr.J2)(g),v=(0,hr.J2)(g.exhaustive),w=(0,h.useRef)(null),y=(0,d._)((0,h.useState)(0),2),b=y[0],S=y[1],Y=(0,pL.A)(function(e){return S(e.height)}),x=(0,gv.Te)({overscan:1,count:null!==(t=null==m?void 0:m.length)&&void 0!==t?t:0,getScrollElement:function(){return w.current},estimateSize:function(){return b},getItemKey:function(e){var n,t,r;return null!==(r=null==m?void 0:null===(t=m[e])||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.toString())&&void 0!==r?r:""}}),_=(0,eq.A)(function(e,n){var t=null==m?void 0:m.findIndex(function(n){return n[0]===e});void 0!==t&&-1!==t&&x.scrollToIndex(t,n)});(0,h.useEffect)(function(){null==l||l({scrollToEventId:function(e,n){_.current(e,n)}})},[_,l]);var A=(0,h.useRef)(c),C=!!(null==m?void 0:m.length);return((0,h.useEffect)(function(){if(A.current&&C){var e=A.current;A.current=void 0,setTimeout(function(){_.current(e)})}},[c,C,_]),null==m?void 0:m.length)?(0,p.Y)(ez.S,{innerRef:Y,clsx:gI().root,children:(0,p.FD)(gR.y,{scrollerRef:w,scrollCacheKey:"CACHE_KEY",scrollCache:u.current,shouldAutoScrollRef:s,autoScrollBehavior:"smooth",buttonOffset:a,children:[v?null:(0,p.Y)(ez.S,{clsx:gI().loadMore,children:(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(oF.A,{}),text:"Show more",onClick:function(){g.size.set(g.size.current+100)}})}),(0,p.Y)(ez.S,{clsx:gI().items,style:(r={},(0,nt._)(r,gU.listHeight,"".concat(x.getTotalSize(),"px")),(0,nt._)(r,gU.itemMinHeight,"".concat(b,"px")),r),children:null===(n=x.getVirtualItems())||void 0===n?void 0:n.map(function(e){var n,t=null==m?void 0:null===(n=m[e.index])||void 0===n?void 0:n[1];return t?(0,p.Y)(gT,{index:e.index,yPosition:e.start,innerRef:x.measureElement,item:t,openPane:i},e.key.toString()):null})})]})}):(0,p.Y)(ez.S,{align:"center",justify:"center",clsx:gI().loading,children:f===q.g32.AGENT_STATE_RUNNING?(0,p.Y)(sp.A,{}):(0,p.Y)(gn.A,{color:tB.LU.foregroundDimmest})})}var gT=(0,h.memo)(function(e){var n=e.item,t=e.openPane,r=e.innerRef,o=e.index,i=e.yPosition,a=(0,hr.J2)(n);return a?(0,p.Y)(ez.S,{style:(0,nt._)({},gU.yPosition,"".concat(i,"px")),clsx:gI().item,innerRef:r,"data-index":o,row:!0,justify:"center",children:(0,p.FD)(ez.S,{gap:8,justify:"center",clsx:gI().itemCenterContainer,children:[(0,p.FD)(ez.S,{align:"center",children:[a.summary?(0,p.Y)(gy.B,{variant:"subheadDefault",color:"dimmer",summary:a.summary}):null,a.message?(0,p.Y)(ez.S,{clsx:gI().itemThoughtContainer,children:(0,p.Y)(gC,{text:a.message})}):null]}),(0,p.Y)(gb.r,{data:a,openPane:t})]})}):null}),gO=(0,eA.x)({root:[eC.wp.coverContainer,eC.wp.overflow("hidden"),eC.wp.position.relative]});function gL(e){var n=e.sessionId,t=e.openPane,r=e.previewScreenSize,o=e.setPreviewScreenSize,i=(0,d._)((0,h.useState)(void 0),2),a=i[0],l=i[1],s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,h.useRef)(!0),g=(0,d._)((0,h.useState)(null),2),m=g[0],v=g[1];return(0,ec.Qt)(function(){return{type:"agentProgress",scrollToEventId:function(e,n){f.current=!1,u(!1),null==m||m.scrollToEventId(e,n)},autoScroll:function(){f.current=!0},showEventOverlay:function(e){}}},[m]),(0,p.FD)(ez.S,{css:gO.root,children:[(0,p.Y)(gF,{sessionId:n,openPane:t,offset:a,shouldAutoScrollRef:f,setProgressScrollerRef:v}),(0,p.Y)(gm,{openPane:t,onPeekHeightChanged:function(e){return l(e)},revealed:c,setRevealed:u,previewScreenSize:r,setPreviewScreenSize:o})]})}function gN(){var e=(0,m._)(["\n  mutation GeneratedReplAssetUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        isRenamed\n        url\n        slug\n        iconUrl\n      }\n    }\n  }\n"]);return gN=function(){return e},e}var gM={},gG=(0,v.J1)(gN()),gB=t(50704);function gH(){var e,n,t,r=(0,E.dI)(),o=(0,eK.A)().showError,i=(0,d._)((e={onError:function(e){return o((0,gB.A)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl;window.history.replaceState(null,"",n.url+window.location.search+window.location.hash)}},n=(0,g._)({},gM,e),a9.n(gG,n)),1)[0];return(0,h.useCallback)((t=(0,G._)(function(e,n){var t;return(0,B.YH)(this,function(a){switch(a.label){case 0:return[4,r.generateReplName(e,n)];case 1:if(!(t=a.sent()).ok)return o(t.message),[2];return i({variables:{input:{id:e,title:t.payload,makeTitleUnique:!0}}}),[2]}})}),function(e,n){return t.apply(this,arguments)}),[r,o,i])}var gW=t(45350),gz=n6.ZU.Object({type:n6.ZU.Literal("agentProgress"),data:n6.ZU.Optional(n6.ZU.Object({previewScreenSize:n6.ZU.Optional(gW.R),sessionId:n6.ZU.Optional(n6.ZU.String())}))}),g$=t(16231),gj={Content:function(e){var n=(0,en.Bm)(),t=e.options.performPaneOperation,r=(0,h.useCallback)(function(e){t({operation:"open",secondary:!1,pane:e})},[t]),o=(0,h.useCallback)(function(n){e.options.performPaneOperation({operation:"replace",pane:{type:"agentProgress",data:{previewScreenSize:n}}})},[e.options]),i=e.pane.data,a=(0,en.HU)(),l=gH(),s=(0,hX.S)(),c=(0,eG.A)();return"lobbyAppProposal"===n?(0,p.Y)(h0.ue,{sessionId:null==i?void 0:i.sessionId,onAgentSession:function(e,n){t({operation:"open",secondary:!0,pane:{type:"agentChat",data:{sessionId:e}}}),a("tilingLayout"),l(c,n),s({prompt:n,attachments:[],replId:c})}}):(0,p.Y)(gL,{sessionId:null==i?void 0:i.sessionId,openPane:r,previewScreenSize:null==i?void 0:i.previewScreenSize,setPreviewScreenSize:o})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.blurpleStrongest,size:n},children:(0,p.Y)(g$.A,{})})},getTitle:function(){return"Progress"},description:"View the progress, reasoning, and output of ".concat((0,E.Nn)()),category:Q.bY.WorkspaceFeatures,decode:function(e){return n9.WT.Decode(gz,e)}},gq=t(93004),gK=t(59307),gZ=t(76768),gV=t(75576),gJ=t(46598);function gQ(e){if(!e)return null;var n=(0,gk.b)(e);return n?(0,e8._)((0,g._)({},n),{summary:function(e){var n=e.contents.contents;if(!(0,q.VFn)(n,"agentTimelineEventContents"))return null;var t=e.state===q.qOk.IN_PROGRESS,r=n.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"fileEditData":return t?"Editing file":"Edited file";case"readFileData":return t?"Reading file":"Opened file";case"readDirData":return t?"Reading directory":"Opened directory";case"createFileData":return t?"Creating file":"Created file";case"shellExecutionData":return t?"Executing shell command":"Executed shell command";case"sqlExecutionData":return t?"Executing SQL query":"Executed SQL query";case"packagerInstallData":return t?"Installing packages":"Installed packages";case"packagerUninstallData":return t?"Uninstalling packages":"Uninstalled packages";case"systemDependencyInstallData":return t?"Installing system dependencies":"Installed system dependencies";case"systemDependencyUninstallData":return t?"Uninstalling system dependencies":"Uninstalled system dependencies"}return(0,gJ.F)(e)}(e),created:e.created,id:e.id}):null}var gX=["readFileData","readDirData","presentResultsToolData"],g0={direction:"reverse",state:{inProgressEvent:null,latestCompleteEvent:null},reducer:function(e,n){if((0,q.TW7)(e,"agentTimelineEventContents")){var t,r,o,i=null===(o=e.contents)||void 0===o?void 0:null===(r=o.contents)||void 0===r?void 0:null===(t=r.agentTimelineEventContents)||void 0===t?void 0:t.toolData;if(!(!i||gX.includes(i.$kind))){var a=!!(0,gJ.F)(e);if(e.state===q.qOk.IN_PROGRESS&&a&&(n.inProgressEvent=gQ(e)),e.state===q.qOk.COMPLETE&&(n.latestCompleteEvent=gQ(e)),null!=n.inProgressEvent&&null!=n.latestCompleteEvent)return!1}}}},g1=t(50309),g2=t.n(g1);function g5(e){return(0,p.Y)(ez.S,{className:g2().root,children:(0,p.Y)(gS.d2,{text:e.text,messageState:q.qOk.COMPLETE,themed:!1})})}var g4={direction:"forward",state:{},transformer:function(e){var n;return null!==(n=gQ(e))&&void 0!==n?n:void 0}},g3=t(55838),g8=t.n(g3),g7=["readFileData","readDirData","presentResultsToolData"];function g6(e){var n,t,r,o,i,a=e.selectedEventId,l=e.openPane,s=(0,E.NC)(),c=(0,hr.J2)(s.sessions.agent),u=null!==(i=(0,hr.Rj)(function(){return null==c?void 0:c.reduce(g0,10)},[c]))&&void 0!==i?i:{},f=u.inProgressEvent,m=u.latestCompleteEvent,v=(0,hr.Rj)(function(){return null==c?void 0:c.transform(g4,1e3).tuples},[c]),w=(0,gq.T)({}),y=(0,d._)((0,h.useState)(null),2),b=y[0],S=y[1],Y=(0,h.useRef)(null),x=(0,h.useRef)(null),_=(0,gK.o)({type:"dialog"},w,Y).overlayProps,A=(0,hr.Rj)(function(){var e;return a?null==v?void 0:null===(e=v.find(function(e){return(0,d._)(e,1)[0]===a}))||void 0===e?void 0:e[1]:null},[v,a]),C=null!=f?f:A,k=null!=C?C:m,D=(0,h.useCallback)(function(){var e;S(null!==(e=null==k?void 0:k.id)&&void 0!==e?e:null)},[k]),R=(n=(0,gV.Z)(null==m?void 0:m.id),r=(t=(0,d._)((0,h.useState)(!1),2))[0],o=t[1],(0,h.useEffect)(function(){var e=null;return(null==m?void 0:m.id)!==n&&(e=window.setTimeout(function(){o(!0)},4e3)),function(){e&&window.clearTimeout(e)}},[m,n]),r);return((0,h.useEffect)(function(){if((null==k?void 0:k.id)===b){w.close();return}if(C||!R){w.open();return}var e=window.setTimeout(function(){w.close()},4e3);return function(){window.clearTimeout(e)}},[w,b,C,R,null==k?void 0:k.id]),w.isOpen&&k)?(0,p.FD)(ez.S,(0,e8._)((0,g._)({className:g8().root,innerRef:x},_),{children:[(0,p.Y)(gZ.R,{onDismiss:D}),(0,p.Y)(g9,{data:k,onClose:D,renderedContent:(0,p.Y)(gb.r,{data:k,openPane:l,minimal:!0,animateCode:!0})}),(0,p.Y)(gZ.R,{onDismiss:D})]})):null}function g9(e){var n=e.data,t=e.onClose,r=e.renderedContent;return!((null==n?void 0:n.$kind)!=null&&"error"!==n.$kind)||g7.includes(n.$kind)?null:(0,p.FD)(eD.ui,{className:g8().surface,elevated:!0,children:[(0,p.FD)(ez.S,{className:g8().header,row:!0,gap:4,children:[(0,p.Y)(ez.S,{className:g8().headerContent,children:n.message?(0,p.Y)(g5,{text:n.message}):n.summary?(0,p.Y)(gy.B,{variant:"subheadDefault",color:"dimmer",summary:n.summary}):null}),(0,p.Y)(t7.K0,{alt:"Hide",onClick:t,children:(0,p.Y)(oN.A,{})})]}),(0,p.Y)(ez.S,{className:g8().contentRow,children:r}),(0,p.Y)(ez.S,{className:g8().avatarRow,children:(0,p.Y)(hK.l,{})})]})}var me=t(87590);function mn(){return(0,p.Y)(me.A,{pane:{type:"agentProgress"},headerText:"Preview will be available soon",bodyText:"".concat((0,E.Nn)({capitalizeFirstChar:!0})," is workingâ€¦"),icon:(0,p.Y)(ov.A,{size:48})})}function mt(e){var n=e.openPane,t=e.previewScreenSize,r=e.setPreviewScreenSize,o=(0,h.useRef)(null),i=(0,h.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.refresh()},[]),a=(0,h3.yI)({refresh:i}),l=a.isAgentControllingRunWorkflow,s=a.presentResultsEvent,c=a.readyToDeploy,u=a.runState,d=a.workflowState,f=(0,et.A)().ports,g=(0,h2.w)(f),m=(0,h.useMemo)(function(){return g.some(function(e){return(0,h1.th)(e.configuration.localPort)})},[g]);if(d===h3.Io.FAILED||d===h3.Io.CRASHED)return l?(0,p.Y)(mn,{}):(0,p.Y)(gu,{isAgentControllingRunWorkflow:l,runState:u,openPane:n,text:h3.Io.CRASHED?"Your App crashed":"Your App failed to run"});if(l){if(s)return(0,p.Y)(h5.v,{ref:o,openPane:n,showDeployBanner:c,previewScreenSize:t,setPreviewScreenSize:r,initialPort:s.websitePort,initialPath:s.websiteRoute});if(m)return(0,p.Y)(h5.F,{ref:o,openPane:n,previewScreenSize:t,setPreviewScreenSize:r})}return(0,p.Y)(h4.A,{openPane:n,starting:d===h3.Io.STARTING,previewScreenSize:t,setPreviewScreenSize:r})}var mr=(0,eA.x)({root:[eC.wp.coverContainer,eC.wp.overflow("hidden"),eC.wp.position.relative]});function mo(e){var n,t=e.openPane,r=e.previewScreenSize,o=e.setPreviewScreenSize,i=(0,d._)((0,h.useState)(null),2),a=i[0],l=i[1],s=(0,C._P)({controlName:"flag-agent-output-overlay",default:"none",type:"string"});return(0,ec.Qt)(function(){return{type:"agentProgress",scrollToEventId:function(e,n){},autoScroll:function(){},showEventOverlay:function(e){l(e)}}},[]),"progress"===s&&(n=(0,p.Y)(g6,{selectedEventId:a,openPane:t})),(0,p.FD)(ez.S,{css:mr.root,children:[(0,p.Y)(mt,{openPane:t,previewScreenSize:r,setPreviewScreenSize:o}),n]})}var mi={Content:function(e){var n=(0,en.Bm)(),t=e.options.performPaneOperation,r=(0,h.useCallback)(function(e){t({operation:"open",secondary:!1,pane:e})},[t]),o=(0,h.useCallback)(function(n){e.options.performPaneOperation({operation:"replace",pane:{type:"agentProgress",data:{previewScreenSize:n}}})},[e.options]),i=e.pane.data,a=(0,en.HU)(),l=gH(),s=(0,hX.S)(),c=(0,eG.A)();return"lobbyAppProposal"===n?(0,p.Y)(h0.ue,{sessionId:null==i?void 0:i.sessionId,onAgentSession:function(e,n){t({operation:"open",secondary:!0,pane:{type:"agentChat",data:{sessionId:e}}}),a("tilingLayout"),l(c,n),s({prompt:n,attachments:[],replId:c})}}):(0,p.Y)(mo,{openPane:r,previewScreenSize:null==i?void 0:i.previewScreenSize,setPreviewScreenSize:o})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.blurpleStrongest,size:n},children:(0,p.Y)(ov.A,{})})},getTitle:function(){return"Preview"},description:"View the output of ".concat((0,E.Nn)()),category:Q.bY.WorkspaceFeatures,decode:function(e){return n9.WT.Decode(gz,e)}},ma=t(55988);function ml(){var e=(0,m._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return ml=function(){return e},e}var ms={},mc=(0,v.J1)(ml()),mu=t(43239),md=t(35698);function mp(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,o=(0,eK.A)().showError,i=(0,d._)((0,h.useState)(null),2),a=i[0],l=i[1],s=(0,mu.d1)({variables:{replId:e}}),c=function(){var e,n=null===(e=s.data)||void 0===e?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},u=function(n,t){var r=n.readQuery({query:mu.FL,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.repl.__typename)throw Error("expected repl");var o=[],i=r.repl.annotationAnchors,a=i.findIndex(function(e){return e.id===t.id});o=-1===a?(0,M._)(i).concat([t]):(0,M._)(i.slice(0,a)).concat([t],(0,M._)(i.slice(a+1))),n.writeQuery({query:mu.FL,variables:{replId:e},data:(0,e8._)((0,g._)({},r),{repl:(0,e8._)((0,g._)({},r.repl),{annotationAnchors:o})})})},p=(0,d._)((0,mu.tD)({onError:function(e){return o(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return o(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?o(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],f=(0,d._)((0,mu.lb)({onError:function(e){return o(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return o(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?o(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],m=(0,d._)((0,mu.CX)({onError:function(e){return o(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return o(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?o(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],v=(0,d._)((0,md.F)(),1)[0],w=(0,d._)((0,mu.CY)(),1)[0];(0,mu.oh)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,o=null==n?void 0:n.updatedAnnotation;o&&(u(t,o),r(o))}});var y=(0,d._)((0,h.useState)([]),2),b=y[0],S=y[1];(0,h.useEffect)(function(){var e,n=[];(null===(e=s.data)||void 0===e?void 0:e.repl.__typename)==="Repl"&&n.push.apply(n,(0,M._)(s.data.repl.annotationAnchors)),a&&n.push((0,e8._)((0,g._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),S(n)},[s,a]);var Y=(0,h.useMemo)(function(){return b.find(function(e){return e.isGeneral})},[b]),x=(0,h.useMemo)(function(){return b.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[b]),_=function(e){var n=e.annotationAnchor,t=e.annotationMessage;p({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,e8._)((0,g._)({},c(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,e8._)((0,g._)({},c(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},A=(0,P.A)(function(){return rV()(w,1e3,{trailing:!1})},[w]);return{annotations:b,loading:s.loading,generalThread:Y,unreadThreadCount:x,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:_,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,o=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),_({annotationAnchor:(0,g._)({},a),annotationMessage:r,highlight:o})):f({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:o},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,e8._)((0,g._)({},t),{messages:(0,M._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,e8._)((0,g._)({},c(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;m({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,e8._)((0,g._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){A({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){v({variables:{replId:e}})}}}var mf=t(21195),mh=["TextMessageContentType","PreviewMessageContentType"],mg=t(39729),mm=t(89401),mv=t(41760),mw=t(12470);function my(e){var n=e.message,t=(0,h.useMemo)(function(){var e=n.timeCreated;return e?(0,mm.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,p.Y)("div",{className:"resolved-message",children:(0,p.FD)(mv.z,{align:"center",spacing:1,children:[r?(0,p.Y)(mw.A,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,p.Y)(s3.A,{color:tB.LU.foregroundDefault,size:24}),(0,p.FD)(eW.EY,{variant:"small",multiline:!1,children:["Resolved ",t]})]})})}var mb=t(6534),mS=(0,tG.i7)({"0%":[eC.wp.backgroundColor.foregroundDimmest],"50%":[eC.wp.backgroundColor.foregroundDimmest],"100%":[eC.wp.backgroundColor.foregroundDimmest]}),mY=(0,eA.x)({message:[eC.wp.backgroundColor.backgroundHigher,eC.wp.py(4),eC.wp.px(8),eC.wp.borderRadius(8),eC.wp.fontSize("default"),eC.wp.width("fit-content"),eC.wp.maxWidth("100%"),{overflowWrap:"break-word",whiteSpace:"pre-wrap","&.userhighlight":{background:"transparent"}}],typingIndicator:[eC.wp.minHeight("1em"),eC.wp.display.grid,eC.wp.align.center,{gridAutoFlow:"column",gridGap:tB.LU.space8}],dot:[eC.wp.width(6),eC.wp.height(6),eC.wp.borderRadius(6),eC.wp.display.inlineBlock,eC.wp.backgroundColor.foregroundDimmest,{animation:"".concat(mS," 0.6s infinite"),"&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}]});function mx(e){var n=e.message,t=e.messageStyle,r=(0,h.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,mb.vY)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,mb.vY)(n.content.preview,{}):null},[n.content]),o="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||o)?(0,p.Y)("div",{children:(0,p.FD)("div",{className:t,css:mY.message,children:[r?(0,p.Y)(mb.JX,{message:r,codeStyles:{color:tB.LU.orangeStronger,background:tB.LU.backgroundHighest}}):null,o?(0,p.FD)("span",{css:mY.typingIndicator,children:[(0,p.Y)("span",{css:mY.dot}),(0,p.Y)("span",{css:mY.dot}),(0,p.Y)("span",{css:mY.dot})]}):null]})}):null}function m_(e){var n=e.message,t=(0,h.useMemo)(function(){var e=n.timeCreated;return e?(0,mm.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,p.Y)("div",{className:"resolved-message",children:(0,p.FD)(mv.z,{align:"center",spacing:1,children:[r?(0,p.Y)(mw.A,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,p.Y)(s3.A,{size:24,color:tB.LU.foregroundDimmest}),(0,p.FD)(eW.EY,{variant:"small",multiline:!1,children:["Unresolved ",t]})]})})}var mA=function(e){var n=new Date(e),t=new Date;return 60>(0,mg.A)(t,n)?"now":(0,r7.K)(n,!0)},mC=(0,eA.x)({root:[eC.wp.display.grid,eC.wp.backgroundColor.backgroundDefault,eC.wp.color.foregroundDefault,eC.wp.position.relative,{gridTemplateRows:"auto auto",gridRowGap:tB.LU.space8,gridTemplateColumns:"minmax(0, 1fr)"}],messageInfo:[eC.wp.display.flex,eC.wp.align.center,eC.wp.fontSize("small")],messages:[eC.wp.display.grid,{gridRowGap:tB.LU.space4,gridTemplateColumns:"minmax(0, 1fr)"}],avatar:{marginRight:"5px"},username:[eC.wp.color.foregroundDimmer,{marginRight:"3px"}],time:[eC.wp.color.foregroundDimmest]});function mk(e){var n=e.messageGroup,t=n.messages,r=n.user,o=n.timeCreated;return r?(0,p.FD)("div",{css:mC.root,children:[(0,p.FD)("div",{css:mC.messageInfo,children:[(0,p.Y)("div",{css:mC.avatar,children:(0,p.Y)(mw.A,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,p.Y)("div",{css:mC.username,children:r.username}),(0,p.Y)("div",{css:mC.time,children:mA(o)})]}),(0,p.Y)("div",{css:mC.messages,children:t.map(function(e){return(0,p.Y)(mx,{message:e},e.id)})})]}):null}function mD(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,p.Y)(mk,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,p.Y)(my,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,p.Y)(m_,{message:t})}return null}var mR=t(50543),mE=t(40114);function mI(){var e=(0,m._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return mI=function(){return e},e}var mU={},mF=(0,v.J1)(mI());let mP=function(e){var n={},t=!0,r=!1,o=void 0;try{for(var i,a=e.messages[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return Object.values(n)};var mT=t(54545),mO=t(22657),mL=t(10863),mN=(0,eA.x)({inputGroup:{display:"grid",gridTemplateColumns:"1fr min-content",gridGap:"10px",alignItems:"center",justifyContent:"start"},inputBox:[eC.wp.backgroundColor.backgroundHigher,eC.wp.color.foregroundDefault,eC.wp.borderRadius(8),eC.wp.p(8),eC.wp.fontSize("default"),eC.wp.font.default,eC.wp.overflowY("auto"),eC.wp.maxHeight("calc(".concat(tB.LU.fontSizeDefault," * 18)")),{border:"none",outline:"none",resize:"none",lineHeight:"16px","&::placeholder":{whiteSpace:"pre"},"&:not(:empty)":{borderRadius:"6px"}}],mentionSuggestionsContainer:[eC.wp.display.grid,eC.wp.overflow("hidden"),{paddingTop:"1em",gridRowGap:tB.LU.space4}],mentionSuggestion:[eC.wp.display.grid,eC.wp.align.center,eC.wp.py(8),eC.wp.cursor.pointer,eC.wp.color.foregroundDefault,{gridTemplateColumns:"min-content max-content",gridColumnGap:tB.LU.space8,'&[data-selected="true"]':[eC.wp.backgroundColor.backgroundRoot,{"& > *":{transform:"scale(1.1)"}}]}]}),mM=(0,h.forwardRef)(function(e,n){var t,r,o,i,a=e.annote,l=e.placeholder,s=e.onChangeMessage,c=e.onFinalizeMessage,u=function(){""!==v.trim()&&(c({messageId:A||(0,o$.A)(),message:v.trim()}),C(null),y(""))},f=null===(i=(t=(0,g._)({},mU,void 0),w.I(mF,t)).data)||void 0===i?void 0:null===(o=i.currentUser)||void 0===o?void 0:o.id,m=(0,d._)((0,h.useState)(""),2),v=m[0],y=m[1],b=(0,d._)((0,h.useState)(!1),2),S=b[0],Y=b[1],x=(0,h.useRef)(null),_=(0,d._)((0,h.useState)(null),2),A=_[0],C=_[1],k=(0,mf.A)(),D=(0,mT.A)().ref,R=(0,d._)((0,mO.A)({"@":(r=(0,G._)(function(e){var n,t;return(0,B.YH)(this,function(r){return n=k.filter(function(e){return e.id!==f}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,p.Y)(mw.A,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return r.apply(this,arguments)})}),2),E=R[0].suggestions,I=R[1],U=(0,mE.Bp)({items:(null==E?void 0:E.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==E?void 0:E.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(E&&n){var t=E.applySuggestion({targetValue:v,suggestionValue:n.value}),r=t.fullValue,o=t.cursorIndex;y(r),setTimeout(function(){x.current&&(x.current.setSelectionRange(o,o),x.current.focus())})}}}),F=U.isOpen,P=U.getInputProps,T=U.getMenuProps,O=U.getItemProps,L=U.highlightedIndex,N=U.getComboboxProps;(0,h.useEffect)(function(){var e="threads/drafts/".concat(a.id),n=tF.A.get(e,"string");n&&y(n);var t=x.current;return function(){if(t){var n=t.value;if(0===n.length){tF.A.remove(e);return}tF.A.set(e,n)}}},[]),(0,h.useEffect)(function(){setTimeout(function(){x.current&&x.current.focus()})},[x]);var M=mP(a).filter(function(e){return e.id!==f}),H="Add a comment";return 1===M.length?H="Reply to @".concat(M[0].username):M.length>1&&(H="Reply"),a.isResolved&&(H="Reply to unresolve this thread"),l&&(H=l),(0,p.FD)("div",{children:[(0,p.FD)("div",(0,e8._)((0,g._)({css:mN.inputGroup},N()),{children:[(0,p.Y)("textarea",(0,g._)({css:mN.inputBox},P({autoFocus:!0,placeholder:H,value:v,onCompositionStart:function(){return Y(!0)},onCompositionEnd:function(){return Y(!1)},onChange:function(e){var n=e.target.value,t=A||(0,o$.A)();A||C(t),y(n),s({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!F&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||S||(e.preventDefault(),u()))},rows:1,ref:function(e){x.current=e,n&&(void 0===n?"undefined":(0,nr._)(n))==="object"&&(n.current=e),I(e),D(e)}}))),(0,p.Y)(t7.K0,{alt:"Send message",onClick:u,disabled:0===v.length,children:(0,p.Y)(mL.A,{})})]})),(0,p.Y)("div",(0,e8._)((0,g._)({},T({})),{children:F&&E?(0,p.Y)("div",{css:mN.mentionSuggestionsContainer,children:E.results.map(function(e,n){return(0,mR.n)("div",(0,e8._)((0,g._)({css:mN.mentionSuggestion,"data-selected":L===n},O({item:e,index:n})),{key:e.value,children:[e.icon,(0,p.Y)("div",{children:e.value})]}))})}):null}))]})});mM.displayName="ThreadInputForwarded";var mG=t(72621),mB=(0,eA.x)({generalThread:[eC.wp.pt(0),eC.wp.borderRadius(8,8,0,0),eC.wp.backgroundColor.backgroundDefault,eC.wp.flex.column,eC.wp.flex.growAndShrink(1),eC.wp.overflow("hidden"),eC.wp.height("100%"),{gridTemplateRows:"min-content 1fr min-content",gridGap:tB.LU.space8}],messageGroupContainerContainer:[eC.wp.scrollbar.thin,eC.wp.flex.column,eC.wp.height(0),eC.wp.flex.grow(1),eC.wp.overflow("hidden")],messageGroupContainer:[eC.wp.p(12),eC.wp.display.grid,eC.wp.overflowY("auto"),{gridRowGap:tB.LU.space16}],threadInputContainer:[eC.wp.width("100%"),eC.wp.border({color:tB.LU.outlineDimmer,width:1,direction:"top"}),eC.wp.py(8),eC.wp.px(12)]});function mH(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,o=e.handleChangeMessage,i=void 0===o?function(){}:o,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,s=e.createAnnotationAnchorPlaceholder,c=void 0===s?function(){}:s,u=(0,eG.A)(),d=(0,h.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c,u,d,p=a.value;!t||(null==p?void 0:null===(s=p.user)||void 0===s?void 0:s.id)!==(null==t?void 0:null===(c=t.user)||void 0===c?void 0:c.id)||(null==p?void 0:null===(u=p.anchor)||void 0===u?void 0:u.id)!==(null==t?void 0:t.anchorId)||!mh.includes(t.messageType)||!mh.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p?void 0:null===(d=p.anchor)||void 0===d?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return t&&n.push(t),n}((0,M._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,h.useEffect)(function(){r||c({annotationAnchor:{id:(0,o$.A)(),replId:u,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,u,c]),(0,h.useEffect)(function(){r||c({annotationAnchor:{id:(0,o$.A)(),replId:u,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,u,c]);var f=(0,h.useRef)(null);(0,mG.A)(n&&r||null);var g=function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)};return((0,h.useEffect)(function(){g()},[f,r]),r)?(0,p.FD)("div",{css:mB.generalThread,onClick:function(){return t(!0)},children:[(0,p.Y)("div",{css:mB.messageGroupContainerContainer,children:(0,p.Y)("div",{css:mB.messageGroupContainer,ref:f,children:d.map(function(e){return(0,p.Y)(mD,{messageGroup:e},e.messages[0].id)})})}),(0,p.Y)("div",{css:mB.threadInputContainer,children:(0,p.Y)(mM,{placeholder:"Send message",annote:r,onChangeMessage:function(e){i({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,z.u4)(z.AZ.MESSAGE_SENT,{replId:u,source:"chat",newThread:0===r.messages.length})}})})]}):null}var mW=t(75886),mz=t(73013),m$=t(28686),mj={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,p.Y)(mz.A,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,p.Y)(mW.A,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,p.Y)(m$.A,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,p.Y)(s3.A,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,p.Y)(eh.A,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,p.Y)(function(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M19 9.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.675 1.5a3.751 3.751 0 0 1 7.425.75 3.75 3.75 0 0 1-7.425.75h-4.678a2.751 2.751 0 0 1-5.293 0H2a.75.75 0 0 1 0-1.5h3.354a2.751 2.751 0 0 1 5.292 0h4.679ZM8 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},{})}},search:{placeholder:"Search threadsâ€¦"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You havenâ€™t started any threads yet.",secondary:function(e){return(0,p.FD)(p.FK,{children:["Select code and press ",(0,p.Y)(eb._y,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},mq=t(69418),mK=t(47547),mZ=t(26171),mV=t(70889),mJ=t(51262),mQ=t(38989);let mX=function(e){var n=(0,mQ.A)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}};var m0=t(5609),m1=t(73886);let m2=function(e){var n,t=e.thread,r=e.onClick,o=t.messages.filter(function(e){return!e.seen}).length,i=null===(n=(0,mZ.zn)(t.path?t:null))||void 0===n?void 0:n.snippet,a=(0,mQ.A)(t.id,null,null).thread,l=(0,m0.Ln)(),s=mX(t.id).handleToggleResolved,c={jumpToCode:"Jump to code",resolveThread:"Resolve this thread",unresolveThread:"Re-open",replyCount:function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},threadOpened:function(e,n){return"Opened ".concat(e," by ").concat(n)}},u=t.messages[0],d=(0,h.useMemo)(function(){return(null==u?void 0:u.timeCreated)?(0,mJ.G)(u.timeCreated):"some time ago"},[u]);return t.user?(0,p.FD)(eD.ui,{css:[sL.b.filled,eC.wp.overflow("hidden"),l===t.id&&{borderColor:tB.LU.accentPrimaryDefault}],onClick:function(){r(t)},children:[(0,p.FD)(eD.ui,{elevated:!0,css:[eC.wp.flex.grow(1),eC.wp.px(8),eC.wp.py(8)],row:!0,align:"center",justify:"space-between",children:[(0,p.Y)(ez.S,{row:!0,align:"center",gap:4,children:(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:c.threadOpened(d,t.user.username)})}),(0,p.FD)(ez.S,{row:!0,align:"center",gap:4,children:[i&&t.path?(0,p.Y)(t7.K0,{alt:c.jumpToCode,onClick:function(){return r(t)},children:(0,p.Y)(m1.A,{})}):null,t.isResolved?(0,p.Y)(eH.$n,{text:c.unresolveThread,size:"small",colorway:"primary",onClick:function(){s(!1)}}):(0,p.Y)(t7.K0,{alt:c.resolveThread,onClick:function(){s(!0)},children:(0,p.Y)(s3.A,{})})]})]}),i&&t.path?(0,p.Y)(mq.f,{elevation:"root",path:t.path,initialDoc:i.lines.join("\n"),startLineNumber:i.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,u?(0,p.Y)(ez.S,{css:[eC.wp.p(8),eC.wp.py(12)],children:(0,p.Y)(mV.A,{thread:a,message:u},u.id)}):null,t.messages.length>1&&(0,p.FD)(ez.S,{css:[eC.wp.pb(12),eC.wp.px(8),eC.wp.flex.row,eC.wp.align.center,eC.wp.rowWithGap(4),eC.wp.color.foregroundDimmer],children:[(0,p.Y)(ez.S,{css:[eC.wp.position.relative],children:(0,p.Y)(mK.A,{unreadDot:o>0})}),(0,p.Y)(eW.EY,{variant:"small",multiline:!1,children:c.replyCount(t.messages.length,o)})]})]}):null};var m5=t(56573);let m4=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,o=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,p.Y)(ez.S,{css:[eC.wp.pb(8)],children:(0,p.Y)(m5.A,{css:[tB.LU.singleLine,eC.wp.px(8)],headerContent:(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.mr(8)],row:!0,align:"center",justify:"space-between",children:[(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1)],row:!0,align:"center",gap:8,children:[(0,p.Y)(ep.A,{path:n,size:20}),(0,p.Y)(eW.EY,{css:[eC.wp.flex.shrink(1)],multiline:!1,children:n})]}),o?(0,p.Y)("div",{css:[eC.wp.flex.shrink(0),eC.wp.width(8),eC.wp.height(8),eC.wp.backgroundColor.redStronger,eC.wp.borderRadius("full")]}):null]}),children:(0,p.Y)("div",{css:[eC.wp.mt(8),eC.wp.colWithGap(8)],children:t.map(function(e){return(0,p.Y)(m2,{thread:e,onClick:r},e.id)})})})})};var m3=t(28354),m8=t(51973),m7=function(e){return e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder",e}(m7||{}),m6=function(e){return e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox",e}(m6||{});let m9=function(e){var n,t,r,o=e.isChatOnly,i=e.openFile,a=(0,eG.A)(),l=mp(a,{onReceiveAnnotationUpdate:function(){}}),s=l.annotations,c=l.loading,u=l.generalThread,f=l.createAnnotationAnchorPlaceholder,m=l.createAnnotationMessage,v=l.updateThreadPreview,y=(n=(0,g._)({},ms,void 0),w.I(mc,n)),b=y.data,S=y.loading,Y=c||S,x=(0,d._)((0,h.useState)(!1),2),_=x[0],A=x[1],C=(0,m0.li)(),k=(0,d._)((0,h.useState)(""),2),D=k[0],R=k[1],E=(0,d._)((0,h.useState)("INBOX"),2),I=E[0],U=E[1],F=(0,d._)((0,h.useState)("CHRONOLOGICAL"),2),P=F[0],T=F[1],O=(0,h.useMemo)(function(){var e,n=null==b?void 0:null===(e=b.currentUser)||void 0===e?void 0:e.id;return s.filter(function(e){if("INBOX"===I)return!e.isResolved;if("RESOLVED"===I)return e.isResolved;if("PARTICIPATING"===I){var t;return!n||(null===(t=e.user)||void 0===t?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==I||e.messages.some(function(e){return!e.seen})})},[b,s,I]),L=(0,h.useMemo)(function(){return O.filter(function(e){var n,t;return 0===D.length||null!==(t=null===(n=e.path)||void 0===n?void 0:n.toLowerCase().includes(D.toLowerCase()))&&void 0!==t&&t})},[D,O]),N=(0,h.useMemo)(function(){return(0,M._)(L).sort(function(e,n){if("CHRONOLOGICAL"===P){var t,r,o=new Date(null===(t=e.messages[0])||void 0===t?void 0:t.timeCreated),i=new Date(null===(r=n.messages[0])||void 0===r?void 0:r.timeCreated);return o&&i?o<i?1:-1:0}return"CODE_ORDER"===P?(0,ts.yh)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[L,P]),H=(0,h.useMemo)(function(){return Object.values((0,g._)({},N)).map(function(e){return(0,M._)(e).sort(function(e,n){if("CHRONOLOGICAL"===P){var t,r,o,i,a,l,s=new Date(null===(a=e.messages[0])||void 0===a?void 0:a.timeCreated),c=new Date(null===(l=n.messages[0])||void 0===l?void 0:l.timeCreated);if(s&&c)return s<c?1:-1}else if("CODE_ORDER"===P)return(null!==(r=null!==(t=e.indexStart)&&void 0!==t?t:e.indexEnd)&&void 0!==r?r:0)<(null!==(i=null!==(o=n.indexStart)&&void 0!==o?o:n.indexEnd)&&void 0!==i?i:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(N)[t]]=n,e},{})},[N,P]),W=(0,mf.A)().map(function(e){return e.username}),z=(t=(0,d._)((0,md.F)(),1)[0],function(){t({variables:{replId:a}})}),$=(r=(0,G._)(function(e){return(0,B.YH)(this,function(n){return e.path&&(i(e.path),C(e.id)),[2]})}),function(e){return r.apply(this,arguments)}),j=(0,eb.Jn)("editor.action.startThread");return o?(0,p.Y)(mH,{generalThreadsOpen:_,setGeneralThreadsOpen:A,generalThread:u,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;v({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,o=(0,mb.vY)(t,{users:(0,M._)(W).concat(["everyone"])});m({anchor:n,annotationMessage:{id:r,text:t,mentions:o.mentions}})},createAnnotationAnchorPlaceholder:f}):(0,p.Y)(eD.ui,{className:"threads-inbox",css:[eC.wp.height("100%"),eC.wp.width("100%"),eC.wp.overflow("hidden"),eC.wp.position.relative],"aria-busy":Y,children:Y?(0,p.Y)(ez.S,{css:[eC.wp.display.flex,eC.wp.align.center,eC.wp.justify.center,eC.wp.height("100%")],children:(0,p.Y)(sp.A,{size:24})}):(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.S,{className:"threads-inbox-header",css:[eC.wp.py(12),eC.wp.px(8),eC.wp.position.sticky,eC.wp.top(0),eC.wp.backgroundColor.backgroundDefault,{zIndex:10}],children:(0,p.FD)(ez.S,{css:[eC.wp.flex.wrap,{gap:8}],row:!0,align:"center",children:[(0,p.Y)(m3.pd,{placeholder:mj.search.placeholder,value:D,onChange:function(e){return R(e.target.value)},css:[eC.wp.flex.grow(1)]}),(0,p.FD)(ez.S,{css:[eC.wp.maxWidth("100%"),{gap:8}],row:!0,children:[(0,p.Y)(ez.S,{css:[eC.wp.flex.shrink(1)],children:(0,p.Y)(m8.in,{cssProps:[eC.wp.flex.shrink(1),{span:eC.wp.flex.shrink(1)}],icon:mj.filters[m6[I]].icon,suffix:(0,p.Y)(aa.A,{}),label:mj.filters[m6[I]].label,onAction:function(e){switch(e){case"toggle-inbox":U("INBOX");break;case"toggle-unread":U("UNREAD");break;case"toggle-participating":U("PARTICIPATING");break;case"toggle-resolved":U("RESOLVED")}},children:Object.entries(mj.filters).map(function(e){var n=(0,d._)(e,2),t=(n[0],n[1]);return(0,p.Y)(ma.q,{"aria-label":t.label,children:(0,p.FD)(ez.S,{row:!0,gap:8,children:[t.icon,(0,p.Y)(eW.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,p.Y)(ez.S,{css:[eC.wp.flex.shrink(1)],children:(0,p.Y)(m8.in,{cssProps:[eC.wp.flex.shrink(1),{span:eC.wp.flex.shrink(1)}],icon:mj.sorts[m7[P]].icon,suffix:(0,p.Y)(aa.A,{}),label:mj.sorts[m7[P]].label,onAction:function(e){switch(e){case mj.sorts.chronological.key:T("CHRONOLOGICAL");break;case mj.sorts.codeOrder.key:T("CODE_ORDER")}},children:Object.entries(mj.sorts).map(function(e){var n=(0,d._)(e,2),t=(n[0],n[1]);return(0,p.Y)(ma.q,{"aria-label":t.label,children:(0,p.FD)(ez.S,{row:!0,gap:8,children:[t.icon,(0,p.Y)(eW.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,p.Y)(ez.S,{css:[eC.wp.flex.shrink(1)],children:(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(s3.A,{}),text:mj.markAsRead,onClick:z,css:{span:eC.wp.flex.shrink(1)}})})]})]})}),0===s.length?(0,p.Y)(me.A,{pane:{type:"threadInbox"},maxWidth:450,bodyText:(0,p.FD)(p.FK,{children:[mj.empty.noThreadsCreated.text.primary,j?(0,p.FD)(p.FK,{children:[(0,p.Y)("br",{}),mj.empty.noThreadsCreated.text.secondary(j)]}):void 0]})}):(0,p.Y)(p.FK,{children:Object.keys(H).length>0?(0,p.Y)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.overflowY("auto"),eC.wp.scrollbar.thin],children:Object.keys(H).map(function(e,n){return(0,p.Y)(m4,{path:e||"-",threads:Object.values(H)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&$(e)}},e)})}):(0,p.Y)(me.A,{pane:{type:"threadInbox"},maxWidth:450,asciiArt:"Binoculars",headerText:mj.empty.noThreadsFound.text.primary,bodyText:mj.empty.noThreadsFound.text.secondary})})]})})};var ve=n6.ZU.Object({type:n6.ZU.Literal("chat")}),vn=t(89715),vt=(0,tG.AH)([eC.wp.flex.growAndShrink(1)]),vr={Content:function(e){var n=e.options;return(0,p.Y)(eD.ui,{background:"default",css:vt,children:(0,p.Y)(m9,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.blueStronger,size:n},children:(0,p.Y)(vn.A,{})})},getTitle:function(){return"Chat"},description:"Chat with collaborators in this Repl",category:Q.bY.Collaboration,decode:function(e){return n9.WT.Decode(ve,e)}},vo=t(18039),vi={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,o=e.pane.data.autoFocus,i=(0,en.Fr)(),a=(0,h.useRef)(null);(0,ec.HP)(function(){return{focus:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.call(a)}}},[]);var l=(0,h.useCallback)(function(e){t({operation:"replace",pane:e.pane}),i(r),(0,z.u4)(z.AZ.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,i]),s=ey({currentPaneId:r,openPane:l});return(0,p.Y)(eR.r,{autoFocus:o,command:s,focusRef:a,showToolDescriptions:!0})},Icon:function(){return null},getTitle:function(){return"New tab"},category:Q.bY.Other,decode:vo.D},va=t(26681),vl=t(14965),vs=t(30542),vc={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,o=e.pane.flow,i=(0,en.zL)(),a=i.isOpen,l=i.toggle,s=(0,h.useCallback)(function(){a.current||l()},[a,l]);return(0,p.Y)(vl.A,{flow:o,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:va.A,openSidebar:s,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,p.Y)(os.A,{})},getTitle:function(){return"Configure Repl"},category:Q.bY.WorkspaceFeatures,decode:vs.D},vu=t(63423),vd=t(22824),vp=(0,eA.x)({initialBreakpoint:[eC.wp.display.inlineBlock,eC.wp.backgroundColor.accentPrimaryDefault,eC.wp.borderRadius("full"),eC.wp.width(8),eC.wp.height(8)],breakpoint:[eC.wp.display.flex,eC.wp.maxWidth("100%"),eC.wp.align.center],frame:[eC.wp.display.flex,eC.wp.align.center,eC.wp.color.foregroundDimmer,eC.wp.borderRadius(4),eC.wp.fontSize("default"),{flex:"1 1 auto",height:tB.LU.space32,cursor:"pointer","&:hover":{backgroundColor:tB.LU.backgroundHigher,color:tB.LU.foregroundDefault},".frameButton":{opacity:0},"&:focus-within":{color:tB.LU.foregroundDefault},"&:hover .frameButton":{background:tB.LU.backgroundHigher,backgroundColor:tB.LU.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:tB.LU.backgroundHighest}}],circle:[eC.wp.backgroundColor.accentPrimaryDefault,eC.wp.borderRadius("full"),eC.wp.width(11),eC.wp.height(11),eC.wp.mx(8),{flex:"0 0 auto",opacity:.5,'&[data-verified="true"]':{opacity:1}}],line:[eC.wp.font.code,eC.wp.backgroundColor.backgroundHigher,eC.wp.borderRadius(2),{padding:"1px 2px"}],location:[eC.wp.font.code,eC.wp.display.flex,eC.wp.minWidth(0),eC.wp.fontSize("default"),eC.wp.px(8),{flex:"1 1 auto"}],path:[eC.wp.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function vf(e){var n=[],t=!0,r=!1,o=void 0;try{for(var i,a=e.breakpoints[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=(0,d._)(i.value,2),s=l[0],c=l[1],u=!0,f=!1,h=void 0;try{for(var g,m=c[Symbol.iterator]();!(u=(g=m.next()).done);u=!0){var v=g.value;n.push((0,p.Y)(vh,{breakpoint:v,file:s,line:v.line,verified:v.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(s,":").concat(v.line,":").concat(v.pid1Id,":").concat(v.dapId)))}}catch(e){f=!0,h=e}finally{try{u||null==m.return||m.return()}finally{if(f)throw h}}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return(0,p.FD)(p.FK,{children:[(0,p.Y)(dp.A,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,p.Y)(mv.T,{align:"stretch",constrainWidth:!0,children:n}):(0,p.FD)(eW.EY,{variant:"small",color:"dimmer",children:["To start, add a breakpoint ",(0,p.Y)("span",{css:vp.initialBreakpoint})," by clicking on a line number in the code editor."]})]})}function vh(e){var n=e.breakpoint,t=e.file,r=e.line,o=e.verified,i=e.onClick,a=e.onRemove,l=(0,vd.H$)(t);return(0,p.Y)(p.FK,{children:(0,p.Y)(mv.T,{spacing:1,align:"stretch",children:(0,p.Y)("div",{css:vp.breakpoint,children:(0,p.FD)("div",{css:vp.frame,onClick:function(){i(t,r)},children:[(0,p.Y)("div",{css:vp.circle,"data-verified":o}),(0,p.Y)("div",{css:vp.line,children:r}),(0,p.Y)("div",{css:vp.location,children:(0,p.Y)("span",{css:vp.path,children:l||t})}),(0,p.Y)(t7.K0,{className:"frameButton",alt:"Remove breakpoint",onClick:function(){a({breakpoint:n})},children:(0,p.Y)(oN.A,{})})]})})})})}function vg(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M5.47 12.53a.75.75 0 0 1 0-1.06l5-5a.75.75 0 1 1 1.06 1.06L7.06 12l4.47 4.47a.75.75 0 1 1-1.06 1.06l-5-5Zm12 5-5-5a.75.75 0 0 1 0-1.06l5-5a.75.75 0 1 1 1.06 1.06L14.06 12l4.47 4.47a.75.75 0 1 1-1.06 1.06Z",clipRule:"evenodd"})}))}function vm(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M18.53 12.53a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06L16.94 12l-4.47 4.47a.75.75 0 1 0 1.06 1.06l5-5Zm-12 5 5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 0 0-1.06 1.06L9.94 12l-4.47 4.47a.75.75 0 1 0 1.06 1.06Z",clipRule:"evenodd"})}))}var vv=t(9735);function vw(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M3.47 9.53a.75.75 0 0 1 0-1.06l5-5a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1-1.06 1.06L9.75 5.81V16A3.25 3.25 0 0 0 13 19.25h7a.75.75 0 0 1 0 1.5h-7A4.75 4.75 0 0 1 8.25 16V5.81L4.53 9.53a.75.75 0 0 1-1.06 0Z",clipRule:"evenodd"})}))}function vy(e){var n=e.client,t=e.debugConfig,r=(0,oj.A)(null==n?void 0:n.state),o=(0,oj.A)(null==n?void 0:n.supportsStepBack);return(0,p.FD)(ez.S,{row:!0,gap:2,children:[o?(0,p.FD)(p.FK,{children:[(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"lastBreakpoint"}),null==n||n.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,p.Y)(vg,{})}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"stepBack"}),null==n||n.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,p.Y)(vv.A,{})})]}):null,(0,p.Y)(vS,{stop:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"stop"}),null==n||n.stop()},start:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"start"}),null==n||n.start(t)},state:r}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"nextStep"}),null==n||n.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,p.Y)(ci.A,{})}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"skipStep"}),null==n||n.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,p.Y)(vw,{rotate:90})}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"nextBreakpoint"}),null==n||n.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,p.Y)(vm,{})})]})}var vb=(0,tG.i7)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function vS(e){var n=e.state,t=e.start,r=e.stop;return"terminated"===n?(0,p.Y)(t7.K0,{css:eC.wp.color.accentPrimaryDefault,size:40,onClick:t,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,p.Y)(sf.A,{})}):"stopping"===n||null===n?(0,p.Y)(t7.K0,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,p.Y)(sp.A,{})}):(0,p.Y)(t7.K0,{css:"initializing"===n||"preinitializing"===n?[eC.wp.color.foregroundDimmer,{animationName:vb.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:eC.wp.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,p.Y)(sh.A,{})})}function vY(){return(0,p.Y)(me.A,{pane:{type:"debugger"},headerText:"Debugger is unavailable for this Repl",bodyText:" We are working on making more features configurable and the debugger available for more languages. Please check back again in the future. Meanwhile, if you're working on a website, be sure to check out our Devtools in the Webview pane. ",asciiArt:"Computer"})}function vx(e){var n=e.client;return(0,p.Y)(eH.$n,{size:"small",variant:"outlined",onClick:function(){return function(e){if("undefined"!=typeof Blob){var n=new Blob([e],{type:"text/plain"}),t=document.createElement("a");t.download="debugger-logs.txt",t.href=URL.createObjectURL(n),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(function(){URL.revokeObjectURL(t.href)},1500)}}(n.getDebugLogs())},text:"Download Logs",iconLeft:(0,p.Y)(t9.A,{})})}var v_=t(82845);function vA(e){return(0,p.FD)(p.FK,{children:[(0,p.Y)(dp.A,{truncate:!0,level:5,children:"Call stack"}),(0,p.Y)(mv.T,{align:"stretch",constrainWidth:!0,children:e.frames.map(function(n){return(0,p.Y)(vk,{frame:n,onClick:e.onFrameClick},n.id)})})]})}var vC=(0,tG.AH)({"&":{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"100%",height:tB.LU.space32,cursor:"pointer",color:tB.LU.foregroundDimmer,borderRadius:tB.LU.borderRadius4,fontSize:tB.LU.fontSizeSmall,fontFamily:tB.LU.fontFamilyCode},"&:hover":{backgroundColor:tB.LU.backgroundHigher,color:tB.LU.foregroundDefault},".label":{fontSize:tB.LU.fontSizeDefault,paddingLeft:tB.LU.space8,paddingRight:tB.LU.space8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".name":{flex:"0 0 auto",backgroundColor:tB.LU.backgroundHigher,padding:"1px 2px",borderRadius:"2px"},".path":{flex:"0 1 auto"},".line":{display:"inline-block",marginRight:tB.LU.space8,backgroundColor:tB.LU.backgroundHigher,padding:"1px 2px",borderRadius:"2px"}});function vk(e){var n,t,r=e.frame,o=e.onClick,i=null===(n=r.source)||void 0===n?void 0:n.name,a=null===(t=r.source)||void 0===t?void 0:t.path,l=i&&(0,vd.H$)(i),s=a&&(0,vd.H$)(a),c=a&&(0,vd.f_)(a);return(0,p.Y)(p.FK,{children:(0,p.FD)("div",{className:"frame",onClick:function(){return c&&o(c,r.line)},css:vC,children:[(0,p.Y)("div",{className:"label name",children:r.name}),(0,p.FD)("div",{className:"label path",children:[(0,p.Y)("span",{className:"line",children:r.line}),l||s||i||a]})]})})}var vD=t(54061),vR=t(84911),vE=(0,eA.x)({root:[eC.wp.height("100%"),eC.wp.width("100%"),eC.wp.p(8),eC.wp.overflow("auto"),eC.wp.colWithGap(8),{a:{fontSize:tB.LU.fontSizeDefault,color:tB.LU.accentPrimaryDefault,fontWeight:tB.LU.fontWeightMedium}}],mainContainer:[eC.wp.flex.grow(1),eC.wp.colWithGap(16)],downloadLogsContainer:[eC.wp.flex.grow(0),eC.wp.flex.row,eC.wp.justify.end]});function vI(e){var n=(0,vR.c)(),t=(0,et.A)().debuggest,r=(0,oj.A)(t.mainClient),o=(0,oj.A)(r?r.state:null),i=(0,oj.A)(r?r.stackFrames:null),a=(0,oj.A)(r?r.variables:null),l=(0,oj.A)(r?r.breakpoints:null),s=(0,t8.rM)(),c=(0,eu.L2)(),u=(0,vu.I)(),f=null!=u&&!!u.debuggers&&u.debuggers.length>0,g=(0,d._)((0,h.useState)(null),2),m=g[0],v=g[1],w=(0,h.useMemo)(function(){return function(e,n,t,r){if(!(null==e?void 0:e.debuggers))return[];var o=[];if(n=n.slice(),r&&-1===n.indexOf(r)&&n.splice(0,0,r),t){var i=n.indexOf(t);-1!==i&&(n.splice(i,1),n.splice(0,0,t))}var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var g,m=e.debuggers[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=g.value;if(v.fileParam){var w=(0,v_.Z)(v.fileTypeAttrs);null===w&&v.language&&(w=v_.Jh.from(v.language)),w&&(0,v_.$h)(d,w)&&o.push({debuggerOption:v,filePath:d,title:"Debug ".concat(d," (").concat(v.name,")")})}}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var y=!0,b=!1,S=void 0;try{for(var Y,x=e.debuggers[Symbol.iterator]();!(y=(Y=x.next()).done);y=!0){var _=Y.value;_.fileParam||o.push({debuggerOption:_,title:"Debug (".concat(_.name,")")})}}catch(e){b=!0,S=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw S}}return o}(u||null,c,s,(null==u?void 0:u.entrypoint)||"")},[s,c,u]);(0,h.useEffect)(function(){(w.length>0&&!m||m&&!w.find(function(e){return e.debuggerOption.id===m.debuggerOption.id&&e.filePath===m.filePath}))&&v(w[0])},[w]);var y=function(n,t){var r=(0,vd.H$)(n);r&&e.onOpenFile({path:r,line:t})};return f?(0,p.FD)(ez.S,{css:vE.root,children:[(0,p.FD)(ez.S,{css:vE.mainContainer,children:[w.length>0&&(0,p.Y)(tD.l,{id:n("debug-config"),items:w,selectedItem:m,onChange:function(e){v(e)},"aria-label":"Select a debugging configuration"}),(0,p.Y)(vy,{client:r,debugConfig:null!=m?m:void 0}),null!=l?(0,p.Y)(vf,{breakpoints:l,onBreakpointClick:y,onRemove:function(e){var n=e.breakpoint;r&&n.pid1Id&&r.removeBreakpoint(n.pid1Id)}}):null,null!=a&&r&&"paused"===o?(0,p.Y)(vD.A,{client:r,variables:a}):null,null!=i&&"paused"===o?(0,p.Y)(vA,{frames:i,onFrameClick:y}):null]}),null!=r?(0,p.Y)(ez.S,{css:vE.downloadLogsContainer,children:(0,p.Y)(vx,{client:r})}):null]}):(0,p.Y)(vY,{})}var vU=n6.ZU.Object({type:n6.ZU.Literal("debugger")});function vF(e){return(0,p.Y)(t$.Ay,(0,e8._)((0,g._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M21 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75ZM3.75 5.292v13.416L15.488 12 3.75 5.292Zm-1.5-.43a1.25 1.25 0 0 1 1.87-1.086l12.492 7.139c.84.48.84 1.69 0 2.17L4.12 20.224a1.25 1.25 0 0 1-1.87-1.086V4.862Z",clipRule:"evenodd"})}))}var vP={Content:function(e){var n=e.options;return(0,p.Y)(vI,{onOpenFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})}})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.orangeStronger,size:n},children:(0,p.Y)(vF,{})})},getTitle:function(){return"Debugger"},description:"Step through your code as it runs to inspect its execution, test its behavior, and fix bugs",category:Q.bY.WorkspaceFeatures,decode:function(e){return n9.WT.Decode(vU,e)}},vT=t(85304),vO=(0,tG.AH)([eC.wp.border({color:tB.LU.outlineDimmest,width:1,style:"solid"}),eC.wp.width("100%"),eC.wp.height("100%"),eC.wp.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),vL={Content:function(e){var n,t=e.pane;return(0,p.Y)(eD.ui,{css:vO,children:(0,p.Y)("iframe",{title:"Replit Docs",src:(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.url)||eL.ik.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.yellowStrongest,size:n},children:(0,p.Y)(tx.A,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:Q.bY.Other,decode:vT.D},vN=t(10524),vM=(0,tG.AH)([eC.wp.backgroundColor.backgroundDefault,eC.wp.height("100%"),eC.wp.borderRadius(4),{overflow:"hidden"}]),vG=(0,tG.AH)([eC.wp.width("100%"),eC.wp.height("100%"),eC.wp.justify.center,eC.wp.align.center,eC.wp.display.flex]);function vB(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,o=(0,e5.Z_)(t.installationId),i=(0,e5.X_)(t.installationId),a=tw({extension:o,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,e3.sU)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,s=a.isValidExtensionPaneUrl,c=a.getIframeProps,u=a.reloadSandbox;return(0,ec.Qt)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:K.G2,data:{icon:(0,p.Y)(ob.A,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){u()}}}]}]}},[u]),(0,p.Y)(ez.S,{className:"extension-pane",css:vM,children:i&&l?(0,p.Y)(p.FK,{children:s()?(0,p.Y)("iframe",(0,g._)({},c({css:{width:"100%",height:"100%",border:"none"}}))):(0,p.Y)(ez.S,{css:[eC.wp.p(12)],children:(0,p.FD)(eW.EY,{children:["Invalid url:"," ",(0,p.Y)(vN.R,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,p.Y)(ez.S,{css:vG,children:(0,p.Y)(sp.A,{})})})}var vH=n6.ZU.Object({extensionId:n6.ZU.Unsafe(n6.ZU.String()),installationId:n6.ZU.Unsafe(n6.ZU.String()),baseUrl:n6.ZU.String(),path:n6.ZU.String(),name:n6.ZU.String(),filePath:n6.ZU.Optional(n6.ZU.Union([n6.ZU.String(),n6.ZU.Null(),n6.ZU.Undefined()])),icon:n6.ZU.Optional(n6.ZU.Union([n6.ZU.String(),n6.ZU.Null(),n6.ZU.Undefined()]))}),vW=n6.ZU.Object({type:n6.ZU.Literal("extension"),data:vH}),vz={Content:function(e){var n=e.pane,t=e.options,r=e0();return(0,p.Y)(vB,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,p.Y)(rb.A,{src:(0,e3.sU)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,p.Y)(t_.A,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" â€” "+e.data.name:e.data.name},category:Q.bY.WorkspaceExtensions,decode:function(e){return n9.WT.Decode(vW,e)}},v$=t(6801),vj=t(17751),vq=t(96057),vK=t(14089),vZ=t(69771);function vV(){var e=(0,m._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return vV=function(){return e},e}function vJ(){var e=(0,m._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return vJ=function(){return e},e}var vQ={},vX=(vV(),(0,v.J1)(vJ())),v0=t(79653),v1=(0,eA.x)({codeBlock:[eC.wp.p(8),eC.wp.borderRadius(8),eC.wp.position.relative],codeBlockCopyButton:[eC.wp.position.absolute,eC.wp.top(4),eC.wp.right(4)],selectionContainer:[eC.wp.maxHeight(400),eC.wp.overflowY("scroll")],fsNode:[eC.wp.flex.row,eC.wp.rowWithGap(8),eC.wp.align.center,eC.wp.px(4),eC.wp.py(2),eC.wp.borderRadius(8),eC.wp.cursor.pointer],fsNodeActive:[eC.wp.backgroundColor.backgroundHigher]});function v2(e){var n=e.content,t=(0,eK.A)().showConfirm;return(0,p.FD)(eD.ui,{tag:"code",elevated:!0,css:v1.codeBlock,children:[n,(0,p.Y)(t7.K0,{alt:"Copy",tooltipBehavior:"hidden",css:v1.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,p.Y)(rY.A,{})})]})}function v5(e){var n,t=e.glob,r=e.openFile,o=e.children,i=(0,d._)((0,h.useState)([]),2),a=i[0],l=i[1],s=(0,d._)((0,h.useState)(""),2),c=s[0],u=s[1],f=(0,vR.c)(),m=(0,et.A)().fs,v=(0,tb.s_)(),w=(0,h.useMemo)(function(){return(0,rf.tL)(t)},[t]);return((0,h.useEffect)(function(){w&&m.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(w)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[w,v]),w)?(0,p.FD)(ez.S,{css:v1.selectionContainer,gap:16,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:(0,p.FD)(ez.S,{gap:12,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Choose an image"}),v?(0,p.Y)(u4.N,{icon:(0,p.Y)(v0.A,{}),colorway:"primary",text:(0,p.FD)(ez.S,{gap:2,children:[(0,p.FD)(eW.EY,{children:["Images must be served from"," ",(0,p.Y)("span",{css:[eC.wp.font.code,eC.wp.backgroundColor.accentPrimaryDimmer,eC.wp.borderRadius(4),eC.wp.px(4),eC.wp.py(2),eC.wp.mr(2),eC.wp.border({color:tB.LU.accentPrimaryDefault})],children:v.path}),"."]}),(0,p.Y)(eW.EY,{css:[eC.wp.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,p.FD)(eW.EY,{css:[eC.wp.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,p.Y)("span",{css:[eC.wp.font.code,eC.wp.fontSize("small"),eC.wp.backgroundColor.backgroundHigher,eC.wp.borderRadius(4),eC.wp.px(4),eC.wp.py(2),eC.wp.mr(2),eC.wp.border({color:tB.LU.outlineDefault})],children:null===(n=t.match(/\{(.*)\}/))||void 0===n?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),o,(0,p.Y)(mE.Ay,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,o=e.highlightedIndex,i=e.getRootProps,l=e.getMenuProps;return(0,p.FD)(ez.S,(0,e8._)((0,g._)({},i({refKey:"innerRef"})),{gap:16,children:[(0,p.Y)(ez.S,{css:[eC.wp.position.relative],children:(0,p.Y)(m3.pd,(0,g._)({id:f("file-search")},n({ref:null,value:c,onChange:function(e){return u(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,p.Y)(ez.S,{children:a&&a.length?(0,p.Y)(ez.S,(0,e8._)((0,g._)({elevated:!0,tag:"ul",css:(eC.wp.pt(8),eC.wp.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(c)}).filter(function(e){return!v||e.path.startsWith(v.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,p.FD)(ez.S,(0,e8._)((0,g._)({tag:"li",css:[v1.fsNode,n===o&&v1.fsNodeActive]},r({item:e,index:n,disabled:!!v&&!e.path.startsWith(v.relativePath)})),{children:[(0,p.Y)(ep.A,{path:e.path,size:16}),(0,p.Y)(eW.EY,{children:e.filename}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,p.Y)(ez.S,{css:[eC.wp.pt(8)],children:(0,p.Y)(eW.EY,{color:"dimmer",children:(0,p.FD)("em",{children:["No files found matching ",(0,p.Y)("code",{children:t})]})})})})]}))}})]}):(0,p.FD)(ez.S,{css:[eC.wp.flex.column,eC.wp.colWithGap(16)],children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,p.FD)(eW.EY,{children:["The glob pattern ",(0,p.Y)("code",{children:t})," could not be parsed."]}),(0,p.Y)(ez.S,{css:eC.wp.border({direction:"bottom",color:tB.LU.backgroundHigher})}),(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:"Match all Javascript Files"})}),(0,p.Y)(v2,{content:"**/*.js"})]}),(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:"Match JSON files at root level"})}),(0,p.Y)(v2,{content:"*.json"})]}),(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:"Match specified file extensions"})}),(0,p.Y)(v2,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var v4=t(91918),v3=function(e){return e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success",e}(v3||{}),v8={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function v7(e){var n,t=e.isOpen,r=e.close,o=e.onSubmit,i=(0,tS.mN)(),a=(0,tS.FS)(),l=(0,d._)((0,h.useState)(null),2),s=l[0],c=l[1],u=(0,d._)((0,h.useState)(!0),2),f=u[0],g=u[1],m=(0,d._)((0,h.useState)(null),2),v=m[0],w=m[1],y=(0,d._)((0,h.useState)(null),2),b=y[0],S=y[1],Y=(0,h.useRef)(null),x=(0,d._)((0,h.useState)(null),2),_=x[0],A=x[1],C=(0,d._)((0,h.useState)(null),2),k=C[0],D=C[1],R=(b||k||"").startsWith("/")?b||k:"/"+(b||k),E=(0,d._)((0,h.useState)(null),2),I=E[0],U=E[1],F=function(){D(null),c(null),S(null),A(null),U(null),w(null)},P=function(){g(!0),c(null)};(0,h.useEffect)(function(){S(k)},[k]);var T=(0,h.useCallback)((n=(0,G._)(function(e){var n,t,r,o;return(0,B.YH)(this,function(l){switch(l.label){case 0:var u;if(!R||!f||"Success"===s||"Failed"===s)return[2];if(u=(0,G._)(function(e,n){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:return c("Loading"),w(t=(0,e3.sU)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return U(n),c("Success"),g(!1),[2,!0];return[2,!1]}})}),n=function(e,n){return u.apply(this,arguments)},t=e||a)return[3,8];c("Installing"),l.label=1;case 1:return l.trys.push([1,5,,8]),[4,i()];case 2:if(!(r=l.sent()))return[3,4];return[4,T(r)];case 3:case 6:return l.sent(),[2];case 4:case 7:return[3,8];case 5:if(l.sent(),!a)return[3,7];return[4,T(a)];case 8:if(!t)return[3,11];return o=R.replace(/^(\/public|\/static)/,""),[4,n(t,o.slice(1))];case 9:if(l.sent())return[3,11];return[4,n(t,R)];case 10:l.sent(),l.label=11;case 11:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,R,i,s,f]);(0,h.useEffect)(function(){if(_){var e=_.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});D((-1!==t?"/".concat(_):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||_),g(!0),T()}},[T,_]);var O=_?_.split("/"):[],L=O[O.length-1];return(0,p.Y)(ek.a,{isOpen:t,onRequestClose:r,children:_?(0,p.FD)(ez.S,{css:[eC.wp.flex.column,eC.wp.colWithGap(16)],children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eH.$n,{text:"Back",size:"small",iconLeft:(0,p.Y)(vv.A,{}),onClick:function(){A(null),F()}}),(0,p.FD)(ez.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(v4.A,{}),(0,p.Y)(eW.EY,{color:"dimmer",children:L||""})]})]}),(0,p.Y)(eW.EY,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,p.FD)(ez.S,{gap:4,children:[(0,p.Y)(m3.pd,{defaultValue:b||"",ref:Y,placeholder:"/icon.png",onChange:function(e){return S(e.target.value)},autoFocus:!0,disabled:"Loading"===s||"Installing"===s||"Success"===s}),v&&("Loading"===s||"Success"===s||"Failed"===s)?(0,p.Y)("a",{href:v,target:"_blank",children:(0,p.FD)(eW.EY,{color:"dimmer",variant:"small",css:[eC.wp.rowWithGap(4),eC.wp.display.flex,{fontStyle:"italic"}],children:[(0,p.FD)("span",{css:[eC.wp.truncate],children:["Loading"===s?"Checking ":null,"Success"===s?"Found at ":null,"Failed"===s?"Failed to load ":null,v]}),(0,p.Y)(ez.S,{css:[eC.wp.display.inlineBlock],children:(0,p.Y)(om.A,{})})]})}):null]}),(0,p.FD)(ez.S,{row:!0,justify:"space-between",align:"center",children:[(0,p.Y)(ez.S,{row:!0,gap:4,align:"center",children:s?(0,p.Y)(p.FK,{children:"Loading"===s?(0,p.Y)(sp.A,{}):(0,p.Y)(u4.N,{text:v8[s],colorway:"Failed"===s?"negative":"positive",icon:"Failed"===s?(0,p.Y)(cB.A,{}):(0,p.Y)(s3.A,{})})}):null}),"Failed"===s?(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{text:"Add Anyways",onClick:function(){var e=k||_;null!==e&&o(e),F(),r()},size:"small"}),(0,p.Y)(eH.$n,{text:"Try Again",onClick:function(){P()},size:"small"})]}):null,I&&"Success"===s?(0,p.Y)(eH.$n,{text:"Continue",iconLeft:(0,p.Y)(s3.A,{}),colorway:"primary",onClick:function(){o(I),F(),r()}}):null]})]}):(0,p.Y)(v5,{openFile:A,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var v6=(0,eA.x)({centerRowGap8:[eC.wp.rowWithGap(8),eC.wp.align.center],featureContainer:[eC.wp.flex.column,eC.wp.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[eC.wp.border({style:"dashed"}),eC.wp.borderRadius(8),eC.wp.p(16),eC.wp.colWithGap(8),eC.wp.center],featureDetails:[eC.wp.flex.column,eC.wp.colWithGap(4),eC.wp.flex.growAndShrink(1)],newFeatureFieldWrapper:[eC.wp.p(8),eC.wp.flex.row,eC.wp.rowWithGap(8),eC.wp.align.center,eC.wp.justify.spaceBetween,eC.wp.border({direction:"bottom",color:tB.LU.backgroundHighest})],inputCounterFlex:[eC.wp.flex.row,eC.wp.justify.spaceBetween,eC.wp.align.center]});function v9(e){var n=e.features,t=e.onCreate,r=e.onUpdate,o=e.onDelete,i=(0,d._)((0,h.useState)([]),2),a=i[0],l=i[1],s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1];return(0,p.FD)(ez.S,{children:[(0,p.FD)(ez.S,{css:eC.wp.pb(12),children:[(0,p.FD)(ez.S,{css:v6.centerRowGap8,children:[(0,p.FD)(ez.S,{css:v6.centerRowGap8,children:[(0,p.Y)(hD.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,p.Y)(t7.K0,{onClick:function(){u(!c)},alt:"Add a new Feature",tooltipBehavior:c?"hidden":"default",disabled:c,children:(0,p.Y)(eg.A,{})})]}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,p.FD)(ez.S,{gap:8,children:[c?(0,p.Y)(wn,{onSubmit:function(e){t(e),u(!1)},onCancel:function(){return u(!1)}}):null,(0,p.Y)(ez.S,{css:v6.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,p.Y)(wn,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,p.Y)(we,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,M._)(e).concat([t])})},onDelete:function(){o(t)}},t)}):(0,p.Y)(p.FK,{children:c?null:(0,p.FD)(ez.S,{css:v6.noFeaturesPlaceholder,children:[(0,p.Y)(eW.EY,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,p.Y)(eH.$n,{variant:"outlined",text:"New Feature",iconLeft:(0,p.Y)(eg.A,{}),onClick:function(){return u(!0)}})]})})})]})]})}function we(e){var n=e.feature,t=e.onEdit,r=e.onDelete,o=e.isLast;return(0,p.FD)(eD.ui,{elevated:!0,css:[eC.wp.flex.row,eC.wp.rowWithGap(8),eC.wp.align.center,eC.wp.p(8),o?null:eC.wp.border({direction:"bottom",color:tB.LU.backgroundHighest})],children:[(0,p.Y)(wt,{size:64,icon:n.image}),(0,p.FD)(ez.S,{css:v6.featureDetails,children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,p.Y)(eW.EY,{children:n.title}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(t7.K0,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,p.Y)(rD.A,{color:tB.LU.accentNegativeStronger})}),(0,p.Y)(t7.K0,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,p.Y)(rx.A,{})})]})]}),(0,p.Y)(eW.EY,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function wn(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,o=e.isLast,i=(0,d._)((0,h.useState)((null==r?void 0:r.title)||""),2),a=i[0],l=i[1],s=(0,d._)((0,h.useState)((null==r?void 0:r.body)||""),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)((null==r?void 0:r.image)||null),2),g=f[0],m=f[1],v=a.length>=3&&c.length>=16;return(0,p.FD)(eD.ui,{css:[eC.wp.flex.column,o||r?null:eC.wp.borderRadius(8),r?eC.wp.border({color:tB.LU.outlineDefault}):[o?null:eC.wp.border({direction:"bottom",color:tB.LU.backgroundHighest})]],elevated:!0,children:[(0,p.FD)(ez.S,{css:v6.newFeatureFieldWrapper,children:[(0,p.Y)(eW.EY,{children:a||"New Feature"}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{text:"Cancel",onClick:t}),(0,p.Y)(eH.$n,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:c,image:g})},disabled:!v})]})]}),(0,p.FD)(ez.S,{css:[eC.wp.p(8),eC.wp.colWithGap(8)],children:[(0,p.FD)(ez.S,{gap:4,children:[(0,p.FD)(ez.S,{css:v6.inputCounterFlex,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:"Title"}),(0,p.Y)(wr,{value:a.length,min:3})]}),(0,p.Y)(m3.pd,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,p.FD)(ez.S,{gap:4,children:[(0,p.FD)(ez.S,{css:v6.inputCounterFlex,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:"Body"}),(0,p.Y)(wr,{value:c.length,min:16})]}),(0,p.Y)(m3.ov,{value:c,onChange:function(e){return u(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.FD)(ez.S,{gap:4,css:[eC.wp.flex.growAndShrink(1)],children:[(0,p.Y)(eW.EY,{color:"dimmer",children:"Image (Recommended)"}),(0,p.Y)(eW.EY,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,p.Y)(wt,{size:100,icon:g,editable:!0,onSubmit:function(e){m(e)}})]})]})]})}function wt(e){var n=e.size,t=e.icon,r=e.editable,o=void 0!==r&&r,i=e.onSubmit,a=(0,et.A)().container,l=(0,e2.A)(a),s=l&&t?(0,e3.sU)(l,t):null,c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1];return(0,p.FD)(p.FK,{children:[(0,p.Y)(eD.ui,{background:"default",css:[o?sL.b.filledAndOutlined:null,eC.wp.flex.row,eC.wp.center,eC.wp.width(n),eC.wp.height(.75*n),eC.wp.maxWidth(n),eC.wp.maxHeight(.75*n),eC.wp.borderRadius(4),eC.wp.border({color:tB.LU.backgroundHighest}),eC.wp.flex.grow(1),{background:s?"".concat(tB.LU.backgroundDefault," url(").concat(s,") no-repeat center center / cover"):tB.LU.backgroundDefault}],onClick:function(){return f(!0)},children:s?null:(0,p.Y)(v4.A,{color:tB.LU.foregroundDimmest,size:24})}),o?(0,p.Y)(v7,{isOpen:u,close:function(){return f(!1)},onSubmit:function(e){null==i||i(e)}}):null]})}function wr(e){var n=e.value,t=e.min;return(0,p.FD)(eW.EY,{css:{color:n>=t?tB.LU.accentPositiveStronger:tB.LU.foregroundDimmest},children:[n,"/",t]})}var wo=t(20953),wi=function(){var e=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}(),wa={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},wl=function(){var e=(0,d._)((0,h.useState)(null),2),n=e[0],t=e[1],r=(0,h.useCallback)(function(e){t(function(n){if(!n)throw Error(wa.stateUndefined);return(0,e8._)((0,g._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},ws=function(){var e=(0,et.A)(),n=e.fs,t=e.dotReplit,r=wl(),o=r.state,i=r.setState,a=r.updateString,l=(0,d._)((0,h.useState)(0),2),s=l[0],c=l[1],u=(0,d._)((0,h.useState)(!1),2),p=u[0],f=u[1],m=(0,h.useCallback)((0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,wi(n)];case 1:return e.sent(),[2]}})}),[n]);(0,h.useEffect)(function(){i(null);var e=!1,r=function(){};function o(){return(o=(0,G._)(function(){var o,l,s,c,u,p,f;return(0,B.YH)(this,function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(s=(l=d._.apply(void 0,[h.sent(),2]))[0],c=l[1],e)return[2];if(!s.files||c.error)return i({fileReadError:wa.readFile}),[2];if(p=(0,tc.me)((0,wo.Fd)(null!==(u=null===(o=c.config.extension)||void 0===o?void 0:o.outputDirectory)&&void 0!==u?u:"dist")),!(f=function(e){var n,t=e.filePaths,r=e.outputDir,o=[],i=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if("extension.json"===u)return u;u.endsWith("/extension.json")&&o.push(u)}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,g=o[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if(!m.startsWith(r))return m}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return null!==(n=o[0])&&void 0!==n?n:null}({filePaths:s.files,outputDir:p})))return i({fileReadError:wa.noManifest}),[2];return r=n.watchTextFile(f,{onReady:function(e){i({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:f})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){i({fileReadError:wa.removedManifest})},onError:function(){i({fileReadError:wa.readFile})}}),[2]}})})).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){r(),e=!0}},[n,a,t,s,i]);var v=(0,h.useMemo)(function(){if(!o||null!==o.fileReadError)return null;try{var e=vj._3(o.manifestStr);return(0,e3.Kf)(e)}catch(e){return{error:e,manifest:null}}},[o]),w=(0,h.useCallback)(function(e){if(!o||(null==v?void 0:v.error)||null!==o.fileReadError)throw Error(wa.parseManifest);var n=vj.F6(o.manifestStr,e);o.writeChange((0,vq.s)(o.manifestStr,n)),a(n)},[o,v,a]),y={retry:function(){c(function(e){return e+1})},creatingExtensionJson:p,setCreatingExtensionJson:f,createExtensionJson:m,updateString:a,updateManifest:w};return o?"string"==typeof o.fileReadError?(0,e8._)((0,g._)({},y),{__status:"fileReadError",state:{fileReadError:o.fileReadError},parsed:null}):v?v.manifest?(0,e8._)((0,g._)({},y),{__status:"success",state:{fileReadError:null,writeChange:o.writeChange,manifestStr:o.manifestStr,manifestPath:o.manifestPath},parsed:v}):(0,e8._)((0,g._)({},y),{__status:"fileParseError",state:o,parsed:{manifest:null,error:v.error}}):(0,e8._)((0,g._)({},y),{__status:"fileReadError",state:{fileReadError:wa.noManifest},parsed:null}):(0,e8._)((0,g._)({},y),{__status:"loading",state:null,parsed:null})},wc=function(e){return e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success",e}({}),wu=function(){return(0,p.Y)(ez.S,{css:[eC.wp.display.flex,eC.wp.width("100%"),eC.wp.height("100%")],justify:"center",align:"center",children:(0,p.Y)(sp.A,{})})},wd=t(45038);function wp(e){var n=e.children;return(0,p.Y)(ez.S,{gap:12,css:[eC.wp.p(16)],children:(0,p.Y)(eD.ui,{elevated:!0,css:[eC.wp.p(16),eC.wp.borderRadius(8),eC.wp.colWithGap(8)],children:n})})}var wf=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,p.Y)(wp,{children:(0,p.FD)(ez.S,{gap:16,css:[eC.wp.p(8)],children:[(0,p.FD)(ez.S,{row:!0,gap:8,css:[eC.wp.display.flex,eC.wp.align.center],children:[(0,p.Y)(cB.A,{}),(0,p.Y)(eW.EY,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Details:"}),(0,p.Y)(ez.S,{gap:8,children:n instanceof wd.yk?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,p.FD)(ez.S,{css:[eC.wp.display.flex,eC.wp.flex.row,eC.wp.rowWithGap(4)],children:[(0,p.Y)(eW.EY,{css:[eC.wp.font.code,eC.wp.color.orangeStrongest,eC.wp.backgroundColor.orangeDimmest],children:t}),(0,p.Y)(eW.EY,{children:r})]},n)}):(0,p.Y)(ez.S,{tag:"pre",children:n.message})}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,rw.af)(r)})}}),(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(ps.A,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},wh=function(e){var n=e.message,t=ws(),r=t.createExtensionJson,o=t.creatingExtensionJson,i=t.retry,a=t.setCreatingExtensionJson;return(0,p.FD)(wp,{children:[(0,p.FD)(ez.S,{row:!0,gap:8,css:[eC.wp.display.flex,eC.wp.align.center],children:[(0,p.Y)(cB.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:n})]}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{colorway:"primary",text:"Create extension.json",loading:o,iconLeft:o?(0,p.Y)(sp.A,{}):(0,p.Y)(eg.A,{}),onClick:(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),i(),a(!1),[2]}})})}),(0,p.Y)(eH.$n,{text:"Retry",iconLeft:(0,p.Y)(ob.A,{}),onClick:function(){i()}})]})]})},wg=t(74547),wm=t(51914),wv=t(55011),ww=t(36541),wy=(0,eA.x)({iconContainer:[eC.wp.position.relative,eC.wp.width(64),eC.wp.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[eC.wp.flex.column,eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0)],iconOverlay:[eC.wp.flex.column,eC.wp.colWithGap(4),eC.wp.center,eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),eC.wp.width("100%"),eC.wp.height("100%"),eC.wp.backgroundColor.backgroundOverlay,eC.wp.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function wb(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,tS.FS)(),o=(0,tS.mN)(),i=(0,tS.WB)(),a=(0,tS.EF)(),l=(0,tb.HG)(),s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)(!1),2),g=f[0],m=f[1];return(0,p.Y)(ez.S,{css:[eC.wp.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,p.FD)(ez.S,{row:!0,gap:8,children:[r||g?(0,p.FD)(p.FK,{children:[(0,p.Y)(eH.$n,{size:"small",text:"Reload",iconLeft:g?(0,p.Y)(sp.A,{}):(0,p.Y)(ob.A,{}),disabled:g,onClick:(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];return m(!0),[4,i(r.installationId)];case 1:return e.sent(),m(!1),[2]}})})}),(0,p.Y)(eH.$n,{size:"small",text:"Unload",iconLeft:(0,p.Y)(o9.A,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,p.Y)(eH.$n,{size:"small",text:"Load locally",colorway:"primary",iconLeft:c?(0,p.Y)(sp.A,{}):(0,p.Y)(t9.A,{}),loading:c,onClick:(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return u(!0),[4,o()];case 1:return e.sent(),u(!1),[2]}})})}),l?(0,p.Y)(eH.$n,{size:"small",text:"View on Store",iconLeft:(0,p.Y)(ww.A,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,p.Y)(eH.$n,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,p.Y)(rx.A,{})})]})})}function wS(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,et.A)().container,o=(0,e2.A)(r),i=ws(),a=i.parsed,l=i.state,s=i.__status;if(s===wc.loading)return(0,p.Y)(wu,{});if(s===wc.fileReadError)return(0,p.Y)(wh,{message:l.fileReadError});var c=a.manifest,u=a.error;return u?(0,p.Y)(wf,{performPaneOperation:n,manifestPath:l.manifestPath,error:u}):(0,p.Y)(ez.S,{gap:16,css:[eC.wp.width("100%")],children:(0,p.FD)(eD.ui,{elevated:!0,css:[eC.wp.p(12),eC.wp.borderRadius(8),eC.wp.colWithGap(8)],children:[(0,p.FD)(ez.S,{row:!0,gap:16,align:"center",children:[(0,p.Y)(ez.S,{css:[eC.wp.flex.grow(0),eC.wp.display.flex,eC.wp.flex.row],children:(0,p.Y)(wm.B,{size:64,baseUrl:null!=o?o:null,icon:c.icon})}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1)],children:[(0,p.Y)(mv.z,{align:"center",justify:"space-between",children:(0,p.Y)(eW.EY,{variant:"subheadDefault",children:c.name})}),(0,p.Y)(eW.EY,{variant:"text",color:"dimmest",children:c.description})]})]}),(0,p.Y)(wb,{setSelectedTab:t,performPaneOperation:n})]})})}function wY(e){var n,t,r,o,i,a,l,s,c,u,f=e.manifest,m=e.onSubmit,v=e.updateManifest,y=(0,tb.HG)(),b=(0,eM.T)(),S=(0,vR.c)(),Y=(0,d._)((0,h.useState)(null!==(l=f.name)&&void 0!==l?l:""),2),x=Y[0],_=Y[1],A=(0,d._)((0,h.useState)(null!==(s=f.description)&&void 0!==s?s:""),2),C=A[0],k=A[1],D=(0,d._)((0,h.useState)(null!==(c=f.longDescription)&&void 0!==c?c:void 0),2),R=D[0],E=D[1],I=(0,d._)((0,h.useState)(!1),2),U=I[0],F=I[1],P=(0,et.A)().container,T=(0,e2.A)(P),O=(n={variables:{id:y||""},skip:!y},t=(0,g._)({},vQ,n),w.I(vX,t)),L=O.data,N=O.loading,G=O.refetch,B=(0,d._)((0,vZ.$I)(),2),H=B[0],W=B[1].loading,z=(null==L?void 0:null===(r=L.extension)||void 0===r?void 0:r.__typename)==="Extension"&&(null==L?void 0:null===(o=L.extension)||void 0===o?void 0:o.user.id)===b,$=(null==L?void 0:null===(i=L.extension)||void 0===i?void 0:i.__typename)==="Extension"&&(null==L?void 0:null===(a=L.extension)||void 0===a?void 0:a.isListed);return(0,p.FD)(ez.S,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),m({name:x,description:C,longDescription:R})},children:[(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(4)],children:[(0,p.Y)(eW.EY,{css:[eC.wp.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),N||W?(0,p.Y)(sp.A,{}):(0,p.FD)(wg.z,{css:eC.wp.colWithGap(8),name:"extensionListingStatus",value:$?"listed":"unlisted",disabled:!z,onChange:function(e){H({variables:{extensionId:y||"",isListed:"listed"===e.target.value}}).then(function(){return G()})},children:[z?null:(0,p.Y)(ez.S,{css:[eC.wp.width("fit-content")],children:(0,p.Y)(u4.N,{text:"You need to release this extension before listing it.",icon:(0,p.Y)(v0.A,{}),colorway:"yellow"})}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(wg.s,{id:S("listed"),value:"listed"}),(0,p.Y)("label",{htmlFor:S("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(wg.s,{id:S("unlisted"),value:"unlisted"}),(0,p.Y)("label",{htmlFor:S("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,p.Y)(i2.a,{}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(4)],tag:"label",htmlFor:S("name"),children:[(0,p.Y)(eW.EY,{children:"Extension Name"}),(0,p.Y)(m3.pd,{id:S("name"),placeholder:"Give your extension a name",value:x,onChange:function(e){_(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(4)],children:[(0,p.Y)(eW.EY,{children:"Extension Icon"}),(0,p.FD)(ez.S,{row:!0,gap:12,align:"center",children:[(0,p.FD)(ez.S,{css:wy.iconContainer,children:[(0,p.Y)(ez.S,{css:wy.iconWrapper,children:(0,p.Y)(wm.B,{size:64,baseUrl:null!=T?T:null,icon:f.icon})}),(0,p.FD)(ez.S,{css:wy.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return F(!0)},children:[(0,p.Y)(rx.A,{}),(0,p.Y)(eW.EY,{variant:"small",children:"Edit"})]})]}),(0,p.Y)(eH.$n,{text:"Choose from file system",iconLeft:(0,p.Y)(wv.A,{}),onClick:function(){return F(!0)}})]})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(4)],tag:"label",htmlFor:S("tagline"),children:[(0,p.FD)(ez.S,{gap:0,children:[(0,p.Y)(eW.EY,{children:"Tagline"}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,p.Y)(m3.pd,{id:S("tagline"),placeholder:"Give your extension a short tagline",value:C,onChange:function(e){k(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(4)],tag:"label",htmlFor:S("longDescription"),children:[(0,p.FD)(ez.S,{gap:0,children:[(0,p.Y)(eW.EY,{children:"Description"}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,p.Y)(m3.ov,{id:S("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=R?R:"",onChange:function(e){E(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,p.Y)(i2.a,{}),(0,p.Y)(v9,{features:null!==(u=f.features)&&void 0!==u?u:[],onDelete:function(e){if((null===(n=f.features)||void 0===n?void 0:n.length)===1&&0===e){var n,t,r=(0,g._)({},f);delete r.features,v(r)}else v((0,e8._)((0,g._)({},f),{features:null===(t=f.features)||void 0===t?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,o,i;v((0,e8._)((0,g._)({},f),{features:(0,M._)(null!==(o=null===(t=f.features)||void 0===t?void 0:t.slice(0,n))&&void 0!==o?o:[]).concat([e],(0,M._)(null!==(i=null===(r=f.features)||void 0===r?void 0:r.slice(n+1))&&void 0!==i?i:[]))}))},onCreate:function(e){var n;v((0,e8._)((0,g._)({},f),{features:(0,M._)(null!==(n=f.features)&&void 0!==n?n:[]).concat([e])}))}}),(0,p.Y)(ez.S,{row:!0,gap:12,css:[{alignSelf:"end"},eC.wp.pt(8)],children:(0,p.Y)(eH.$n,{text:"Continue",iconRight:(0,p.Y)(oa.A,{}),colorway:"primary",type:"submit",disabled:!x||!C||!R})}),(0,p.Y)(v7,{isOpen:U,close:function(){return F(!1)},onSubmit:function(e){v((0,e8._)((0,g._)({},f),{icon:e}))}})]})}function wx(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,o=e.onOpen,i=e.onDelete,a=(0,d._)((0,h.useState)([]),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1];return(0,p.FD)(ez.S,{children:[(0,p.FD)(ez.S,{css:[eC.wp.pb(12)],children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(oM.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,p.Y)(t7.K0,{onClick:function(){return f(!u)},alt:"Add a new File Handler",tooltipBehavior:u?"hidden":"default",disabled:u,children:(0,p.Y)(eg.A,{})})]}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,p.FD)(ez.S,{gap:8,children:[u?(0,p.Y)(w_,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){f(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,p.Y)(w_,{initialFileHandler:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,p.FD)(eD.ui,{css:[eC.wp.p(8),eC.wp.borderRadius(8),eC.wp.flex.wrap,{rowGap:8}],row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,p.Y)(eW.EY,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,p.FD)(ez.S,{row:!0,gap:12,align:"center",children:[(0,p.Y)(t7.K0,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){i(n)},children:(0,p.Y)(rD.A,{})}),(0,p.Y)(t7.K0,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){s(function(e){return(0,M._)(e).concat([n])})},children:(0,p.Y)(rx.A,{})}),(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(wv.A,{}),variant:"outlined",text:"Preview",onClick:function(){o(e)}})]})]},n)}):(0,p.Y)(p.FK,{children:u?null:(0,p.FD)(ez.S,{css:[eC.wp.border({style:"dashed"}),eC.wp.borderRadius(8),eC.wp.p(16),eC.wp.colWithGap(8),eC.wp.center],children:[(0,p.Y)(eW.EY,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,p.Y)(eH.$n,{variant:"outlined",text:"New File Handler",iconLeft:(0,p.Y)(eg.A,{}),onClick:function(){return f(!0)}})]})})]})]})}function w_(e){var n,t,r,o,i=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,s=(0,d._)((0,h.useState)(null!==(n=null==l?void 0:l.name)&&void 0!==n?n:""),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)(null!==(t=null==l?void 0:l.icon)&&void 0!==t?t:""),2),g=f[0],m=f[1],v=(0,d._)((0,h.useState)(null!==(r=null==l?void 0:l.handler)&&void 0!==r?r:""),2),w=v[0],y=v[1],b=(0,d._)((0,h.useState)(null!==(o=null==l?void 0:l.glob)&&void 0!==o?o:""),2),S=b[0],Y=b[1],x=(0,vR.c)();return(0,p.FD)(eD.ui,{css:[eC.wp.borderRadius(8),eC.wp.border({color:tB.LU.outlineDimmest}),eC.wp.p(8),eC.wp.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),i({name:c,icon:g,handler:w,glob:S})},elevated:!0,children:[(0,p.FD)(ez.S,{css:[eC.wp.border({color:tB.LU.outlineDimmest,direction:"bottom"}),eC.wp.align.center,eC.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,p.Y)(eW.EY,{multiline:!1,children:c||"New File Viewer"}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{text:"Cancel",onClick:function(){a()}}),(0,p.Y)(eH.$n,{colorway:"primary",iconLeft:(0,p.Y)(s3.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,p.FD)(ez.S,{gap:8,children:[(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:x("name"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,p.Y)(m3.pd,{id:x("name"),placeholder:"SVG Editor",value:c,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:x("handler"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,p.Y)(m3.pd,{id:x("handler"),placeholder:"/svg-editor",value:w,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:x("glob"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,p.Y)(m3.pd,{id:x("glob"),placeholder:"*.svg",value:S,onChange:function(e){Y(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:x("icon"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,p.Y)(m3.pd,{id:x("icon"),placeholder:"/svg-editor-logo.png",value:g,onChange:function(e){m(e.currentTarget.value)},required:!0})]})]})]})}function wA(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,o=e.onOpen,i=e.onDelete,a=(0,d._)((0,h.useState)([]),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1];return(0,p.FD)(ez.S,{children:[(0,p.FD)(ez.S,{css:[eC.wp.pb(12)],children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(em.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,p.Y)(t7.K0,{onClick:function(){return f(!u)},alt:"Add a new tool",disabled:u,tooltipBehavior:u?"hidden":"default",children:(0,p.Y)(eg.A,{})})]}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,p.FD)(ez.S,{gap:8,children:[u?(0,p.Y)(wC,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){f(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,p.Y)(wC,{initialTool:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,p.FD)(eD.ui,{css:[eC.wp.p(8),eC.wp.borderRadius(8),eC.wp.flex.wrap,{rowGap:8}],row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,p.Y)(eW.EY,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,p.FD)(ez.S,{row:!0,gap:12,align:"center",children:[(0,p.Y)(t7.K0,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){i(n)},children:(0,p.Y)(rD.A,{})}),(0,p.Y)(t7.K0,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){s(function(e){return(0,M._)(e).concat([n])})},children:(0,p.Y)(rx.A,{})}),(0,p.Y)(eH.$n,{iconLeft:(0,p.Y)(oZ,{}),variant:"outlined",text:"Preview",onClick:function(){o(e)}})]})]},n)}):(0,p.Y)(p.FK,{children:u?null:(0,p.FD)(ez.S,{css:[eC.wp.border({style:"dashed"}),eC.wp.borderRadius(8),eC.wp.p(16),eC.wp.colWithGap(8),eC.wp.center],children:[(0,p.Y)(eW.EY,{color:"dimmest",children:"You haven't added any tools"}),(0,p.Y)(eH.$n,{variant:"outlined",text:"New Tool",iconLeft:(0,p.Y)(eg.A,{}),onClick:function(){return f(!0)}})]})})]})]})}function wC(e){var n,t,r,o=e.onSubmit,i=e.onCancel,a=e.initialTool,l=(0,d._)((0,h.useState)(null!==(n=null==a?void 0:a.name)&&void 0!==n?n:""),2),s=l[0],c=l[1],u=(0,d._)((0,h.useState)(null!==(t=null==a?void 0:a.icon)&&void 0!==t?t:null),2),f=u[0],g=u[1],m=(0,d._)((0,h.useState)(null!==(r=null==a?void 0:a.handler)&&void 0!==r?r:""),2),v=m[0],w=m[1],y=(0,vR.c)();return(0,p.FD)(eD.ui,{tag:"form",css:[eC.wp.borderRadius(8),eC.wp.border({color:tB.LU.outlineDimmest}),eC.wp.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),o({name:s,icon:f,handler:v})},children:[(0,p.FD)(ez.S,{css:[eC.wp.border({color:tB.LU.outlineDimmest,direction:"bottom"}),eC.wp.align.center,eC.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,p.Y)(eW.EY,{multiline:!1,children:s||"New Tool"}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{text:"Cancel",onClick:function(){i()}}),(0,p.Y)(eH.$n,{colorway:"primary",iconLeft:(0,p.Y)(s3.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,p.FD)(ez.S,{gap:8,children:[(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:y("name"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,p.Y)(m3.pd,{id:y("name"),placeholder:"SQL Viewer",value:s,onChange:function(e){c(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:y("handler"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,p.Y)(m3.pd,{id:y("handler"),placeholder:"/sql",value:v,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,p.FD)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(2)],tag:"label",htmlFor:y("icon"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,p.Y)(m3.pd,{id:y("icon"),placeholder:"/sql-logo.png",value:null!=f?f:"",onChange:function(e){g(e.currentTarget.value||null)},required:!0})]})]})]})}function wk(e){var n,t,r,o,i,a=e.manifest,l=e.performPaneOperation,s=e.update,c=(0,tS.FS)(),u=(0,tS.mN)(),f=(0,d._)((0,h.useState)(null),2),m=f[0],v=f[1];return(0,p.FD)(ez.S,{gap:24,css:[eC.wp.width("100%")],children:[(0,p.Y)(wx,{onOpen:(n=(0,G._)(function(e){return(0,B.YH)(this,function(n){return v(e),[2]})}),function(e){return n.apply(this,arguments)}),onDelete:function(e){var n;s((0,e8._)((0,g._)({},a),{fileHandlers:null===(n=a.fileHandlers)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,o,i;s((0,e8._)((0,g._)({},a),{fileHandlers:(0,M._)(null!==(o=null===(t=a.fileHandlers)||void 0===t?void 0:t.slice(0,n))&&void 0!==o?o:[]).concat([e],(0,M._)(null!==(i=null===(r=a.fileHandlers)||void 0===r?void 0:r.slice(n+1))&&void 0!==i?i:[]))}))},onCreate:function(e){var n;s((0,e8._)((0,g._)({},a),{fileHandlers:(0,M._)(null!==(n=a.fileHandlers)&&void 0!==n?n:[]).concat([e])}))},fileHandlers:null!==(o=a.fileHandlers)&&void 0!==o?o:[]}),(0,p.Y)(wA,{onOpen:(t=(0,G._)(function(e){var n,t;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(n=c)return[3,2];return[4,u()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=e.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})}),function(e){return t.apply(this,arguments)}),onDelete:function(e){var n;s((0,e8._)((0,g._)({},a),{tools:null===(n=a.tools)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,o,i;s((0,e8._)((0,g._)({},a),{tools:(0,M._)(null!==(o=null===(t=a.tools)||void 0===t?void 0:t.slice(0,n))&&void 0!==o?o:[]).concat([e],(0,M._)(null!==(i=null===(r=a.tools)||void 0===r?void 0:r.slice(n+1))&&void 0!==i?i:[]))}))},onCreate:function(e){var n;s((0,e8._)((0,g._)({},a),{tools:(0,M._)(null!==(n=a.tools)&&void 0!==n?n:[]).concat([e])}))},tools:null!==(i=a.tools)&&void 0!==i?i:[]}),(0,p.Y)(ek.a,{isOpen:!!m,onRequestClose:function(){return v(null)},children:m?(0,p.Y)(v5,{glob:m.glob,openFile:(r=(0,G._)(function(e){var n,t;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(!m)throw Error("Expected pending file handler");if(n=c)return[3,2];return[4,u()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=m.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,e3.sU)(n.baseUrl,m.handler),filePath:e}}}),v(null),[2]}})}),function(e){return r.apply(this,arguments)})}):null})]})}var wD=t(29454),wR=t(39736),wE=t(27052),wI=(0,tG.AH)(sL.b.filled,eC.wp.position.relative,eC.wp.p(4),eC.wp.border({color:tB.LU.outlineDimmer}),eC.wp.backgroundColor.backgroundHigher,{"&[data-complete]":[eC.wp.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),wU=function(e){var n=e.complete,t=e.onClick,r=e.description,o=e.title,i=e.icon;return(0,p.Y)(ez.S,{tag:"li",css:wI,"data-complete":n,children:(0,p.FD)(ez.S,{css:[eC.wp.p(4)],children:[(0,p.FD)(ez.S,{row:!0,gap:6,align:"center",children:[n?(0,p.Y)(s3.A,{color:tB.LU.accentPositiveStrongest,size:16,css:[eC.wp.mr(4)]}):null!=i?i:null,(0,p.Y)(eW.EY,{variant:"small",color:n?"dimmer":"default",css:[eC.wp.fontWeight.medium],children:o})]}),r?(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:r}):null,(0,p.Y)(ez.S,{children:(0,p.Y)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})};let wF=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,wD.g)("extensions-onboarding-checklist"),o=r.isDone,i=r.setAsDone,a=(0,wD.g)("extensions-onboarding-checklist-create"),l=a.isDone,s=a.setAsDone,c=(0,wD.g)("extensions-onboarding-checklist-concepts"),u=c.isDone,d=c.setAsDone,f=(0,wD.g)("extensions-onboarding-checklist-api"),m=f.isDone,v=f.setAsDone,w=(0,wD.g)("extensions-onboarding-checklist-publish").isDone;if((0,h.useEffect)(function(){s()},[]),void 0===o||!0===o)return null;var y=[l,u,m,w].filter(Boolean).length,b=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,p.Y)(t_.A,{})},{name:"concepts",title:"Learn key concepts",complete:!!u,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eL.ik.EXTENSIONS}}}),(0,z.u4)(z.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),d()},icon:(0,p.Y)(wR.A,{})},{name:"learn",title:"Use the API",complete:!!m,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eL.ik.EXTENSIONS}}}),(0,z.u4)(z.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),v()},icon:(0,p.Y)(m1.A,{})},{name:"publish",title:"Publish your Extension",complete:!!w,onClick:function(){t(1)},icon:(0,p.Y)(wE.A,{})}];return(0,p.Y)("section",{css:[eC.wp.width("100%")],children:(0,p.FD)(ez.S,{gap:12,children:[(0,p.Y)(ez.S,{gap:2,children:(0,p.FD)(ez.S,{row:!0,gap:12,css:[eC.wp.flex.wrap],align:"center",children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,p.FD)(ez.S,{row:!0,gap:12,align:"center",children:[(0,p.Y)(ez.S,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:b.length}).map(function(e,n){return(0,p.Y)(ez.S,{css:[eC.wp.borderRadius(8),eC.wp.width(12),eC.wp.height(4),n<y?eC.wp.backgroundColor.accentPositiveDefault:eC.wp.backgroundColor.backgroundHighest]},n)})}),(0,p.Y)(eW.EY,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(y,"/").concat(b.length)}),(0,p.Y)(t7.K0,{alt:"Hide section",onClick:i,children:(0,p.Y)(oN.A,{})})]})]})}),(0,p.Y)(ez.S,{tag:"ul",css:[eC.wp.flex.wrap,{listStyleType:"none",gap:tB.LU.space8}],row:!0,children:b.map(function(e,n){return(0,p.Y)(wU,(0,g._)({},e),n)})})]})})};var wP=t(36954);function wT(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=ws(),o=r.__status,i=r.parsed,a=r.state,l=r.updateString;if("loading"===o)return(0,p.Y)(wu,{});if("fileReadError"===o)return(0,p.Y)(wh,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===o){var s=i.error;return(0,p.Y)(wf,{performPaneOperation:n,manifestPath:a.manifestPath,error:s})}var c=i.manifest;return"success"===o&&c?(0,p.FD)(ez.S,{css:[eC.wp.pt(12),eC.wp.width("100%")],gap:24,align:"center",children:[(0,p.Y)(wS,{performPaneOperation:n,setSelectedTab:t}),(0,p.Y)(wF,{performPaneOperation:n,setSelectedTab:t}),(0,p.Y)(ez.S,{css:[eC.wp.border({direction:"bottom",width:4,color:tB.LU.outlineDimmest}),eC.wp.width("100%")]}),(0,p.FD)(ez.S,{gap:8,css:[eC.wp.width("100%")],children:[(0,p.FD)(ez.S,{gap:2,children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(wP.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,p.FD)(eW.EY,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,p.Y)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eL.ik.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,p.Y)(ez.S,{css:[eC.wp.borderRadius(4),eC.wp.border({color:tB.LU.outlineDimmest,width:1}),eC.wp.flex.row,eC.wp.align.center,eC.wp.p(8),eC.wp.flex.wrap,{gap:12},eC.wp.width("fit-content")],children:vK.W.map(function(e){var n;return(0,p.FD)(ez.S,{row:!0,gap:6,align:"center",children:[(0,p.Y)(a1.S,{id:e.key,checked:null===(n=c.scopes)||void 0===n?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,o,i=(null===(t=c.scopes)||void 0===t?void 0:t.some(function(n){return n.name===e.key}))&&!n?vj.F6(a.manifestStr,(0,e8._)((0,g._)({},c),{scopes:null===(r=c.scopes)||void 0===r?void 0:r.filter(function(n){return n.name!==e.key})})):vj.F6(a.manifestStr,(0,e8._)((0,g._)({},c),{scopes:(0,M._)(null!==(o=c.scopes)&&void 0!==o?o:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,vq.s)(a.manifestStr,i)),l(i)}}),(0,p.Y)("label",{htmlFor:e.key,css:[eC.wp.fontSize(12),eC.wp.cursor.pointer],children:(0,p.Y)("abbr",{title:e.description,css:[{textDecorationColor:tB.LU.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,p.Y)(wk,{performPaneOperation:n,manifest:c,update:function(e){var n=vj.F6(a.manifestStr,e);a.writeChange((0,vq.s)(a.manifestStr,n)),l(n)}})]}):(0,p.Y)("div",{children:"unknown state"})}var wO=t(81383),wL=t(9980),wN=t(60768),wM=t(56787),wG=t(67415),wB=(0,eA.x)({logViewerTopLevel:[eC.wp.height("100%")],logsContainer:[eC.wp.scrollbar.thin,eC.wp.backgroundColor.backgroundDefault,eC.wp.overflowY("scroll"),eC.wp.flex.growAndShrink(1)],logViewerHeader:[eC.wp.p(8),eC.wp.border({direction:"bottom",width:tB.LU.borderWidthDefault}),eC.wp.display.flex,eC.wp.flex.row,eC.wp.rowWithGap(8),eC.wp.align.center],logViewerHeaderControl:[eC.wp.flex.row,eC.wp.rowWithGap(4),eC.wp.align.center],logLine:[eC.wp.p(2),eC.wp.font.code,sL.b.listItem,eC.wp.rowWithGap(2),eC.wp.align.center],logLineIcon:[eC.wp.p(4),{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function wH(e){var n=e.log,t=e.prevLevel,r=e.isLast,o=e.isFirst,i=(0,d._)((0,h.useState)(!1),2),a=i[0],l=i[1],s=(0,wL.A)().ref;return(0,p.FD)(ez.S,{css:[eC.wp.flex.column,function(e){if(e===wM.$.warn)return{color:tB.LU.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:o?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===wM.$.error)return{color:tB.LU.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:o?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=tB.LU.backgroundHigher;return t===wM.$.warn?n="rgba(150, 125, 0, 0.5)":t===wM.$.error&&(n="rgba(229, 34, 34, 0.5)"),{color:tB.LU.foregroundDefault,borderTop:o?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,p.FD)(ez.S,{css:wB.logLine,onClick:function(){return l(function(e){return!e})},children:[(0,p.Y)(ez.S,{css:wB.logLineIcon,children:(0,p.Y)(function(){return n.logLevel===wM.$.warn?(0,p.Y)(cB.A,{size:16}):n.logLevel===wM.$.error?(0,p.Y)(wG.A,{size:16}):(0,p.Y)(v0.A,{size:16,css:{opacity:0}})},{})}),(0,p.Y)(eW.EY,{maxLines:10,css:wB.logMessage,variant:"small",children:n.message}),a?(0,p.Y)(aa.A,{size:16}):(0,p.Y)(ci.A,{size:16})]}),a?(0,p.Y)(ez.S,{children:(0,p.Y)(wO.Ay,{ref:s,css:wN.$1,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}let wW=function(){var e=(0,tm.Du)(nS.MN),n=(0,tm.Ol)(nS.KO),t=(0,d._)((0,tm.Cj)(nS.gT),2),r=t[0],o=t[1],i=(0,h.useRef)(null);return(0,h.useEffect)(function(){var e,n=i.current;n&&(null===(e=n.children[n.children.length-1])||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,p.FD)(ez.S,{css:wB.logViewerTopLevel,children:[(0,p.FD)(ez.S,{className:"log-viewer-header",css:wB.logViewerHeader,children:[(0,p.Y)(ez.S,{css:wB.logViewerHeaderControl,style:{flexGrow:1},children:(0,p.Y)(m3.pd,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return o(e.target.value)}})}),(0,p.FD)(ez.S,{css:wB.logViewerHeaderControl,children:[(0,p.Y)(t7.K0,{alt:"Clear logs",onClick:function(){return n()},children:(0,p.Y)(oN.A,{id:"clear-logs"})}),(0,p.Y)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,p.Y)(ez.S,{css:wB.logsContainer,innerRef:i,children:e.map(function(n,t){var r;return(0,p.Y)(wH,{log:n,prevLevel:null===(r=e[t-1])||void 0===r?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})};var wz=t(39528);function w$(){var e=(0,m._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return w$=function(){return e},e}function wj(){var e=(0,m._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return wj=function(){return e},e}function wq(){var e=(0,m._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return wq=function(){return e},e}function wK(){var e=(0,m._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return wK=function(){return e},e}function wZ(){var e=(0,m._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return wZ=function(){return e},e}var wV={},wJ=(0,v.J1)(w$()),wQ=(0,v.J1)(wj(),eP.Fz),wX=(0,v.J1)(wq()),w0=(0,v.J1)(wK()),w1=(0,v.J1)(wZ()),w2=t(21847),w5=ez.D.button,w4=function(e){return e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error",e}({}),w3=function(){return(0,p.Y)(ez.S,{css:[eC.wp.flex.grow(1),eC.wp.border({color:tB.LU.outlineDimmest,direction:"top"})],row:!0})},w8=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,o=e.state,i=e.onClick,a=e.disabled,l=e.hideLoadingIcon,s=(0,eH.J)(r),c=(0,eH.Jt)(r);return(0,p.Y)(w5,{type:"button",css:[eC.wp.reset.button,eC.wp.position.relative,i&&sL.b.nofill,eC.wp.px(8),eC.wp.py(2),eC.wp.borderRadius(4),eC.wp.rowWithGap(4),eC.wp.align.center,{borderRadius:tB.LU.borderRadiusRound}].concat((0,M._)("error"===o?[eC.wp.color.accentNegativeStronger]:"active"===o?[eC.wp.backgroundColor.accentPrimaryDimmer,eC.wp.color.accentPrimaryStrongest]:"complete"===o?[eC.wp.color.accentPositiveStronger]:[eC.wp.color.foregroundDimmest])),onClick:i,disabled:a,children:(0,p.Y)(eH.EE,{text:n,iconSize:c,textVariant:s,iconRight:function(){if("error"===o)return(0,p.Y)(cB.A,{});if("active"===o){if(l)return;return(0,p.Y)(sp.A,{})}return"complete"===o?(0,p.Y)(s3.A,{}):(0,p.Y)(wP.A,{})}()})})},w7=t(28220),w6=t(55382),w9=t(82402),ye=t(60018),yn=t(47270),yt=t(27093),yr=function(e){return e.Details="Details",e.Init="Init",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Queued="Queued",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success",e}(yr||{}),yo=["CreatingExtension","Deploying"],yi=function(e){return e.Details="Details",e.Init="Configure",e.Create="Create",e.Deploy="Deploy",e}(yi||{}),ya=["Details","Configure","Deploy"];function yl(e){var n,t,r,o,i,a,l,s,c,u=e.performPaneOperation,f=(0,et.A)(),m=f.container,v=f.fs,w=f.dotReplit,y=(0,d._)((n=(0,g._)({},wV,void 0),lb._(wX,n)),1)[0],b=(0,wD.g)("extensions-onboarding-checklist-".concat("publish")).setAsDone,S=(0,d._)((0,h.useState)(null),2),Y=S[0],x=S[1],_=(0,d._)((0,h.useState)("Details"),2),A=_[0],k=_[1],D=(0,d._)((0,h.useState)(null),2),R=D[0],E=D[1],I=ws(),U=I.__status,F=I.parsed,P=I.state,T=I.updateManifest,O=(0,w2.W)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),L=O.value,N=O.setValue,H=O.error,W=O.validate,$=(0,d._)((0,h.useState)([]),2),j=$[0],q=$[1],K=(0,h.useCallback)(function(e){return u({operation:"open",secondary:!0,pane:{type:(0,Q.QY)(e),data:e}})},[u]),Z=(0,d._)((0,w6.A)({openFile:K,listFiles:v.listFiles}),2),V=Z[0],J=Z[1],X=(0,w9.V)();t={variables:{extensionId:null!=Y?Y:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&q(function(e){return(0,M._)(e).concat((0,M._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===rJ.nH.Success?k("Success"):t.status===rJ.nH.Failed&&k("DeployError"))}},skip:"Deploying"!==A||!Y},r=(0,g._)({},wV,t),wz.R(wJ,r),(0,h.useEffect)(function(){V&&(V.clear(),j.forEach(function(e){V.write(e.replaceAll("\n","\r\n"))}))},[j,V]);var ee=(0,h.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){x(null),E(null),N(null);return}n.buildCommand&&E(n.buildCommand),n.outputDirectory&&N(n.outputDirectory),n.extensionID&&x(n.extensionID)}},[N]);(0,h.useEffect)(function(){var e=!1;return(0,G._)(function(){var n;return(0,B.YH)(this,function(t){switch(t.label){case 0:return[4,w.getConfig()];case 1:if(n=t.sent(),e)return[2];return ee(n),[2]}})})(),function(){e=!0}},[w,ee]);var en=(0,h.useCallback)((o=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return x(e),[4,w.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return o.apply(this,arguments)}),[w]),er=(0,h.useCallback)((i=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return E(e),[4,w.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[w]),eo=(0,d._)((0,h.useState)(null),2),ei=eo[0],ea=eo[1],el=(0,d._)((0,h.useState)(null),2),es=el[0],ec=el[1],eu=(0,d._)((0,h.useState)(null),2),ed=eu[0],ep=eu[1],ef=(0,d._)((0,h.useState)(null),2),eh=ef[0],eg=ef[1],em=(0,d._)((0,h.useState)(null),2),ev=em[0],ew=em[1],ey=(0,d._)((a=(0,g._)({},wV,void 0),a9.n(wQ,a)),1)[0],eb=(0,eG.A)(),eS=(0,d._)((l=(0,g._)({},wV,void 0),a9.n(w0,l)),1)[0],eY=(0,d._)((0,h.useState)(null),2),ex=eY[0],e_=eY[1],eA=(0,C._P)({controlName:"flag-draft-buffers"}),ek=(0,w7.UI)(),eR=(0,h.useCallback)((s=(0,G._)(function(e){var n,t,r;return(0,B.YH)(this,function(o){switch(o.label){case 0:return[4,eS({variables:{name:e.name,description:e.description}})];case 1:if((t=o.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null===(n=t.data)||void 0===n?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return s.apply(this,arguments)}),[eS]),eE=(0,d._)((c=(0,g._)({},wV,void 0),a9.n(w1,c)),1)[0],eI=(0,h.useCallback)((0,G._)(function(){var e,n,t,r,o,i,a,l,s,c,u,d,p,f,h,g,w,S;return(0,B.YH)(this,function(x){switch(x.label){case 0:return e=Y,[4,W()];case 1:if(null==(n=x.sent())?void 0:n.message)return ep(null==n?void 0:n.message),[2];if(!L)throw Error("expected output folder");if(t=(0,tc.Fd)(L),(r=function(){k("Init"),q([]),ew(null),ep(null),ec(null),ea(null)})(),!(ek||!eA))return[3,3];return[4,v.flush()];case 2:x.sent(),x.label=3;case 3:if(!e)return[3,12];return[4,y({variables:{extensionId:e}})];case 4:if((o=x.sent()).error||!o.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(i=o.data.extension)?void 0:i.__typename)!=="NotFoundError")return[3,6];return[4,new Promise(function(n){e_({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){e_(null),n(e)}})})];case 5:case 7:if(!x.sent())return r(),[2];return e=null,[3,12];case 6:if(!((null==i?void 0:i.__typename)==="Extension"&&!i.canDeployExtension))return[3,8];return[4,new Promise(function(n){e_({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){e_(null),n(e)}})})];case 8:if(!((null==i?void 0:i.__typename)==="Extension"&&i.canDeployExtension))return[3,11];if(s=null==F?void 0:null===(a=F.manifest)||void 0===a?void 0:a.name,c=null==F?void 0:null===(l=F.manifest)||void 0===l?void 0:l.description,!(s&&s!==i.name||c&&c!==i.description))return[3,10];return[4,eE({variables:{extensionId:e,description:null!=c?c:void 0,name:null!=s?s:void 0}})];case 9:x.sent(),x.label=10;case 10:return[3,12];case 11:throw Error("Encountered an unknown error. Please contact support.");case 12:if(e)return[3,14];return k("CreatingExtension"),[4,eR({name:null!==(p=null==F?void 0:null===(u=F.manifest)||void 0===u?void 0:u.name)&&void 0!==p?p:"My extension",description:null!==(f=null==F?void 0:null===(d=F.manifest)||void 0===d?void 0:d.description)&&void 0!==f?f:"My extension's description"})];case 13:if(null!==(h=x.sent()).error)return k("CreatingExtensionError"),eg(h.error),[2];en(e=h.result.id),x.label=14;case 14:if(!e)throw Error("expected extension id to be set");return[4,lk(m,t)];case 15:x.sent(),k("Queued"),x.label=16;case 16:return x.trys.push([16,18,,19]),[4,ey({variables:{extensionId:e,replId:eb,outputDirectory:t,buildCommand:null!=R?R:""}})];case 17:return g=x.sent(),[3,19];case 18:if(w=x.sent(),k("DeployError"),w.message.includes("received message larger than max"))return ew("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return ew(w.message),[2];case 19:if(g.errors)return k("DeployError"),ew("Internal error. Please contact support: "+g.errors.map(function(e){return e.message}).join(", ")),[2];if(!g.data)return k("DeployError"),ew("Encountered an unknown error. Please contact support."),[2];if("Extension"===(S=g.data.deployExtension2).__typename)return k("Deploying"),b(),(0,z.u4)(z.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),ea(S),[2];if("message"in S)return k("DeployError"),ew(S.message),[2];return k("DeployError"),ew("Encountered an unknown error. Please contact support."),[2]}})}),[R,m,L,W,eb,v,k,ey,y,eE,Y,eR,en,b,F,ek,eA]),eU=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(A),eF=ya.indexOf(eU);function eP(){return es?"Build error: ".concat(es):ed?"Validation error: ".concat(ed):ed?"Create extension error: ".concat(eh):ev?"Deploy error: ".concat(ev):void 0}var eT=(0,e5.Ot)().find(function(e){return e.extensionId===Y}),eO=(0,d._)((0,h.useState)(!1),2),eM=eO[0],eB=eO[1],e$=(0,e5.Sc)(),ej=(0,h.useMemo)(function(){return eM?(0,p.Y)(sp.A,{}):eT?(0,p.Y)(s3.A,{}):(0,p.Y)(t9.A,{})},[eM,eT]),eq=(0,tv.D)().values.global,eK=(0,sc.mO)().fireBurst,eZ=(0,d._)((0,h.useState)(!1),2),eV=eZ[0],eJ=eZ[1],eQ=(0,h.useRef)(null);if((0,h.useEffect)(function(){eQ.current&&!eV&&"Success"===A&&(eK({x:eQ.current.getBoundingClientRect().left,y:eQ.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,sc.Im)(300,5e3)},size:function(){return{width:(0,sc.Im)(8,16),height:(0,sc.Im)(8,16)}},color:[eq.tealStronger,eq.blurpleStronger,eq.yellowStronger]}),eK({x:eQ.current.getBoundingClientRect().right,y:eQ.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,sc.Im)(300,5e3)},size:function(){return{width:(0,sc.Im)(8,16),height:(0,sc.Im)(8,16)}},color:[eq.blueStronger,eq.greenStronger,eq.pinkStronger]}),eJ(!0))},[A,eq,eK,eV]),U===wc.loading)return(0,p.Y)(wu,{});if(U===wc.fileReadError)return(0,p.Y)(wh,{message:P.fileReadError});var eX=F.manifest,e0=F.error;return e0?(0,p.Y)(wf,{performPaneOperation:u,manifestPath:P.manifestPath,error:e0}):(0,p.FD)(ez.S,{css:[eC.wp.flex.column,eC.wp.display.flex,eC.wp.height("100%"),eC.wp.justify.center,eC.wp.align.center,eC.wp.position.relative],children:[(0,p.Y)(ez.S,{css:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),eC.wp.right(0)],className:"Confetti",innerRef:eQ}),(0,p.FD)(ez.S,{css:[eC.wp.p(12),eC.wp.pt(16),eC.wp.colWithGap(24),eC.wp.flex.growAndShrink(1),eC.wp.width("100%"),eC.wp.maxWidth(v$.R)],children:["Success"!==A?(0,p.FD)(p.FK,{children:[(0,p.FD)(ez.S,{gap:16,children:[(0,p.Y)(eW.EY,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,p.Y)(ez.S,{row:!0,gap:4,align:"center",children:ya.map(function(e,n){return(0,p.FD)(h.Fragment,{children:[0!==n&&(0,p.Y)(w3,{}),(0,p.Y)(w8,{state:n<eF?w4.Complete:n!==eF?w4.Pending:["CreatingExtensionError","DeployError"].includes(A)?w4.Error:w4.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===A?(0,p.Y)(ez.S,{css:[eC.wp.flex.column,eC.wp.colWithGap(8),eC.wp.width("100%")],children:(0,p.Y)(wY,{manifest:eX,updateManifest:T,onSubmit:function(e){T((0,g._)({},eX,e)),k("Init")}})}):null,"Details"!==A?(0,p.FD)(p.FK,{children:[(0,p.FD)(ez.S,{gap:16,children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(yt.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Build settings"}),(0,p.Y)(ez.S,{css:[eC.wp.flex.grow(1),eC.wp.border({color:tB.LU.backgroundHighest,direction:"y"})]})]}),(0,p.FD)(ez.S,{gap:4,children:[(0,p.FD)("label",{htmlFor:"buildCommand",css:[eC.wp.display.flex,eC.wp.rowWithGap(4),eC.wp.align.center],children:[(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,p.Y)(tH.m_,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,p.Y)(v0.A,{size:12})})]}),(0,p.Y)(m3.pd,{value:null!=R?R:"",onChange:function(e){return er(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==A&&yo.includes(A)})]}),(0,p.FD)(ez.S,{gap:4,children:[(0,p.FD)("label",{htmlFor:"outputFolder",css:[eC.wp.display.flex,eC.wp.rowWithGap(4),eC.wp.align.center],children:[(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:"Output folder"}),(0,p.Y)(tH.m_,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,p.Y)(v0.A,{size:12})})]}),(0,p.Y)(m3.pd,{id:"outputFolder",value:null!=L?L:"",disabled:"Init"!==A&&yo.includes(A),onChange:function(e){N(e.currentTarget.value),w.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),H?(0,p.Y)(eW.EY,{css:[eC.wp.color.accentNegativeStronger],children:H.message}):null]}),(0,p.Y)(eH.$n,{text:"Init"===A||A.endsWith("Error")?"Deploy and Release":"Deployingâ€¦",iconLeft:"Init"===A||A.endsWith("Error")?(0,p.Y)(dq.A,{}):(0,p.Y)(sp.A,{}),onClick:eI,disabled:"Init"!==A&&yo.includes(A),colorway:"primary"}),(0,p.FD)(eW.EY,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,p.Y)("a",{href:eL.aC.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),j.length>0?(0,p.FD)(ez.S,{gap:8,children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(yn.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Build logs"}),(0,p.Y)(ez.S,{css:[eC.wp.flex.grow(1),eC.wp.border({color:tB.LU.backgroundHighest,direction:"y"})]})]}),eP()?(0,p.Y)(u4.N,{text:eP(),colorway:"red",icon:(0,p.Y)(wG.A,{})}):null,(0,p.Y)(ez.S,{css:[eC.wp.display.flex,eC.wp.py(12),eC.wp.pl(16),eC.wp.borderRadius(8),eC.wp.overflow("hidden"),{border:"1px solid ".concat(tB.LU.outlineDimmest),backgroundColor:null==X?void 0:X.background}],children:(0,p.Y)(ez.D.div,{css:[eC.wp.width("100%"),eC.wp.maxWidth("100%")],ref:J})})]}):null,ex?(0,p.FD)(eD.ui,{elevated:!0,css:[eC.wp.p(8),eC.wp.borderRadius(8)],gap:8,children:[(0,p.Y)(eW.EY,{variant:"text",multiline:!0,maxLines:3,children:ex.message}),(0,p.FD)(ez.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(eH.$n,{text:"No",css:[eC.wp.flex.grow(1)],onClick:function(){return ex.callback(!1)}}),(0,p.Y)(eH.$n,{text:"Yes",colorway:"primary",css:[eC.wp.flex.grow(1)],onClick:function(){return ex.callback(!0)}})]})]}):null]}):null]}):null,ei&&"Success"===A?(0,p.FD)(ez.S,{gap:16,children:[(0,p.FD)(ez.S,{gap:4,children:[(0,p.Y)(eW.EY,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,p.Y)(ez.S,{css:[eC.wp.py(8)],children:(0,p.Y)(ye.q,{showMetadata:!1,extension:ei,onClick:function(){u({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,eN.PM)(ei.id)}}})}})}),(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(wR.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,p.Y)(ez.S,{css:[eC.wp.flex.grow(1),eC.wp.border({color:tB.LU.backgroundHighest,direction:"y"})]})]}),(0,p.FD)(ez.S,{css:[eC.wp.p(12),eC.wp.border({color:tB.LU.outlineDimmest}),eC.wp.borderRadius(8)],gap:8,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Install your Extension"}),(0,p.Y)(eW.EY,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,p.Y)(eH.$n,{text:eT?"Already installed":"Install Extension",colorway:eT?"green":"primary",disabled:eM||!!eT,iconLeft:ej,loading:eM,onClick:(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return eB(!0),[4,e$({extensionId:(0,eN.PM)(ei.id),replId:null})];case 1:return e.sent(),eB(!1),[2]}})})})]})]}):null]})]})}var ys=t(31520),yc=t(11101);function yu(e){var n=e.performPaneOperation,t=(0,d._)((0,h.useState)(0),2),r=t[0],o=t[1];return(0,p.Y)(ez.S,{css:[eC.wp.flex.column,eC.wp.height("100%"),eC.wp.position.relative],children:(0,p.FD)(ys.tU,{css:[eC.wp.flex.grow(1),eC.wp.flex.column,eC.wp.align.center,eC.wp.display.flex,eC.wp.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return o(e)},children:[(0,p.Y)(eD.ui,{css:[eC.wp.top(0),eC.wp.width("100%"),eC.wp.zIndex(1)],align:"center",children:(0,p.FD)(ys.wb,{css:[eC.wp.align.center,eC.wp.width("100%"),eC.wp.pb(0),eC.wp.maxWidth(v$.R)],children:[(0,p.Y)(ys.oz,{css:[eC.wp.p(12),eC.wp.height("100%"),eC.wp.borderRadius(0)],iconLeft:(0,p.Y)(u8.A,{}),children:"Home"}),(0,p.Y)(ys.oz,{css:[eC.wp.p(12),eC.wp.height("100%"),eC.wp.borderRadius(0)],iconLeft:(0,p.Y)(yc.A,{}),children:"Releases"}),(0,p.Y)(ys.oz,{css:[eC.wp.p(12),eC.wp.height("100%"),eC.wp.borderRadius(0)],iconLeft:(0,p.Y)(wG.A,{}),children:"Logs"}),(0,p.Y)(ez.S,{css:eC.wp.flex.grow(1)}),(0,p.Y)(eD.ui,{css:[eC.wp.p(8),{boxShadow:"inset 0 -1px 0 ".concat(tB.LU.outlineDimmest)}],children:(0,p.Y)(eH.$n,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eL.ik.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,p.Y)(ps.A,{}),css:[eC.wp.display.inlineFlex]})})]})}),(0,p.FD)(ys.T2,{css:[eC.wp.flex.grow(1),eC.wp.align.center,eC.wp.justify.center,eC.wp.width("100%"),eC.wp.display.flex,eC.wp.overflow("hidden")],children:[(0,p.Y)(ys.Kp,{css:[eC.wp.height("100%"),eC.wp.p(12),eC.wp.maxWidth(v$.R),eC.wp.display.flex,eC.wp.width("100%"),eC.wp.justify.center,eC.wp.overflowY("scroll")],children:(0,p.Y)(wT,{performPaneOperation:n,setSelectedTab:o})}),(0,p.Y)(ys.Kp,{css:[eC.wp.height("100%"),eC.wp.width("100%"),eC.wp.overflowY("scroll")],children:(0,p.Y)(yl,{performPaneOperation:n})}),(0,p.Y)(ys.Kp,{css:[eC.wp.height("100%"),eC.wp.width("100%")],children:(0,p.Y)(wW,{})})]})]})})}var yd=n6.ZU.Object({type:n6.ZU.Literal("extensionDevtools")}),yp={Content:function(e){var n=e.options.performPaneOperation;return(0,p.Y)(yu,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,p.Y)(t_.A,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:Q.bY.WorkspaceExtensions,decode:function(e){return n9.WT.Decode(yd,e)}},yf=t(85230),yh=t(77300);function yg(e){var n=(0,en.TM)(),t=(0,e5.Sc)(),r=(0,e5.l$)(),o=(0,e5.Ot)(),i=(0,h.useCallback)(function(t,r){if("cover"===t){if(null===r){i("store",null);return}n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,s,c=null!==(s=null===(l=o.find(function(n){return n.extensionId===e.coverPageExtensionId}))||void 0===l?void 0:l.installationId)&&void 0!==s?s:null;return(0,p.Y)(yf.G,{existingInstallationId:c,extensionId:e.coverPageExtensionId,goBackToStore:function(){return i("store",null)},installExtension:(0,G._)(function(){var n;return(0,B.YH)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,eN.qq)(n.id)]}})}),uninstallExtension:(a=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})}),function(e){return a.apply(this,arguments)})})}return(0,p.Y)(yh.A,{storeMode:"pane",openExtensionCover:function(e){return i("cover",e)},setPage:function(e){return i(e,null)},page:e.page})}var ym=n6.ZU.Union([n6.ZU.Object({page:n6.ZU.Union([n6.ZU.Literal("store"),n6.ZU.Literal("manage")])}),n6.ZU.Object({page:n6.ZU.Literal("cover"),coverPageExtensionId:n6.ZU.Unsafe(n6.ZU.String())})]),yv=n6.ZU.Object({type:n6.ZU.Literal("extensionStore"),data:ym}),yw={Content:function(e){return(0,p.Y)(yg,(0,e8._)((0,g._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.yellowStronger,size:n},children:(0,p.Y)(t_.A,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:Q.bY.WorkspaceExtensions,decode:function(e){return n9.WT.Decode(yv,e)}},yy=t(20334),yb=t(81065),yS=t(37159),yY=(0,eA.x)({container:[eC.wp.width("100%"),eC.wp.maxWidth(640),eC.wp.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],content:[{backgroundColor:"transparent"}]}),yx={Content:function(){var e,n,t,r,o,i,a,l,s,c,u,f,g=(n=(e=(0,d._)((0,h.useState)(!1),2))[0],t=e[1],r=(0,eG.A)(),i=(o=(0,et.A)()).dotReplit,a=o.fs,l=(0,en.Eq)(),s=(0,yy.g)(),c=(0,F.gc)("isLayoutStacked").preferences.isLayoutStacked,u=(0,tb.oR)(),f=(0,en.$P)(),{reset:(0,h.useCallback)((0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:return t(!0),[4,(0,iP.o)({fs:a,dotReplit:i})];case 1:return e=n.sent().entrypoint,t(!0),l({replId:r,isStacked:c,isHTML:s,isExtension:u,isInPopup:f,entrypoint:e}),[2]}})}),[a,i,l,r,c,s,u,f]),resetting:n});return(0,p.Y)(ez.S,{css:yY.container,children:(0,p.Y)(yb.A,{resetLayout:g,css:yY.content})})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.greyStrongest,size:n},children:(0,p.Y)(os.A,{})})},getTitle:function(){return"User Settings"},description:"Configure personal editor preferences and workspace settings which apply to all Apps",category:Q.bY.Other,decode:yS.D},y_=t(71105),yA=n6.ZU.Object({type:n6.ZU.Literal("replAuth")}),yC=t(91297),yk={Content:y_.A,Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.orangeStrongest,size:n},children:(0,p.Y)(yC.A,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:Q.bY.CloudServices,decode:function(e){return n9.WT.Decode(yA,e)}},yD=function(e){var n;null===(n=e.focus)||void 0===n||n.call(e)};function yR(e){var n=e.isValid,t=e.move,r=e.focus,o=void 0===r?yD:r,i=e.wrap,a=void 0!==i&&i,l=e.selector,s=e.boundary,c=(0,h.useRef)(null);return(0,h.useEffect)(function(){if(c.current){var e=c.current,r=function(r){if(n(r)){if(l)d=(0,M._)(e.querySelectorAll(l));else{var i;i=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),d=(0,M._)(i)}if(0!==d.length){var c=document.activeElement;if(e.contains(c)){if(l){if(s){var u=null==c?void 0:c.closest(s);c=(null==c?void 0:c.closest(l))||(null==u?void 0:u.querySelector(l))}else c=null==c?void 0:c.closest(l)}if(l&&(!c||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var d,p,f=null===(p=document.activeElement)||void 0===p?void 0:p.querySelector(l);f?o(f):o(d[0]);return}if(!c){r.preventDefault(),r.stopPropagation(),o(d[0]);return}var h=d.findIndex(function(e){return e===c});if(-1===h){r.preventDefault(),r.stopPropagation(),o(d[0]);return}var g=t({event:r,children:d,activeIndex:h,activeElement:c});!a&&(g<0||g>d.length-1)||(o(g<0?d[d.length-1]:g>d.length-1?d[0]:d[g]),r.stopPropagation(),r.preventDefault())}}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[s,n,t,o,c,l,a]),c}var yE=t(16087),yI=(0,eA.x)({queryPill:[eC.wp.display.inline,eC.wp.fontSize(tB.LU.fontSizeDefault)],popover:[{"& > .popover-control-container":eC.wp.mr(0)}]});function yU(e){var n=e.text;return(0,p.Y)(uf.a,{css:yI.queryPill,text:0===n.length?"âŽµ":n})}function yF(e){var n=e.query,t=e.replacement,r=e.numMatches,o=e.onCancel,i=e.onConfirm;return(0,p.FD)(ez.S,{gap:24,children:[(0,p.FD)(eW.EY,{children:["Replace ",(0,p.Y)(yU,{text:n})," with ",(0,p.Y)(yU,{text:t})," ","in ",(0,o7.A)("match",r,!0),"?"]}),(0,p.Y)(eW.EY,{children:"This operation cannot be undone!"}),(0,p.FD)(ez.S,{row:!0,gap:12,justify:"end",children:[(0,p.Y)(eH.$n,{onClick:function(){return o()},text:"Cancel"}),(0,p.Y)(eH.$n,{colorway:"negative",onClick:function(){return i()},text:"Yes, replace ".concat((0,o7.A)("match",r,!0)),iconLeft:(0,p.Y)(yE.A,{})})]})]})}function yP(e){var n,t=e.disabled,r=e.loading,o=e.query,i=e.replacement,a=e.results,l=e.replace,s=e.onReplace,c=e.buttonProps,u=(0,d._)((0,h.useState)(!1),2),f=u[0],m=u[1],v=(n=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return m(!1),(0,z.u4)(z.AZ.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e.sent().success&&s(),[2]}})}),function(){return n.apply(this,arguments)}),w=(0,h.useMemo)(function(){return a.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[a]);return(0,p.Y)(ez.S,{css:yI.popover,children:(0,p.FD)(dL.A,{isOpen:f,maxWidth:400,showArrow:!0,children:[(0,p.Y)(eH.$n,(0,e8._)((0,g._)({},c),{text:"Replace all",disabled:t||r,onClick:function(){m(function(e){return!e})}})),(0,p.Y)(yF,{query:o,replacement:i,numMatches:w,onCancel:function(){return m(!1)},onConfirm:v})]})})}var yT=t(14359),yO=(0,eA.x)({self:[eC.wp.position.relative,eC.wp.flex.shrink(1),eC.wp.width("100%")],iconWrapper:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.right(0),eC.wp.height("100%"),eC.wp.p(4)]}),yL=(0,h.forwardRef)(function(e,n){var t,r=e.onClear,o=(0,oL._)(e,["onClear"]);return(0,p.FD)(ez.S,{css:yO.self,children:[(0,p.Y)(yT.O,(0,g._)({ref:n},o)),((null===(t=o.value)||void 0===t?void 0:t.length)||0)>0?(0,p.Y)(ez.S,{css:yO.iconWrapper,children:(0,p.Y)(t7.K0,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(tB.LU.backgroundHighest," !important")}},children:(0,p.Y)(oN.A,{})})}):null]})});yL.displayName="SearchInput";var yN=t(81870),yM=t(31416),yG=(0,eA.x)({self:[eC.wp.width("fit-content"),eC.wp.display.inlineBlock,eC.wp.color.accentNegativeDefault,eC.wp.fontWeight.bold]});function yB(e){var n=e.content;return(0,p.Y)(p.FK,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,M._)(e).concat([(0,p.Y)(ez.D.span,{css:yG.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var yH=t(43698),yW=ez.D.span,yz="SearchMatch",y$=function(e){return e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text",e}(y$||{});function yj(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var yq=(0,eA.x)((s={self:[eC.wp.width("fit-content"),eC.wp.display.inline,eC.wp.cursor.pointer,{"&:focus-visible":[eC.wp.focusRing]},eC.wp.mx(1),eC.wp.px(2),eC.wp.borderRadius(4)]},(0,nt._)(s,"highlight",[eC.wp.backgroundColor.accentPrimaryDimmest,yj(tB.LU.accentPrimaryDimmer)]),(0,nt._)(s,"remove",[eC.wp.backgroundColor.accentNegativeDimmest,yj(tB.LU.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,nt._)(s,"add",[eC.wp.backgroundColor.accentPositiveDimmest,yj(tB.LU.accentPositiveDimmer)]),(0,nt._)(s,"hiddenTextWrapper",[eC.wp.display.inlineBlock,eC.wp.mx(2),{"& > div":[eC.wp.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,nt._)(s,"firstHiddenTextWrapper",[eC.wp.ml(0)]),(0,nt._)(s,"lastHiddenTextWrapper",[eC.wp.mr(0)]),s));function yK(e){var n=e.content,t=e.matches,r=e.dedentBy,o=e.replacement,i=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,p.Y)(p.FK,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,o=e.replacement,i=[],a=r,l=0;l<t.length;l++){var s=t[l],c=s.start+s.length;i.push({start:a,end:s.start,type:"text"});var u=n.substring(s.start,c);o.length>0&&o!==u?(i.push({start:s.start,end:c,type:"remove"}),i.push({start:-1,end:c,type:"add"})):i.push({start:s.start,end:c,type:"highlight",matchIndex:l}),a=c}return i.push({start:a,end:n.length,type:"text"}),i})({content:n,matches:t,dedentBy:r,replacement:o}).map(function(e,t,r){var s=e.start,c=e.end,u=e.type,d="".concat(s,"-").concat(c),f=c-s;if("text"===u){var g=r[t+1];if(0===t&&f>50)return(0,p.FD)(h.Fragment,{children:[(0,p.Y)(yW,{css:[yq.hiddenTextWrapper,yq.firstHiddenTextWrapper],children:(0,p.Y)(t7.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(c-50)},children:(0,p.Y)(yH.A,{})})},d),(0,p.Y)("span",{children:n.substring(c-50,c)})]},d);if(t===r.length-1&&f>50)return(0,p.FD)(h.Fragment,{children:[(0,p.Y)("span",{children:n.substring(s,s+50)}),(0,p.Y)(yW,{css:[yq.hiddenTextWrapper,yq.lastHiddenTextWrapper],children:(0,p.Y)(t7.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(s+50)},children:(0,p.Y)(yH.A,{})})},d)]},d);if(g&&f>100)return(0,p.FD)(h.Fragment,{children:[(0,p.Y)("span",{children:n.substring(s,s+50)}),(0,p.Y)(yW,{css:yq.hiddenTextWrapper,children:(0,p.Y)(t7.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(s+50)},children:(0,p.Y)(yH.A,{})})},d),(0,p.Y)("span",{children:n.substring(c-50,c)})]},d)}var m=-1===s?o:n.substring(s,c);if("text"===u)return(0,p.Y)(h.Fragment,{children:m},d);var v=null,w=r[t-1];return"add"===u&&(null==w?void 0:w.type)==="remove"&&(v=n.substring(w.start,w.end)),(0,p.Y)(yZ,{content:m,type:u,isRegex:i,query:a,replacement:o,removedText:v,onClick:function(e){e.stopPropagation(),l(c)}},d)})})}function yZ(e){var n=e.content,t=e.type,r=e.isRegex,o=e.replacement,i=e.query,a=e.removedText,l=(0,oL._)(e,["content","type","isRegex","replacement","query","removedText"]),s=n,c=void 0;switch(t){case"highlight":c="Matched text ".concat(s);break;case"remove":c="Removed text ".concat(s);break;case"add":if(c="Added text ".concat(s),r&&null!==a)try{s=a.replace(new RegExp(i),o.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,p.Y)(ez.D.span,(0,e8._)((0,g._)({css:[yq.self,yq[t]],tabIndex:0,"aria-label":c,role:"button","data-nav":yz},l),{children:"add"===t?(0,p.Y)(yB,{content:s}):s}))}var yV=(0,eA.x)({self:[eC.wp.pt(8),eC.wp.pb(8),eC.wp.width("100%"),eC.wp.flex.wrap],text:[eC.wp.display.block,eC.wp.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function yJ(e){var n=e.error;return(0,p.FD)(ez.S,{css:yV.self,row:!0,gap:4,align:"center",justify:"center",children:[(0,p.Y)(cB.A,{}),(0,p.Y)(eW.EY,{css:yV.text,multiline:!1,children:n})]})}var yQ=t(4324),yX=t(9068),y0="SearchLine",y1="--search-line-number-width",y2=(0,eA.x)({self:[eC.wp.overflow("hidden"),eC.wp.cursor.pointer,eC.wp.borderRadius(4),{"&:focus-visible":[eC.wp.focusRing],"&:hover, &:focus-visible":[eC.wp.backgroundColor.backgroundHighest]}],content:[eC.wp.font.code,eC.wp.maxWidth("100%"),eC.wp.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[eC.wp.display.inlineBlock,eC.wp.color.foregroundDimmest,eC.wp.mr(8),eC.wp.pl(8)],lineNumber:[eC.wp.display.inlineBlock,eC.wp.textAlign.right,{width:"var(".concat(y1,")")}]});function y5(e){var n=e.lineNumber,t=e.content,r=e.matches,o=e.path,i=e.dedentBy,a=e.onFileLineClicked,l=(0,oL._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),s=(0,P.A)(function(){return function(e){(0,z.u4)(z.AZ.SEARCH_PANE_RESULT_CLICKED,(0,g._)({},l)),a({path:o,lineNumber:n,columnNumber:e})}},[n,l,o,a]),c=(0,P.A)(function(){return function(){var e=r.length>0?r[0]:null;s(e?e.start+e.length:0)}},[r,s]);return(0,p.FD)(ez.S,{tabIndex:0,css:y2.self,row:!0,gap:8,align:"stretch","data-nav":y0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),c())},onClick:c,children:[(0,p.Y)(ez.S,{css:y2.lineNumberWrapper,children:(0,p.Y)(ez.S,{tag:"span",css:y2.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,p.Y)("pre",{css:y2.content,children:(0,p.Y)(yK,{isRegex:l.isRegex,content:t,matches:r,dedentBy:i,query:l.query,replacement:l.replacement,onOpenAtPosition:s})})]})}var y4="SearchFileNav",y3="SearchFileHeaderNav",y8="SearchQueryNav",y7="SearchQueryTogglesNav",y6=parseInt(tB.zu.space24,10)+10,y9=(0,eA.x)({header:[eC.wp.rowWithGap(4),eC.wp.align.center,eC.wp.rowWithGap(6),eC.wp.flex.growAndShrink(1),eC.wp.overflow("hidden")],headerParentPathText:[eC.wp.flex.shrink(1e7)],headerFileNameText:[eC.wp.flex.shrink(1)],headerMatchesCountPill:[eC.wp.height(20),eC.wp.flex.shrink(0)],accordionWrapper:[eC.wp.mx(4),eC.wp.border({direction:"top",color:tB.LU.outlineDimmest})],accordionChildren:[eC.wp.p(4)],linesWrapper:[eC.wp.overflow("hidden"),eC.wp.borderRadius(4),eC.wp.font.code]});function be(e){var n=e.path,t=e.lines,r=e.dedentBy,o=e.isFirst,i=e.expanded,a=e.onClick,l=e.scrollOffset,s=e.onFileLineClicked,c=e.searchResultBackgroundColor,u=(0,oL._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),d=(0,F.gc)("fontSize").preferences.fontSize,f=(0,h.useRef)(null),m=(0,P.A)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),v=(0,P.A)(function(){var e=t[t.length-1];if(!e)return{};var n=(0,yX.V)(e.lineNumber),r=(0,yQ.s)(d);return(0,nt._)({fontSize:d,lineHeight:r},y1,"".concat(n,"ch"))},[t,d]);return(0,p.Y)(eD.ui,{css:y9.accordionWrapper,style:v,"data-nav":y4,innerRef:f,children:(0,p.Y)(m5.A,{expanded:void 0===i||i,onClick:function(){a(f.current)},headerProps:{"data-nav":"".concat(y3," ").concat(y0," ").concat(o?"".concat(y8," ").concat(y7):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:c}},headerContent:(0,p.FD)(ez.S,{css:y9.header,children:[(0,p.Y)(ep.A,{path:n,size:16}),(0,p.Y)(eW.EY,{css:y9.headerFileNameText,multiline:!1,children:(0,ts.WP)(n)}),(0,p.Y)(eW.EY,{color:"dimmest",css:y9.headerParentPathText,multiline:!1,children:(0,ts._6)(n).replace(/^\.\//,"")}),(0,p.Y)(uf.a,{variant:"muted",text:"".concat(m," ").concat((0,o7.A)("match",m)),css:y9.headerMatchesCountPill})]}),children:(0,p.Y)(ez.S,{css:y9.accordionChildren,children:(0,p.Y)(ez.S,{css:y9.linesWrapper,children:t.map(function(e){return(0,p.Y)(y5,(0,e8._)((0,g._)({},e,u),{path:n,dedentBy:r,onFileLineClicked:s}),e.lineNumber)})})})})})}var bn=t(14019),bt=(0,eA.x)({container:[eC.wp.p(4),eC.wp.flex.row,eC.wp.align.center,eC.wp.justify.spaceBetween,eC.wp.border({direction:"bottom",color:tB.LU.outlineDimmest})],actions:[eC.wp.display.flex,eC.wp.rowWithGap(4)]});function br(e){var n="collapse"===e.collapseExpandAllState;return(0,p.FD)(ez.S,{css:bt.container,children:[(0,p.FD)(eW.EY,{color:"dimmer",children:[e.totalCount," results in ",(0,o7.A)("file",e.fileCount,!0)]}),(0,p.FD)(ez.S,{css:bt.actions,children:[(0,p.Y)(t7.K0,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,p.Y)(rt.A,{})}),(0,p.Y)(t7.K0,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,p.Y)(t6.A,{}):(0,p.Y)(bn.A,{})})]})]})}var bo=t(77581),bi=(0,tG.i7)({from:{opacity:0},to:{opacity:1}}),ba=(0,eA.x)({listWrapper:[eC.wp.overflowY("auto"),eC.wp.flex.grow(1),{contain:"strict"}],list:[eC.wp.width("100%"),eC.wp.position.relative],listItem:[eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),eC.wp.width("100%")],resultRow:[{animation:"".concat(bi," 120ms linear forwards")}]});function bl(e){var n,t,r,o,i,a,l,s,c,u,f=e.results,m=e.error,v=e.paneRef,w=e.onFileLineClicked,y=e.onOpenSearchPane,b=e.searchResultBackgroundColor,S=(0,oL._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),Y=(0,P.A)(function(){return f.filter(function(e){return e.lines.length>0})},[f]),x=(0,P.A)(function(){return Y.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[Y]),_=(0,d._)((0,h.useState)({}),2),A=_[0],C=_[1],k=(0,h.useRef)(null),D=(0,gv.Te)({count:Y.length,getScrollElement:function(){return k.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,o=0;o<e.length;o++){var i=e[o],a=9*(0,yX.V)(o)+9*i.content.length+4*i.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return y6+20+24.39*t+2*t}(Y[e].lines,null==v?void 0:null===(n=v.current)||void 0===n?void 0:n.offsetWidth)},overscan:3}),R=D.getVirtualItems(),E=(0,h.useRef)(null),I=(0,h.useCallback)(function(e){var n=k.current;if(n&&E.current!==e){if(e.matches('[data-nav*="'.concat(y3,'"]'))){e.focus();return}var t=e.closest('[data-nav="'.concat(y4,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(y3,'"]'));if(!r){e.focus();return}var o=r.getBoundingClientRect();if(r.offsetTop+o.height>e.offsetTop){var i=e.offsetTop-o.height;E.current=e;var a=function(){n.scrollTop===i&&(n.removeEventListener("scroll",a),E.current===e&&(e.focus(),E.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:i})}else e.focus()}},[]),U=(n={selector:'[data-nav*="'.concat(y3,'"]'),boundary:'[data-nav*="'.concat(y4,'"]')},t=(0,h.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,h.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),yR((0,e8._)((0,g._)({},n),{isValid:t,move:r}))),F=(o={selector:'[data-nav*="'.concat(y0,'"]'),focus:I},i=(0,h.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,h.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),yR((0,e8._)((0,g._)({},o),{isValid:i,move:a}))),T=(l={selector:'[data-nav*="'.concat(yz,'"]'),focus:I},s=(0,h.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),c=(0,h.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),yR((0,e8._)((0,g._)({},l),{isValid:s,move:c}))),O=(0,yM.P)(U,F,T),L=(0,P.A)(function(){return Y.length===Object.keys(A).length&&Object.values(A).every(Boolean)},[A,Y.length]),N=null;return Y.length>0?N=(0,p.FD)(p.FK,{children:[(0,p.Y)(br,{fileCount:Y.length,totalCount:x,collapseExpandAllState:L?"expand":"collapse",onToggleCollapseExpandAll:function(){L?C({}):C(Y.reduce(function(e,n){return(0,e8._)((0,g._)({},e),(0,nt._)({},n.path,!0))},{}))},onStartNewSearch:y}),(0,p.Y)(ez.D.div,{ref:k,css:ba.listWrapper,children:(0,p.Y)(ez.S,{css:ba.list,style:{height:D.getTotalSize()},children:(0,p.Y)(ez.S,{css:ba.listItem,style:{transform:"translateY(".concat(null===(u=R[0])||void 0===u?void 0:u.start,"px)")},innerRef:O,children:R.map(function(e){var n,t=Y[e.index],r=t.path;return(0,p.Y)(ez.D.div,{"data-index":e.index,ref:D.measureElement,css:ba.resultRow,children:(0,p.Y)(be,(0,e8._)((0,g._)({},t,S),{scrollOffset:null===(n=R[0])||void 0===n?void 0:n.start,onFileLineClicked:w,isFirst:0===e.index,expanded:!0!==A[r],searchResultBackgroundColor:b,onClick:function(e){if(C(function(e){return(0,e8._)((0,g._)({},e),(0,nt._)({},r,!(r in e)||!e[r]))}),k.current&&e){var n,t,o=Math.floor(null!==(t=null===(n=R[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0),i=Math.floor(k.current.scrollTop),a=e.offsetTop+o;a>i||k.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):m===bo.F.EMPTY_RESULTS&&(N=(0,p.Y)(me.A,{pane:{type:"searchReplace"},headerText:m})),(0,p.FD)(p.FK,{children:[m&&m!==bo.F.EMPTY_RESULTS?(0,p.Y)(yJ,{error:m}):null,N]})}var bs=t(35784);function bc(e){return(0,h.useMemo)(function(){return(0,M._)((0,bs.l0)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var bu=function(e){return e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted",e}({}),bd=t(91806);function bp(){return(bp=(0,G._)(function(e){var n,t,r,o,i,a,l,s,c;return(0,B.YH)(this,function(u){switch(u.label){case 0:if(t=e.container,r=e.fileList,0===(o=(0,oL._)(e,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:bu.QUERY_EMPTY}];if(o.query===o.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:bu.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return i=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,M._)((0,bd.Qq)((0,e8._)((0,g._)({},o),{context:1,mode:"files"}))))];case 2:if((s=u.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===s.error?bu.NO_MATCHES:s.error}];i=(null===(l=s.output)||void 0===l?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],u.label=3;case 3:var d,p,f,h,m,v,w,y;if(0===i.length)return[2,{success:!1,errorOn:"rg",errorMessage:bu.NO_MATCHES}];return[4,(n=t).exec.apply(n,(0,M._)((p=(d=o).replacement,f=d.query,h=d.isRegex,m=d.isCaseSensitive,v=d.isMatchingWholeWords,w=["sd"],y=[f.indexOf("\n")>=0?"m":"e",m?"c":"i"],v&&y.push("w"),w.push("--flags",y.join("")),h||w.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),w.push(f,p),w)).concat((0,M._)(i)))];case 4:if((c=u.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:c.error}];return[2,{success:!0}]}})})).apply(this,arguments)}var bf=t(7020),bh=t(49850),bg=t(20268),bm=t(95202),bv=t(29328),bw=t(32001),by="SearchQueryControlsNav",bb="SearchQueryExcludeNav",bS="SearchQueryControlsColumnNav",bY=(0,tG.i7)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),bx=eC.kL.min(360),b_=(0,eA.x)({self:[eC.wp.height("100%"),eC.wp.width("100%"),eC.wp.overflow("hidden"),eC.wp.px(4),eC.wp.container()],filesIncludeExcludeWrapper:[eC.wp.pt(8),eC.wp.mt(6),eC.wp.border({direction:"top",color:tB.LU.outlineDimmest}),(0,nt._)({},bx,[eC.wp.rowWithGap(6),eC.wp.align.start,eC.wp.mt(0),{border:"none"}])],inputWithLabel:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(1)],inputLabelText:[{userSelect:"none"},eC.wp.color.foregroundDimmest,eC.wp.truncate,{fontSize:tB.LU.fontSizeSmall}],inputLabel:[eC.wp.flex.shrink(1),eC.wp.m(0),{lineHeight:1}],input:[eC.wp.viewStyle,eC.wp.border(),{blockSize:tB.LU.space32,"::placeholder":{color:tB.LU.foregroundDimmest},"&:hover::placeholder":{color:tB.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:tB.LU.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[eC.wp.rowWithGap(2),eC.wp.align.center,(0,nt._)({order:2},bx,[{order:1," > *":eC.wp.height("100%")}])],closeWrapper:[(0,nt._)({order:1},bx,{order:2," > *":eC.wp.height("100%")})],results:[eC.wp.position.relative,{flex:"1 1 auto"}],searchWrapper:[eC.wp.pb(4),eC.wp.rowWithGap(4),{flex:"0 1 auto"}],expandCollapseButton:[eC.wp.height(32)],searchInputAndOptionsWrapper:(0,nt._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},bx,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[eC.wp.ml(24),eC.wp.pl(4),eC.wp.pb(6)],replaceInputWrapper:[eC.wp.pt(8),eC.wp.border({direction:"top",color:tB.LU.outlineDimmest}),(0,nt._)({},bx,[eC.wp.rowWithGap(4),eC.wp.pt(0),eC.wp.align.center,{border:"none"}])],loadingBar:[eC.wp.position.absolute,eC.wp.mt(2),eC.wp.height(1),eC.wp.borderRadius(2),eC.wp.width("100%"),eC.wp.backgroundColor.accentPrimaryDimmer,{animation:"".concat(bY," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function bA(e){var n=e.updateData,t=e.query,r=e.setQuery,o=e.isRegex,i=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,s=e.isMatchingWholeWords,c=e.setIsMatchingWholeWords,u=e.isCollapsed,d=e.setIsCollapsed,f=e.executeSearch,h=e.searchInputRef,g=e.onCloseRequested;return(0,p.FD)(ez.S,{css:b_.searchWrapper,children:[(0,p.Y)(t7.K0,{onClick:function(){return d(function(e){return!e})},alt:u?"Show replacement options":"Hide replacement options",css:b_.expandCollapseButton,children:u?(0,p.Y)(ci.A,{}):(0,p.Y)(aa.A,{})}),(0,p.FD)(ez.S,{css:b_.searchInputAndOptionsWrapper,children:[(0,p.Y)(yL,{"data-nav":"".concat(y8," ").concat(by),ref:h,autoSize:!0,placeholder:"Search",value:t,css:b_.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,rd.T$)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),f())}}),(0,p.FD)(ez.S,{css:b_.optionsWrapper,children:[(0,p.Y)(yN.A,{alt:"case sensitive","data-nav":"".concat(by," ").concat(bS),icon:(0,p.Y)(bm.A,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,p.Y)(yN.A,{alt:"regular expressions","data-nav":"".concat(by," ").concat(bS),icon:(0,p.Y)(bv.A,{}),checked:o,onClick:function(){return i(function(e){return!e})}}),(0,p.Y)(yN.A,{alt:"whole words","data-nav":"".concat(by," ").concat(bS),icon:(0,p.Y)(bw.A,{}),checked:s,onClick:function(){return c(function(e){return!e})}})]}),(0,p.Y)(ez.S,{css:b_.closeWrapper,row:!0,gap:2,align:"center",children:g?(0,p.Y)(t7.K0,{onClick:g,alt:"Close",children:(0,p.Y)(oN.A,{})}):null})]})]})}function bC(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,o=e.query,i=e.replaceLoading,a=e.search,l=e.includeGlob,s=e.setIncludeGlob,c=e.excludeGlob,u=e.setExcludeGlob,d=e.replace,f=e.results;return(0,p.FD)(ez.S,{css:b_.replacementWrapper,children:[(0,p.FD)(ez.S,{css:b_.replaceInputWrapper,gap:6,children:[(0,p.Y)(yL,{"data-nav":"".concat(y8," ").concat(by," ").concat(bb),autoSize:!0,placeholder:"Replacement",value:t,css:b_.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,p.Y)(ez.S,{css:b_.optionsWrapper,children:(0,p.Y)(yP,{query:o,replacement:t,results:f,disabled:0===o.length,loading:i,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(by," ").concat(y7," ").concat(bS)}})})]}),(0,p.FD)(ez.S,{css:b_.filesIncludeExcludeWrapper,gap:8,children:[(0,p.FD)(ez.S,{css:b_.inputWithLabel,id:"filesToInclude",children:[(0,p.Y)("label",{htmlFor:"filesToIncludeInput",css:b_.inputLabel,children:(0,p.Y)(eW.EY,{css:b_.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,p.Y)(yL,{id:"filesToIncludeInput","data-nav":"".concat(y8," ").concat(by),autoSize:!0,value:l,css:b_.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){s(e),n({initialIncludeGlob:e})},onClear:function(){s(""),n({initialIncludeGlob:""})}})]}),(0,p.FD)(ez.S,{css:b_.inputWithLabel,id:"filesToExclude",children:[(0,p.Y)("label",{htmlFor:"filesToExcludeInput",css:b_.inputLabel,children:(0,p.Y)(eW.EY,{css:b_.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,p.Y)(yL,{id:"filesToExcludeInput","data-nav":"".concat(by," ").concat(bb),autoSize:!0,value:c,css:b_.input,onChange:function(e){u(e),n({initialExcludeGlob:e})},onClear:function(){u(""),n({initialExcludeGlob:""})}})]})]})]})}function bk(e){var n,t,r,o,i,a,l,s,c,u,f,m,v,w,y,b,S,Y,x,_,A,k,D,R,E,I,U,F,T,O,L,N,H,W,$,j,q,K,Z,V,J,Q=e.isActive,X=e.initialQuery,ee=void 0===X?"":X,en=e.initialReplacement,er=void 0===en?"":en,eo=e.initialIncludeGlob,ei=void 0===eo?"":eo,ea=e.initialExcludeGlob,el=void 0===ea?"":ea,es=e.searchInputRef,ec=e.onDataChanged,eu=e.onFileLineClicked,ed=e.onOpenSearchPane,ep=e.onCloseRequested,ef=e.searchResultBackgroundColor,eh=(0,d._)((0,h.useState)(ee),2),eg=eh[0],em=eh[1],ev=(0,d._)((0,h.useState)(er),2),ew=ev[0],ey=ev[1],eb=(0,d._)((0,h.useState)(!1),2),eS=eb[0],eY=eb[1],ex=(0,d._)((0,h.useState)(!1),2),e_=ex[0],eA=ex[1],eC=(0,d._)((0,h.useState)(!1),2),ek=eC[0],eD=eC[1],eR=(0,d._)((0,h.useState)(!0),2),eE=eR[0],eI=eR[1],eU=(0,d._)((0,h.useState)(el),2),eF=eU[0],eP=eU[1],eT=(0,d._)((0,h.useState)(ei),2),eO=eT[0],eL=eT[1],eN=bc(eF),eM=bc(eO),eG=(0,h.useRef)(null),eB=(t=(n={query:eg,isRegex:eS,isCaseSensitive:e_,isMatchingWholeWords:ek,excludeGlobs:eN,includeGlobs:eM}).query,r=n.isRegex,o=n.isCaseSensitive,i=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,c=void 0===(s=n.excludeGlobs)?[]:s,f=(u=(0,et.A)()).container,m=u.dotReplit,v=(0,bh.o)(m),w=(0,C._P)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),b=(y=(0,d._)((0,h.useState)([]),2))[0],S=y[1],x=(Y=(0,d._)((0,h.useState)(null),2))[0],_=Y[1],k=(A=(0,d._)((0,h.useState)(t.length>0),2))[0],D=A[1],R=(0,P.A)(function(){return(0,M._)(c).concat((0,M._)(v||[]),(0,M._)(bf.TJ))},[c,v]),E=f.getConnectionState(),I=(0,h.useMemo)(function(){return(0,bg.A)({container:f,onError:function(e){return _(e)},onUpdate:function(e){return S(e)},onLoadingStateChange:function(e){return D(e)},isStreaming:!0,trackLatency:w})},[]),(0,h.useEffect)(function(){E===e7.KN.CONNECTED&&I({query:t,isRegex:r,isCaseSensitive:o,isMatchingWholeWords:i,includeGlobs:l,excludeGlobs:R})},[E,I,t,r,o,i,l,R,v]),{loading:k,error:x,data:b,search:function(){return I({query:t,isRegex:r,isCaseSensitive:o,isMatchingWholeWords:i,includeGlobs:l,excludeGlobs:R})}}),eH=eB.loading,eW=eB.error,e$=eB.data,ej=eB.search;(0,sZ.A)(function(){""!==eg&&(0,z.u4)(z.AZ.SEARCH_PANE_USED,{action:"search",isRegex:eS,isCaseSensitive:e_,hasIncludes:eM.length>0,hasExcludes:eN.length>0})},[eg,eM,eN,eS,e_],1e3);var eq=(F=(U={replacement:ew,query:eg,isRegex:eS,isCaseSensitive:e_,isMatchingWholeWords:ek,excludeGlobs:eN,includeGlobs:eM,fileList:eW?void 0:e$}).query,T=U.replacement,O=U.fileList,L=(0,oL._)(U,["query","replacement","fileList"]),N=(0,et.A)().container,W=(H=(0,d._)((0,h.useState)(!1),2))[0],$=H[1],q=(j=(0,d._)((0,h.useState)(null),2))[0],K=j[1],V=(Z=(0,d._)((0,h.useState)(!1),2))[0],J=Z[1],{replace:(0,h.useCallback)((0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:return J(!0),K(null),[4,function(e){return bp.apply(this,arguments)}((0,g._)({container:N,query:F,replacement:T,fileList:null==O?void 0:O.map(function(e){return e.path})},L))];case 1:return(e=n.sent()).success||K(e.errorMessage),J(!1),$(e.success),[2,e]}})}),[N,F,T,O,L]),loading:V,error:q,data:W}),eK=eq.loading,eZ=eq.replace,eV=(0,h.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ec||ec({initialQuery:eg,initialReplacement:ew,initialIncludeGlob:eO,initialExcludeGlob:eF},e)},[ec,eg,ew,eF,eO]);(0,h.useLayoutEffect)(function(){em(ee),ey(er),eL(ei),eP(el)},[ee,er,ei,el]);var eJ=yR({selector:'[data-nav*="'.concat(y8,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(y8,'"]')),r=e.target.matches("[data-nav*=".concat(y3,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eQ=yR({selector:'[data-nav*="'.concat(y7,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(y7,'"]')),r=e.target.matches("[data-nav*=".concat(y3,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eX=yR({selector:'[data-nav*="'.concat(bS,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(y7,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(bS,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,o=n.target.matches('[data-nav*="'.concat(y7,'"]'));return(n.preventDefault(),n.stopPropagation(),o)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),e0=yR({selector:'[data-nav*="'.concat(bb,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bb,'"]')),r=e.target.matches("[data-nav*=".concat(y8,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e1=yR({selector:'[data-nav*="'.concat(by,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(bS,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),e2=(0,e9.P)(eJ,eQ,eX,e0,e1,{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:702"}),e5=(0,h.useCallback)(function(e){"Escape"===e.key&&(null==ep||ep())},[ep]);return(0,p.FD)(ez.S,{css:b_.self,innerRef:e2,onKeyDown:e5,children:[(0,p.Y)(bA,{isActive:Q,query:eg,setQuery:em,updateData:eV,isRegex:eS,isCaseSensitive:e_,isMatchingWholeWords:ek,setIsRegex:eY,setIsCaseSensitive:eA,setIsMatchingWholeWords:eD,isCollapsed:eE,setIsCollapsed:eI,executeSearch:ej,searchInputRef:es,onCloseRequested:ep}),eE?null:(0,p.Y)(bC,{replacement:ew,setReplacement:ey,updateData:eV,query:eg,replaceLoading:eK,search:ej,includeGlob:eO,setIncludeGlob:eL,excludeGlob:eF,setExcludeGlob:eP,replace:eZ,results:e$}),(0,p.FD)(ez.S,{css:b_.results,children:[eH?(0,p.Y)(ez.S,{css:b_.loadingBar},eg):null,0===eg.length&&0===e$.length?(0,p.Y)(me.A,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,p.Y)(bl,{isRegex:eS,query:eg,replacement:ew,include:eO,exclude:eF,results:e$,error:eW,paneRef:eG,onOpenSearchPane:ed,onFileLineClicked:eu,searchResultBackgroundColor:ef})]})]})}var bD=n6.ZU.Object({type:n6.ZU.Literal("searchReplace"),data:n6.ZU.Optional(n6.ZU.Object({initialQuery:n6.ZU.Optional(n6.ZU.String()),initialReplacement:n6.ZU.Optional(n6.ZU.String()),initialIncludeGlob:n6.ZU.Optional(n6.ZU.String()),initialExcludeGlob:n6.ZU.Optional(n6.ZU.String())}))}),bR={Content:function(e){var n=e.pane,t=e.options;return(0,p.Y)(bI,{paneData:(null==n?void 0:n.data)||{},isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,p.Y)(X.A,{size:n})},getTitle:function(e){var n,t=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your App",category:Q.bY.WorkspaceFeatures,decode:function(e){return n9.WT.Decode(bD,e)}},bE=(0,eA.x)({wrapper:[eC.wp.pt(6),eC.wp.height("100%"),eC.wp.width("100%")]});function bI(e){var n=e.paneData,t=e.isActive,r=e.performPaneOperation,o=(0,h.useRef)(null),i=(0,h.useCallback)(function(){var e,n;null===(e=o.current)||void 0===e||e.select(),null===(n=o.current)||void 0===n||n.focus()},[]);(0,ec.Qt)(function(){return{type:"searchReplace",focusSearchInput:i}},[i]),(0,ec.HP)(function(){return{focus:i}},[i]);var a=(0,h.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),l=(0,h.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),s=(0,h.useCallback)(function(e,n){r({operation:"replace",pane:{type:"searchReplace",data:(0,g._)({},e,n)}})},[r]);return(0,p.Y)(ez.S,{css:bE.wrapper,children:(0,p.Y)(bk,(0,e8._)((0,g._)({},n),{isActive:t,searchInputRef:o,onFileLineClicked:a,onOpenSearchPane:l,onDataChanged:s,searchResultBackgroundColor:tB.LU.backgroundDefault}))})}var bU=n6.ZU.Object({type:n6.ZU.Literal("threadInbox")}),bF={Content:function(e){var n=e.options;return(0,p.Y)(m9,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.blueStronger,size:n},children:(0,p.Y)(mz.A,{})})},getTitle:function(){return"Threads"},description:"Comment and discuss topics with collaborators directly inside code or text files",category:Q.bY.Collaboration,decode:function(e){return n9.WT.Decode(bU,e)}},bP=t(29581),bT=t(96979),bO=t(43740),bL=t(39424),bN=t(78560),bM=function(e){return e.Ready="READY",e.Loading="LOADING",e.Error="ERROR",e}(bM||{}),bG=function(e){var n=e.progress;return(0,p.Y)(tH.m_,{tooltip:"Progress: ".concat(Math.round(1e3*n)/10,"%"),children:(0,p.Y)(ez.S,{css:[eC.wp.width("100%"),eC.wp.height(4),eC.wp.backgroundColor.backgroundHigher],children:(0,p.Y)(ez.S,{css:[eC.wp.width("".concat(100*n,"%")),eC.wp.height("100%"),eC.wp.backgroundColor.purpleDefault]})})})},bB=n6.ZU.Object({type:n6.ZU.Literal("tutorial")}),bH={Content:function(){var e,n=(0,et.A)().fs,t=(0,en.OH)(),r=(0,sn.Jw)(lV.C.id,lV.j.Sidepane),o=(0,d._)((0,h.useState)([]),2),i=o[0],a=o[1],l=(0,d._)((0,h.useState)("LOADING"),2),s=l[0],c=l[1],u=(0,eG.A)(),f=(0,d._)((0,bP.A)("tutorialProgress--".concat(u),0),2),g=f[0],m=f[1],v=(0,d._)((0,h.useState)(!1),2),w=v[0],y=v[1],b=(0,h.useRef)(null),S=(0,eM.T)(),Y=S?S.toString():"",x=(0,t8.vO)(),_=(0,t8.rM)(),A=(0,bO.A)(_),C=(0,P.A)(function(){return A?function(e){var n,t;return A({code:e,insertAt:null!==(t=null===(n=x())||void 0===n?void 0:n.position.offset)&&void 0!==t?t:"end"})}:void 0},[A,x]),k=(0,bN.wp)(Y,u),D=k?(0,p.Y)(bN.Q9,{challenge:k}):null,R=(0,h.useCallback)(function(){b.current&&(b.current.scrollTop=0)},[b]);return((0,h.useEffect)(function(){var e,t=!1;return(e=(0,G._)(function(){var e,r,o,i,l,s,u,p,f,h,g,m,v,w;return(0,B.YH)(this,function(y){switch(y.label){case 0:return c("LOADING"),[4,n.readDir(bL.T)];case 1:if(e=y.sent(),t)return[2];if(e.error)return c("ERROR"),[2];return r=[],[4,Promise.all(e.children.filter(function(e){var n;return e.type===tu.pt.File&&(null===(n=v_.Jh.from(e.filename))||void 0===n?void 0:n.id)==="markdown"}).map(function(e){var t="".concat(bL.T,"/").concat(e.filename);return Promise.all([t,n.readFile(t)])}))];case 2:if(o=y.sent(),t)return[2];i=!0,l=!1,s=void 0;try{for(u=o[Symbol.iterator]();!(i=(p=u.next()).done);i=!0)h=(f=(0,d._)(p.value,2))[0],(g=f[1]).error?c("ERROR"):(v=g.content.toString(),w=RegExp("^#\\s(?<title>.*)").exec(v),r.push({title:null==w?void 0:null===(m=w.groups)||void 0===m?void 0:m.title,content:v,path:h}))}catch(e){l=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}return a(r),c("READY"),[2]}})}),function(){return e.apply(this,arguments)})(),function(){t=!0}},[n]),(0,h.useEffect)(function(){i[g]||m(0)},[g,m,i]),"LOADING"===s)?(0,p.Y)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.center],children:(0,p.Y)(sp.A,{})}):"ERROR"===s?(0,p.Y)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.center],children:(0,p.FD)(ez.S,{css:[eC.wp.center,eC.wp.colWithGap(4)],children:[(0,p.Y)(oN.A,{color:tB.LU.accentNegativeDefault}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===i.length?(0,p.Y)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.center],children:(0,p.FD)(ez.S,{css:[eC.wp.center,eC.wp.colWithGap(4)],children:[(0,p.Y)(oN.A,{color:tB.LU.accentNegativeDefault}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):w?(0,p.FD)(ez.S,{css:[eC.wp.overflowY("scroll"),eC.wp.flex.growAndShrink(1),eC.wp.p(8),eC.wp.colWithGap(16)],children:[(0,p.Y)(eW.EY,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,p.Y)(ez.S,{css:[eC.wp.flex.growAndShrink(1),eC.wp.colWithGap(8)],children:i.map(function(e,n){return(0,p.FD)(ez.S,{css:[eC.wp.p(8),g===n?eC.wp.backgroundColor.backgroundHighest:eC.wp.backgroundColor.backgroundHigher,eC.wp.borderRadius(4),eC.wp.rowWithGap(8),eC.wp.align.center,eC.wp.cursor.pointer,g===n?{outline:"solid 2px ".concat(tB.LU.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(tB.LU.outlineDimmest)}}],onClick:function(){m(n),y(!1)},children:[(0,p.Y)(ez.S,{css:[eC.wp.backgroundColor.backgroundHighest,eC.wp.width(20),eC.wp.height(20),eC.wp.borderRadius("full"),eC.wp.center,{outline:"solid 1px ".concat(tB.LU.outlineDimmest)}],children:(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,p.Y)(eW.EY,{css:[eC.wp.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,p.Y)(ez.S,{innerRef:r,css:[eC.wp.height("100%")],children:(0,p.FD)(ez.S,{dataCy:"tutorial-viewer-content",innerRef:b,css:[eC.wp.overflowY("scroll"),eC.wp.flex.growAndShrink(1),eC.wp.p(16),eC.wp.pb(48),eC.wp.colWithGap(16)],children:[t?(0,p.Y)(eH.$n,{text:"Show tutorial video",iconLeft:(0,p.Y)(oy.A,{}),onClick:function(){return t()}}):null,D,i.length>1&&(0,p.Y)(eH.$n,{text:"Table of Contents",iconLeft:(0,p.Y)(yn.A,{}),onClick:function(){return y(!0)}}),(0,p.Y)(bT.A,{fs:n,path:i[g].path,source:i[g].content,sourcePos:!1,onCodeInsert:C}),i.length>1&&(0,p.FD)(ez.S,{css:[eC.wp.position.absolute,eC.wp.width("100%"),eC.wp.left(0),eC.wp.bottom(0),eC.wp.overflow("hidden")],children:[(0,p.Y)(bG,{progress:(g+1)/i.length}),(0,p.FD)(ez.S,{css:[eC.wp.width("100%"),eC.wp.height(40),eC.wp.align.center,eC.wp.flex.row],children:[(0,p.Y)(ez.S,{tag:"button",css:[eC.wp.p(8),eC.wp.backgroundColor.backgroundHigher,eC.wp.cursor.pointer,eC.wp.width(40),eC.wp.height("100%")],justify:"center",onClick:function(){g>0&&(m(function(e){return e-1}),R())},children:g>0&&(0,p.Y)(vv.A,{size:24})}),(0,p.Y)(ez.S,{tag:"button",css:[eC.wp.flex.growAndShrink(1),eC.wp.height("100%"),eC.wp.justify.spaceBetween,eC.wp.backgroundColor.backgroundHighest,eC.wp.align.center,eC.wp.p(8),eC.wp.cursor.pointer,{userSelect:"none"}],row:!0,gap:8,onClick:function(){g<i.length-1&&(m(function(e){return e+1}),R())},children:g<i.length-1&&(0,p.FD)(p.FK,{children:[(0,p.FD)(eW.EY,{multiline:!1,css:[eC.wp.flex.growAndShrink(1),eC.wp.textAlign.left,eC.wp.fontSize(tB.LU.fontSizeSubheadDefault)],children:[(0,p.FD)("span",{css:[eC.wp.color.foregroundDimmer],children:["Next",i[g+1].title?": ":" page"]}),(0,p.Y)("b",{children:null!==(e=i[g+1].title)&&void 0!==e?e:""})]}),(0,p.Y)(ci.A,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,p.Y)(ps.A,{size:n})},getTitle:function(){return"Tutorial"},category:Q.bY.Other,decode:function(e){return n9.WT.Decode(bB,e)}},bW=t(79917),bz=t(46980);function b$(){var e=(0,m._)(["\n  fragment WorkspaceGuidedTourAuthorizations on ReplAuthorizations {\n    editPermissions {\n      isAuthorized\n      code\n      message\n    }\n    createDeployment(provider: $deploymentProvider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return b$=function(){return e},e}function bj(){var e=(0,m._)(["\n  query WorkspaceGuidedTourChecklist(\n    $replId: String!\n    $deploymentProvider: HostingBuildProvider!\n  ) {\n    currentUser {\n      ...UserPlanStateCurrentUser\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...WorkspaceGuidedTourAuthorizations\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return bj=function(){return e},e}var bq={},bK=(0,v.J1)(b$()),bZ=(0,v.J1)(bj(),bz.o,bK),bV=t(84199),bJ=t(7357),bQ=t(39797),bX=(0,eA.x)({card:[eC.wp.p(16),eC.wp.borderRadius(8),eC.wp.border({color:tB.LU.outlineDimmest})],postCompletionActions:[eC.wp.flex.wrap]});function b0(e){var n=e.user,t=(0,en.LG)(),r=(0,bJ.A)(n),o=(0,d._)((0,h.useState)(!1),2),i=o[0],a=o[1];return(0,p.FD)(ez.S,{gap:12,children:[(0,p.Y)(eW.Y9,{level:2,variant:"subheadBig",children:"Congratulations \uD83C\uDF89"}),(0,p.Y)(eW.EY,{children:"You've completed the guided tour!"}),(0,p.FD)(eD.ui,{css:bX.card,gap:12,elevated:!0,children:[(0,p.FD)(eW.EY,{children:["This project, also known as a ",(0,p.Y)("em",{children:"Repl"}),", was auto-saved to your profile. You can come back any time or create a new Repl from one of our many templates."]}),(0,p.FD)(ez.S,{css:bX.postCompletionActions,row:!0,gap:8,children:[(0,p.Y)(eH.$n,{text:"Continue building in this Repl",onClick:function(){return a(!0)}}),(0,p.Y)(a0.v,{iconLeft:(0,p.Y)(eg.A,{}),text:"Create a new Repl",colorway:"primary",href:{pathname:"/new"},onClick:function(){(0,z.u4)(z.AZ.OPEN_REPL_CREATION_PAGE,{source:"workspace_guided_tour"})}}),r?(0,p.Y)(bQ.A,{context:"workspace_guided_tour",text:"Upgrade plan",colorway:"brand",variant:"default"}):null]})]}),(0,p.Y)(ek.a,{isOpen:i,onRequestClose:function(){return a(!1)},children:i?(0,p.Y)(bV.A,{confirmLabel:"Yes, close",isDestructive:!0,title:"Close the Workspace Guide?",onCancel:function(){return a(!1)},onConfirm:t,children:"Are you sure you want to close the Workspace Guide to continue building in this Repl? To return to the guided tour, you will need to start a new demo project from the home page."}):null})]})}var b1=t(30921),b2=(0,eA.x)({container:[eC.wp.minWidth(240),eC.wp.p(16),eC.wp.rowWithGap(12),eC.wp.borderRadius(8),eC.wp.border({width:1,color:tB.LU.outlineDimmest}),eC.wp.align.center,{"&.is-active":{borderColor:tB.LU.outlineDefault}}],indexOrCheckbox:[eC.wp.width(24),eC.wp.height(24),eC.wp.flex.row,eC.wp.center,eC.wp.textAlign.center,eC.wp.borderRadius(4),eC.wp.border({width:1,color:tB.LU.outlineDimmer}),{".is-active &":{borderColor:tB.LU.accentPrimaryDefault}}],label:[eC.wp.flex.growAndShrink(1),eC.wp.color.foregroundDimmer,{alignSelf:"center",lineHeight:"".concat((0,eH.Jt)("small")+16,"px"),".is-active &":[eC.wp.color.foregroundDefault]}],action:[eC.wp.display.none,{".is-unlocked:hover &":[eC.wp.display.block],".is-active &":[eC.wp.display.block]}]});function b5(e){var n,t=e.index,r=e.isActive,o=e.isCompleted,i=e.isOptional,a=e.isUnlocked,l=e.text,s=e.onViewSteps,c=(0,sn.kD)(),u=null!==(n=(0,sn.qv)())&&void 0!==n&&n,d="async"===c?(0,p.Y)(sp.A,{}):void 0,f=(0,p.Y)(eH.$n,{colorway:r?"primary":void 0,size:"small",text:"View Steps",variant:r?"default":"outlined",onClick:s});return(0,p.Y)(b1.A,{isActive:r&&u&&"user"!==c,children:(0,p.FD)(eD.ui,{elevated:r,css:b2.container,className:r?"is-active":a?"is-unlocked":void 0,children:[(0,p.Y)(ez.S,{css:b2.indexOrCheckbox,children:o?(0,p.Y)(s3.A,{}):void 0!==i&&i?void 0:t+1}),(0,p.Y)(eW.EY,{variant:"subheadDefault",css:b2.label,multiline:!1,children:l}),(0,p.Y)(ez.S,{css:b2.action,children:u?d:f})]})})}var b4=t(99345),b3=t(60872),b8=t(36335),b7=(0,eA.x)({bar:[eC.wp.minWidth(60)]});function b6(e){var n=e.completed,t=e.total,r=(0,yX.E)(0,t,n);return(0,p.Y)(b4.z,{value:r,maxValue:t,children:(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.FD)(b3.J,{children:[r," / ",t]}),(0,p.Y)(b8.W,{css:b7.bar,total:t,current:r,color:tB.LU.accentPrimaryDefault,tooltipHidden:!0})]})})}var b9="WorkspaceTourGuide",Se=(0,eA.x)({container:[(0,nt._)({},eC.kL.max(440,b9),[eC.wp.flex.column])],textContainer:[eC.wp.flex.growAndShrink(1)],progressContainer:[eC.wp.flex.growAndShrink(1)]});function Sn(e){var n=e.titleText,t=e.titleBadge,r=e.description,o=e.progressElement;return(0,p.FD)(ez.S,{css:Se.container,row:!0,gap:16,justify:"space-between",children:[(0,p.FD)(ez.S,{css:Se.textContainer,gap:8,children:[(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eW.Y9,{level:2,variant:"subheadBig",children:n}),t]}),(0,p.Y)(eW.EY,{children:r})]}),(0,p.Y)(ez.S,{css:Se.progressContainer,children:o})]})}var St=t(13493),Sr=t(12169),So=t(99622),Si=t(17283);function Sa(){var e=(0,m._)(["\n                      These optional steps require an upgraded subscription.\n                    "]);return Sa=function(){return e},e}var Sl=(0,eA.x)({root:[eC.wp.p(12),eC.wp.height("100%"),eC.wp.overflowY("auto"),{containerName:b9,containerType:"inline-size"}],footer:[eC.wp.flex.growAndShrink(1)]});function Ss(e){var n,t,r,o,i,a,l,s,c,u,f,m,v,y,b,S,Y,x,_,A,C,k,D,R,E=e.mainTitle,I=e.tour,U=e.checklistSteps,F=e.initialStepIndex,P=e.numCompletedSteps,T=void 0===P?0:P,O=e.onStepChange,L=(S={variables:{replId:(0,eG.A)(),deploymentProvider:rJ.Q0.CloudRun}},Y=(0,g._)({},bq,S),w.I(bZ,Y)).data,N=(0,h.useRef)(null),G=(0,sn.oZ)(),B=function(e){if((null==e?void 0:e.getRepl.__typename)!=="Repl")return!0;var n=e.getRepl.authorizations;return n.createDeployment.isAuthorized&&n.editPermissions.isAuthorized}(L),H=(0,sn.Vu)(),W=(0,sn.qv)(),z=(0,sn.Os)(I.id,I.steps[0].id),$=(0,sn.mR)(),j=null!==(R=I.steps.findIndex(function(e){return e.id===(null==$?void 0:$.id)}))&&void 0!==R?R:0;(0,So.AM)(function(){j!==F&&z.goto(F),0!==F||W||0!==T||H()}),(0,h.useEffect)(function(){W&&(null==O||O(j))},[W,j,O]);var q=(x=(0,sn.Jw)(St.IW.id,St.jz.ChecklistIntro),_=(0,sn.Jw)(Sr._t.id,Sr.jz.ChecklistIntro),(0,e9.P)(x,_,{breadcrumb:"client/replEnvironmentDesktop/tours/workspaceGuide/hooks.ts:42"}));t=(n={checklistSteps:U,celebrationTargetRef:N}).checklistSteps,r=n.celebrationTargetRef,i=(o=(0,d._)((0,h.useState)(!1),2))[0],a=o[1],l=(0,sn.mR)(),s=(0,gV.Z)(l),c=t.optional.some(function(e){return e.steps.some(function(e){return e.id===(null==l?void 0:l.id)})}),u=t.required.some(function(e){return e.steps.some(function(e){return e.id===(null==s?void 0:s.id)})}),f=(0,sc.mO)().fireDirectionalBurstFrom,m=(0,sn.qv)(),v=(0,sn.qt)(),y=(0,bW.l)().width,b=u&&c,(0,h.useEffect)(function(){m&&b&&!i&&(v(),a(!0),null!=r.current&&f({element:r.current,direction:sc.E_.North,spread:function(){return 100},lifetime:function(){return(0,sc.Im)(2,4)},velocity:function(){return(0,sc.Im)(Math.max(y/2,600),Math.max(y,1200))},numParticles:function(){return 250}}))},[r,i,b,f,m,v,y]);var K=U.intro.length,Z=U.required.length,V=U.optional.length,J=(A=(0,sn.qv)(),C=(0,sn.mR)(),D=(k=U.optional[U.optional.length-1]).steps[k.steps.length-1],!A&&(null==C?void 0:C.id)===D.id),Q=(0,h.useCallback)(function(e){var n=K;if(e<Z)for(var t=0;t<e;t++)n+=U.required[t].steps.length;else{n+=U.required.reduce(function(e,n){return e+n.steps.length},0);for(var r=e-Z,o=0;o<r;o++)n+=U.optional[o].steps.length}return n},[K,Z,U.required,U.optional]),X=(0,h.useCallback)(function(e){if((e-=K)<0)return -1;if(e<U.required.reduce(function(e,n){return e+n.steps.length},K)){var n=0,t=!0,r=!1,o=void 0;try{for(var i,a=U.required[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;if(e<l.steps.length)return n;e-=l.steps.length,n++}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return n}var s=Z+K,c=!0,u=!1,d=void 0;try{for(var p,f=U.optional[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;if(e<h.steps.length)return s;e-=h.steps.length,s++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return s},[U.optional,U.required,Z,K]);function ee(e){return function(){G(null),W||H();var n=e===X(j);z.goto(n?j:Q(e))}}var en=X(j),et=X(T-1);return(0,p.FD)(ez.S,{css:Sl.root,gap:24,innerRef:q,children:[(0,p.Y)(Sn,{titleText:E,description:"Start building by following the interactive step-by-step guide.",progressElement:(0,p.Y)(b6,{completed:X(T),total:Z})}),(0,p.Y)(ez.S,{gap:8,children:U.required.map(function(e,n){return(0,p.Y)(b5,{index:n,isActive:en===n,isCompleted:et>n,isUnlocked:et>=n,text:e.title,onViewSteps:ee(n)},e.id)})}),0===V?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(Sn,{titleText:"Continue building",titleBadge:B?null:(0,p.Y)(Si.A,{plan:iJ.en,variant:"icon-text",size:"small",tooltipProps:{title:"".concat(iJ.en," or ").concat(iJ.$B," plan required"),description:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var o=Array.from("string"==typeof e?[e]:e);o[o.length-1]=o[o.length-1].replace(/\r?\n([\t ]*)$/,"");var i=o.reduce(function(e,n){var t=n.match(/\n([\t ]+|(?!\s).)/g);return t?e.concat(t.map(function(e){var n,t;return null!==(t=null===(n=e.match(/[\t ]/g))||void 0===n?void 0:n.length)&&void 0!==t?t:0})):e},[]);if(i.length){var a,l=RegExp("\n[	 ]{".concat((a=Math).min.apply(a,(0,M._)(i)),"}"),"g");o=o.map(function(e){return e.replace(l,"\n")})}o[0]=o[0].replace(/^\r?\n/,"");var s=o[0];return t.forEach(function(e,n){var t=s.match(/(?:^|\n)( *)$/),r=t?t[1]:"",i=e;"string"==typeof e&&e.includes("\n")&&(i=String(e).split("\n").map(function(e,n){return 0===n?e:"".concat(r).concat(e)}).join("\n")),s+=i+o[n+1]}),s}(Sa())}}),description:(0,p.Y)(p.FK,{children:"Complete the bonus steps to get the most out of Replit's features."})}),(0,p.Y)(ez.S,{gap:8,children:U.optional.map(function(e,n){var t=Z+n;return(0,p.Y)(b5,{index:t,isActive:en===t,isCompleted:et>t,isOptional:!0,isUnlocked:et>=Z,text:e.title,onViewSteps:ee(t)},e.id)})}),J&&(null==L?void 0:L.currentUser)!=null?(0,p.Y)(b0,{user:L.currentUser}):null,(0,p.Y)(ez.S,{css:Sl.footer,innerRef:N})]})]})}function Sc(e){var n,t={type:"workspaceTourGuide",data:e},r=(0,Q.Vv)(),o=null!==(n=r.getDescription(t))&&void 0!==n?n:r.getTitle(t),i=(0,sn.BF)(),a=(0,h.useMemo)(function(){return function(e){switch(e){case"workspace-guided-tour-data-app":return St.$T;case"workspace-guided-tour-portfolio-website":return Sr.Zg;default:return}}(null==i?void 0:i.id)},[null==i?void 0:i.id]);return null==i||null==a?(0,p.Y)(me.A,{pane:t,bodyText:"No guided tour is available for the current Repl"}):(0,p.Y)(Ss,(0,g._)({mainTitle:o,tour:i,checklistSteps:a},e))}var Su=n6.ZU.Object({initialStepIndex:n6.ZU.Integer(),numCompletedSteps:n6.ZU.Optional(n6.ZU.Integer())}),Sd=n6.ZU.Object({type:n6.ZU.Literal("workspaceTourGuide"),data:n6.ZU.Optional(Su)}),Sp={Content:function(e){var n=e.pane,t=e.options.performPaneOperation,r=(0,h.useCallback)(function(e){if(e!==(null===(r=n.data)||void 0===r?void 0:r.initialStepIndex)){var r,o,i,a=Math.max(e,null!==(i=null===(o=n.data)||void 0===o?void 0:o.numCompletedSteps)&&void 0!==i?i:0);t({operation:"replace",pane:(0,e8._)((0,g._)({},n),{data:(0,e8._)((0,g._)({},n.data),{initialStepIndex:e,numCompletedSteps:a})})})}},[n,t]);return(0,p.Y)(Sc,(0,g._)({initialStepIndex:0,onStepChange:r},n.data))},Icon:function(e){var n=e.size;return(0,p.Y)(t$.Vx.Provider,{value:{color:tB.LU.blueStronger,size:n},children:(0,p.Y)(rS.A,{})})},getTitle:function(){return"Workspace Guide"},description:"Get started with Replit's workspace",category:Q.bY.Other,decode:function(e){return n9.WT.Decode(Sd,e)}},Sf=t(88907),Sh=t(15805),Sg=t(29161),Sm=t(53370),Sv=t(82112),Sw=t(4448),Sy=t(29032),Sb=(0,rL.v)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),SS=Sb.cssVars,SY=Sb.styleTokens,Sx=(0,eA.x)({root:[eC.wp.center,eC.wp.position.absolute,eC.wp.top(0),eC.wp.left(0),fg,(c={transform:"translate(".concat(SY.transformX,", ").concat(SY.transformY,")"),width:SY.width,height:SY.height,cursor:SY.cursor,zIndex:SY.zIndex},(0,nt._)(c,eC.$_.canHover,[{"&:hover":{zIndex:en.WO.gutterHovered}}]),(0,nt._)(c,"&:hover .blanket",{transform:"scale(".concat(SY.hoverScaleX,", ").concat(SY.hoverScaleY,")")}),(0,nt._)(c,"& .icon",{transform:"rotate(".concat(SY.rotation,")")}),(0,nt._)(c,"&:active .blanket",[eC.wp.height("200vh"),eC.wp.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,nt._)(c,"&:not(:active):hover > .grip",(0,nt._)({},SS.gripColor,tB.LU.foregroundDefault)),c)],blanket:eC.wp.coverContainer,grip:[eC.wp.borderRadius(4),{width:SY.gripWidth,height:SY.gripHeight,visibility:SY.gripVisibility,background:SY.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]}),S_=(0,h.memo)(function(e){var n,t,r,o,i=e.handleId,a=(0,en.Z5)(i),l=(n=(0,h.useRef)(null),t=(0,d3.j)(),r=(0,en.VV)(),(0,tO.d)(n,a.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,SS.width,t+"px"),(0,nt._)(n,SS.height,r+"px"),n}),(0,tO.d)(n,a.position,function(e){var n,t=e.x,r=e.y;return n={},(0,nt._)(n,SS.transformX,Math.round(t)+"px"),(0,nt._)(n,SS.transformY,Math.round(r)+"px"),n}),(0,tO.d)(n,a.rotation,function(e){return(0,nt._)({},SS.rotation,e+"deg")}),(0,tO.d)(n,a.gripIsHidden,function(e){return(0,nt._)({},SS.gripVisibility,e?"hidden":"visible")}),(0,tO.d)(n,a.length,function(e){return(0,nt._)({},SS.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")}),fm(n),o=r?3:2,(0,tO.d)(n,a.isStacked,function(e){var n;return n={},(0,nt._)(n,SS.cursor,e?"row-resize":"col-resize"),(0,nt._)(n,SS.hoverScaleX,(e?1:o).toString()),(0,nt._)(n,SS.hoverScaleY,(e?o:1).toString()),n}),(0,tO.d)(n,a.isActive,function(e){var n;return n={},(0,nt._)(n,SS.gripColor,e?"radial-gradient(circle, ".concat(tB.LU.accentPrimaryDefault," calc(100% - 48px), transparent)"):tB.LU.outlineDimmest),(0,nt._)(n,SS.zIndex,(e?en.WO.gutterActive:en.WO.gutter).toString()),n}),(0,tO.d)(n,a.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,SS.gripWidth,t+"px"),(0,nt._)(n,SS.gripHeight,r+"px"),n}),n),s=(0,en.qr)(),c=(0,en.Z1)(),u=(0,h.useRef)(null),d=(0,oj.A)(a.isSnapped);return(0,p.FD)(ez.S,{innerRef:l,css:Sx.root,onDoubleClick:function(){c(a.handle.current)},onPointerDown:function(e){(0,tT.j)(e,{start:function(){var e=a.handle.current;u.current=document.activeElement,s({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){s({type:"update",moveDelta:e.delta})},end:function(){var e,n;s({type:"end"}),null===(n=u.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,p.Y)(ez.S,{className:"blanket",css:Sx.blanket}),d?(0,p.Y)(Sy.A,{className:"icon"}):(0,p.Y)(ez.S,{className:"grip",css:Sx.grip})]})}),SA=t(45640),SC=t(15843);function Sk(){var e=(0,m._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return Sk=function(){return e},e}var SD={},SR=(0,v.J1)(Sk(),mu.A9),SE=t(22616),SI=t(16038),SU=t(26286),SF=t(26196),SP="video.json",ST=(0,SF.join)(bL.T,SP);function SO(){return(SO=(0,G._)(function(e,n){var t;return(0,B.YH)(this,function(r){switch(r.label){case 0:if(!n.find(function(e){return e.type===tu.pt.File&&e.filename===SP}))return[2,null];return[4,e.readFile(ST)];case 1:if((t=r.sent()).error)return[2,null];return[2,t.content.toString()]}})})).apply(this,arguments)}let SL=function(e){var n=mp(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,h.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};var SN=t(7942),SM=t(32889),SG=t.n(SM);function SB(){var e=(0,m._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return SB=function(){return e},e}var SH={},SW=(0,v.J1)(SB()),Sz=t(1953);function S$(){var e=(0,m._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return S$=function(){return e},e}var Sj={},Sq=(0,v.J1)(S$()),SK=t(89022),SZ=t(55814),SV=t(41827),SJ={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,n){if(e.sender.type!==q.utd.AI)return!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return n.notification={id:r.planId,text:"Plan is waiting for approval"},n.isExecutingPlan=!0,!1;if(n.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===q.jhd.STEP_COMPLETE}))return n.notification={id:r.planId,text:"Plan has been completed!"},n.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":return n.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var o,i=t.agentTimelineEventContents,a=i.toolData,l=i.toolName;if((null==a?void 0:a.$kind)==="messageData"){switch(null===(o=a.messageData.agentAction.optionType)||void 0===o?void 0:o.$kind){case"messageButtonAction":return n.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return n.notification={id:e.id,text:"Agent needs your permission to deploy the application"},!1}if("user_response"===l)return n.notification={id:e.id,text:"Agent has a question for you"},!1}}n.notification=void 0}};function SQ(){var e=(0,m._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return SQ=function(){return e},e}var SX=(0,v.J1)(SQ());function S0(){return(S0=(0,G._)(function(e){var n;return(0,B.YH)(this,function(t){switch(t.label){case 0:if(!eB.V)throw Error("Expected Apollo client");return[4,eB.V.query({query:SX,variables:{id:e}})];case 1:return[2,(null==(n=t.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl.title:null]}})})).apply(this,arguments)}var S1=t(37163),S2=t(5846);function S5(){return(S5=(0,G._)(function(e){return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function S4(){var e=(0,m._)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return S4=function(){return e},e}var S3={},S8=(0,v.J1)(S4());function S7(){var e,n,t=(0,yy.g)(),r=(0,en.Us)(),o=(0,tb.oR)(),i=(0,en.KV)(),a=(e=(0,en.rQ)(),n=(0,en.t3)(),(0,h.useCallback)(function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=n().find(function(e){return(0,d._)(e,2)[1].type===t});o&&e({paneId:o[0],activate:r})},[n,e])),l=(0,en.t3)(),s=(0,en.rQ)();return(0,h.useCallback)(function(e){var n=!!e&&e.reveal;if(o){if(t)return;r({pane:{type:"runnerOutput"},activate:!1,commit:!0});return}if(t){i(),n&&a("webview",!0);return}var c=l().find(function(e){var n=(0,d._)(e,2);return"runnerOutput"===(n[0],n[1]).type});c||r({pane:{type:"runnerOutput"},activate:!1,commit:!0}),n&&c&&s({paneId:c[0],activate:!0})},[o,t,l,r,i,a,s])}function S6(e,n,t){var r=(0,en.CA)(),o=(0,en.hT)(),i=(0,en.rQ)(),a=(0,en.t3)();(0,eb.SJ)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,d._)(e,2)[1].type===n.type});if(e){i({paneId:e[0],activate:!0});return}o((0,e8._)((0,g._)({},t),{pane:n,activate:!0,placement:{type:"secondary"}}))}]},[r,o,i])}var S9=t(16483),Ye=t(55078),Yn=t(5905),Yt=t(58930),Yr=t(39899),Yo={direction:"forward",state:{hasNonEmptyAgentCheckpoint:!1},reducer:function(e,n){var t=e.contents.contents;if((0,q.VFn)(t,"agentTimelineEventContents")){var r=(0,q.QNh)(t).toolData;if((0,q.VFn)(r,"commitData")&&(0,q.QNh)(r).billingRate===q.pSr.NORMAL)return n.hasNonEmptyAgentCheckpoint=!0,!1}},map:function(e){return e.hasNonEmptyAgentCheckpoint}},Yi=t(8221),Ya=t(27435),Yl=t(94824),Ys=t(10860),Yc=t(61825),Yu=t(70573),Yd=t(2806);function Yp(){var e=(0,m._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return Yp=function(){return e},e}var Yf={},Yh=(0,v.J1)(Yp()),Yg=t(56526),Ym=t(58152),Yv=t(90326),Yw=t(76469),Yy=t(32126),Yb=t(53202);function YS(e){var n,t,r,o,i,a,l,s,c,u,m,v,y,b,S,Y,x,_,A,k,R,I,U,P,T,O,L,N,M,H,W,$,j,K,Z,V,J,Q,X,ee,er,eo,ei,ea,el,es,ep,ef,eh,eg,em,ev,ew,ey,eS,eY,ex,e_,eA,eC,ek,eD,eR,eE,eI,eU,eF,eP,eT,eO,eL,eN,eM,eB,eH,eW,ez,e$,ej,eZ,eV,eJ,eX,e0,e1,e2,e5,e4,e3,e7,e6,e9,nn,nt,no,ni,na,nl,ns,nc,nu,nd,np,nf,nh,ng,nm,nv,nw,ny,nb,nS,nY,nx,n_,nA,nC,nk,nD,nR,nE,nI,nU,nF,nP,nT,nO,nL,nN,nM,nG,nB,nH,nW,nz,n$,nj,nq,nK,nZ,nV,nJ,nQ,nX,n0,n1,n2,n5,n4,n3,n8,n7,n6,te,tn,tt,tr,to,ti,ta,tl,ts,tc,td,tp,tf,tg,tm=e.repl,tv=e.currentUser,tw=(0,et.A)(),ty=tw.replspaceApi,tS=tw.dotReplit,tY=tw.runner,tx=tw.container,t_=tw.ports;v=(0,et.A)().lspnix,y=(0,F.gc)("codeIntelligence").preferences.codeIntelligence,(0,h.useEffect)(function(){if(!y){v.disable();return}v.enable()},[v,y]),b=(0,en.mU)(),S=(0,SZ.A)(b||""),Y=(0,SV.j)(),x=(0,C._P)({controlName:"flag-lsp-userevents",logFlagToAnalytics:!1}),(0,h.useEffect)(function(){if(x&&S.length)return(0,SK.xW)(S.map(function(e){return e.onDiagnostics(function(e){Y("user:lsp:textDocument/publishDiagnostics",{path:e.path,diagnostics:e.diagnostics})})}))},[x,S,Y]),(0,h.useEffect)(function(){if(x&&S.length){var e=new Map,n=(0,SK.xW)(S.map(function(n){return n.onRequest(function(n){"textDocument/codeAction"!==n.data.method||e.has(n.id)||e.set(n.id,n.data)})})),t=(0,SK.xW)(S.map(function(n){return n.onResponse(function(n){if(void 0!==n.error||"undefined"===n.result||Array.isArray(n.result)&&0===n.result.length){e.delete(n.id);return}e.has(n.id)&&(Y("user:lsp:textDocument/codeAction",{id:n.id,request:e.get(n.id),response:n.result}),e.delete(n.id))})}));return function(){n(),t()}}},[x,S,Y]),_=(0,d._)((0,Sz.eY)(),1)[0],A=(0,en._G)(),k=(0,eG.A)(),(0,h.useEffect)(function(){var e=function(){A({replId:k,force:!1}),A.flush()};if(!_)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[A,k,_]),(0,h.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&A({replId:k,force:!1})};if(!_)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[A,k,_]),(0,h.useEffect)(function(){if(!_){var e=null;return function n(){e=setTimeout(function(){A({replId:k,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[A,k,_]),(0,h.useEffect)(function(){return function(){A({replId:k,force:!1}),A.flush()}},[A,k,_]),(0,SC.A)(),(0,Ym.A)(),(0,Yw.A)({workspaceType:"desktop"}),(0,h.useEffect)(function(){var e=function(e){"s"===e.key&&(0,rd.T$)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),I=(R=(0,et.A)()).container,U=R.presence,(0,h.useEffect)(function(){var e=U.onUserJoin(function(n){var t,r=null===(t=I.getContext())||void 0===t?void 0:t.repl;if(r){var o=n.username;return(function(e){return S0.apply(this,arguments)})(r.id).then(function(e){e&&pq({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(r.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})}),function(){e()}}})},[U,I]),P=(0,eG.A)(),T=(0,F.gc)("agentAudioNotification").preferences.agentAudioNotification,O=(0,h.useCallback)(function(e,n){if(T&&document.hidden)try{new Audio("/public/sounds/pop.mp3").play()}catch(e){}pq({title:"Agent Update",body:n,tag:"".concat(P,"-").concat(e),icon:"/public/images/ai/agent/AgentIconStandard.png",cacheDuration:3e5})},[T,P]),L=(0,E.NC)(),N=(0,hr.J2)(L.sessions.agent),M=(0,h.useMemo)(function(){return null==N?void 0:N.reduce(SJ,1)},[N]),H=null==N?void 0:N.agent.state,W=(0,h.useMemo)(function(){return H&&M?gw.cP.combine(H,M):null},[H,M]),(0,hr.q3)(W,{next:function(e){var n=(0,d._)(e,2),t=n[0],r=n[1].notification;r&&(null==t?void 0:t.state)===q.g32.AGENT_STATE_PAUSED&&O(r.id,r.text)}}),$=(0,eG.A)(),j=(0,et.A)().container,K={variables:{replId:$},skip:(0,ne.A)(j)!==SN.KN.CONNECTED},Z=(0,g._)({},Sj,K),wz.R(Sq,Z),V=(0,et.A)().presence,(0,h.useEffect)(function(){return V.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,z.u4)(S2.AZ.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,z.u4)(S2.AZ.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[V]),(0,Yy.A)(),J=(0,et.A)().presence,Q=(0,en.mU)(),(0,h.useEffect)(function(){J.updateOpenFile(Q)},[J,Q]),ee=(X=(0,eK.A)()).showConfirm,er=X.showNotice,eo=X.hideMessage,ei=X.showError,ea=(0,et.A)().container,el=(0,h.useRef)(!1),(0,h.useEffect)(function(){var e=ea.onToast(function(e){e.startsWith("PANIC")||er(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=ea.onConnectionStateChanged(function(e){if(n&&(eo(n),n=null),e===SN.KN.CONNECTED){t&&el.current&&(n=ee("Connected",1500),el.current=!1),t=!0;return}if(t){if(e===SN.KN.CONNECTING){n=er("Reconnecting");return}if(e===SN.KN.DISCONNECTED){n=ei("Disconnected"),el.current=!0;return}}});return function(){n&&eo(n),e(),r()}},[ea,ee,er,ei,eo]),es=(0,eK.A)().showConfirm,ep=(0,et.A)().fs,(0,h.useEffect)(function(){var e=ep.registerOnFlushSuccess(function(e,n){if(n===tu.sT.MANUAL_SAVE){var t="Saved ".concat(e);es(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[ep,es]),eh=(ef=(0,eK.A)()).showNotice,eg=ef.showError,em=(0,C._P)({controlName:"legacy-python-migration"}),(0,ab.b)((ev=(0,G._)(function(e,n){var t,r,o;return(0,B.YH)(this,function(i){switch(i.label){case 0:if(t=n.signal,!em)return[2];return[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:t})];case 1:if(!(r=i.sent()).ok||!r.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:t})];case 2:if(!(o=i.sent()).ok)return"NOP"!==o.payload.code&&eg((0,p.FD)(p.FK,{children:[(0,p.Y)("div",{children:"Failed to migrate legacy Python configuration."}),(0,p.Y)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return eh((0,p.FD)(p.FK,{children:[(0,p.Y)("div",{children:"This Repl contained legacy Python configuration"}),(0,p.Y)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})}),function(e,n){return ev.apply(this,arguments)}),[em,eg,eh]),ew=(0,en.CA)(),ey=S7(),eS=(0,sn.Os)(lV.C.id,lV.j.Output),(0,h.useEffect)(function(){if(ew&&(null==eS?void 0:eS.isActive)){var e=setInterval(function(){ey()},200);return function(){clearInterval(e)}}},[null==eS?void 0:eS.isActive,ey,ew]),S6(oA.showShell.id,{type:"shell"}),S6(oA.showDocs.id,{type:"docs"}),S6(oA.showGit.id,{type:"git"}),S6(oA.showSettings.id,{type:"preferences"}),S6(oA.showConsole.id,{type:"runnerOutput"}),S6(oA.showReplitAi.id,{type:"ghostwriterChat"},{commit:!0}),(0,Yn.A)(),eY=(0,et.A)().presence,ex=(0,en.q5)(),(0,h.useEffect)(function(){return eY.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=eY.getFollowedUser();r&&r.id===n.id&&t&&ex({path:t})})},[eY,ex]),eA=(e_=(0,d._)((0,h.useState)(null),2))[0],eC=e_[1],(0,h.useEffect)(function(){return eY.onFollowedUserChanged(eC)},[eY]),(0,h.useEffect)(function(){if(eA){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){eY.unfollowUser()}},[eA]),ek=(0,t8.xu)(),eI=(null==(eE=(eD={variables:{replId:(0,eG.A)()}},eR=(0,g._)({},Yf,eD),w.I(Yh,eR)).data)?void 0:eE.repl.__typename)==="Repl"?eE.repl:null,(0,h.useEffect)(function(){var e;eI&&(null===(e=eI.templateInfo)||void 0===e?void 0:e.label.includes("Blank Repl"))&&ek(!0)},[ek,eI]),eU=(0,en.dC)(),eF=(0,et.A)().fs,eP=(0,bL.A)().isTutorial,eT=(0,eq.A)(eU),(0,h.useEffect)(function(){if(eP){var e=!1,n=eF.watchDir(bL.T,{onChange:function(n){(function(e,n){return SO.apply(this,arguments)})(eF,n).then(function(n){if(!e){if(!n){eT.current(null);return}var t=null;try{t=vj._3(n)}catch(e){}var r=(void 0===t?"undefined":(0,nr._)(t))==="object"&&"string"==typeof t.embedUrl?t.embedUrl:null;eT.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eT.current(null)},onError:function(){eT.current(null)}});return function(){e=!0,n()}}},[eF,eP,eT]),eO=(0,bL.A)().isTutorial,eL=(0,en.RO)(),(0,h.useEffect)(function(){eO&&eL()},[eL,eO]),r=SL(t=(0,eG.A)()),n=mp(t,{onReceiveAnnotationUpdate:function(){}}).annotations,o=(0,h.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n]),i=(0,S1.A)(),a=(0,t8.RF)(),(0,h.useEffect)(function(){a({paneType:"chat",indicatorType:r>0?tB.LU.redStronger:void 0})},[a,r]),(0,h.useEffect)(function(){a({paneType:"threadInbox",indicatorType:o>0?tB.LU.redStronger:void 0})},[a,o]),(0,h.useEffect)(function(){a({paneType:"envEditor",indicatorType:i?tB.LU.redStronger:void 0})},[i,a]),(0,Ys.R)({onOpenEnvEditor:function(){tA({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eM={variables:{replId:eN=tm.id},onData:function(e){var n,t,r=null===(t=e.data)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:mu.FL,variables:{replId:eN}},function(e){return(0,aw.jM)(e,function(e){null===e||"Repl"!==e.repl.__typename||e.repl.annotationAnchors.find(function(e){return e.id===r.id})||e.repl.annotationAnchors.push(r)})}),e.client.cache.updateQuery({query:SE.FZ,variables:{replId:eN,path:r.path}},function(e){return(0,aw.jM)(e,function(e){var n;e&&(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,e8._)((0,g._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eB=(0,g._)({},SD,eM),wz.R(SR,eB),eH=(0,en.zn)(),eW=(0,eu.T_)(),ez=(0,eu.nF)(),(0,h.useEffect)(function(){eH?eW(eH):ez()},[eW,ez,eH]),e$=(0,ec.eZ)(),(0,en.uD)(e$),ej=(0,en.gb)(),eZ=(0,en.Cc)(),(0,h.useEffect)(function(){var e=function(){eZ()};if(ej)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[ej,eZ]),(0,Yl.A)(),eV=SL((0,eG.A)()),eJ=(0,h.useRef)(0),eX=(0,F.gc)("chatAudioNotification").preferences,(0,h.useEffect)(function(){eX.chatAudioNotification&&eV>eJ.current&&new Audio("/public/sounds/pop.mp3").play(),eJ.current=eV},[eV,eJ,eX]),e0=(0,en.CA)(),e1=(0,ec.gB)(),e2=(0,en.SK)(),(0,eb.SJ)(function(){if(e0)return[oA.webviewRefresh.id,function(){var e=e2().filter(function(e){return"webview"===(0,d._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var a=(0,d._)(o.value,1)[0],l=e1(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}}]},[e0,e1,e2]),(0,Ya.A)(),(0,Yc.A)(),(0,w7.dz)(tS),(0,SU.i)(!(null===(tg=tm.org)||void 0===tg?void 0:tg.id)),(0,Yi.A)(tY);var tA=eQ();e5=function(e){tA({pane:{type:"codeEditor",data:e},placement:{type:"secondary"},activate:!1})},e7=(e3={debuggest:(e4=(0,et.A)()).debuggest,toolchain:e4.toolchain}).toolchain,e6=e3.debuggest,(0,h.useEffect)(function(){function e(e){(null==e?void 0:e.debuggers)&&(null==e?void 0:e.debuggers.length)>0&&e6.connect()}e(e7.configs.current),e7.configs.subscribe(function(n){e(n)})},[e7,e6]),nn=e9=(0,oj.A)(e6.mainClient),(0,h.useEffect)(function(){if(nn){var e=nn.onStarted(function(e){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"started",joined:e})}),n=nn.onPaused(function(e){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"paused",reason:e})}),t=nn.onBreakpoint(function(e){(0,z.u4)(z.AZ.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:e,state:nn.state.current})});return function(){e(),n(),t()}}},[nn]),no=(0,eq.A)(e5),nl=null==(na=null==(ni=(0,oj.A)(e9?e9.stackFrames:null))?void 0:ni[0])?void 0:null===(nt=na.source)||void 0===nt?void 0:nt.path,ns=null==na?void 0:na.line,(0,h.useEffect)(function(){if(nl&&ns&&e9){var e=(0,vd.H$)(nl);e?no.current({path:e,line:ns}):e9.stepOut()}},[e9,nl,ns,no]);var tC=(0,E.jt)();(0,h.useEffect)(function(){return a6.NA("replId",tm.id),function(){a6.NA("replId",void 0)}},[tm.id]),(0,h.useEffect)(function(){return a6.NA("agent",tC),(0,th.$Y)(tC),function(){a6.NA("agent",void 0),(0,th.qh)()}},[tC]),(0,Ye.A)({repl:tm,currentUser:tv,container:tx}),nc=(0,eG.A)(),nd=(nu=(0,et.A)()).container,np=nu.ports,nh=(0,d._)((nf=(0,g._)({},SH,void 0),a9.n(SW,nf)),1)[0],ng=(0,F.gc)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,nm=(0,tb.oR)(),nv=(0,E.jt)(),nw=(0,en.Us)(),ny=(0,h.useCallback)(function(e){e.isForwarded&&!nv&&(nm||nw({pane:{type:"vnc"}}),nh({variables:{input:{id:nc,isVnc:!0}}}))},[nv,nm,nh,nc,nw]),nb=(0,h.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!nv&&(ng&&!nm&&nw({pane:{type:"webview",data:r}}),nh({variables:{input:{id:nc,isServer:!0}}}))},[nm,nv,nc,nh,ng,nw]),(0,h.useEffect)(function(){return np.portsState.subscribe(SG()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var a=o.value,l=a.configuration,s=a.isOpen;if(l.isVnc){ny({isForwarded:s});return}var c=l.type===h1.gH.FORWARDED;nb({isForwarded:c,isOpen:s,data:{ports:function(e){var n=e.configuration;if(n.localPort)return{type:"local",path:"/",port:n.localPort};var t=(0,h1.Zd)(n);if(t)return{type:"external",path:"/",port:t}}(a)}})}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[nd,np.portsState,nb,ny]),(0,Yv.A)(),nS=(0,C._P)({controlName:"flag-open-telemetry-tracing"}),nU=(nx=(nY=(0,d._)((0,h.useState)(!1),2))[0],n_=nY[1],nC=(nA=(0,d._)((0,h.useState)(Date.now()),2))[0],nk=nA[1],nR=(nD=(0,d._)((0,h.useState)(Date.now()),2))[0],nE=nD[1],(0,h.useEffect)(function(){var e=function(){n_(!document.hidden),document.hidden?nE(Date.now()):nk(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),nI={visibility:nx,visibleTime:nC,hiddenTime:nR}).visibility,nF=nI.visibleTime,nP=nI.hiddenTime,(0,h.useEffect)(function(){nS&&nU&&(nF-nP)/1e3>60&&(0,D.O)(Yd.rA)},[nS,nU,nP,nF]),nT=(0,et.A)().ports,nO=(0,F.gc)("forwardPortsAutomatically").preferences,(0,h.useEffect)(function(){nT.setForwardPortsAutomatically(nO.forwardPortsAutomatically)},[nO.forwardPortsAutomatically,nT]),(0,SI.A)(tm,tv);var tk=(0,en.iu)(),tD=(0,d3.j)();(0,h.useEffect)(function(){tk(!tD)},[tD,tk]);var tR=(0,en.lz)(),tE=(0,SA.A)();(0,h.useEffect)(function(){tR(tE)},[tE,tR]),nN=(0,et.A)().presence,nM=(0,eG.A)(),nG=(0,h.useRef)(!1),nz=(nB={variables:{replId:nM}},nH=(0,g._)({},S3,nB),nW=w.I(S8,nH)).data,n$=nW.loading,nj=0,(null==nz?void 0:nz.repl.__typename)==="Repl"&&(nj=nz.repl.multiplayers.length,(null===(nL=nz.repl.owner)||void 0===nL?void 0:nL.__typename)==="User"&&(nj+=1)),(0,h.useEffect)(function(){if(!n$&&!nG.current){var e=nN.onActiveUsersChange(function(){nG.current=!0,e(),(0,z.u4)(z.AZ.MULTIPLAYER_REPL_OPENED,{replId:nM,participantsCount:nj,usersOnlineCount:nN.getActiveUsers().length})});return e}},[nM,n$,nj,nN]);var tI=(0,eu.c_)();(0,h.useEffect)(function(){ty.setWaitForFileClose(tI)},[ty,tI]);var tU=(0,Sz.iO)(),tF=(0,en.Xi)();(0,h.useEffect)(function(){tF&&tU(tF)},[tU,tF]),nK=(nq=(0,et.A)()).packager,nZ=nq.toolchain,(0,h.useEffect)(function(){var e=setTimeout(function(){!function(){n.apply(this,arguments)}()},(10+5*Math.random())*1e3);function n(){return(n=(0,G._)(function(){var e,n,t,r,o,i,a,l,s,c;return(0,B.YH)(this,function(u){switch(u.label){case 0:if(!nZ.configs.current||!nK)return[2];e=nZ.configs.current.packagers,n=!0,t=!1,r=void 0,u.label=1;case 1:u.trys.push([1,7,8,9]),o=e[Symbol.iterator](),u.label=2;case 2:if(n=(i=o.next()).done)return[3,6];return a=i.value,[4,nK.listSpecfile(a.id)];case 3:return(l=u.sent()).packages&&l.packages.length>0&&(s=l.packages.map(function(e){return e.name||""})||[],th.vF.info("packager installed packages",{packagerId:a.id,language:a.language,packages:s}),(0,z.u4)(S2.AZ.PACKAGER_PACKAGES_INSTALLED,{packages:s})),[4,function(e){return S5.apply(this,arguments)}((5+5*Math.random())*1e3)];case 4:u.sent(),u.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return c=u.sent(),t=!0,r=c,[3,9];case 8:try{n||null==o.return||o.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})).apply(this,arguments)}return function(){clearTimeout(e)}},[nK,nZ.configs.current]),nV=(0,eu.RG)(),nJ=(0,ec.eZ)(),(0,h.useEffect)(function(){var e=function(){var e=nV();e&&nJ(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[nJ,nV]),nQ=(0,et.A)().runner,nX=(0,f.useRouter)(),n0=(0,h.useRef)(!!nX.query.run),(0,h.useEffect)(function(){var e=function(){n0.current=!1,nQ.run(ou.QG.AUTO_RUN)};if(n0.current){if(nQ.getRunState()===ou.ll.IDLE){e();return}var n=nQ.onStateChanged(function(t){t===ou.ll.IDLE&&(e(),n())});return function(){n()}}},[nQ,nX]);var tP=(0,en.f)(),tT=(0,en.cC)(),tO=(0,et.A)().fs;return(0,Yu.A)({fs:tO,openMultipleFiles:tP,openMultipleURLs:tT,waitForFileClose:tI,isMobileWorkspace:!1}),(0,ed.Pt)({supportsAgent:tC}),(0,oh.I7)({dotReplit:tS}),n1=(0,oh.If)(),n2=(0,en.Us)(),(0,h.useEffect)(function(){n1&&Object.values(n1).forEach(function(e){e.tasks.forEach(function(n,t){var r=e.workflow.tasks[t];n.state===S9.Dr.RUNNING&&"workspace.openWebview"===r.task&&n2({pane:{type:"webview",data:{ports:{type:"external",port:r.args}}}})})})},[n1,n2]),n5=(0,C._P)({controlName:"flag-pid2-resource-monitoring"}),n4=(0,ax.ob)(aL),n3=(0,ax.ob)(aG),n8=(0,h.useRef)(!0),n7=(0,h.useCallback)(function(e){n3(e),n8.current?n8.current=!1:n4(!1)},[n3,n4]),n6=aY({container:(0,et.A)().container,service:"replresources",name:"replresources",skip:n5}),(0,h.useEffect)(function(){var e=n6.isConnecting,n=n6.channel;if(!n5&&!e&&n&&"open"===n.status)return n.onCommand(function(e){var n,t=e.replResourcesUpdateNotification;if("replResourcesUpdateNotification"===e.body){var r=null==t?void 0:t.contents;if(r){try{n=JSON.parse(r)}catch(e){}var o=n9.WT.Check(aP,n)?n:null;if(null===o)throw Error("Got wrong shape for resource response");n7(o)}}})}),(0,ab.b)((te=(0,G._)(function(e,n){var t,r,o,i,a,l,s,c,u;return(0,B.YH)(this,function(d){switch(d.label){case 0:if(t=n.signal,!n5)return[2];r=e.resources.monitor.subscribe({},{signal:t}).resReadable,o=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),l=(0,av._)(r),d.label=2;case 2:return[4,l.next()];case 3:if(!(o=!(s=d.sent()).done))return[3,5];if(!(c=s.value).ok)return[3,4];n7(c.payload),d.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return u=d.sent(),i=!0,a=u,[3,12];case 7:if(d.trys.push([7,,10,11]),!(o&&null!=l.return))return[3,9];return[4,l.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return te.apply(this,arguments)}),[n5,n7]),l=(0,en.Us)(),(0,sn.Os)(sX.X.id,sX.F.ProjectPane,{onEnter:function(){return l({pane:{type:"project"},commit:!0,activate:!0})}}),s=(0,et.A)().runner,c=(0,en.Us)(),u=(0,h.useCallback)(function(){c({pane:{type:"ghostwriterChat"},commit:!0,activate:!0})},[c]),m=(0,h.useCallback)(function(){u(),s.stopRun()},[s,u]),(0,sn.Os)(lJ.IW.id,lJ.Gp.GenerateVisualizationCode,{onEnter:m}),(0,sn.Os)(lJ.IW.id,lJ.Gp.PasteGeneratedCode,{onEnter:m}),(0,sn.Os)(lJ._t.id,lJ.ij.GenerateStylingCode,{onEnter:u}),(0,sn.Os)(lJ._t.id,lJ.ij.UseGeneratedCode,{onEnter:u}),(0,Yb.A)(t_),tn=(0,et.A)().runner,tt=(0,en.CA)(),tr=S7(),to=(0,h.useCallback)(function(){tr({reveal:!1})},[tr]),(0,oh.bD)(to,[to]),(0,h.useEffect)(function(){if(tt)return tn.onLocalRun(to)},[tt,tn,to]),(0,Yt.u)(),ti=(0,en.tE)(),(0,hr.q3)(hT(),{next:ti}),ta=(0,t8.eg)(),tl=(0,t8.gp)(),ts=(0,E.NC)(),tc=(0,hr.J2)(ts.sessions.agent),td=(0,hr.Rj)(function(){return null==tc?void 0:tc.reduce(Yo,"global")},[tc]),(0,h.useEffect)(function(){ta&&td&&tl()},[ta,td,tl]),tp=(0,hy.A)(),tf=(0,en.PA)(),(0,h.useEffect)(function(){tp&&tf("webview")},[tp,tf]),(0,Yr.M)(),(0,Yg.H)(),null}var YY=t(97193),Yx=t(60099);function Y_(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,p.Y)(p.FK,{children:n});var o="workspace-desktop-new-user-tour"===t.id||"workspace-desktop-tour-2024"===t.id;function i(e){o&&t&&(0,z.ls)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,p.Y)(Yx.f,{tour:t,onStep:function(e){t&&((0,z.u4)(z.AZ.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),i(e))},onDone:function(e){(0,z.u4)(z.AZ.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),i(e)},children:n})}var YA=t(65672),YC=t(15143),Yk=t(86330),YD=t(82226),YR=t.n(YD),YE=t(78053);function YI(){var e=(0,hr.J2)(hT()),n=(0,hr.J2)((0,hf.e)()),t=YE.O.prompt;return e?t=YE.O.agentWorking:n&&(t=YE.O.agentWaiting),t?(0,p.Y)(YR(),{children:(0,p.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}var YU=t(95210),YF=t(11880),YP=t(55335),YT=t(39312);function YO(){var e=(0,m._)(["\n  query PublishedAs($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return YO=function(){return e},e}var YL={},YN=(0,v.J1)(YO()),YM=t(88467),YG=t(65640),YB=".replit-dynamic-template",YH=t(49531),YW=t(27791),Yz=t(87260);function Y$(){var e,n,t,r,o,i,a,l,s,c,u,f,m,v,y,b,S,Y,x,_=(0,d._)((0,h.useState)(!1),2),A=_[0],k=_[1],D=(0,h.useCallback)(function(e){switch(e){case"starting":k(!0);return;case"none":k(!1);return;case"running":if(!A)throw Error("expected repl not to need dynamic template initialization")}},[k,A]),R=(0,d._)((0,h.useState)([]),2),E=R[0],I=R[1],U=(0,vR.c)();n=(e={handleRPC:(0,h.useCallback)(function(e){switch(e.type){case"progress":case"failed":return I(function(n){return(0,M._)(n).concat([(0,g._)({key:U(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,YT.A)();return I(function(t){return(0,M._)(t).concat([(0,g._)({respond:n,key:U(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[U]),onConnStateChange:D}).handleRPC,t=e.onConnStateChange,r=(0,C._P)({controlName:"octopus-smokescreen"}),l=(o={variables:{id:(0,eG.A)()}},i=(0,g._)({},YL,o),a=w.I(YN,i)).loading,s=a.data,c=(0,P.A)(function(){if(l)return!1;var e=null==s?void 0:s.repl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===rJ.Q_.Template},[l,s]),f=(u=(0,et.A)()).container,m=u.fs,y=(v=(0,d._)((0,h.useState)(!1),2))[0],b=v[1],Y=(S=aY({container:f,service:"exec",skip:!y})).channel,x=S.isConnecting,(0,h.useEffect)(function(){!r||c||l||function(){e.apply(this,arguments)}();function e(){return(e=(0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,m.stat(YB)];case 1:return b(e.sent().exists),[2]}})})).apply(this,arguments)}},[m,r,c,l,b]),(0,h.useEffect)(function(){if(!x){if(!Y)throw Error("exec channel is not open");var e=(0,YT.A)();e.promise.then((0,G._)(function(){var e;return(0,B.YH)(this,function(n){switch(n.label){case 0:return[4,Y.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})}));var r=Y.onCommand(function(r){switch(r.body){case"state":r.state===YM.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var o,i,a=r.output;if(!a)return;try{i=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null===(o=n(i))||void 0===o||o.then(function(e){return Y.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":YG.warn("got dynamic template generator stderr:",r.stderr);return;case"error":YG.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return Y.send({exec:{args:["sh",YB],lifecycle:YM.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[Y,n,x,t,y]);var F=E.map(function(e){switch(e.type){case"progress":return(0,p.Y)(Yj,(0,g._)({},e));case"failed":return(0,p.Y)(Yq,(0,g._)({},e));case"query":return(0,p.Y)(YK,(0,g._)({},e));case"prompt":return(0,p.Y)(YZ,(0,g._)({},e));case"confirm":return(0,p.Y)(YV,(0,g._)({},e))}});return(0,p.Y)(ek.a,{isOpen:A,onRequestClose:function(){return k(!1)},children:(0,p.Y)(ez.S,{gap:8,children:F})})}function Yj(e){var n=e.progress,t=(0,oL._)(e,["progress"]);return(0,p.FD)(ez.S,(0,e8._)((0,g._)({},t),{children:["progress: ",n]}))}function Yq(e){var n=e.error,t=(0,oL._)(e,["error"]);return(0,p.FD)(ez.S,(0,e8._)((0,g._)({},t),{children:["error: ",n]}))}function YK(e){var n=e.query,t=e.options,r=e.respond,o=(0,oL._)(e,["query","options","respond"]),i=(0,d._)((0,h.useState)(null),2),a=i[0],l=i[1],s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,vR.c)(),m=(0,h.useCallback)(function(){null!==a&&(u(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,p.FD)(ez.S,(0,e8._)((0,g._)({},o),{children:["query: ",n,t.map(function(e,t){return(0,p.FD)("label",{children:[(0,p.Y)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){c||l(t)}}),e]},f(t))}),(0,p.Y)(eH.$n,{text:"submit",onClick:m})]}))}function YZ(e){var n=e.prompt,t=e.respond,r=(0,oL._)(e,["prompt","respond"]),o=(0,d._)((0,h.useState)(""),2),i=o[0],a=o[1],l=(0,d._)((0,h.useState)(!1),2),s=l[0],c=l[1],u=(0,h.useCallback)(function(){c(!0),t.resolve({type:"answer",answer:i})},[i,t]);return(0,p.FD)(ez.S,(0,e8._)((0,g._)({},r),{children:["prompt: ",n,(0,p.Y)(m3.pd,{disabled:s,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,p.Y)(eH.$n,{text:"submit",onClick:u})]}))}function YV(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,o=(0,oL._)(e,["confirm","dataConfirmation","respond"]),i=Object.keys(t),a=Object.values(t);return(0,p.FD)(ez.S,(0,e8._)((0,g._)({},o),{children:["confirm: ",n,(0,p.FD)(YH.A,{"aria-label":"the data to be used to generate your App",children:[(0,p.Y)(Yz.A,{children:i.map(function(e){return(0,p.Y)(YP.VP,{isRowHeader:!0,children:e},e)})}),(0,p.Y)(YW.A,{children:(0,p.Y)(YP.fI,{children:a.map(function(e,n){return(0,p.Y)(YP.fh,{children:e},i[n])})})})]}),(0,p.Y)(eH.$n,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,p.Y)(eH.$n,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var YJ=t(10699);let YQ=function(e){return(0,p.Y)(ek.a,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,p.FD)(ez.S,{gap:24,children:[(0,p.Y)(eW.Y9,{variant:"headerDefault",level:2,css:eC.wp.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,p.Y)(eW.EY,{children:"Never miss messages from your collaborators if youâ€™re in another tab or window."}),(0,p.FD)(ez.S,{row:!0,gap:12,justify:"end",children:[(0,p.Y)(eH.$n,{onClick:e.onCancel,text:"Deny",iconLeft:(0,p.Y)(oN.A,{})}),(0,p.Y)(eH.$n,{text:"Allow notifications",colorway:"positive",iconLeft:(0,p.Y)(s3.A,{}),onClick:e.onConfirm})]})]})})};var YX=t(81149),Y0=t(91677),Y1=t(34366),Y2=(0,eA.x)({splitContainer:[eC.wp.mt(8)],path:[eC.wp.flex.growAndShrink(1),eC.wp.align.center],text:[eC.wp.mt(8)]}),Y5=function(e){var n=e.path;return(0,p.FD)(ez.S,{css:Y2.path,row:!0,gap:8,children:[(0,p.Y)(ep.A,{path:n}),(0,p.Y)(eW.EY,{multiline:!1,children:(0,p.Y)(Y1.mi,{path:n})})]})};let Y4=function(){var e,n=(0,et.A)().fs,t=fW();if(null===t)return null;var r=t.paths,o=t.onCallback;if(0===r.length)return null;var i=function(){o("cancel")},a=(e=(0,G._)(function(){var e,t,i,a,l,s,c,u,d;return(0,B.YH)(this,function(p){switch(p.label){case 0:e=!0,t=!1,i=void 0,p.label=1;case 1:p.trys.push([1,7,8,9]),a=r[Symbol.iterator](),p.label=2;case 2:if(e=(l=a.next()).done)return[3,6];return s=l.value,[4,n.readFile(s,{fromDisk:!0})];case 3:if((c=p.sent()).error)throw c.error;if(!c.content)return[3,5];return[4,n.writeFile(s,c.content)];case 4:if((u=p.sent()).error)throw u.error;p.label=5;case 5:return e=!0,[3,2];case 6:return[3,9];case 7:return d=p.sent(),t=!0,i=d,[3,9];case 8:try{e||null==a.return||a.return()}finally{if(t)throw i}return[7];case 9:return o("discard"),[2]}})}),function(){return e.apply(this,arguments)});return(0,p.Y)(ek.a,{isOpen:!0,onRequestClose:i,maxWidth:360,centered:!0,children:(0,p.FD)(ez.S,{gap:8,children:[(0,p.Y)(eW.Y9,{level:2,variant:"subheadBig",children:"You have unsaved changes"}),r.map(function(e){return(0,p.Y)(Y5,{path:e},e)}),(0,p.Y)(eW.EY,{css:Y2.text,children:"To close this tab, please save or discard your changes to the file."}),(0,p.FD)(ez.S,{css:Y2.splitContainer,row:!0,gap:8,justify:"space-between",children:[(0,p.Y)(eH.$n,{text:"Cancel",onClick:i}),(0,p.FD)(ez.S,{row:!0,gap:8,children:[(0,p.Y)(eH.$n,{text:"Discard changes",onClick:a}),(0,p.Y)(eH.$n,{text:r.length>1?"Save files":"Save file",onClick:function(){n.flush(new Set((0,M._)(r)),tu.sT.MANUAL_SAVE),o("confirm")},colorway:"blue"})]})]})]})})};var Y3=t(79672),Y8=(0,rL.v)(["transform","width","height","opacity"]),Y7=Y8.cssVars,Y6=Y8.styleTokens,Y9=(0,tG.i7)({from:{borderColor:tB.LU.blurpleDimmest},to:{borderColor:tB.LU.blurpleDefault}}),xe=(0,eA.x)({root:[eC.wp.borderRadius(),eC.wp.border({color:tB.LU.blurpleDimmest}),{position:"absolute",top:0,left:0,transform:Y6.transform,width:Y6.width,height:Y6.height,opacity:Y6.opacity,zIndex:en.WO.overlay,transition:"opacity 0.2s",animation:"".concat(Y9," 800ms alternate infinite"),pointerEvents:"none"}]});function xn(){var e=(0,h.useRef)(null);return(0,tO.d)(e,(0,en.KI)(),function(e){var n,t,r,o,i;return i={},(0,nt._)(i,Y7.transform,"translate(".concat(null!==(n=null==e?void 0:e.x)&&void 0!==n?n:0,"px, ").concat(null!==(t=null==e?void 0:e.y)&&void 0!==t?t:0,"px)")),(0,nt._)(i,Y7.width,"".concat(null!==(r=null==e?void 0:e.width)&&void 0!==r?r:0,"px")),(0,nt._)(i,Y7.height,"".concat(null!==(o=null==e?void 0:e.height)&&void 0!==o?o:0,"px")),(0,nt._)(i,Y7.opacity,(null==e?void 0:e.show)?"1":"0"),i}),(0,p.Y)(ez.S,{innerRef:e,css:xe.root})}var xt=t(48358),xr=(0,eA.x)({container:[eC.wp.position.relative,eC.wp.height(450)]});function xo(e){var n=e.embedUrl,t=e.title,r=e.isOpen,o=e.onClose;return(0,p.Y)(ek.a,{isOpen:null!=r&&r,onRequestClose:o,maxWidth:800,fitContent:!0,noPadding:!0,centered:!0,children:(0,p.Y)(ez.S,{css:xr.container,children:(0,p.Y)(xt.L9,{embedUrl:n,title:t,borderRadius:[4,4,4,4]})})})}function xi(e){var n=e.paneType,t=e.isOpen,r=e.onClose,o=(0,h.useMemo)(function(){return"ghostwriterChat"===n?{embedUrl:E.Wd,title:"Meet ".concat(E.BP)}:"agentChat"===n?{embedUrl:E.pF,title:"What is ".concat(E.g$,"?")}:{embedUrl:null,title:null}},[n]),i=o.embedUrl,a=o.title;return i?(0,p.Y)(xo,{isOpen:t,embedUrl:i,title:a,onClose:r}):null}function xa(){var e=(0,m._)(["\n  query ReplEnvironmentDesktopSidebarUpgradeCta {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return xa=function(){return e},e}var xl={},xs=(0,v.J1)(xa(),bz.o),xc=t(3125),xu=t(64643);function xd(e){var n,t,r,o=e.iconButton,i=(n=(0,g._)({},xl,void 0),w.I(xs,n)),a=i.data,l=i.loading,s=(0,lu.ET)().orgId;if(l||!(null==a?void 0:a.currentUser))return null;var c=(0,xu.q)({user:a.currentUser}),u=c.plan,d=c.showUpgradeCta;if(void 0!==s||!d)return null;function f(){window.location.reload()}if(u.name!==iJ.en)return(0,p.Y)(ez.S,{dataCy:"workspace-sidebar-upgrade-cta",children:(0,p.Y)(bQ.A,{onPlanCheckoutComplete:f,size:"small",context:"workspace_sidebar",variant:"default",colorway:"primary",iconButton:o,stretch:!0})});if(null===(t=u.trial)||void 0===t?void 0:t.cancelsAt){var h=new Date;if(h.setMonth(h.getMonth()+1),new Date(u.trial.cancelsAt)>h)return null}var m=(null===(r=u.trial)||void 0===r?void 0:r.cancelsAt)?"Trial ends ".concat((0,xc.g)(u.trial.cancelsAt)):void 0;return(0,p.Y)(bQ.A,{onPlanCheckoutComplete:f,variant:"default",context:"workspace_sidebar",text:m,iconButton:o,stretch:!0})}var xp={38:20,36:16,32:16,20:14},xf=(0,rL.v)(["toolIconButtonSize","toolIconBorderRadius"]),xh=xf.cssVars,xg=xf.styleTokens,xm=[eC.wp.position.relative,eC.wp.center,{borderRadius:xg.toolIconBorderRadius}],xv=(0,M._)(xm).concat([eC.wp.reset.button,{width:xg.toolIconButtonSize,height:xg.toolIconButtonSize,borderRadius:xg.toolIconBorderRadius}]),xw=(0,eA.x)({static:xm,buttonFilled:[eC.wp.display.inlineFlex,{button:(0,M._)(xv).concat([sL.b.filled])}],button:[eC.wp.display.inlineFlex,{button:(0,M._)(xv).concat([sL.b.nofill])}],tooltipContentsContainer:[eC.wp.flex.growAndShrink(1)]});function xy(e){var n=e.indicator,t=e.children,r=e.size;return(0,p.FD)(p.FK,{children:[(0,h.cloneElement)(t,{size:xp[void 0===r?38:r]}),n?(0,p.Y)(fG.b,{color:n}):null]})}function xb(e){var n=e.indicator,t=e.children,r=e.className,o=e.size,i=void 0===o?38:o,a=e.backgroundColor;return(0,p.Y)(eD.ui,{elevated:!0,className:r,css:xw.static,style:(0,nt._)({width:i,height:i,backgroundColor:a},xh.toolIconBorderRadius,20===i?"4px":"8px"),children:(0,p.Y)(xy,{indicator:n,size:i,children:t})})}var xS=(0,h.forwardRef)(function(e,n){var t,r,o,i,a,l,s,c,u,f,m,v,w,y=e.children,b=e.alt,S=e.size,Y=void 0===S?38:S,x=e.filled,_=e.indicator,A=e.backgroundColor,C=e.tooltipContents,k=e.tooltipDelay,D=e.keepTooltipOpenOnHover,R=void 0!==D&&D,E=(0,oL._)(e,["children","alt","size","filled","indicator","backgroundColor","tooltipContents","tooltipDelay","keepTooltipOpenOnHover"]),I=(r=(t={tooltipDelay:k,keepTooltipOpenOnHover:R}).tooltipDelay,o=t.keepTooltipOpenOnHover,a=(i=(0,d._)((0,h.useState)(!1),2))[0],l=i[1],s=(0,h.useRef)(!1),c=(0,h.useRef)(!1),u=(0,h.useRef)(),f=(0,tH.BW)(void 0===r?"default":r),m=(0,h.useCallback)(function(){u.current=setTimeout(function(){!s.current&&(o&&c.current||l(!1))},f)},[f,o]),v=(0,h.useCallback)(function(){u.current&&(clearTimeout(u.current),u.current=void 0)},[]),(0,h.useEffect)(function(){return v},[v]),{isTooltipOpen:a,handleTargetMouseEnter:function(){v(),s.current=!0,l(!0)},handleTargetMouseLeave:function(){m(),s.current=!1},handleTooltipMouseEnter:function(){v(),c.current=!0},handleTooltipMouseLeave:function(){c.current=!1,m()}}),U=I.isTooltipOpen,F=I.handleTargetMouseEnter,P=I.handleTargetMouseLeave,T=I.handleTooltipMouseEnter,O=I.handleTooltipMouseLeave;return(0,p.Y)(ez.S,{css:void 0===x||x?xw.buttonFilled:xw.button,style:(w={},(0,nt._)(w,xh.toolIconButtonSize,Y+"px"),(0,nt._)(w,xh.toolIconBorderRadius,20===Y?"4px":"8px"),w),onMouseEnter:F,onMouseLeave:P,children:(0,p.Y)(t7.K0,(0,e8._)((0,g._)({},E),{alt:b,ref:n,style:{backgroundColor:A},isTooltipOpen:R?U:E.isTooltipOpen,disableTooltipPointerEvents:!R&&void 0,tooltipDelay:k,tooltipContents:(0,p.Y)(ez.S,{css:xw.tooltipContentsContainer,onMouseEnter:T,onMouseLeave:O,children:null!=C?C:b}),children:(0,p.Y)(xy,{indicator:_,size:Y,children:y})}))})}),xY=t(3722),xx={searchReplace:oA.searchFileContents,shell:oA.showShell,runnerOutput:oA.showConsole,docs:oA.showDocs,ghostwriterChat:oA.showReplitAi,preferences:oA.showSettings,git:oA.showGit};Q.bY.CloudServices,Q.bY.WorkspaceFeatures,Q.bY.Collaboration,Q.bY.Other,Q.bY.WorkspaceExtensions;var x_=(u={},(0,nt._)(u,Q.bY.CloudServices,"Replit-native and third-party services which your App can interact with"),(0,nt._)(u,Q.bY.WorkspaceFeatures,"Everything you need to write, run, debug, and maintain your code"),(0,nt._)(u,Q.bY.Collaboration,"Communication tools for working with collaborators"),(0,nt._)(u,Q.bY.WorkspaceExtensions,"Make your workspace more powerful with new tools, commands, and integrations"),u),xA=(0,eA.x)({tooltip:[eC.wp.p(2),eC.wp.colWithGap(4),eC.wp.flex.growAndShrink(1)],tooltipTitle:[eC.wp.flex.growAndShrink(1)]});function xC(e){var n=e.title,t=e.subtitle,r=e.description,o=e.icon,i=e.titleInfoIcon;return(0,p.FD)(ez.S,{css:xA.tooltip,children:[(0,p.FD)(ez.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(xb,{size:20,children:o}),(0,p.Y)(eW.EY,{css:xA.tooltipTitle,children:n}),i]}),t?(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:t})}):null,r]})}function xk(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onDragStart,t=(0,en.Cc)(),r=(0,d._)((0,fL.i)({type:fe.N.NewPane,item:function(){return{type:fe.N.NewPane,pane:e,grid:!0}},end:function(){t()},collect:function(e){return{isDragging:e.isDragging()}}}),3),o=r[0],i=r[1],a=r[2],l=o.isDragging;return(0,h.useEffect)(function(){l&&(null==n||n())},[l,n]),{dragRef:i,dragPreview:a}}function xD(e){var n,t=e.panes,r=e.dismissPopover,o=(n=(0,Q.Vv)(),(0,h.useMemo)(function(){return function(e,n){var t=(a={},(0,nt._)(a,Q.bY.CloudServices,[]),(0,nt._)(a,Q.bY.Collaboration,[]),(0,nt._)(a,Q.bY.WorkspaceFeatures,[]),(0,nt._)(a,Q.bY.WorkspaceExtensions,[]),(0,nt._)(a,Q.bY.Other,[]),a),r=!0,o=!1,i=void 0;try{for(var a,l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value,u=n.getCategory(c);["extensionStore","extensionDevtools","integrations"].includes(c.type)?t[u].unshift(c):t[u].push(c)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return t}(t,n)},[t,n])),i=(0,Q.Vv)(),a=(0,en.Us)(),l=(0,h.useMemo)(function(){var e,n,t,l,s,c;return n=(e={categorizedPanes:o,ui:i,openPane:function(e){r(),a({pane:e,activate:!0})},dismissPopover:r}).categorizedPanes,t=e.ui,l=e.openPane,s=e.dismissPopover,c=Object.entries(n).map(function(e){var n=(0,d._)(e,2),r=n[0],o=n[1];return{data:{type:"context",label:r,icon:(0,p.Y)(X.A,{}),tooltip:x_[r]},commands:function(){return o.map(function(e){var n,r,o,i,a;return{match:(r=(n={pane:e,aliases:el.f.get(e.type),dismissPopover:s}).pane,i=void 0===(o=n.aliases)?[]:o,a=n.dismissPopover,function(e){var n=e.searchQuery,t=e.data,o=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{content:(0,p.Y)(xR,{pane:r,dismissPopover:a,toolItemProps:{pane:r,active:o}})}};var l=(0,xY.w2)(n,t.label,{filterLowMatchScores:!0});if(null!=l)return{score:null!==(d=null==l?void 0:l.score)&&void 0!==d?d:0,render:{content:(0,p.Y)(xR,{pane:r,dismissPopover:a,toolItemProps:{pane:r,labelHighlights:null!==(f=null==l?void 0:l.ranges)&&void 0!==f?f:[],active:o}})}};var s=!0,c=!1,u=void 0;try{for(var d,f,h,g=i[Symbol.iterator]();!(s=(h=g.next()).done);s=!0){var m=h.value,v="string"==typeof m?{alias:m,prefix:void 0}:m,w=v.alias,y=v.prefix,b=(0,xY.w2)(n,w,{filterLowMatchScores:!0});if(b)return{score:b.score,render:{content:(0,p.Y)(xR,{pane:r,dismissPopover:a,toolItemProps:{active:o,alias:w,aliasPrefix:y,pane:r}})}}}}catch(e){c=!0,u=e}finally{try{s||null==g.return||g.return()}finally{if(c)throw u}}return null}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId):e.type,type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){return l(e)}}}})}}}),{data:{type:"context",label:"Search actions",description:"Search tools",icon:(0,p.Y)(X.A,{})},commands:function(){return c}}},[o,i,r,a]),s=(0,h.useRef)(null);return(0,h.useEffect)(function(){s.current&&s.current()},[s]),(0,p.Y)(eR.r,{focusRef:s,command:l})}function xR(e){var n=e.pane,t=e.dismissPopover,r=e.toolItemProps,o=xk(n,{onDragStart:t}).dragRef,i=(0,Q.qo)(n,{short:!0}),a=(0,Q.Vv)(),l=a.Icon({pane:n}),s=a.getTitle(n),c=xx[n.type];return(0,p.Y)(tH.m_,{tooltip:i?(0,p.Y)(xC,{description:i,title:s,icon:l}):null,placement:"right-start",isDisabled:!i,maxWidth:300,children:function(e,n){return(0,p.Y)(ez.S,(0,e8._)((0,g._)({innerRef:n},e),{style:{height:"100%"},children:(0,p.Y)(ez.S,{style:{height:"100%"},innerRef:o,justify:"center",children:(0,p.Y)(ea.k,(0,e8._)((0,g._)({},r),{shortcutCommand:c}))})}))}})}var xE=t(23583),xI=t.n(xE);function xU(){var e=(0,d._)((0,h.useState)(!1),2),n=e[0],t=e[1],r=(0,h.useCallback)(function(){return t(!1)},[]);return(0,p.FD)(sM.Wv,{isOpen:n,onOpenChange:t,label:"All tools",placement:"right",noArrow:!0,children:[(0,p.Y)(xS,{filled:!1,alt:"All tools",onClick:function(){return t(!0)},tooltipDelay:"none",tooltipPlacement:"right-end",size:32,children:(0,p.Y)(oq,{})}),(0,p.Y)(xF,{dismissPopover:r})]})}function xF(e){var n=e.dismissPopover,t=(0,ed.Tb)();return(0,p.Y)(ez.S,{clsx:xI().toolsListPopover,children:(0,p.Y)(xD,{panes:t,dismissPopover:n})})}function xP(e){var n=e.tool,t="agent"===n?iV.ri:iV.a7,r="agent"===n?iV.v7:iV.go;return(0,p.FD)(eW.EY,{variant:"small",color:"dimmest",children:[t," cents per ",r]})}function xT(e){var n=e.isInLayout,t=(0,oL._)(e,["isInLayout"]),r=(0,hr.J2)(hT()),o=(0,hr.J2)((0,hf.e)()),i=(0,d._)((0,h.useState)(!1),2),a=i[0],l=i[1];(0,h.useEffect)(function(){if(!o||r||n){l(!1);return}var e=setTimeout(function(){return l(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,o,r,n]);var s=!n&&r||a;return(0,p.Y)(hK.l,(0,g._)({loading:s},t))}var xO=(0,eA.x)({dockItem:[eC.wp.position.relative,eC.wp.width(36)],inLayoutIndicator:[eC.wp.position.absolute,eC.wp.top("50%"),eC.wp.left(4),eC.wp.width(3),eC.wp.height(3),eC.wp.borderRadius("full"),eC.wp.shadow(1),{transform:"translate(0, -50%)",backgroundColor:tB.LU.foregroundDimmest,pointerEvents:"none"}]});function xL(e){var n,t,r,o,i,a,l,s,c,u,d=e.pane,f=e.openPaneIntroVideoModal,h=(a=(i=(0,Q.Vv)()).Icon({pane:d}),l=i.getTitle(d),s=(0,Q.qo)(d),c=(0,t8.F9)({paneType:d.type}),u=(0,en.Us)(),{icon:a,title:l,description:s,indicator:c,onClick:function(){u({pane:d,commit:!0,reveal:!0})}}),m=h.title,v=h.description,w=h.indicator,y=h.onClick,b=h.icon,S=(0,en.JR)(d.type),Y=xk(d).dragRef,x=(t=(n={paneType:d.type,openPaneIntroVideoModal:f}).paneType,r=n.openPaneIntroVideoModal,o=function(){return null==r?void 0:r(t)},"ghostwriterChat"===t?{subtitle:"Chat & Quick Edits",description:(0,p.Y)(xP,{tool:"assistant"}),titleInfoIcon:(0,p.Y)(t7.K0,{alt:"More info",tooltipBehavior:"hidden",onClick:o,children:(0,p.Y)(v0.A,{})})}:"agentChat"===t?{subtitle:"Automated Developer",description:(0,p.Y)(xP,{tool:"agent"}),titleInfoIcon:(0,p.Y)(t7.K0,{alt:"More info",tooltipBehavior:"hidden",onClick:o,children:(0,p.Y)(v0.A,{})})}:void 0),_=v?(0,p.Y)(xC,(0,g._)({title:m,icon:b},x||{description:(0,p.Y)(eW.EY,{multiline:!0,children:v})})):null,A=(0,sn.Jw)(se,l1.Assistant),C=(0,sn.Jw)(se,l1.Agent);return(0,p.FD)(ez.S,{css:xO.dockItem,innerRef:(0,Q.GN)(d)?C:(0,Q.N5)(d)?A:void 0,children:[(0,p.Y)(xS,{ref:Y,filled:!1,alt:m,indicator:w,size:36,onClick:y,tooltipContents:_,tooltipDelay:null!=x?"default":"none",tooltipPlacement:"right-start",keepTooltipOpenOnHover:null!=x,children:"agentChat"===d.type?(0,p.Y)(xT,{isInLayout:S}):b}),S?(0,p.Y)(ez.S,{css:xO.inLayoutIndicator}):null]})}function xN(e){return(0,p.FD)(t$.Ay,(0,e8._)((0,g._)({},e),{children:[(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v2.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h5a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M12.472 17.646a.854.854 0 0 0 0 1.208l3.696 3.696a.854.854 0 0 0 1.208-1.209l-3.092-3.091 3.092-3.091a.855.855 0 0 0-1.208-1.209l-3.696 3.696Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"m17.646 18.854 3.695 3.696a.854.854 0 0 0 1.209-1.209l-3.092-3.091 3.092-3.091a.854.854 0 1 0-1.209-1.209l-3.695 3.696a.854.854 0 0 0 0 1.208Z",clipRule:"evenodd"})]}))}function xM(e){return(0,p.FD)(t$.Ay,(0,e8._)((0,g._)({},e),{children:[(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h4a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M22.55 17.646a.854.854 0 0 1 0 1.208l-3.696 3.696a.855.855 0 0 1-1.208-1.209l3.091-3.091-3.091-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M17.376 18.854 13.68 22.55a.854.854 0 0 1-1.208-1.209l3.092-3.091-3.092-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696a.854.854 0 0 1 0 1.208Z",clipRule:"evenodd"})]}))}var xG=(0,eA.x)({files:{transitionProperty:"opacity",transitionDuration:ic.Ds.duration,transitionTimingFunction:ic.Ds.timingFunction,"&& button":[eC.wp.border({color:tB.LU.outlineDimmest}),{backgroundColor:tQ.s}]}});function xB(){var e=(0,en.zL)(),n=(0,oj.A)(e.isOpen),t=(0,eb.Jn)(rM.id),r=e.toggle;return(0,eb.SJ)(function(){return[rM.id,function(){return r()}]},[r]),(0,p.Y)(xH,{onClick:function(){return e.toggle(!n)},shortcut:t,isOpen:n})}function xH(e){var n=e.isOpen,t=e.shortcut,r=e.onClick,o=(n?"Close":"Open")+" files",i=t?(0,p.Y)(xW,{shortcut:t,text:o}):o;return(0,p.Y)(ez.S,{css:xG.files,children:(0,p.Y)(xS,{dataCy:"toggle-files-sidebar",filled:!1,alt:o,tooltipContents:i,onClick:r,tooltipPlacement:"right",size:32,children:n?(0,p.Y)(xN,{}):(0,p.Y)(xM,{})})})}function xW(e){return(0,p.FD)(ez.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eW.EY,{multiline:!1,variant:"small",children:e.text}),(0,p.Y)(eb._y,{fontSize:10,keyCombo:e.shortcut})]})}var xz=t(23779),x$=t.n(xz);function xj(e){var n,t,r,o=(n=(0,h.useRef)(null),t=(0,h.useRef)(null),r=(0,h.useRef)(null),(0,h.useEffect)(function(){var e=n.current;if(e){var o=!1,i=null,a=null,l=function(){if(n.current){var e=n.current,o=e.scrollTop,l=e.scrollHeight,s=e.clientHeight,c=o<=0,u=1>=Math.abs(l-s-o);c!==i&&t.current&&(t.current.style.setProperty("opacity",c?"0":"1"),i=c),u!==a&&r.current&&(r.current.style.setProperty("opacity",u?"0":"1"),a=u)}},s=function(){o||(o=!0,requestAnimationFrame(function(){o=!1,l()}))};return s(),e.addEventListener("scroll",s),function(){e.removeEventListener("scroll",s)}}},[]),{scrollRef:n,topRef:t,bottomRef:r}),i=o.scrollRef,a=o.topRef,l=o.bottomRef;return(0,p.FD)(ez.S,{style:{width:e.width},innerRef:e.innerRef,clsx:x$().root,align:"stretch",justify:"space-between",gap:6,children:[(0,p.Y)(ez.S,{align:"center",children:e.filesButton}),(0,p.FD)(ez.S,{clsx:x$().middle,align:"center",children:[(0,p.Y)(ez.S,{clsx:x$().primaryTools,children:e.primaryTools}),(0,p.Y)(ez.S,{clsx:x$().divider}),(0,p.FD)(ez.S,{clsx:x$().secondarySection,align:"stretch",children:[(0,p.FD)(ez.S,{clsx:x$().secondaryTools,align:"center",children:[(0,p.Y)(ez.S,{clsx:[x$().fade,x$().fadeTop],innerRef:a}),(0,p.Y)(ez.S,{clsx:x$().secondaryToolsScroll,innerRef:i,children:e.secondaryTools}),(0,p.Y)(ez.S,{clsx:[x$().fade,x$().fadeBottom],innerRef:l,align:"center",justify:"end"})]}),(0,p.Y)(ez.S,{align:"center",children:e.allToolsButton})]})]}),(0,p.Y)(ez.S,{align:"center",children:e.footer})]})}var xq=t(69891),xK=t(51570),xZ=function(e){return"ws-database-added-to-dock-callout:"+e};function xV(e){return(0,p.FD)(sM.Wv,{placement:"right",label:"Tool added",isOpen:!0,onOpenChange:function(n){!1===n&&e.dismiss()},children:[function(n){var t=n.ref,r=(0,oL._)(n,["ref"]);return(0,p.Y)(ez.S,(0,e8._)((0,g._)({},r),{innerRef:t,children:e.children}))},(0,p.FD)(ez.S,{gap:8,style:{padding:8},children:[e.callout,(0,p.FD)(ez.S,{row:!0,gap:4,children:[e.action,(0,p.Y)(eH.$n,{colorway:"primary",text:"Got it",onClick:e.dismiss,style:{marginLeft:"auto"}})]})]})]})}var xJ=t(52776);function xQ(e){return"extension"===e.type?e.data.installationId:e.type}function xX(){var e,n,t,r,o,i,a,l,s,c,u,f,g,m,v,w,y,b,S=(0,en.Bm)(),Y=0===(0,ed.Tb)().length,x=(0,en.Vq)((0,ed.No)()),_=(e=(0,eG.A)(),t=(n=(0,xK.q)()).neonDatabases,r=n.currentUser,o=(0,xq.ex)({currentUser:r}),i=(0,hP.C)().agentState,a=(0,hr.G9)((0,h.useMemo)(function(){return null==i?void 0:i.select(function(e){return null==e?void 0:e.state})},[i])),l=(0,en.p3)(),c=(s=(0,d._)((0,h.useState)(function(){var n=tF.A.get(xZ(e),"string");switch(n){case"was-added-by-agent":case"callout-dismissed":return n;default:return null}}),2))[0],u=s[1],f=(0,h.useRef)(!1),g=t.length>0,v=null==(m=t[0])?void 0:m.isEphemeral,(0,h.useEffect)(function(){"callout-dismissed"!==c&&g&&!f.current&&(f.current=!0,a.current===q.g32.AGENT_STATE_RUNNING&&(l({pane:{type:"neon"}}),u("was-added-by-agent")))},[c,a,g,l]),w=(0,h.useCallback)(function(){var n="callout-dismissed";tF.A.set(xZ(e),n),u(n)},[e]),b=(y=m&&v&&o)?(0,p.Y)(ez.S,{children:(0,p.Y)(xq.Bt,{isFrozen:m.isFrozen,scheduledFreezeTime:m.scheduledFreezeTime,scheduledDeletionTime:m.scheduledDeletionTime})}):(0,p.FD)(eW.EY,{children:["We created a database for you,",(0,p.Y)("br",{}),"manage it here"]}),{action:y?(0,p.Y)(bQ.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(iJ.en),colorway:"brand",variant:"outlined",style:{flex:"1 1 auto"}}):null,callout:"was-added-by-agent"===c?b:null,dismissCallout:w}),A=(0,d._)((0,h.useState)(null),2),C=A[0],k=A[1],D=(0,d._)((0,h.useState)(!1),2),R=D[0],E=D[1],I=(0,sn.Jw)(se,l1.SidebarDock);return!x.visible||"centered"===S||"lobbyAppProposal"===S||Y?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(xj,{innerRef:I,width:en.Rm,filesButton:(0,p.Y)(xB,{}),primaryTools:x.primaryTools.map(function(e){return(0,p.Y)(xL,{pane:e,openPaneIntroVideoModal:function(){k(e.type),E(!0)}},xQ(e))}),secondaryTools:x.secondaryTools.map(function(e){return"neon"===e.type&&_.callout?(0,p.Y)(xV,{callout:_.callout,action:_.action,dismiss:_.dismissCallout,children:(0,p.Y)(xL,{pane:e})}):(0,p.Y)(xL,{pane:e},xQ(e))}),allToolsButton:(0,p.Y)(xU,{}),footer:(0,p.FD)(ez.S,{gap:4,align:"center",children:[(0,p.Y)(xd,{iconButton:!0}),(0,p.Y)(xJ.A,{})]})}),(0,p.Y)(xi,{paneType:null!=C?C:void 0,isOpen:R,onClose:function(){return E(!1)}})]})}var x0=(0,eA.x)({root:[eC.wp.position.absolute,eC.wp.borderRadius(8),eC.wp.backgroundColor.backgroundRoot,eC.wp.pt(16),eC.wp.align.center,{border:"1px solid",borderColor:tB.LU.outlineDimmest}],content:[eC.wp.width("100%"),eC.wp.flex.growAndShrink(1)]});function x1(){var e,n,t,r,o=(0,en.j$)(),i=(0,en.$P)(),a=(0,en.$6)(),l=(n=(e=(0,d._)((0,pV.H)({accept:[tu.pt.File,fe.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){r.drag()},drop:function(e){if("nodes"===e.type){var n=(0,Q.u9)(e.nodes);n.length>0&&r.drop({panes:n})}if(e.type===fe.N.NewPane){var t=e.pane;r.drop({panes:[t]})}}}),2))[0].isOver,t=e[1],r=(0,en.jG)({isOver:n}),t),s=ey({openPane:(0,h.useCallback)(function(e){(0,z.u4)(z.AZ.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),a({pane:e.pane,edge:"left"})},[a])});return(0,p.Y)(ez.S,{style:{width:o.width,height:o.height,transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),zIndex:i?100:void 0},css:x0.root,innerRef:l,children:(0,p.Y)(ez.S,{css:x0.content,children:(0,p.Y)(eR.r,{autoFocus:!0,command:s,showToolDescriptions:!0})})})}var x2=t(76363),x5=t(85036),x4=t(12380),x3=t(75396),x8=n6.ZU.Number({minimum:0,exclusiveMaximum:100}),x7=n6.ZU.Object({layout:eJ.y_,isActive:n6.ZU.Boolean(),sidebarPercent:n6.ZU.Optional(x8)}),x6=n6.ZU.Object({sidebarPercent:n6.ZU.Optional(x8),sidebar:n6.ZU.Optional(x4.Be),layout:eJ.y_,agentMode:n6.ZU.Optional(x7),data:n6.ZU.Record(n6.ZU.String(),n6.ZU.Object({type:n6.ZU.String()})),dock:n6.ZU.Optional(x3.vh)});function x9(e,n){var t=null;try{t=n9.WT.Decode(x6,e)}catch(e){}if(null===t)return null;var r={layout:t.layout,agentMode:t.agentMode,data:{},type:"saved",sidebarPercent:null!==(u=t.sidebarPercent)&&void 0!==u?u:x2.TS,sidebar:null!==(p=t.sidebar)&&void 0!==p?p:{width:x5.j,isOpen:!1},dock:t.dock?(0,x3.Gq)(t.dock,n):void 0},o=new Set,i=(0,eJ.PL)(r.layout),a=r.agentMode?(0,eJ.PL)(r.agentMode.layout):null,l=!0,s=!1,c=void 0;try{for(var u,p,f,h=Object.entries(t.data)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var g=(0,d._)(f.value,2),m=g[0],v=g[1];if(i.has(m)||null!==a&&a.has(m)){var w=n(v.type,v);if(!w){o.add(m);continue}r.data[m]=w}}}catch(e){s=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(s)throw c}}return(0,aw.jM)(r,function(e){var n=function(n){if(i.has(n)){(0,eJ.fU)(e.layout,n);return}e.agentMode&&(null==a?void 0:a.has(n))&&(0,eJ.fU)(e.agentMode.layout,n)},t=!0,r=!1,l=void 0;try{for(var s,c=o[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var u=s.value;n(u)}}catch(e){r=!0,l=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw l}}var p=!0,f=!1,h=void 0;try{for(var g,m=Object.entries(e.data)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,d._)(g.value,2),w=v[0],y=v[1];"commands"!==y.type&&("codeEditor"!==y.type||y.data.path)||(delete e.data[w],n(w))}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}})}var _e=t(69638),_n=t(36788);function _t(e){var n,t,r,o,i,a,l,s=e.repl,c=e.currentUser,u=(0,f.useRouter)(),m=(0,O.pE)("enterInAgentMode","boolean"),v=(0,O.pE)("agent","boolean"),w=(0,O.pE)("agentOnboarding","boolean"),y=(0,O.pE)("popupId","string"),b=(0,T.Po)(u),S=(0,hy.A)(),Y=(0,d._)((0,h.useState)(function(){var e;return(0,Q.HJ)({config:(e=(0,Sf.P)(),(0,e8._)((0,g._)({},e),{webview:Sw.QS,commands:vi,debugger:vP,docs:vL,chat:vr,threadInbox:bF,tutorial:bH,extension:vz,extensionStore:yw,replAuth:yk,searchReplace:bR,deployments:Sg.B,config:vc,preferences:yx,integrations:Sm.u,extensionDevtools:yp,csvPreview:Sh.J,workspaceTourGuide:Sp,agentChat:hQ,agentProgress:S?mi:gj,multiplayer:Sv.M,agentDrawer:Sv.M}))})}),1)[0],x=(0,F.gc)("isLayoutStacked").preferences,_=null,A=(0,O.pE)("gitImport","boolean"),k=(t=(n={repl:s}).repl,o=void 0===(r=n.entrypoint)?"":r,(0,h.useMemo)(function(){var e=t.language.startsWith("html"),n={config:{paneId:(0,o$.A)(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:(0,o$.A)(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:(0,o$.A)(),pane:{type:e?"webview":"runnerOutput"}},shell:{paneId:(0,o$.A)(),pane:{type:"shell"}}};return{sidebarPercent:0,type:"default",data:Object.values(n).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:(0,o$.A)(),type:"paneGroup",percent:40,activeIndex:0,panes:[n.config.paneId]},{id:(0,o$.A)(),type:"split",percent:60,stacked:!0,children:[{id:(0,o$.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[n.codeEditor.paneId]},{id:(0,o$.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[n.output.paneId,n.shell.paneId]}]}]}}}},[t,o]));y?_=x9((0,pZ.oN)(y),Y.decode):s.layoutState?_=x9(s.layoutState,Y.decode):A&&(_=k);var D=!!s.config.isAgentRepl,R=m||D,E=v||w||(null==_?void 0:_.agentMode)==null&&D,U=function(e){var n,t=e.repl,r=e.currentUser,o=e.savedLayoutState,i=e.agentChatEnabled,a=void 0!==i&&i,l=e.enteredWithAgentPrompt,s=e.isAgentOnboarding,c=void 0!==s&&s,u=(0,C._P)({controlName:"flag-projects-workspace-tour",default:!1}),d=(0,C._P)({controlName:"flag-ws-guided-tour",default:!1});if(!t||!r||null!=t.lesson||t.config.isInPlanningPhase)return null;var p=!(void 0!==l&&l)&&!c;if(p&&!r.hasSeenWorkspaceTour2024)return{id:se,steps:[a?l4:l3,l8,l7,l6,l9].filter(Boolean)};if(a||c)return null;var f=null!=o&&Object.values(null==o?void 0:o.data).some(function(e){return"workspaceTourGuide"===e.type});if(d&&f){var h=function(e){switch(e){case"workspace-guided-tour-data-app":return St.IW;case"workspace-guided-tour-portfolio-website":return Sr._t;default:return}}((0,YY.Y)(t));if(null!=h)return h}return p||r.hasSeenWorkspaceTour2021||r.hasSeenSidebarTour2022||r.hasSeenWorkspaceTour2022?!r.hasSeenProjectsTour2024&&(null===(n=t.project)||void 0===n?void 0:n.id)&&u?sX.X:null:lV.C}({repl:s,currentUser:c,savedLayoutState:_,agentChatEnabled:R,enteredWithAgentPrompt:m,isAgentOnboarding:w}),M=(i=(0,O.pE)("deploymentPane","boolean"),a=(0,O.pE)("projectPane","boolean"),l=(0,O.pE)("workspaceTourGuidePane","boolean"),(0,P.A)(function(){return i?{type:"deployments"}:a?{type:"project"}:l?{type:"workspaceTourGuide"}:void 0},[i,a,l])),G=m||!!s.config.isInPlanningPhase;return(0,p.FD)(L.Ve,{currentUsername:c.username,replId:s.id,children:[(0,p.Y)(t8.CP,{isAgentOnboarding:w,children:(0,p.Y)(en.xm,{initialPane:M,savedLayoutState:_,isHTML:s.language.startsWith("html"),isStacked:x.isLayoutStacked,isExtension:!!s.config.isExtension,isBlankRepl:I(s),agentCenteredLayout:G,popupId:y,agentDefaultLayout:E,children:(0,p.Y)(Y_,{tour:U,userId:c.id,children:(0,p.Y)(_r,{ui:Y,repl:s,currentUser:c,isBonsaiWebview:b,agentChatEnabled:R},s.id)})})}),(0,p.Y)(N.A,{})]})}function _r(e){var n,t,r,o,i,a,l,s,c,u,f,g,m,v,w,y,b,S,Y,x,_,A=e.repl,k=e.currentUser,D=e.isBonsaiWebview,R=e.ui,I=e.agentChatEnabled,F=(n=(0,en.q5)(),t=(0,en.f)(),r=(0,en.cC)(),o=(0,Sz.iO)(),i=(0,C._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===A.language?"html":"outputs",s=(l=(0,d._)((0,h.useState)(!1),2))[0],c=l[1],f=(u=(0,d._)((0,h.useState)(!1),2))[0],g=u[1],m=(0,dO.q6)(),v=(0,dO.DJ)(),w=(0,C._P)({controlName:"flag-open-telemetry-tracing"}),y=(0,C._P)({controlName:"flag-multi-lsp-connections"}),b=(0,C._P)({controlName:"flag-postgresql-nixmodules"}),S=(0,fB.o)(),Y=(0,P.A)(function(){return{runnerMode:a,onPresenceCommand:m,getColorForUser:v,onUnrecoverableError:(0,Yk.A)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===U.ub.NotAllowed?c(!0):e===U.ub.RequiresRefresh&&g(!0)},throwBsod:o}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,enableUserEvents:i,enableMultipleLSPClientsPerFile:y,openTelemetryTracing:w,enableReplspaceSshTokenPassthrough:!0,shouldAutoFlushRef:S,usePostgresqlNixmodule:b}},[i,a,n,t,r,o,m,v,w,y,S,b]),x=(0,YA.q)(Y),(0,P.A)(function(){return{services:x,isPleaseRefresh:f,isNotAllowed:s}},[x,f,s])),T=F.services,O=F.isPleaseRefresh,L=F.isNotAllowed,N=(0,t8.eg)();(0,Y3.X$)(!!A.layoutState);var M=(0,P.A)(function(){return(0,ik.Y)(null==k?void 0:k.keybindings.keybindings)},[k]);if(!T)return null;var G=A.authorizations.useAdvancedChat.isAuthorized;return(0,p.Y)(E.KH,{replId:A.id,currentUserId:k.id,currentUserTimeCreated:k.timeCreated,hasAccessToAdvancedModel:G,agentChatEnabled:I,orgId:null===(_=A.org)||void 0===_?void 0:_.id,children:(0,p.Y)(t1.SF,{children:(0,p.FD)(iF,{services:T,ui:R,repl:A,userKeybindings:M,children:[(0,p.FD)(fn.A,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,p.Y)(is,{}),(0,p.Y)(ok,{isAdmin:k.isAdmin,isSubscribed:k.isSubscribed}),(0,p.Y)(YX.A,{repl:A}),D?null:(0,p.Y)(pO,{isAgentOnboarding:N}),D?(0,p.Y)(iB,{}):null,(0,p.Y)(Y4,{}),(0,p.Y)(eF,{}),(0,p.Y)(iO,{repl:A}),(0,p.Y)(YS,{repl:A,currentUser:k}),(0,p.Y)(lU,{}),(0,p.Y)(_s,{isBonsaiWebview:D}),(0,p.Y)(tE,{}),(0,p.Y)(a7,{}),(0,p.Y)(YU.A,{}),(0,p.Y)(Y$,{}),(0,p.Y)(_i,{isMultiplayerSession:A.multiplayers.length>0}),(0,p.Y)(YJ.A,{isOpen:L}),(0,p.Y)(hM.A,{isOpen:O}),(0,p.Y)(_n.$,{}),(0,p.Y)(_e.F,{}),(0,p.Y)(tA,{}),(0,p.Y)(iL,{}),(0,p.Y)(YF.P,{}),(0,p.Y)(Y0.y,{repl:A})]}),(0,p.Y)(_o,{replId:A.id})]})})})}function _o(e){var n=e.replId,t=(0,d._)((0,Sz.eY)(),1)[0],r=(0,d._)((0,R.A)(),1)[0],o=(0,h.useCallback)(function(){r({variables:{input:{replId:n,state:{}}}})},[r,n]);return(0,h.useEffect)(function(){t&&o()},[t,o]),(0,p.Y)(YC.A,{})}function _i(e){var n,t,r,o,i,a=(n=e.isMultiplayerSession,r=(t=(0,d._)((0,h.useState)(!1),2))[0],o=t[1],i=(0,sn.qv)(),(0,h.useEffect)(function(){!i&&n&&"default"===pB()&&o(!0)},[n,i]),{shouldShowModal:r,hideModal:(0,h.useCallback)(function(){p$(!0),o(!1)},[]),confirm:(0,h.useCallback)((0,G._)(function(){return(0,B.YH)(this,function(e){switch(e.label){case 0:return[4,function(){return pW.apply(this,arguments)}()];case 1:return e.sent(),o(!1),[2]}})}),[])}),l=a.shouldShowModal,s=a.hideModal,c=a.confirm;return l?(0,p.Y)(YQ,{onCancel:s,onConfirm:c}):null}var _a=(0,tG.i7)({from:{opacity:0},to:{opacity:1}}),_l=(0,eA.x)({containerRoot:[eC.wp.width("100%"),eC.wp.left(0),eC.wp.position.absolute],main:[{animation:"".concat(_a," 0.2s ease-in-out")}]});function _s(e){var n,t,r,o,i,a,l,s=e.isBonsaiWebview,c=(n=(0,en.GC)(),t=(0,rX.A)(),r=(0,lZ.vm)(),o=(0,lZ.d0)(),i=(r||o)&&t?dY.uF:0,a=(0,h.useRef)(null),l=(0,pL.A)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var o=a.current.getBoundingClientRect(),l=o.top;n({width:t,height:r,x:o.left,y:l-i})}}),(0,h.useCallback)(function(e){a.current=e,l(e)},[l])),u=(0,en.Xn)(),d=(0,en.WM)(),f=(0,en.Il)(),g=(0,en.nR)(),m=(0,h.useRef)(null),v=(0,E.jt)(),w=(0,h.useCallback)(function(e){c(e),m.current=e},[c]);return(0,p.FD)(ez.S,{innerRef:w,css:_l.containerRoot,style:s?{height:"calc(100% - 4px)",top:6,bottom:0}:{height:"calc(100% - ".concat(dY.uF,"px)"),top:dY.uF},children:[u?(0,p.FD)(p.FK,{children:[(0,p.Y)(r$,{}),(0,p.FD)("main",{id:"main-content",css:_l.main,style:v?{animation:"none"}:void 0,children:[f.map(function(e){return(0,p.Y)(S_,{handleId:e},e)}),g.map(function(e){return(0,p.Y)(ht,{headerId:e},e)}),d.map(function(e){return(0,p.Y)(fc,{paneId:e},e)}),0===d.length?(0,p.Y)(x1,{}):null]}),(0,p.Y)(en.Ij,{}),(0,p.Y)(en.ht,{}),(0,p.Y)(fd,{}),(0,p.Y)(iS,{}),(0,p.Y)(xn,{}),(0,p.Y)(t1.tz,{}),(0,p.Y)(xX,{})]}):null,(0,p.Y)(YI,{})]})}var _c=t(84984),_u=t(2219),_d=t(84124),_p=t(20184),_f=t(66082),_h=t(74910),_g=t(61465),_m=t(38884),_v=(0,tG.AH)([eC.wp.position.fixed,eC.wp.top(0),eC.wp.left(0),eC.wp.height("100%"),eC.wp.width("100%")]),_w=(0,tG.AH)([eC.wp.center,eC.wp.flex.growAndShrink(1),eC.wp.dragRegion]),_y=(0,tG.AH)([eC.wp.center,eC.wp.flex.growAndShrink(1)]);let _b=function(){var e,n,t,r=null,o=(0,f.useRouter)().query;if(!o.replUrl)throw Error("Expected replUrl to be set");if(!o.replId)throw Error("Expected replId to be set");var i=(0,d._)((0,k.t)(),2),a=(i[0],i[1]),l=o.replUrl.toString(),s=(e={variables:{replId:o.replId.toString(),environment:(0,_p.v)(),platform:(0,_f.V)()},ssr:!!o.ssr},n=(0,g._)({},x,e),w.I(_,n)),c=s.data,u=s.loading,m=s.error,v=(0,C._P)({controlName:"flag-token-email-verification"}),y=(null==c?void 0:c.currentUser)||void 0,b=(null==c?void 0:c.getRepl)&&("Repl"===c.getRepl.__typename||"ReplRedirect"===c.getRepl.__typename||"ReplSubscriptionExpired"===c.getRepl.__typename)?c.getRepl:null,S=(null==c?void 0:c.getRepl)&&"Repl"!==c.getRepl.__typename&&"ReplRedirect"!==c.getRepl.__typename&&"ReplSubscriptionExpired"!==c.getRepl.__typename?c.getRepl.message:null,Y=(null==b?void 0:b.__typename)==="Repl"?b:null,R="https://replit.com".concat(l),E=null!==(t=null==Y?void 0:Y.description)&&void 0!==t?t:void 0,I=null!=S?S:null==m?void 0:m.message,U=(0,d._)((0,h.useState)(!1),2),F=U[0],P=U[1];(0,h.useEffect)(function(){return P(!0)},[]);var T=v&&y&&!y.isVerified;return r=T?(0,p.Y)(ez.S,{css:_y,children:(0,p.Y)(A.A,{})}):I?(0,p.Y)(ez.S,{css:[eC.wp.center,eC.wp.flex.growAndShrink(1)],children:(0,p.Y)(eW.EY,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):u||!F||a?(0,p.Y)(ez.S,{css:_w,children:(0,p.Y)(_h.A,{height:100})}):Y&&y?(0,p.Y)(_t,{repl:Y,currentUser:y},Y.id):(0,p.Y)(ez.S,{css:_w,children:(0,p.Y)(_h.A,{height:100})}),(0,p.Y)(_g.A,{children:(0,p.FD)(_m.A,{dataCy:"workspace-page",title:"".concat((null==Y?void 0:Y.title)||""),oembedUrl:R,description:E,noHeader:!T,noMain:!T,noSidebar:!T,noFooter:!0,hideEmailVerify:!0,children:[(0,p.Y)(D.d,{}),(0,p.Y)(_d.A,{replResponse:b,replUrl:l,children:(0,p.FD)(eD.ui,{css:_v,children:[(0,p.Y)(_c.z,{}),(0,p.Y)(_u.u,{}),r]})})]})})}},23583:e=>{e.exports={toolsListPopover:"AllToolsButton_toolsListPopover__HvH5A"}},23779:e=>{e.exports={root:"Layout_root__zbmnW","fade-in":"Layout_fade-in___4xKz",middle:"Layout_middle__CTNFw",enter:"Layout_enter__U3ed7",divider:"Layout_divider__K1Gu3",secondarySection:"Layout_secondarySection__QzsOI",primaryTools:"Layout_primaryTools__ynQG1",secondaryTools:"Layout_secondaryTools__xDqvE",secondaryToolsScroll:"Layout_secondaryToolsScroll__ZeWEF",fade:"Layout_fade__5GmrQ",fadeTop:"Layout_fadeTop__y79T3",fadeBottom:"Layout_fadeBottom__spqF7"}},29668:e=>{e.exports={root:"PlanningBadge_root__kq9US"}},77532:e=>{e.exports={loading:"Lobby_loading__6cU4I"}},55838:e=>{e.exports={root:"OutputOverlay_root__7HWFX","slide-up":"OutputOverlay_slide-up__0PCps",surface:"OutputOverlay_surface__8ncss",avatarRow:"OutputOverlay_avatarRow__heguY",contentRow:"OutputOverlay_contentRow__moJFH",header:"OutputOverlay_header__FKmXs",headerContent:"OutputOverlay_headerContent__RijCv"}},717:e=>{e.exports={root:"Scroller_root__CP8kP",items:"Scroller_items__7yMNo",item:"Scroller_item__2vewE",itemCenterContainer:"Scroller_itemCenterContainer__U6LZ1",itemThoughtContainer:"Scroller_itemThoughtContainer__SCDfh",loading:"Scroller_loading__LbSxo",loadMore:"Scroller_loadMore__zpMQu"}},50309:e=>{e.exports={root:"ThoughtText_root__GGMiV"}}},e=>{var n=n=>e(e.s=n);e.O(0,[3346,6279,6892,3936,7886,2060,5334,2944,4576,1487,2528,2406,3426,7729,9501,1572,7928,467,609,7564,1534,7973,573,8707,5281,8626,1559,8238,2420,9783,7647,9897,3909,1193,7445,1949,6019,5183,1302,8884,5617,778,9175,424,1757,1290,5728,645,6754,2267,9156,1129,8287,8609,915,7045,5351,7300,6994,7986,5230,6593,636,8792],()=>n(47703)),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-4bc9a4e3a77ab13c.js.map